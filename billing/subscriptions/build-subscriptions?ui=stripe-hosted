<!doctype html>
      <html  id="​" lang="en-US">
        <head>
          <meta charSet="utf-8" />
          
          <title data-rh="true">Build a subscriptions integration | Stripe Documentation</title>
          <meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="Build a subscriptions integration"/><meta data-rh="true" property="og:description" content="Create and manage subscriptions to accept recurring payments."/><meta data-rh="true" property="og:image" content="https://d37ugbyn3rpeym.cloudfront.net/docs/og-image/billing.subscriptions.build-subscriptions.ogimage.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:title" content="Build a subscriptions integration"/><meta data-rh="true" name="twitter:description" content="Create and manage subscriptions to accept recurring payments."/><meta data-rh="true" name="twitter:image" content="https://d37ugbyn3rpeym.cloudfront.net/docs/og-image/billing.subscriptions.build-subscriptions.ogimage.png"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="description" content="Create and manage subscriptions to accept recurring payments."/><meta data-rh="true" name="algolia:title" content="Build a subscriptions integration"/><meta data-rh="true" name="algolia:subtitle" content="Create and manage subscriptions to accept recurring payments."/><meta data-rh="true" name="algolia:depth" content="4"/><meta data-rh="true" name="algolia:article-format" content="markdoc"/><meta data-rh="true" level="1" name="algolia:hierachy" content="Billing"/><meta data-rh="true" level="2" name="algolia:hierachy" content="Subscriptions"/><meta data-rh="true" level="3" name="algolia:hierachy" content="Build your integration"/><meta data-rh="true" level="4" name="algolia:hierachy" content="Build a subscriptions integration"/>
          <link data-rh="true" rel="icon" href="https://b.stripecdn.com/docs-statics-srv/assets/e9b76763ac024da464fae86e9b69dcbf.png" type="text/png"/><link data-rh="true" rel="canonical" href="https://docs.stripe.com/billing/subscriptions/build-subscriptions"/><link data-rh="true" rel="alternate" hrefLang="de-DE" href="https://docs.stripe.com/billing/subscriptions/build-subscriptions?locale=de-DE"/><link data-rh="true" rel="alternate" hrefLang="en-GB" href="https://docs.stripe.com/billing/subscriptions/build-subscriptions?locale=en-GB"/><link data-rh="true" rel="alternate" hrefLang="en-US" href="https://docs.stripe.com/billing/subscriptions/build-subscriptions"/><link data-rh="true" rel="alternate" hrefLang="fr-FR" href="https://docs.stripe.com/billing/subscriptions/build-subscriptions?locale=fr-FR"/><link data-rh="true" rel="alternate" hrefLang="ja-JP" href="https://docs.stripe.com/billing/subscriptions/build-subscriptions?locale=ja-JP"/>
          
          <link rel="stylesheet" href=https://b.stripecdn.com/docs-statics-srv/assets/sail.b64f4b58d6c908d5640d.css />
<link rel="stylesheet" href=https://b.stripecdn.com/docs-statics-srv/assets/stripeshell.521e17a4d4ec87d0920d.css />
<link rel="stylesheet" href=https://b.stripecdn.com/docs-statics-srv/assets/docs.d30ed15d1194d7511ddd.css />
          <style data-classes="sn-1slzz8u/sn-1slzz8u:sn-ymfoco/sn-ymfoco:♲175anvc/sn-1slzz8u sn-ymfoco:sn-1sklbmg/sn-1sklbmg:sn-ebf80w/sn-ebf80w sn-1sklbmg:sn-1d3r5le/sn-1d3r5le:sn-1a8bmlv/sn-1a8bmlv:sn-1hi09z2/sn-1hi09z2:sn-oam45h/sn-oam45h sn-1d3r5le sn-1a8bmlv sn-1hi09z2 sn-1sklbmg:sn-1ldpfz2/sn-1ldpfz2:sn-1aqqzwr/sn-1aqqzwr sn-1ldpfz2:♲1qtchix/sn-1sklbmg sn-1d3r5le sn-1a8bmlv sn-1hi09z2 sn-1ldpfz2 sn-15bbs9a sn-oam45h:sn-1973hmy/sn-1973hmy:sn-59blxz/sn-59blxz:♲1d1lbgb/sn-1d1lbgb:sn-1bu9ebj/sn-1bu9ebj:sn-1gnz4lb/sn-1gnz4lb:sn-130oky6/sn-130oky6 sn-1bu9ebj sn-1gnz4lb:sn-1at0gm8/sn-1at0gm8:♲gsc9hu/sn-1bu9ebj sn-1gnz4lb sn-gsc9hu:sn-1815sgv/sn-1815sgv sn-1d3r5le sn-1a8bmlv:♲dmb6al/sn-1d3r5le sn-1a8bmlv sn-1815sgv:sn-pemo68/sn-pemo68 sn-1sklbmg:sn-e2owhy/sn-e2owhy sn-1d3r5le sn-1a8bmlv:♲vxvqa6/sn-1sklbmg sn-1d3r5le sn-1a8bmlv sn-pemo68 sn-e2owhy:sn-1qebben/sn-1qebben:♲1nfe4c8/sn-1sklbmg sn-pemo68 sn-1qebben:sn-n505ii/sn-n505ii sn-1d3r5le:♲1wi0r50/sn-1d3r5le sn-n505ii:sn-187ps8u/sn-187ps8u:sn-41v2s4/sn-41v2s4:sn-1wtty7i/sn-1wtty7i:sn-1mtz54m/sn-1mtz54m:sn-1f7ww87/sn-1f7ww87:sn-9eofcw/sn-9eofcw:sn-1ojp124/sn-1ojp124 sn-1hi09z2 sn-187ps8u sn-41v2s4 sn-1wtty7i sn-1mtz54m sn-1f7ww87 sn-9eofcw:♲1t231v2/sn-1ldpfz2 sn-1hi09z2 sn-187ps8u sn-41v2s4 sn-1wtty7i sn-1mtz54m sn-1f7ww87 sn-9eofcw sn-1t231v2:sn-yee6io/sn-yee6io sn-1sklbmg:♲1dgtdvc/sn-1sklbmg sn-yee6io:sn-1wxqwr8/sn-1wxqwr8 sn-1d3r5le sn-1a8bmlv sn-1sklbmg:♲1hb2f4z/sn-1d3r5le sn-1a8bmlv sn-1sklbmg sn-1wxqwr8:sn-1rnuivo/sn-1rnuivo sn-1d3r5le sn-1a8bmlv sn-1sklbmg:♲fp460d/sn-1d3r5le sn-1a8bmlv sn-1sklbmg sn-1rnuivo:sn-ic9kkx/sn-ic9kkx:♲1wi7kte/sn-ic9kkx:sn-r1day4/sn-r1day4:♲vdbz61/sn-r1day4:sn-1x2oozu/sn-1x2oozu:♲stemix/sn-1x2oozu:--s1-flex-x/:sn-18ydfix/sn-18ydfix sn-1d3r5le sn-1a8bmlv:♲rl7znt/sn-1d3r5le sn-1a8bmlv sn-18ydfix:sn-1a4q8g7/sn-1a4q8g7 sn-1d3r5le:sn-t31rsr/sn-t31rsr:sn-1j3iz2p/sn-1j3iz2p:sn-14p2m9e/sn-14p2m9e:sn-1itx9zb/sn-1itx9zb:sn-1u2x1fz/sn-1u2x1fz:sn-1ml4wum/sn-1ml4wum:sn-90f29w/sn-90f29w:sn-5r9jbc/sn-5r9jbc:sn-eo3f0r/sn-eo3f0r:sn-1tgmvto/sn-1tgmvto:sn-unidi4/sn-unidi4:sn-lwfrcw/sn-lwfrcw:sn-1pb0pp0/sn-1pb0pp0:sn-1xchwve/sn-1xchwve:sn-lnvig6/sn-lnvig6:sn-1u6l6u/sn-1u6l6u sn-t31rsr sn-1j3iz2p sn-14p2m9e sn-1itx9zb sn-1u2x1fz sn-1ml4wum sn-90f29w sn-5r9jbc sn-eo3f0r sn-1tgmvto sn-unidi4 sn-lwfrcw sn-1pb0pp0 sn-1xchwve sn-lnvig6:♲9eumg2/sn-1sklbmg sn-1d3r5le sn-1ldpfz2 sn-t31rsr sn-1j3iz2p sn-14p2m9e sn-1itx9zb sn-1u2x1fz sn-1ml4wum sn-90f29w sn-5r9jbc sn-eo3f0r sn-1tgmvto sn-unidi4 sn-lwfrcw sn-1pb0pp0 sn-1xchwve sn-lnvig6 sn-9eumg2" data-prefix="j1opnm9c-" data-layer="" data-server="37.0.0">#​ .sn-ymfoco { --j1opnm9c-hue-gray0: #ffffff; --j1opnm9c-hue-gray50: #f6f8fa; --j1opnm9c-hue-gray100: #ebeef1; --j1opnm9c-hue-gray150: #d5dbe1; --j1opnm9c-hue-gray200: #c0c8d2; --j1opnm9c-hue-gray300: #a3acba; --j1opnm9c-hue-gray400: #87909f; --j1opnm9c-hue-gray500: #687385; --j1opnm9c-hue-gray600: #545969; --j1opnm9c-hue-gray700: #414552; --j1opnm9c-hue-gray800: #30313d; --j1opnm9c-hue-gray900: #1a1b25; --j1opnm9c-hue-gray950: #10111a; --j1opnm9c-hue-blue50: #ddfffe; --j1opnm9c-hue-blue100: #cff5f6; --j1opnm9c-hue-blue150: #a2e5ef; --j1opnm9c-hue-blue200: #75d5e8; --j1opnm9c-hue-blue300: #06b9ef; --j1opnm9c-hue-blue400: #0096eb; --j1opnm9c-hue-blue500: #0570de; --j1opnm9c-hue-blue600: #0055bc; --j1opnm9c-hue-blue700: #04438c; --j1opnm9c-hue-blue800: #003262; --j1opnm9c-hue-blue900: #011c3a; --j1opnm9c-hue-green50: #ecfed7; --j1opnm9c-hue-green100: #d7f7c2; --j1opnm9c-hue-green150: #a6eb84; --j1opnm9c-hue-green200: #76df47; --j1opnm9c-hue-green300: #48c404; --j1opnm9c-hue-green400: #3fa40d; --j1opnm9c-hue-green500: #228403; --j1opnm9c-hue-green600: #006908; --j1opnm9c-hue-green700: #0b5019; --j1opnm9c-hue-green800: #043b15; --j1opnm9c-hue-green900: #02220d; --j1opnm9c-hue-orange50: #fef9da; --j1opnm9c-hue-orange100: #fcedb9; --j1opnm9c-hue-orange150: #fcd579; --j1opnm9c-hue-orange200: #fcbd3a; --j1opnm9c-hue-orange300: #ff8f0e; --j1opnm9c-hue-orange400: #ed6704; --j1opnm9c-hue-orange500: #c84801; --j1opnm9c-hue-orange600: #a82c00; --j1opnm9c-hue-orange700: #842106; --j1opnm9c-hue-orange800: #5f1a05; --j1opnm9c-hue-orange900: #331302; --j1opnm9c-hue-red50: #fff5fa; --j1opnm9c-hue-red100: #ffe7f2; --j1opnm9c-hue-red150: #ffccdf; --j1opnm9c-hue-red200: #ffb1cd; --j1opnm9c-hue-red300: #fe87a1; --j1opnm9c-hue-red400: #fc526a; --j1opnm9c-hue-red500: #df1b41; --j1opnm9c-hue-red600: #b3093c; --j1opnm9c-hue-red700: #890d37; --j1opnm9c-hue-red800: #68052b; --j1opnm9c-hue-red900: #3e021a; --j1opnm9c-hue-purple50: #f9f7ff; --j1opnm9c-hue-purple100: #f2ebff; --j1opnm9c-hue-purple150: #dfd3fc; --j1opnm9c-hue-purple200: #d1befe; --j1opnm9c-hue-purple300: #b49cfc; --j1opnm9c-hue-purple400: #8d7ffa; --j1opnm9c-hue-purple500: #625afa; --j1opnm9c-hue-purple600: #513dd9; --j1opnm9c-hue-purple700: #3f32a1; --j1opnm9c-hue-purple800: #302476; --j1opnm9c-hue-purple900: #14134e; --j1opnm9c-color-neutral0: var(--j1opnm9c-hue-gray0); --j1opnm9c-color-neutral50: var(--j1opnm9c-hue-gray50); --j1opnm9c-color-neutral100: var(--j1opnm9c-hue-gray100); --j1opnm9c-color-neutral150: var(--j1opnm9c-hue-gray150); --j1opnm9c-color-neutral200: var(--j1opnm9c-hue-gray200); --j1opnm9c-color-neutral300: var(--j1opnm9c-hue-gray300); --j1opnm9c-color-neutral400: var(--j1opnm9c-hue-gray400); --j1opnm9c-color-neutral500: var(--j1opnm9c-hue-gray500); --j1opnm9c-color-neutral600: var(--j1opnm9c-hue-gray600); --j1opnm9c-color-neutral700: var(--j1opnm9c-hue-gray700); --j1opnm9c-color-neutral800: var(--j1opnm9c-hue-gray800); --j1opnm9c-color-neutral900: var(--j1opnm9c-hue-gray900); --j1opnm9c-color-neutral950: var(--j1opnm9c-hue-gray950); --j1opnm9c-color-brand50: var(--j1opnm9c-hue-purple50); --j1opnm9c-color-brand100: var(--j1opnm9c-hue-purple100); --j1opnm9c-color-brand200: var(--j1opnm9c-hue-purple200); --j1opnm9c-color-brand300: var(--j1opnm9c-hue-purple300); --j1opnm9c-color-brand400: var(--j1opnm9c-hue-purple400); --j1opnm9c-color-brand500: var(--j1opnm9c-hue-purple500); --j1opnm9c-color-brand600: var(--j1opnm9c-hue-purple600); --j1opnm9c-color-brand700: var(--j1opnm9c-hue-purple700); --j1opnm9c-color-brand800: var(--j1opnm9c-hue-purple800); --j1opnm9c-color-brand900: var(--j1opnm9c-hue-purple900); --j1opnm9c-color-info50: var(--j1opnm9c-hue-blue50); --j1opnm9c-color-info100: var(--j1opnm9c-hue-blue100); --j1opnm9c-color-info150: var(--j1opnm9c-hue-blue150); --j1opnm9c-color-info200: var(--j1opnm9c-hue-blue200); --j1opnm9c-color-info300: var(--j1opnm9c-hue-blue300); --j1opnm9c-color-info400: var(--j1opnm9c-hue-blue400); --j1opnm9c-color-info500: var(--j1opnm9c-hue-blue500); --j1opnm9c-color-info600: var(--j1opnm9c-hue-blue600); --j1opnm9c-color-info700: var(--j1opnm9c-hue-blue700); --j1opnm9c-color-info800: var(--j1opnm9c-hue-blue800); --j1opnm9c-color-info900: var(--j1opnm9c-hue-blue900); --j1opnm9c-color-success50: var(--j1opnm9c-hue-green50); --j1opnm9c-color-success100: var(--j1opnm9c-hue-green100); --j1opnm9c-color-success150: var(--j1opnm9c-hue-green150); --j1opnm9c-color-success200: var(--j1opnm9c-hue-green200); --j1opnm9c-color-success300: var(--j1opnm9c-hue-green300); --j1opnm9c-color-success400: var(--j1opnm9c-hue-green400); --j1opnm9c-color-success500: var(--j1opnm9c-hue-green500); --j1opnm9c-color-success600: var(--j1opnm9c-hue-green600); --j1opnm9c-color-success700: var(--j1opnm9c-hue-green700); --j1opnm9c-color-success800: var(--j1opnm9c-hue-green800); --j1opnm9c-color-success900: var(--j1opnm9c-hue-green900); --j1opnm9c-color-attention50: var(--j1opnm9c-hue-orange50); --j1opnm9c-color-attention100: var(--j1opnm9c-hue-orange100); --j1opnm9c-color-attention150: var(--j1opnm9c-hue-orange150); --j1opnm9c-color-attention200: var(--j1opnm9c-hue-orange200); --j1opnm9c-color-attention300: var(--j1opnm9c-hue-orange300); --j1opnm9c-color-attention400: var(--j1opnm9c-hue-orange400); --j1opnm9c-color-attention500: var(--j1opnm9c-hue-orange500); --j1opnm9c-color-attention600: var(--j1opnm9c-hue-orange600); --j1opnm9c-color-attention700: var(--j1opnm9c-hue-orange700); --j1opnm9c-color-attention800: var(--j1opnm9c-hue-orange800); --j1opnm9c-color-attention900: var(--j1opnm9c-hue-orange900); --j1opnm9c-color-critical50: var(--j1opnm9c-hue-red50); --j1opnm9c-color-critical100: var(--j1opnm9c-hue-red100); --j1opnm9c-color-critical150: var(--j1opnm9c-hue-red150); --j1opnm9c-color-critical200: var(--j1opnm9c-hue-red200); --j1opnm9c-color-critical300: var(--j1opnm9c-hue-red300); --j1opnm9c-color-critical400: var(--j1opnm9c-hue-red400); --j1opnm9c-color-critical500: var(--j1opnm9c-hue-red500); --j1opnm9c-color-critical600: var(--j1opnm9c-hue-red600); --j1opnm9c-color-critical700: var(--j1opnm9c-hue-red700); --j1opnm9c-color-critical800: var(--j1opnm9c-hue-red800); --j1opnm9c-color-critical900: var(--j1opnm9c-hue-red900); --j1opnm9c-backgroundColor-surface: var(--j1opnm9c-color-neutral0); --j1opnm9c-backgroundColor-container: var(--j1opnm9c-color-neutral50); --j1opnm9c-borderColor-neutral: var(--j1opnm9c-color-neutral150); --j1opnm9c-borderColor-critical: var(--j1opnm9c-color-critical500); --j1opnm9c-iconColor-primary: var(--j1opnm9c-color-neutral600); --j1opnm9c-iconColor-secondary: var(--j1opnm9c-color-neutral400); --j1opnm9c-iconColor-disabled: var(--j1opnm9c-color-neutral200); --j1opnm9c-iconColor-brand: var(--j1opnm9c-color-brand400); --j1opnm9c-iconColor-info: var(--j1opnm9c-color-info400); --j1opnm9c-iconColor-success: var(--j1opnm9c-color-success400); --j1opnm9c-iconColor-attention: var(--j1opnm9c-color-attention400); --j1opnm9c-iconColor-critical: var(--j1opnm9c-color-critical400); --j1opnm9c-textColor-primary: var(--j1opnm9c-color-neutral700); --j1opnm9c-textColor-secondary: var(--j1opnm9c-color-neutral500); --j1opnm9c-textColor-disabled: var(--j1opnm9c-color-neutral300); --j1opnm9c-textColor-brand: var(--j1opnm9c-color-brand500); --j1opnm9c-textColor-info: var(--j1opnm9c-color-info500); --j1opnm9c-textColor-success: var(--j1opnm9c-color-success500); --j1opnm9c-textColor-attention: var(--j1opnm9c-color-attention500); --j1opnm9c-textColor-critical: var(--j1opnm9c-color-critical500); --j1opnm9c-overflow-hidden: hidden; --j1opnm9c-radius-none: none; --j1opnm9c-radius-xsmall: 4px; --j1opnm9c-radius-small: 4px; --j1opnm9c-radius-medium: 8px; --j1opnm9c-radius-large: 10px; --j1opnm9c-radius-rounded: 999em; --j1opnm9c-shadow-none: none; --j1opnm9c-shadow-top: rgb(0 0 0 / 12%) 0px 1px 1px 0px; --j1opnm9c-shadow-base: rgb(64 68 82 / 8%) 0px 2px 5px 0px, 0 0 0 0 transparent; --j1opnm9c-shadow-hover: rgb(64 68 82 / 8%) 0px 2px 5px 0px, rgb(64 68 82 / 8%) 0px 3px 9px 0px; --j1opnm9c-shadow-focus: 0 0 0 4px rgb(1 150 237 / 36%); --j1opnm9c-size-0: 0px; --j1opnm9c-size-1: var(--j1opnm9c-space-1); --j1opnm9c-size-25: var(--j1opnm9c-space-25); --j1opnm9c-size-50: var(--j1opnm9c-space-50); --j1opnm9c-size-75: var(--j1opnm9c-space-75); --j1opnm9c-size-100: var(--j1opnm9c-space-100); --j1opnm9c-size-150: var(--j1opnm9c-space-150); --j1opnm9c-size-200: var(--j1opnm9c-space-200); --j1opnm9c-size-250: var(--j1opnm9c-space-250); --j1opnm9c-size-300: var(--j1opnm9c-space-300); --j1opnm9c-size-350: var(--j1opnm9c-space-350); --j1opnm9c-size-400: var(--j1opnm9c-space-400); --j1opnm9c-size-500: var(--j1opnm9c-space-500); --j1opnm9c-size-600: var(--j1opnm9c-space-600); --j1opnm9c-size-fill: 100%; --j1opnm9c-size-min: min-content; --j1opnm9c-size-max: max-content; --j1opnm9c-size-fit: fit-content; --j1opnm9c-size-1\/2: 50%; --j1opnm9c-size-1\/3: 33.3333%; --j1opnm9c-size-2\/3: 66.6667%; --j1opnm9c-size-1\/4: 25%; --j1opnm9c-size-2\/4: 50%; --j1opnm9c-size-3\/4: 75%; --j1opnm9c-size-1\/5: 20%; --j1opnm9c-size-2\/5: 40%; --j1opnm9c-size-3\/5: 60%; --j1opnm9c-size-4\/5: 80%; --j1opnm9c-size-1\/6: 16.6667%; --j1opnm9c-size-2\/6: 33.3333%; --j1opnm9c-size-3\/6: 50%; --j1opnm9c-size-4\/6: 66.6667%; --j1opnm9c-size-5\/6: 83.3333%; --j1opnm9c-size-1\/12: 8.3333%; --j1opnm9c-size-2\/12: 16.6667%; --j1opnm9c-size-3\/12: 25%; --j1opnm9c-size-4\/12: 33.3333%; --j1opnm9c-size-5\/12: 41.6667%; --j1opnm9c-size-6\/12: 50%; --j1opnm9c-size-7\/12: 58.3333%; --j1opnm9c-size-8\/12: 66.6667%; --j1opnm9c-size-9\/12: 75%; --j1opnm9c-size-10\/12: 83.3333%; --j1opnm9c-size-11\/12: 91.6667%; --j1opnm9c-space-0: 0px; --j1opnm9c-space-1: 1px; --j1opnm9c-space-25: 2px; --j1opnm9c-space-50: 4px; --j1opnm9c-space-75: 6px; --j1opnm9c-space-100: 8px; --j1opnm9c-space-150: 12px; --j1opnm9c-space-200: 16px; --j1opnm9c-space-250: 20px; --j1opnm9c-space-300: 24px; --j1opnm9c-space-350: 28px; --j1opnm9c-space-400: 32px; --j1opnm9c-space-500: 40px; --j1opnm9c-space-600: 48px; --j1opnm9c-space-xxsmall: var(--j1opnm9c-space-25); --j1opnm9c-space-xsmall: var(--j1opnm9c-space-50); --j1opnm9c-space-small: var(--j1opnm9c-space-100); --j1opnm9c-space-medium: var(--j1opnm9c-space-200); --j1opnm9c-space-large: var(--j1opnm9c-space-300); --j1opnm9c-space-xlarge: var(--j1opnm9c-space-400); --j1opnm9c-space-xxlarge: var(--j1opnm9c-space-600); --j1opnm9c-typeface-ui: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; --j1opnm9c-typeface-monospace: 'Source Code Pro', Menlo, Monaco, monospace; --j1opnm9c-weight-regular: 400; --j1opnm9c-weight-semibold: 600; --j1opnm9c-weight-bold: 700; --j1opnm9c-zIndex-overlay: 299; --j1opnm9c-zIndex-partial: 400; }</style><style data-layer="reset" data-server="37.0.0">#​#​ .rs14:hover:not(:active) {
box-shadow: var(--s1-top-shadow), var(--s1-keyline) 0 0 0 var(--s1-keyline-width), var(--s1-focus-ring), var(--s1-box-shadow);
}
#​#​ .rs13:focus {
box-shadow: var(--s1-top-shadow), var(--s1-keyline) 0 0 0 var(--s1-keyline-width), var(--s1-focus-ring), var(--s1-box-shadow);
}
#​#​ .rs11::before {
content: var(--s1-baseline-alignment-content);user-select: none;align-self: baseline;margin-right: calc(-1 * var(--s1-column-gap));
}
#​#​ .ComplexityCallout-RightComponent p::before {
content: var(--s1-baseline-alignment-content);user-select: none;align-self: baseline;margin-right: calc(-1 * var(--s1-column-gap));
}
#​#​ .rs15:active {
box-shadow: var(--s1-top-shadow), var(--s1-keyline) 0 0 0 var(--s1-keyline-width), var(--s1-focus-ring), var(--s1-box-shadow);
}
#​#​ .rs10 {
box-shadow: var(--s1-top-shadow), var(--s1-keyline) 0 0 0 var(--s1-keyline-width), var(--s1-focus-ring), var(--s1-box-shadow);
}
#​#​ .rs12 {
display: var(--s1-display-block);
}
#​#​ .sn-1sklbmg { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-1d3r5le { --distribute-x: initial; --distribute-y: initial; --align-x: initial; --align-y: initial; }
#​#​ .sn-1d3r5le > * { --align-self-x: initial; --align-self-y: initial; --flex-x: 1 1 auto; --flex-y: 1 1 auto; }
#​#​ .sn-1a8bmlv { --row-gap: normal; --column-gap: normal; gap: var(--row-gap) var(--column-gap); }
#​#​ .sn-1hi09z2 { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1ldpfz2:focus { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1bu9ebj input { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1gnz4lb input { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-187ps8u.sn-1euh7h0.sn-1euh7h0-size-small { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-41v2s4.sn-1euh7h0.sn-1euh7h0-size-medium { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-1wtty7i.sn-1euh7h0.sn-1euh7h0-size-large { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-1mtz54m.sn-1euh7h0.sn-1euh7h0-invalid-true { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1f7ww87.sn-1euh7h0.sn-1euh7h0-isInCompositeField-true { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-9eofcw.sn-1euh7h0.sn-1euh7h0-isInCompositeField-true { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-t31rsr.sn-1w3n5ld.sn-1w3n5ld-size-small { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-1j3iz2p.sn-1w3n5ld.sn-1w3n5ld-size-small { --row-gap: normal; --column-gap: normal; gap: var(--row-gap) var(--column-gap); }
#​#​ .sn-14p2m9e.sn-1w3n5ld.sn-1w3n5ld-size-medium { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-1itx9zb.sn-1w3n5ld.sn-1w3n5ld-size-medium { --row-gap: normal; --column-gap: normal; gap: var(--row-gap) var(--column-gap); }
#​#​ .sn-1u2x1fz.sn-1w3n5ld.sn-1w3n5ld-size-large { --padding-top: 0; --padding-right: 0; --padding-bottom: 0; --padding-left: 0; padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left); }
#​#​ .sn-1ml4wum.sn-1w3n5ld.sn-1w3n5ld-size-large { --row-gap: normal; --column-gap: normal; gap: var(--row-gap) var(--column-gap); }
#​#​ .sn-90f29w.sn-1w3n5ld.sn-1w3n5ld-type-primary { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-5r9jbc.sn-1w3n5ld.sn-1w3n5ld-type-primary:active { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-eo3f0r.sn-1w3n5ld.sn-1w3n5ld-type-primary:hover { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1tgmvto.sn-1w3n5ld.sn-1w3n5ld-type-secondary { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-unidi4.sn-1w3n5ld.sn-1w3n5ld-type-secondary:active { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-lwfrcw.sn-1w3n5ld.sn-1w3n5ld-type-secondary:hover { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1pb0pp0.sn-1w3n5ld.sn-1w3n5ld-type-destructive { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-1xchwve.sn-1w3n5ld.sn-1w3n5ld-type-destructive:active { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
#​#​ .sn-lnvig6.sn-1w3n5ld.sn-1w3n5ld-type-destructive:hover { --focus-ring: 0 0 0 0 transparent; --box-shadow: 0 0 0 0 transparent; --top-shadow: 0 0 0 0 transparent; --keyline: transparent; --keyline-width: 1px; box-shadow: var(--top-shadow), var(--keyline) 0 0 0 var(--keyline-width), var(--focus-ring), var(--box-shadow); }
.__sn-sheet-order { --order: '_yju68,_1bouknu,_zbcmlz,_1aw4oxw,_10qor2e,_scb0tm,_1dtxrvb'; }</style><style data-layer="headless" data-server="37.0.0"></style><style data-layer="theme" data-server="37.0.0"></style><style data-layer="theme.classic" data-server="37.0.0">#​#​#​#​#​ .sn-1slzz8u { font-family: var(--j1opnm9c-typeface-ui); color: var(--j1opnm9c-textColor-primary); fill: var(--j1opnm9c-iconColor-primary); -webkit-font-smoothing: antialiased; }
#​#​#​#​#​ .sn-ebf80w { margin-bottom: 0; margin-left: 0; margin-right: 0; margin-top: 0; --padding-bottom: 0; --padding-left: 0; --padding-right: 0; --padding-top: 0; color: inherit; font-weight: inherit; font-size: inherit; font-family: inherit; font-style: inherit; text-align: inherit; text-decoration: none; background-color: transparent; border: 0; outline: none; cursor: pointer; }
#​#​#​#​#​ .sn-ebf80w:hover { color: inherit; }
#​#​#​#​#​ .sn-1aqqzwr:focus { --focus-ring: var(--j1opnm9c-shadow-focus); outline: none; }
#​#​#​#​#​ .sn-15bbs9a { margin-bottom: 0; margin-left: 0; margin-right: 0; margin-top: 0; --padding-bottom: 0; --padding-left: 0; --padding-right: 0; --padding-top: 0; color: inherit; font-weight: inherit; font-size: inherit; font-family: inherit; font-style: inherit; text-align: inherit; text-decoration: none; background-color: transparent; border: 0; outline: none; cursor: pointer; }
#​#​#​#​#​ .sn-15bbs9a:hover { color: inherit; }
#​#​#​#​#​ .sn-15bbs9a:focus { --focus-ring: var(--j1opnm9c-shadow-focus); outline: none; }
#​#​#​#​#​ .sn-1973hmy { fill: currentColor; }
#​#​#​#​#​ .sn-59blxz { --icon-size: 16px; height: var(--icon-size); --flex-y: initial; --s1-flex-y: 0 1 auto; width: var(--icon-size); --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​ .sn-59blxz.sn-1mj7mtw.sn-1mj7mtw-size-xxsmall { --icon-size: 8px; }
#​#​#​#​#​ .sn-59blxz.sn-1mj7mtw.sn-1mj7mtw-size-xsmall { --icon-size: 12px; }
#​#​#​#​#​ .sn-59blxz.sn-1mj7mtw.sn-1mj7mtw-size-medium { --icon-size: 20px; }
#​#​#​#​#​ .sn-59blxz.sn-1mj7mtw.sn-1mj7mtw-size-large { --icon-size: 32px; }
#​#​#​#​#​ .sn-59blxz.sn-1mj7mtw.sn-1mj7mtw-size-xlarge { --icon-size: 64px; }
#​#​#​#​#​ .sn-1d1lbgb { fill: currentColor; }
#​#​#​#​#​ .sn-1d1lbgb { --icon-size: 16px; height: var(--icon-size); --flex-y: initial; --s1-flex-y: 0 1 auto; width: var(--icon-size); --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​ .sn-1d1lbgb.sn-1mj7mtw.sn-1mj7mtw-size-xxsmall { --icon-size: 8px; }
#​#​#​#​#​ .sn-1d1lbgb.sn-1mj7mtw.sn-1mj7mtw-size-xsmall { --icon-size: 12px; }
#​#​#​#​#​ .sn-1d1lbgb.sn-1mj7mtw.sn-1mj7mtw-size-medium { --icon-size: 20px; }
#​#​#​#​#​ .sn-1d1lbgb.sn-1mj7mtw.sn-1mj7mtw-size-large { --icon-size: 32px; }
#​#​#​#​#​ .sn-1d1lbgb.sn-1mj7mtw.sn-1mj7mtw-size-xlarge { --icon-size: 64px; }
#​#​#​#​#​ .sn-1qebben { font-size: 14px; line-height: 20px; font-weight: var(--j1opnm9c-weight-semibold); }
#​#​#​#​#​ .sn-1qebben.sn-13j3rr.sn-13j3rr-invalid-true { color: var(--j1opnm9c-textColor-critical); }
#​#​#​#​#​ .sn-1qebben.sn-13j3rr.sn-13j3rr-position-top { display: block; margin-bottom: var(--j1opnm9c-space-xsmall); }
#​#​#​#​#​ .sn-1ojp124 { appearance: none; background-color: var(--j1opnm9c-backgroundColor-surface); border: none; border-radius: var(--j1opnm9c-radius-xsmall); --keyline: var(--j1opnm9c-borderColor-neutral); color: var(--j1opnm9c-textColor-primary); font-size: 14px; line-height: 20px; font-weight: var(--j1opnm9c-weight-regular); font-family: var(--j1opnm9c-typeface-ui); display: inline-flex; flex-direction: row; align-items: var(--align-y); justify-content: var(--align-x); transition: box-shadow 240ms; width: var(--j1opnm9c-size-fill); --flex-x: initial; --s1-flex-x: 0 1 auto; box-sizing: border-box; }
#​#​#​#​#​ .sn-1ojp124 > * { align-self: var(--align-self-y); justify-self: var(--align-self-x); }
#​#​#​#​#​ .sn-1ojp124[type=number] { -moz-appearance: textfield; }
#​#​#​#​#​ .sn-1ojp124[type=number]::-webkit-outer-spin-button, #​#​#​#​#​ .sn-1ojp124[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: var(--j1opnm9c-space-0); }
#​#​#​#​#​ .sn-1ojp124::placeholder { color: var(--j1opnm9c-textColor-disabled); }
#​#​#​#​#​ .sn-1ojp124:disabled { background-color: var(--j1opnm9c-color-neutral50); color: var(--j1opnm9c-textColor-disabled); }
#​#​#​#​#​ .sn-1ojp124:focus { outline: none; }
#​#​#​#​#​ .sn-1ojp124.sn-1euh7h0.sn-1euh7h0-size-small { --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); font-size: 12px; line-height: 16px; }
#​#​#​#​#​ .sn-1ojp124.sn-1euh7h0.sn-1euh7h0-size-medium { --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); }
#​#​#​#​#​ .sn-1ojp124.sn-1euh7h0.sn-1euh7h0-size-large { --padding-left: 12px; --padding-right: 12px; --padding-top: var(--j1opnm9c-space-small); --padding-bottom: var(--j1opnm9c-space-small); font-size: 16px; line-height: 24px; }
#​#​#​#​#​ .sn-1ojp124.sn-1euh7h0.sn-1euh7h0-invalid-true { --keyline: var(--j1opnm9c-borderColor-critical); }
#​#​#​#​#​ .sn-1ojp124.sn-1euh7h0.sn-1euh7h0-isInCompositeField-true { --box-shadow: var(--j1opnm9c-shadow-none); --padding-top: var(--j1opnm9c-space-0); --padding-right: var(--j1opnm9c-space-0); --padding-bottom: var(--j1opnm9c-space-0); --padding-left: var(--j1opnm9c-space-0); }
#​#​#​#​#​ .sn-1t231v2:focus { --focus-ring: var(--j1opnm9c-shadow-focus); outline: none; }
#​#​#​#​#​ .sn-1t231v2 { appearance: none; background-color: var(--j1opnm9c-backgroundColor-surface); border: none; border-radius: var(--j1opnm9c-radius-xsmall); --keyline: var(--j1opnm9c-borderColor-neutral); color: var(--j1opnm9c-textColor-primary); font-size: 14px; line-height: 20px; font-weight: var(--j1opnm9c-weight-regular); font-family: var(--j1opnm9c-typeface-ui); display: inline-flex; flex-direction: row; align-items: var(--align-y); justify-content: var(--align-x); transition: box-shadow 240ms; width: var(--j1opnm9c-size-fill); --flex-x: initial; --s1-flex-x: 0 1 auto; box-sizing: border-box; }
#​#​#​#​#​ .sn-1t231v2 > * { align-self: var(--align-self-y); justify-self: var(--align-self-x); }
#​#​#​#​#​ .sn-1t231v2[type=number] { -moz-appearance: textfield; }
#​#​#​#​#​ .sn-1t231v2[type=number]::-webkit-outer-spin-button, #​#​#​#​#​ .sn-1t231v2[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: var(--j1opnm9c-space-0); }
#​#​#​#​#​ .sn-1t231v2::placeholder { color: var(--j1opnm9c-textColor-disabled); }
#​#​#​#​#​ .sn-1t231v2:disabled { background-color: var(--j1opnm9c-color-neutral50); color: var(--j1opnm9c-textColor-disabled); }
#​#​#​#​#​ .sn-1t231v2:focus { outline: none; }
#​#​#​#​#​ .sn-1t231v2.sn-1euh7h0.sn-1euh7h0-size-small { --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); font-size: 12px; line-height: 16px; }
#​#​#​#​#​ .sn-1t231v2.sn-1euh7h0.sn-1euh7h0-size-medium { --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); }
#​#​#​#​#​ .sn-1t231v2.sn-1euh7h0.sn-1euh7h0-size-large { --padding-left: 12px; --padding-right: 12px; --padding-top: var(--j1opnm9c-space-small); --padding-bottom: var(--j1opnm9c-space-small); font-size: 16px; line-height: 24px; }
#​#​#​#​#​ .sn-1t231v2.sn-1euh7h0.sn-1euh7h0-invalid-true { --keyline: var(--j1opnm9c-borderColor-critical); }
#​#​#​#​#​ .sn-1t231v2.sn-1euh7h0.sn-1euh7h0-isInCompositeField-true { --box-shadow: var(--j1opnm9c-shadow-none); --padding-top: var(--j1opnm9c-space-0); --padding-right: var(--j1opnm9c-space-0); --padding-bottom: var(--j1opnm9c-space-0); --padding-left: var(--j1opnm9c-space-0); }
#​#​#​#​#​ .sn-1a4q8g7 { display: flex; flex-direction: row; align-items: var(--distribute-y, var(--align-y)); justify-content: var(--distribute-x, var(--align-x)); --when-flex-x:  ; --when-flex-y: initial; display: inline-flex; --align-x: center; --align-y: center; white-space: nowrap; }
#​#​#​#​#​ .sn-1a4q8g7 > * { flex: var(--flex-x); align-self: var(--align-self-y); justify-self: var(--align-self-x); }
#​#​#​#​#​ .sn-1a4q8g7 > * { --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​ .sn-1a4q8g7 > * { --flex-y: initial; --s1-flex-y: 0 1 auto; }
#​#​#​#​#​ .sn-1u6l6u { --button-background-color: transparent; font-weight: var(--j1opnm9c-weight-semibold); position: relative; z-index: 0; background-color: var(--button-background-color); border-radius: var(--j1opnm9c-space-75); transition: background-color 0.24s, box-shadow 0.24s; height: fit-content; --flex-y: initial; --s1-flex-y: 0 1 auto; width: fit-content; --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​ .sn-1u6l6u.sn-1vwnd89.sn-1vwnd89-disabled-true { cursor: default; }
#​#​#​#​#​ .sn-1u6l6u.sn-1vwnd89.sn-1vwnd89-disabled-true:after { display: block; content: ""; position: absolute; top: -1px; left: -1px; bottom: -1px; right: -1px; border-radius: var(--j1opnm9c-space-75); z-index: 1; background-color: var(--j1opnm9c-color-neutral0); pointer-events: none; opacity: 0.5; }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-size-small { font-size: 12px; line-height: 16px; min-height: 24px; --flex-y: initial; --s1-flex-y: 0 1 auto; --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); --column-gap: var(--j1opnm9c-space-50); --row-gap: var(--j1opnm9c-space-50); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-size-medium { font-size: 14px; line-height: 20px; min-height: 28px; --flex-y: initial; --s1-flex-y: 0 1 auto; --padding-left: var(--j1opnm9c-space-100); --padding-right: var(--j1opnm9c-space-100); --padding-top: var(--j1opnm9c-space-50); --padding-bottom: var(--j1opnm9c-space-50); --column-gap: var(--j1opnm9c-space-75); --row-gap: var(--j1opnm9c-space-75); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-size-large { font-size: 16px; line-height: 24px; min-height: 40px; --flex-y: initial; --s1-flex-y: 0 1 auto; --padding-left: var(--j1opnm9c-space-medium); --padding-right: var(--j1opnm9c-space-medium); --padding-top: var(--j1opnm9c-space-small); --padding-bottom: var(--j1opnm9c-space-small); --column-gap: var(--j1opnm9c-space-100); --row-gap: var(--j1opnm9c-space-100); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-primary { --button-background-color: var(--j1opnm9c-color-brand500); --keyline: var(--j1opnm9c-color-brand500); color: var(--j1opnm9c-color-neutral0); --top-shadow: 0px 1px 1px 0px rgba(20, 19, 78, 0.16); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-primary:active { --button-background-color: var(--j1opnm9c-color-brand600); --top-shadow: 0px -1px 1px 0px rgba(20, 19, 78, 0.16); --keyline: color.brand700; color: var(--j1opnm9c-color-brand100); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-primary:hover { --keyline: var(--j1opnm9c-color-brand700); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-secondary { --button-background-color: var(--j1opnm9c-color-neutral0); --keyline: var(--j1opnm9c-color-neutral150); --top-shadow: 0px 1px 1px 0px rgba(16, 17, 26, 0.16); color: var(--j1opnm9c-textColor-primary); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-secondary > svg { color: var(--j1opnm9c-iconColor-primary); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-secondary:active { --button-background-color: var(--j1opnm9c-color-neutral50); --top-shadow: 0px -1px 1px 0px rgba(16, 17, 26, 0.16); color: var(--j1opnm9c-color-neutral600); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-secondary:hover { --keyline: var(--j1opnm9c-color-neutral300); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-destructive { --button-background-color: var(--j1opnm9c-color-critical500); --keyline: var(--j1opnm9c-color-critical500); color: var(--j1opnm9c-color-neutral0); --top-shadow: 0px 1px 1px 0px rgba(62, 2, 26, 0.16); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-destructive:active { --button-background-color: var(--j1opnm9c-color-critical600); --top-shadow: 0px -1px 1px 0px rgba(62, 2, 26, 0.16); --keyline: var(--j1opnm9c-color-critical700); color: var(--j1opnm9c-color-critical100); }
#​#​#​#​#​ .sn-1u6l6u.sn-1w3n5ld.sn-1w3n5ld-type-destructive:hover { --keyline: var(--j1opnm9c-color-critical700); }
#​#​#​#​#​ .sn-9eumg2 { margin-bottom: 0; margin-left: 0; margin-right: 0; margin-top: 0; --padding-bottom: 0; --padding-left: 0; --padding-right: 0; --padding-top: 0; color: inherit; font-weight: inherit; font-size: inherit; font-family: inherit; font-style: inherit; text-align: inherit; text-decoration: none; background-color: transparent; border: 0; outline: none; cursor: pointer; }
#​#​#​#​#​ .sn-9eumg2:hover { color: inherit; }
#​#​#​#​#​ .sn-9eumg2 { display: flex; flex-direction: row; align-items: var(--distribute-y, var(--align-y)); justify-content: var(--distribute-x, var(--align-x)); --when-flex-x:  ; --when-flex-y: initial; display: inline-flex; --align-x: center; --align-y: center; white-space: nowrap; }
#​#​#​#​#​ .sn-9eumg2 > * { flex: var(--flex-x); align-self: var(--align-self-y); justify-self: var(--align-self-x); }
#​#​#​#​#​ .sn-9eumg2 > * { --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​ .sn-9eumg2 > * { --flex-y: initial; --s1-flex-y: 0 1 auto; }
#​#​#​#​#​ .sn-9eumg2:focus { --focus-ring: var(--j1opnm9c-shadow-focus); outline: none; }
#​#​#​#​#​ .sn-9eumg2 { --button-background-color: transparent; font-weight: var(--j1opnm9c-weight-semibold); position: relative; z-index: 0; background-color: var(--button-background-color); border-radius: var(--j1opnm9c-space-75); transition: background-color 0.24s, box-shadow 0.24s; height: fit-content; --flex-y: initial; --s1-flex-y: 0 1 auto; width: fit-content; --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​ .sn-9eumg2.sn-1vwnd89.sn-1vwnd89-disabled-true { cursor: default; }
#​#​#​#​#​ .sn-9eumg2.sn-1vwnd89.sn-1vwnd89-disabled-true:after { display: block; content: ""; position: absolute; top: -1px; left: -1px; bottom: -1px; right: -1px; border-radius: var(--j1opnm9c-space-75); z-index: 1; background-color: var(--j1opnm9c-color-neutral0); pointer-events: none; opacity: 0.5; }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-size-small { font-size: 12px; line-height: 16px; min-height: 24px; --flex-y: initial; --s1-flex-y: 0 1 auto; --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); --column-gap: var(--j1opnm9c-space-50); --row-gap: var(--j1opnm9c-space-50); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-size-medium { font-size: 14px; line-height: 20px; min-height: 28px; --flex-y: initial; --s1-flex-y: 0 1 auto; --padding-left: var(--j1opnm9c-space-100); --padding-right: var(--j1opnm9c-space-100); --padding-top: var(--j1opnm9c-space-50); --padding-bottom: var(--j1opnm9c-space-50); --column-gap: var(--j1opnm9c-space-75); --row-gap: var(--j1opnm9c-space-75); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-size-large { font-size: 16px; line-height: 24px; min-height: 40px; --flex-y: initial; --s1-flex-y: 0 1 auto; --padding-left: var(--j1opnm9c-space-medium); --padding-right: var(--j1opnm9c-space-medium); --padding-top: var(--j1opnm9c-space-small); --padding-bottom: var(--j1opnm9c-space-small); --column-gap: var(--j1opnm9c-space-100); --row-gap: var(--j1opnm9c-space-100); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-primary { --button-background-color: var(--j1opnm9c-color-brand500); --keyline: var(--j1opnm9c-color-brand500); color: var(--j1opnm9c-color-neutral0); --top-shadow: 0px 1px 1px 0px rgba(20, 19, 78, 0.16); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-primary:active { --button-background-color: var(--j1opnm9c-color-brand600); --top-shadow: 0px -1px 1px 0px rgba(20, 19, 78, 0.16); --keyline: color.brand700; color: var(--j1opnm9c-color-brand100); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-primary:hover { --keyline: var(--j1opnm9c-color-brand700); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-secondary { --button-background-color: var(--j1opnm9c-color-neutral0); --keyline: var(--j1opnm9c-color-neutral150); --top-shadow: 0px 1px 1px 0px rgba(16, 17, 26, 0.16); color: var(--j1opnm9c-textColor-primary); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-secondary > svg { color: var(--j1opnm9c-iconColor-primary); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-secondary:active { --button-background-color: var(--j1opnm9c-color-neutral50); --top-shadow: 0px -1px 1px 0px rgba(16, 17, 26, 0.16); color: var(--j1opnm9c-color-neutral600); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-secondary:hover { --keyline: var(--j1opnm9c-color-neutral300); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-destructive { --button-background-color: var(--j1opnm9c-color-critical500); --keyline: var(--j1opnm9c-color-critical500); color: var(--j1opnm9c-color-neutral0); --top-shadow: 0px 1px 1px 0px rgba(62, 2, 26, 0.16); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-destructive:active { --button-background-color: var(--j1opnm9c-color-critical600); --top-shadow: 0px -1px 1px 0px rgba(62, 2, 26, 0.16); --keyline: var(--j1opnm9c-color-critical700); color: var(--j1opnm9c-color-critical100); }
#​#​#​#​#​ .sn-9eumg2.sn-1w3n5ld.sn-1w3n5ld-type-destructive:hover { --keyline: var(--j1opnm9c-color-critical700); }</style><style data-layer="app" data-server="37.0.0">#​#​#​#​#​#​ .sn-pemo68 { border: 0; clip: rect(0 0 0 0); clip-path: inset(50%); height: 1px; --flex-y: initial; --s1-flex-y: 0 1 auto; margin: 0 -1px -1px 0; overflow: hidden; --padding-top: var(--j1opnm9c-space-0); --padding-right: var(--j1opnm9c-space-0); --padding-bottom: var(--j1opnm9c-space-0); --padding-left: var(--j1opnm9c-space-0); position: absolute; width: 1px; --flex-x: initial; --s1-flex-x: 0 1 auto; white-space: nowrap; }</style><style data-layer="global" data-server="37.0.0">#​#​#​#​#​#​#​ .⚙ > option > *, #​#​#​#​#​#​#​ .⚙ > option::before, #​#​#​#​#​#​#​ .⚙ > option::after {
--s1-padding-top-ref: 0px;--s1-padding-right-ref: 0px;--s1-padding-bottom-ref: 0px;--s1-padding-left-ref: 0px;
}
#​#​#​#​#​#​#​ .⚙ > option {
padding: 0px;--s1-padding-top: 0px;--s1-padding-right: 0px;--s1-padding-bottom: 0px;--s1-padding-left: 0px;
}
#​#​#​#​#​#​#​ legend.⚙ > *, #​#​#​#​#​#​#​ legend.⚙::before, #​#​#​#​#​#​#​ legend.⚙::after {
--s1-padding-top-ref: 0px;--s1-padding-right-ref: 0px;--s1-padding-bottom-ref: 0px;--s1-padding-left-ref: 0px;
}
#​#​#​#​#​#​#​ legend.⚙ {
padding: 0px;--s1-padding-top: 0px;--s1-padding-right: 0px;--s1-padding-bottom: 0px;--s1-padding-left: 0px;
}
#​#​#​#​#​#​#​ fieldset.⚙ > *, #​#​#​#​#​#​#​ fieldset.⚙::before, #​#​#​#​#​#​#​ fieldset.⚙::after {
--s1-padding-top-ref: 0px;--s1-padding-right-ref: 0px;--s1-padding-bottom-ref: 0px;--s1-padding-left-ref: 0px;
}
#​#​#​#​#​#​#​ fieldset.⚙ {
padding: 0px;--s1-padding-top: 0px;--s1-padding-right: 0px;--s1-padding-bottom: 0px;--s1-padding-left: 0px;
}
#​#​#​#​#​#​#​ fieldset.⚙ {
min-width: 0px;
}
#​#​#​#​#​#​#​ fieldset.⚙ {
border: 0;margin: 0px;
}
#​#​#​#​#​#​#​ span.⚙ {
display: var(--s1-display-inline);--s1-align-self-display: flex-start;--s1-flex-x: 0 1 auto;--s1-flex-y: 0 1 auto;
}
#​#​#​#​#​#​#​ .⚙, #​#​#​#​#​#​#​ .⚙::before, #​#​#​#​#​#​#​ .⚙::after {
box-sizing: border-box;
}
@supports (-webkit-hyphens:none) {
#​#​#​#​#​#​#​ select.⚙, #​#​#​#​#​#​#​ select.sail-next-select-fix {
font-family: 'Helvetica Neue', sans-serif !important;
}
}
#​#​#​#​#​#​#​:root, :host #​#​#​#​#​#​#​, #​#​#​#​#​#​#​ .sn-token-provider {
--vsesr7: 0ms;--wqtuex: 50ms;--s-1982ph3: 100ms;--s-6jad4q: 150ms;--s-52tfqp: 300ms;--s-5b7tpa: cubic-bezier(0, .09, .4, 1);--s-1mljngx: #ffffff;--s-1q5hicg: #f5f6f8;--s-1ey9fwj: #ebeef1;--s-1o2np2t: #d8dee4;--s-737gv9: #b6c0cd;--s-1e1ml9y: #99a5b8;--a89uwn: #818da0;--s-8fnp1p: #6c7688;--wzo298: #596171;--s-12tuc0b: #474e5a;--s-75w7wt: #353a44;--s0sep: #21252c;--s-11jovqg: #ffffff;--ci1dgr: #e2fbfe;--r90027: #cbf5fd;--s-1m6fo2: #a7e7fc;--s-9x60ag: #6dc9fc;--s-1wruhgp: #3babfd;--s-13v83o0: #088ef9;--s-1to41zi: #0072e9;--yxahr4: #045ad0;--x0lqxc: #0b46ad;--s-1uptbp9: #0d3485;--s-13bq0ie: #0a2156;--s-10jl95j: #ffffff;--s-1yr9l19: #eafcdd;--bhj88k: #d1fab3;--w5l7f0: #a8f170;--s-4sbfxo: #7cd548;--p72ilt: #58ba27;--g0lq1q: #3da00b;--oaeadu: #2b8700;--zwe7y8: #217005;--s-132w510: #1c5a0d;--jka70k: #184310;--s-1b0410v: #112a0d;--s-99ec8l: #ffffff;--u4jjkb: #fdf8c9;--n2mpk8: #fceeb5;--hnbgpe: #fbd992;--s-1crwnfz: #fcaf4f;--iyvse1: #f7870f;--s-1q0d9tb: #e46602;--ujxcy5: #cc4b00;--s-1h34jtw: #b13600;--s-194qeup: #922700;--s-1g4xc4j: #701b01;--s-13ct4b3: #4a0f02;--s-1t7mps: #ffffff;--s-1gk3ehx: #fef4f6;--up777m: #fde9ee;--s-1q5oanh: #fbd3dc;--s-1dgr74e: #faa9b8;--s-1iasqaw: #fa7e91;--s-5mm8k9: #fa4a67;--s-14cz887: #e61947;--s-81nx1f: #c0123c;--s-1ozjfdr: #9b0c36;--s-174anhu: #76072f;--s-1y1c5hi: #4e0322;--puo2mc: #ffffff;--ny0rv5: #f7f5fd;--s-16j4vwc: #efecfc;--t9j43l: #e0d9fb;--s-1xzl7p9: #c3b6fb;--s-16v520k: #a497fc;--tvai7j: #857afe;--s-10xndze: #675dff;--s-76rpk3: #533afd;--dvka16: #4e11e2;--ve805z: #44139f;--s-88zd47: #2f0e63;--s-1lt61w0: var(--s-1mljngx);--s-18opahw: var(--s-1q5hicg);--agrfxf: var(--s-1ey9fwj);--s-1ft0b00: var(--s-1o2np2t);--s-1jfnc6w: var(--s-737gv9);--s-1nkzm0u: var(--s-1e1ml9y);--s-1i0ro7s: var(--a89uwn);--qz8ued: var(--s-8fnp1p);--hzmptb: var(--wzo298);--s-2hrprp: var(--s-12tuc0b);--f1zbxx: var(--s-75w7wt);--ats9nf: var(--s0sep);--s-1bmwmn2: var(--puo2mc);--s-1ypa2vh: var(--ny0rv5);--znhr2j: var(--s-16j4vwc);--s-18nn7g2: var(--t9j43l);--s-3ekeqo: var(--s-1xzl7p9);--s-19n87kv: var(--s-16v520k);--s-1mdin37: var(--tvai7j);--s-13ne4m2: var(--s-10xndze);--s-1ktj483: var(--s-76rpk3);--s-18tskvz: var(--dvka16);--s-1tmnwho: var(--ve805z);--x4dx3j: var(--s-88zd47);--s-16u281x: var(--s-99ec8l);--s-1rqht5u: var(--u4jjkb);--nlgalk: var(--n2mpk8);--s-9g1774: var(--hnbgpe);--iz31kc: var(--s-1crwnfz);--s-1i0aat1: var(--iyvse1);--s-1r0yti4: var(--s-1q0d9tb);--s-1qhffkt: var(--ujxcy5);--mf1o3l: var(--s-1h34jtw);--s-1e9tus1: var(--s-194qeup);--queyv2: var(--s-1g4xc4j);--s-1eib8dp: var(--s-13ct4b3);--lwam4q: var(--s-1t7mps);--s-1o4vxc1: var(--s-1gk3ehx);--uqow78: var(--up777m);--s-1coh8oo: var(--s-1q5oanh);--s-469j0s: var(--s-1dgr74e);--s-5zs1ad: var(--s-1iasqaw);--y7s7k0: var(--s-5mm8k9);--s-1msbhpb: var(--s-14cz887);--s-2cu6zi: var(--s-81nx1f);--s-1lep9r4: var(--s-1ozjfdr);--a8unbt: var(--s-174anhu);--s-1jcdiz2: var(--s-1y1c5hi);--s-22v7mw: var(--s-11jovqg);--s-1vll12g: var(--ci1dgr);--ljcny2: var(--r90027);--s-3euapk: var(--s-1m6fo2);--zm2mc2: var(--s-9x60ag);--s-18q8att: var(--s-1wruhgp);--s-1y9f7st: var(--s-13v83o0);--s-106q4ol: var(--s-1to41zi);--z65pau: var(--yxahr4);--i13pct: var(--x0lqxc);--s-1jfasmw: var(--s-1uptbp9);--s-19kfw4: var(--s-13bq0ie);--s-1sdtal1: var(--s-10jl95j);--s-1jyx6vs: var(--s-1yr9l19);--s-3ohr79: var(--bhj88k);--xojt6u: var(--w5l7f0);--zdybv1: var(--s-4sbfxo);--s-1f7dgti: var(--p72ilt);--qpblfh: var(--g0lq1q);--w0c2yu: var(--oaeadu);--s-1bl904v: var(--zwe7y8);--s-1722y2g: var(--s-132w510);--s-1vb21vl: var(--jka70k);--zem3d1: var(--s-1b0410v);--s-49u6ha: var(--s-1t7mps);--s-121c6bb: var(--s-1gk3ehx);--s-2oned3: var(--up777m);--s-1gj6ibc: var(--s-1q5oanh);--x4ciib: var(--s-1dgr74e);--s-1lzzve7: var(--s-1iasqaw);--s-12rwmps: var(--s-5mm8k9);--s-1ddss1l: var(--s-14cz887);--sk14dx: var(--s-81nx1f);--s-1pitqcr: var(--s-1ozjfdr);--s-1dr5ugk: var(--s-174anhu);--s-1brb3z2: var(--s-1y1c5hi);--s-19hhuzm: var(--s-10jl95j);--p9tckk: var(--s-1yr9l19);--ho9ssh: var(--bhj88k);--s-1dkbmqb: var(--w5l7f0);--s-1pa98ur: var(--s-4sbfxo);--s-1ld08yn: var(--p72ilt);--s-1jqzn1b: var(--g0lq1q);--s-4049pq: var(--oaeadu);--s-1yypgw5: var(--zwe7y8);--bh9h1g: var(--s-132w510);--nwztc6: var(--jka70k);--s-786s2k: var(--s-1b0410v);--s-1c9tlu6: #9966FF;--s-1k0fz1p: #0055BC;--s-1w7yz9w: #00A1C2;--dliog3: #ED6804;--voqrjl: #B3063D;--jw7pn6: var(--s-18opahw);--s-8xx9mc: var(--s-1lt61w0);--z284p7: rgba(182, 192, 205, 0.7);--s-1k9kdee: var(--s-13ne4m2);--s-18c9gmp: var(--s-13ne4m2);--s-1qtnt7g: var(--s-1ktj483);--cv8cw0: var(--s-13ne4m2);--cygpcj: var(--s-13ne4m2);--s-1a86f09: var(--s-8xx9mc);--s-16sajzl: var(--s-8xx9mc);--s-43lvt7: var(--s-18opahw);--s-22yv9j: var(--s-8xx9mc);--fpcras: var(--s-8xx9mc);--l1x3ad: var(--s-1msbhpb);--s-1lpcjiv: var(--s-1msbhpb);--vx8kig: var(--s-2cu6zi);--t64yag: var(--s-1msbhpb);--s-18r3dqz: var(--s-1msbhpb);--r7rehe: var(--s-1lt61w0);--s-1jlrcc7: var(--s-106q4ol);--s-1w3b1qd: var(--s-106q4ol);--s-1xisg59: var(--z65pau);--s-108vj5t: var(--s-106q4ol);--u8r7f5: var(--s-1nkzm0u);--s-1y6lycs: var(--s-1lt61w0);--s-15c7ebf: var(--agrfxf);--s-1g804ng: var(--s-1lt61w0);--s-1ksykrr: var(--agrfxf);--s-13i1jik: var(--s-1lt61w0);--s-86f532: var(--agrfxf);--j1vip6: var(--s-18opahw);--s-1jpel34: var(--qz8ued);--s-1kg5x24: var(--ljcny2);--s-1jgrk24: var(--s-1vll12g);--fjc9ad: var(--s-106q4ol);--s-1j12dez: var(--s-3ohr79);--s-1ru7epc: var(--s-1jyx6vs);--s-6nowuj: var(--w0c2yu);--s-1blre6q: var(--nlgalk);--s-1uj2703: var(--s-1rqht5u);--zheiwk: var(--s-1qhffkt);--sqqb9n: var(--uqow78);--s-1o1oo21: var(--s-1o4vxc1);--s-1dcvg3n: var(--s-1msbhpb);--f4kkk5: var(--s-1ft0b00);--n6ta3v: var(--s-13ne4m2);--elt8dy: var(--s-18tskvz);--s-1l0cjti: var(--s-18tskvz);--ja0yya: var(--s-13ne4m2);--inirux: var(--s-13ne4m2);--s-7bxd58: var(--f4kkk5);--s-1sj7mqq: var(--s-1nkzm0u);--rlq803: var(--f4kkk5);--s-17ywbgi: var(--f4kkk5);--r1b5f3: var(--f4kkk5);--s-15074ip: var(--s-1msbhpb);--fs94fp: var(--s-1lep9r4);--bm8rpi: var(--s-1lep9r4);--s-21pyuk: var(--s-1msbhpb);--v04zm6: var(--s-1msbhpb);--s-7yhzfm: var(--s-1ft0b00);--tmqusv: var(--s-1msbhpb);--s-15lckcn: var(--s-2cu6zi);--ho7qxm: var(--s-1msbhpb);--zufkrc: var(--s-1msbhpb);--x1pld: var(--s-1msbhpb);--s-1slq11h: var(--s-106q4ol);--s-1yjlmzq: var(--z65pau);--pn1rkb: var(--z65pau);--s-11cdlbd: var(--s-106q4ol);--s-13ujujc: var(--s-106q4ol);--s-1jgp15v: var(--s-1nkzm0u);--s-1230qrg: var(--s-1ft0b00);--s-18a0i1t: var(--s-1ft0b00);--xym8b4: var(--s-1ft0b00);--s-1gwyv64: var(--s-1ft0b00);--kxux7f: var(--s-1ft0b00);--s-1anv19m: var(--qz8ued);--s-151j2gt: var(--s-3euapk);--vnmsh5: var(--s-3euapk);--s-16ecqt9: var(--s-106q4ol);--s-1v7w021: var(--xojt6u);--s-1hap257: var(--xojt6u);--wm1it4: var(--w0c2yu);--y0hclh: var(--s-9g1774);--s-1iulzn1: var(--s-9g1774);--s-1q7qthy: var(--s-1qhffkt);--qc7pai: var(--s-1coh8oo);--s-1fu53zl: var(--s-1coh8oo);--fejzm1: var(--s-1msbhpb);--imky77: var(--f1zbxx);--s-1gijnyh: var(--s-1ktj483);--hwqnko: var(--s-18tskvz);--s-1ad5m5j: var(--s-1tmnwho);--s-1pfz6x9: var(--s-1ktj483);--vygfje: var(--s-1i0ro7s);--mjdxzb: var(--f1zbxx);--s-1sunbr3: var(--ats9nf);--s-13y9h7m: var(--ats9nf);--s-1l3udgh: var(--f1zbxx);--ph1wbh: var(--hzmptb);--s-144tzd5: var(--s-2cu6zi);--w3es56: var(--s-1lep9r4);--trvmww: var(--a8unbt);--zgp12: var(--s-2cu6zi);--s-1qcflh0: var(--s-1i0ro7s);--hw2pv4: var(--s-1lt61w0);--s-1kpf4mq: var(--s-1lt61w0);--s-5w371o: var(--s-18nn7g2);--s-19ts3om: var(--s-1lt61w0);--s-1dbakge: var(--s-1lt61w0);--s-16bsmau: var(--f1zbxx);--s-1u8xpcw: var(--f1zbxx);--s-17tgeby: var(--s-2hrprp);--noyak3: var(--f1zbxx);--s-1ucq813: var(--f1zbxx);--ujexro: var(--s-1lt61w0);--s1m9us: var(--s-1lt61w0);--s-182wy52: var(--s-1coh8oo);--s-9wt2bo: var(--s-1lt61w0);--s-1qi578m: var(--s-1lt61w0);--zacdvo: var(--f1zbxx);--j9wrza: var(--s-1i0ro7s);--s-14ytcy6: var(--f1zbxx);--s-13q761h: var(--f1zbxx);--s-1wkanzh: var(--f1zbxx);--y95ral: var(--s-1i0ro7s);--s-168pdzq: var(--z65pau);--s-15fg9lm: var(--z65pau);--s-1g8u2lu: var(--i13pct);--s-1szk4ya: var(--s-1bl904v);--blr8yd: var(--s-1bl904v);--wgb199: var(--s-1722y2g);--s-1xsn5ws: var(--mf1o3l);--h9c1om: var(--mf1o3l);--s-13sfbve: var(--s-1e9tus1);--s-8vc1ol: var(--s-2cu6zi);--s-1l6ays9: var(--s-2cu6zi);--s-1irtsu4: var(--s-1lep9r4);--oexi6o: var(--hzmptb);--s-1mhpu4j: var(--hzmptb);--s-18dm7q4: var(--s-1lt61w0);--s-17hrdcw: var(--z65pau);--s-8h5e91: var(--z65pau);--ackspn: var(--s-1lt61w0);--s-1xwwrg7: var(--s-1bl904v);--cnlrm7: var(--s-1bl904v);--x1dlyg: var(--s-1lt61w0);--tfddk4: var(--mf1o3l);--s-1vjsxei: var(--mf1o3l);--s-19nxpxs: var(--s-1lt61w0);--arsbm3: var(--s-2cu6zi);--s-1fknf4r: var(--s-2cu6zi);--ngwhj9: var(--s-1lt61w0);--fkrzzi: var(--hzmptb);--s-15m1o7: var(--ats9nf);--s-1gsrn4k: var(--s-2hrprp);--uusauu: var(--s-13ne4m2);--s-1ora6zu: var(--s-1ktj483);--s-1que41z: var(--s-18tskvz);--s-2p5lsc: var(--s-13ne4m2);--s-1w5oqs2: var(--s-1nkzm0u);--qoschx: var(--s-2hrprp);--w0w7d2: var(--f1zbxx);--s-19mker2: var(--ats9nf);--snv4h0: var(--s-2hrprp);--s-1c0jlpl: var(--qz8ued);--s-1so47no: var(--s-1msbhpb);--v80hax: var(--s-2cu6zi);--s-2s00je: var(--s-1lep9r4);--s-1qtifrt: var(--s-1msbhpb);--s-1gqhme1: var(--s-1nkzm0u);--crum9i: var(--s-1lt61w0);--su36nc: var(--s-1lt61w0);--s-15166zx: var(--s-18nn7g2);--s-100zh1s: var(--s-1lt61w0);--tfkw8i: var(--s-1lt61w0);--o1vbkc: var(--s-1gsrn4k);--cb4f03: var(--s-1gsrn4k);--s-14qjs0z: var(--hzmptb);--s-5dd97j: var(--s-1gsrn4k);--s-1c81pv4: var(--s-1gsrn4k);--s-92nnz: var(--s-1lt61w0);--rcr92y: var(--s-1lt61w0);--s-1oivf8c: var(--s-1coh8oo);--hu66gz: var(--s-1lt61w0);--b08xi: var(--s-1lt61w0);--pkcjuc: var(--s-2hrprp);--o9ue7o: var(--s-2hrprp);--nkq660: var(--s-2hrprp);--jl8kmd: var(--s-2hrprp);--ljxvcu: var(--s-1nkzm0u);--s-150x9a0: var(--s-1lt61w0);--s-1ckgtno: var(--s-106q4ol);--n9sb7k: var(--s-106q4ol);--s-1gve41q: var(--z65pau);--s-172kq9q: var(--w0c2yu);--s-14e93on: var(--w0c2yu);--s-1wpcpvd: var(--s-1bl904v);--z8298k: var(--s-1qhffkt);--s-11f4lqo: var(--s-1qhffkt);--s-10jfx8h: var(--mf1o3l);--s-14zlcek: var(--s-1msbhpb);--s-1goc069: var(--s-1msbhpb);--s-1qsi7g0: var(--s-2cu6zi);--a2dcvq: var(--qz8ued);--x58q2y: var(--qz8ued);--s-1wsur91: var(--s-1lt61w0);--y9f4s8: var(--s-106q4ol);--s-1pv50w4: var(--s-106q4ol);--ui4gnz: var(--s-1lt61w0);--fz2ost: var(--w0c2yu);--hka14c: var(--w0c2yu);--xlhs1a: var(--s-1lt61w0);--g3849b: var(--s-1qhffkt);--s-19kjrpm: var(--s-1qhffkt);--s-1db3ld0: var(--s-1lt61w0);--s-1yrxr3n: var(--s-1msbhpb);--s-1rkv6lc: var(--s-1msbhpb);--s-10uvd0q: var(--s-1lt61w0);--juy1v9: var(--qz8ued);--s-1ep0v5j: var(--f1zbxx);--s-1qhqk7m: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';--n2ncid: 2048;--fmai2m: 1980;--z9avcc: 1443;--iokn55: 1078;--u5d31f: -432;--umu2si: 0;--s-2ynzcb: 300;--nxhsb7: 400;--s-411eab: 600;--s-1f06n6c: 700;--s-1he9ldw: 'Source Code Pro', Menlo, Monaco, monospace;--s-18vt0ri: 2048;--s-3ztaix: 1556;--smx8gn: 1493;--s-13w4gki: 1120;--s-6vo7w9: -492;--s-1twn9ul: 410;--ke40ll: var(--s-1qhqk7m);--s-1m9525k: var(--n2ncid);--bcr4fn: var(--fmai2m);--sknvte: var(--z9avcc);--s-1exufmu: var(--iokn55);--s-1mgu6w8: var(--u5d31f);--wg4ptx: var(--umu2si);--c8bn2i: var(--nxhsb7);--s-1a6svlt: var(--j8qv7v);--s-3ra12c: var(--m6j7lx);--s-1cat07n: var(--w72d53);--s-14exrkl: var(--s-19hbv60);--s-1gmf6s0: var(--qqwxby);--szhf32: var(--ymzni7);--s-1lmlodb: var(--s-16udtb2);--s-1bke8dt: var(--s-1y346cc);--s-12n853m: var(--s-14q0985);--j8qv7v: var(--ke40ll);--m6j7lx: var(--s-1m9525k);--w72d53: var(--bcr4fn);--s-19hbv60: var(--sknvte);--qqwxby: var(--s-1exufmu);--ymzni7: var(--s-1mgu6w8);--s-16udtb2: var(--wg4ptx);--s-1y346cc: 56px;--s-14q0985: 64px;--pjsxhy: var(--s-1f06n6c);--s-8rl91f: var(--nxhsb7);--s-16zag9p: var(--s-1h0z1dd);--s-1y53jmm: var(--odefgs);--jbt1x5: var(--s-1fs6gsy);--s-1qb3oo7: var(--s-1kmg2qo);--s-1rkkv4p: var(--s-1e4ip6h);--sh4ljg: var(--s-1i03v8z);--l7n95s: var(--s-1o3j06m);--mansgi: var(--s-13bxzq2);--s-1u1uhb0: var(--z4f5ey);--s-1h0z1dd: var(--ke40ll);--odefgs: var(--s-1m9525k);--s-1fs6gsy: var(--bcr4fn);--s-1kmg2qo: var(--sknvte);--s-1e4ip6h: var(--s-1exufmu);--s-1i03v8z: var(--s-1mgu6w8);--s-1o3j06m: var(--wg4ptx);--s-13bxzq2: 48px;--z4f5ey: 56px;--s-1w8b7hu: var(--s-1f06n6c);--s-1plbugj: var(--nxhsb7);--mtcoz7: var(--s-4em3m9);--s-1bqor50: var(--s-1rf29l8);--s-1tab9m7: var(--s-4mqlhm);--dd60pd: var(--ybdfbj);--s-1lk5n5k: var(--yept19);--havzfm: var(--s-8emdix);--fb2zhu: var(--s-19w1kkd);--c5fd2t: var(--s-12xsopd);--asfw5b: var(--qby4j2);--s-4em3m9: var(--ke40ll);--s-1rf29l8: var(--s-1m9525k);--s-4mqlhm: var(--bcr4fn);--ybdfbj: var(--sknvte);--yept19: var(--s-1exufmu);--s-8emdix: var(--s-1mgu6w8);--s-19w1kkd: var(--wg4ptx);--s-12xsopd: 40px;--qby4j2: 48px;--q6hsyg: var(--s-1f06n6c);--s-1jyrjwp: var(--nxhsb7);--s-1o07klv: var(--s-1891xzp);--s-107upfu: var(--s-1q38l8w);--s-2src1n: var(--l8mruw);--fwlrn3: var(--s-1eoooa6);--s-1ncpkch: var(--s-5t44cm);--s-10tv3ct: var(--uk5i7u);--s-1vhghta: var(--ya85ei);--dwsih8: var(--s-1hh4eo9);--s-1t3qnar: var(--uepx14);--s-1891xzp: var(--ke40ll);--s-1q38l8w: var(--s-1m9525k);--l8mruw: var(--bcr4fn);--s-1eoooa6: var(--sknvte);--s-5t44cm: var(--s-1exufmu);--uk5i7u: var(--s-1mgu6w8);--ya85ei: var(--wg4ptx);--s-1hh4eo9: 32px;--uepx14: 40px;--m4sml6: var(--s-1f06n6c);--s-5a1gh: var(--s-1qhqk7m);--vsn2df: var(--n2ncid);--s-1jfrvi2: var(--fmai2m);--s-1wvz42j: var(--z9avcc);--fct8u2: var(--iokn55);--mg112i: var(--u5d31f);--s-7bzmli: var(--umu2si);--dr4qs6: var(--nxhsb7);--s-16e6x7x: var(--s-1h6fd4e);--ild2eu: var(--s-18b20pg);--s-3q99qz: var(--s-27v0f1);--f38qmg: var(--s-10rinxy);--ul7529: var(--sc5f1f);--d4bd01: var(--s-1mseqr8);--s-1y3y7uo: var(--s-13fnyse);--kk9ayh: var(--s-8m1c3w);--s-1c0dq62: var(--s-1u0ofna);--s-1cv2j5b: var(--yl4kpz);--s-1h6fd4e: var(--s-5a1gh);--s-18b20pg: var(--vsn2df);--s-27v0f1: var(--s-1jfrvi2);--s-10rinxy: var(--s-1wvz42j);--sc5f1f: var(--fct8u2);--s-1mseqr8: var(--mg112i);--s-13fnyse: var(--s-7bzmli);--s-8m1c3w: 28px;--s-1u0ofna: 36px;--s-167hjip: var(--s-1f06n6c);--yl4kpz: none;--s-14yx3nv: var(--nxhsb7);--s-1udxcy2: var(--s-10l7g1o);--s-1ma8561: var(--s-10znalh);--eu8biu: var(--s-2kdbqb);--s-6urt2: var(--s-1hkc7ox);--ajniz9: var(--s-1ykwxe0);--lulp4v: var(--h9ea16);--s-1xfi23q: var(--s-1kfc3yk);--rp73qs: var(--qo2r8u);--iuichs: var(--s-1clvqh5);--s-1bdgkp2: var(--s-445cec);--s-10l7g1o: var(--s-5a1gh);--s-10znalh: var(--vsn2df);--s-2kdbqb: var(--s-1jfrvi2);--s-1hkc7ox: var(--s-1wvz42j);--s-1ykwxe0: var(--fct8u2);--h9ea16: var(--mg112i);--s-1kfc3yk: var(--s-7bzmli);--qo2r8u: 24px;--s-1clvqh5: 32px;--t7f6ct: var(--s-1f06n6c);--s-445cec: none;--s-6zcy57: var(--nxhsb7);--s-1sfw0j8: var(--s-1cl7pww);--nckx0j: var(--s-1xt8t4l);--f0c6ri: var(--s-3ct44m);--tziplr: var(--s-1fxz13r);--fyfky4: var(--vu62q8);--s-8n6yiz: var(--s-1hdqvhk);--s-17tzrnl: var(--s-13jwtxy);--s-1y1t0ki: var(--lvtze0);--cobh6t: var(--s-18v87mp);--b7h9ft: var(--uniudj);--s-1cl7pww: var(--s-5a1gh);--s-1xt8t4l: var(--vsn2df);--s-3ct44m: var(--s-1jfrvi2);--s-1fxz13r: var(--s-1wvz42j);--vu62q8: var(--fct8u2);--s-1hdqvhk: var(--mg112i);--s-13jwtxy: var(--s-7bzmli);--lvtze0: 20px;--s-18v87mp: 28px;--s-1jejdum: var(--s-1f06n6c);--uniudj: none;--s-8dwle8: var(--nxhsb7);--gfjut0: var(--s758y9);--s-15v253o: var(--s-1gxzs1x);--l7k5cq: var(--s-1yn3ci4);--nbeoqu: var(--gxqczu);--z878bw: var(--gupljz);--vgymwn: var(--s-1u4jhr0);--s-1oa8t9w: var(--s-147dp2h);--s-1wfyihs: var(--s-1tu6ylt);--s-1v221zs: var(--wourys);--s-1wy2nkp: var(--s-1a9hx42);--s758y9: var(--s-5a1gh);--s-1gxzs1x: var(--vsn2df);--s-1yn3ci4: var(--s-1jfrvi2);--gxqczu: var(--s-1wvz42j);--gupljz: var(--fct8u2);--s-1u4jhr0: var(--mg112i);--s-147dp2h: var(--s-7bzmli);--s-1tu6ylt: 16px;--wourys: 24px;--s-9yrlmu: var(--s-1f06n6c);--s-1a9hx42: none;--s-5rzvkl: var(--nxhsb7);--s-1vx8xhf: var(--s-64rdl0);--s-9etg3g: var(--n12j4);--s-181ecaj: var(--ikmf5t);--s-14o00yx: var(--wsnj4a);--we1bos: var(--s-1gwsy2f);--qyiit9: var(--cbw81s);--s-1441qcq: var(--s-4k17yo);--s-8tys4k: var(--s-1niukie);--nygaxl: var(--s-16vjnth);--s-1ibky2y: var(--s-1y7ptal);--s-64rdl0: var(--s-5a1gh);--n12j4: var(--vsn2df);--ikmf5t: var(--s-1jfrvi2);--wsnj4a: var(--s-1wvz42j);--s-1gwsy2f: var(--fct8u2);--cbw81s: var(--mg112i);--s-4k17yo: var(--s-7bzmli);--s-1niukie: 12px;--s-16vjnth: 20px;--s-1i49vty: var(--s-1f06n6c);--s-1y7ptal: none;--s-1mpcpof: var(--s-1qhqk7m);--s-7obf6r: var(--n2ncid);--s-1ozdyx6: var(--fmai2m);--s-20jv7o: var(--z9avcc);--s-1j5ijvp: var(--iokn55);--s-2hzf98: var(--u5d31f);--s-1305b3v: var(--umu2si);--uadhos: var(--s-411eab);--s-754kur: var(--g5oooh);--r83gnq: var(--mi8vvn);--s-1uk5x2t: var(--rpofm9);--tjtlcu: var(--lr0zyr);--eaogks: var(--s-1eiuspb);--s-1jb7i1c: var(--iknip4);--s-1sj6cao: var(--s-4adnzn);--zrr4ng: var(--s-1m93jp0);--s-1qb16a6: var(--z8ht99);--boimal: var(--s-1usyojo);--g5oooh: var(--s-1mpcpof);--mi8vvn: var(--s-7obf6r);--rpofm9: var(--s-1ozdyx6);--lr0zyr: var(--s-20jv7o);--s-1eiuspb: var(--s-1j5ijvp);--iknip4: var(--s-2hzf98);--s-4adnzn: var(--s-1305b3v);--s-1m93jp0: 18px;--z8ht99: 28px;--i93m17: var(--nxhsb7);--s-1usyojo: none;--s-1ce3p9j: var(--s-411eab);--s-1lb3lcv: var(--oxdnph);--g08mx4: var(--s-1cvxchg);--s-5a802s: var(--s-1v2jigb);--s-1s4n20l: var(--s-1tl15kd);--yalk6o: var(--fmz3ja);--s-1ec5s7e: var(--s-1avjijv);--s-35otnc: var(--s-1rrm75b);--s-1iahluw: var(--s-1a694k8);--by56er: var(--pd2j2s);--e43o3d: var(--ybwfpo);--oxdnph: var(--s-1mpcpof);--s-1cvxchg: var(--s-7obf6r);--s-1v2jigb: var(--s-1ozdyx6);--s-1tl15kd: var(--s-20jv7o);--fmz3ja: var(--s-1j5ijvp);--s-1avjijv: var(--s-2hzf98);--s-1rrm75b: var(--s-1305b3v);--s-1a694k8: 16px;--pd2j2s: 24px;--s-17k00zo: var(--nxhsb7);--ybwfpo: none;--r72q49: var(--s-411eab);--s-1m1gqza: var(--s-6ei0h9);--nw1vsq: var(--b7hgv2);--s-33lr7v: var(--s-1fhxeb1);--s-23qi0s: var(--s-143uq4p);--hrj3ps: var(--s-1f30grx);--s-1qp90db: var(--s-5rlmc9);--y4gzb4: var(--s-1ofv2xp);--yo9ri: var(--s-1sb81nu);--ycp0c3: var(--s-9wmggx);--s-1gvl5ij: var(--qn2mzx);--s-6ei0h9: var(--s-1mpcpof);--b7hgv2: var(--s-7obf6r);--s-1fhxeb1: var(--s-1ozdyx6);--s-143uq4p: var(--s-20jv7o);--s-1f30grx: var(--s-1j5ijvp);--s-5rlmc9: var(--s-2hzf98);--s-1ofv2xp: var(--s-1305b3v);--s-1sb81nu: 14px;--s-9wmggx: 20px;--s-3e711j: var(--nxhsb7);--qn2mzx: none;--soc0ey: var(--s-1qhqk7m);--s-9tnwmk: var(--n2ncid);--s-1rvt0d9: var(--fmai2m);--s-1i5laj9: var(--z9avcc);--s-1euz7j9: var(--iokn55);--s-1cvhyxj: var(--u5d31f);--btlet2: var(--umu2si);--s-1ndlsmh: var(--s-411eab);--yob93r: var(--s-8sfuhr);--s-21zkri: var(--s-1dzym0p);--tfr9x7: var(--s-1dtz51t);--s-14j00cx: var(--s-1ht3tlp);--s-171gpwx: var(--hv4eju);--s-6og18b: var(--yu9696);--p06zl0: var(--s-1uvtvgk);--s-1ns3ev7: var(--s-72ibg7);--kc11wu: var(--s-7o742l);--s-11xrjxg: var(--s-1ke4q7y);--s-8sfuhr: var(--soc0ey);--s-1dzym0p: var(--s-9tnwmk);--s-1dtz51t: var(--s-1rvt0d9);--s-1ht3tlp: var(--s-1i5laj9);--hv4eju: var(--s-1euz7j9);--yu9696: var(--s-1cvhyxj);--s-1uvtvgk: var(--btlet2);--s-72ibg7: 16px;--s-7o742l: 24px;--lmu6pb: var(--nxhsb7);--s-1ke4q7y: none;--skc02j: var(--s-411eab);--s-13qvh5w: var(--d5jrmu);--s-9r1q2x: var(--ba0nlh);--mf6h07: var(--s-863a2h);--votkrv: var(--s-1kba8uc);--s-1yidgyv: var(--tyrglt);--s-11tb2b2: var(--svv0c3);--s-1mnapnn: var(--s-1i8gp3h);--s-1x07hze: var(--ivb3q5);--b0g687: var(--s-1rsjz33);--ffu7fm: var(--s-69k2gw);--d5jrmu: var(--soc0ey);--ba0nlh: var(--s-9tnwmk);--s-863a2h: var(--s-1rvt0d9);--s-1kba8uc: var(--s-1i5laj9);--tyrglt: var(--s-1euz7j9);--svv0c3: var(--s-1cvhyxj);--s-1i8gp3h: var(--btlet2);--ivb3q5: 14px;--s-1rsjz33: 20px;--s-136m82u: var(--nxhsb7);--s-69k2gw: none;--s-3g45nd: var(--s-411eab);--s-1uil8gd: var(--s-1mh89d9);--s-4i26dr: var(--s-11qnqq5);--f8iiza: var(--s-14q7gba);--kkshce: var(--s-1swlvea);--vskj4n: var(--s-6il4re);--s-1swa2rn: var(--s-1ux9gt8);--ucn0b1: var(--s-1yh64jc);--s-1v37w4n: var(--s-1uhhnrs);--tmba4m: var(--s-1jm53sp);--e66hrc: var(--efze5y);--s-1mh89d9: var(--soc0ey);--s-11qnqq5: var(--s-9tnwmk);--s-14q7gba: var(--s-1rvt0d9);--s-1swlvea: var(--s-1i5laj9);--s-6il4re: var(--s-1euz7j9);--s-1ux9gt8: var(--s-1cvhyxj);--s-1yh64jc: var(--btlet2);--s-1uhhnrs: 12px;--s-1jm53sp: 16px;--s-1bd51sx: var(--nxhsb7);--efze5y: none;--s-19xjsri: var(--s-1s6inxw);--s-1qxqza7: var(--f39ufu);--s-157v8v7: var(--s-1koazns);--wakwuf: var(--s-10ocw04);--s-68055w: var(--s-1lq4u99);--a3jq3a: var(--ukoqne);--qv7n20: var(--s-16q7ynu);--s-5ofbw3: 0px;--mxwppq: 1px;--s-1s6inxw: 2px;--f39ufu: 4px;--s-1bqi3k5: 6px;--s-1koazns: 8px;--s-1dlimvb: 10px;--s-1exq009: 12px;--s-2wbelj: 14px;--s-10ocw04: 16px;--s-1n5thz9: 18px;--s-1kewenr: 20px;--s-1lq4u99: 24px;--s-1ne0mse: 28px;--ukoqne: 32px;--nxxe5d: 36px;--jiehtr: 40px;--s-16q7ynu: 48px;--zjpvag: 56px;--s-1fsje3s: 64px;--rrf76l: 72px;--s-7qhmel: 80px;--ngwazx: var(--cowekh);--hjyx3d: var(--cowekh);--mudb8l: none;--hdum9y: 4px;--cowekh: 6px;--s-18c2hzb: 8px;--s-1fp5t8k: 12px;--cn9vmg: 9999em;--s-128y0wy: solid;--s-1qlqxa4: dashed;--s-1vfb1y8: 1px;--cs3hmm: 2px;--s-90vaui: 4px;--s-1dhvzlo: 100%;--j4fqg7: min-content;--ev8p2l: max-content;--y5bp6f: fit-content;--jnpy1i: 50%;--s-12djynz: 33.3333%;--s-1gdxfh5: 66.6667%;--v14ypv: 25%;--flzm9g: 50%;--zudrj: 75%;--jh27vj: 20%;--s-1wagp1r: 40%;--s-1vxj9x6: 60%;--s-11ajm6t: 80%;--s-171baja: 16.6667%;--s-9w6gn9: 33.3333%;--s-1x1l5r5: 50%;--s-1vrpvsj: 66.6667%;--s-5iefht: 83.3333%;--s-19x0aju: 8.3333%;--lme70v: 16.6667%;--s-1dojdse: 25%;--egb95k: 33.3333%;--s-1i2e7ce: 41.6667%;--jnw40l: 50%;--s-5j4xsl: 58.3333%;--s-1js755w: 66.6667%;--s-1sk8lpk: 75%;--s-1x7bgi2: 83.3333%;--s-1mt9gp3: 91.6667%;--s-1b2ukxq: 0px 1px 1px 0px rgba(0, 0, 0, 0.12), 0px 2px 5px 0px rgba(48, 49, 61, 0.08);--s-8l07y: 0px 3px 6px 0px rgba(0, 0, 0, 0.12), 0px 7px 14px 0px rgba(48, 49, 61, 0.08);--d914l4: 0px 5px 15px 0px rgba(0, 0, 0, 0.12), 0px 15px 35px 0px rgba(48, 49, 61, 0.08);--qs4ku3: 0px 5px 15px 0px rgba(0, 0, 0, 0.12), 0px 15px 35px 0px rgba(48, 49, 61, 0.08), 0px 50px 100px 0px rgba(48, 49, 61, 0.08);--g937p5: var(--d914l4);--s-7a0j1x: 0px 0px 15px 0px rgba(0, 0, 0, 0.12), 0px 0px 35px 0px rgba(48, 49, 61, 0.08);--mjgjmg: 0px 1px 1px 0px rgba(20, 19, 78, 0.32);--tiaege: 0px -1px 1px 0px rgba(20, 19, 78, 0.32);--lo4c27: 0px 1px 1px 0px rgba(20, 19, 78, 0.32);--x4bvhj: 0px 1px 1px 0px rgba(20, 19, 78, 0.32);--wo1e52: 0px 1px 1px 0px rgba(20, 19, 78, 0.32);--s-1f9fps: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--hsw0nb: 0px -1px 1px 0px rgba(16, 17, 26, 0.16);--s-1oztsuh: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--s-21whxu: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--mjq3b0: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--w5xoe5: 0px 1px 1px 0px rgba(62, 2, 26, 0.32);--s-7atgo9: 0px -1px 1px 0px rgba(62, 2, 26, 0.32);--s-64r5d4: 0px 1px 1px 0px rgba(62, 2, 26, 0.32);--s-7ov28t: 0px 1px 1px 0px rgba(62, 2, 26, 0.32);--s-1spctmq: 0px 1px 1px 0px rgba(62, 2, 26, 0.32);--s-1yrvylq: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--g8y9t0: 0px 1px 1px 0px rgba(1, 28, 58, 0.16);--s-1s6q4ns: 0px -1px 1px 0px rgba(1, 28, 58, 0.16);--s-1c63yd2: 0px 1px 1px 0px rgba(1, 28, 58, 0.16);--s-1xmdwhr: 0px 1px 1px 0px rgba(1, 28, 58, 0.16);--s-1yvcy6v: 0px 1px 1px 0px rgba(1, 28, 58, 0.16);--tljggt: 0px 1px 1px 0px rgba(62, 2, 26, .16);--iiod46: 0px -1px 1px 0px rgba(62, 2, 26, .16);--s-1ax65a4: 0px 1px 1px 0px rgba(62, 2, 26, .16);--qvio68: 0px 1px 1px 0px rgba(62, 2, 26, .16);--s-17r9vms: 0px 1px 1px 0px rgba(62, 2, 26, .16);--s-12xnu1q: 0px -1px 1px 0px rgba(16, 17, 26, 0.16);--uki410: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--s-1ty9dd5: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--s-14z6lpc: 0px 1px 1px 0px rgba(16, 17, 26, 0.16);--s-1cf4znw: 490px;--s-1j1oy30: 768px;--s-17oi705: 1040px;--s-1ows6qt: 1440px;--s-12r9fv3: 0;--vpux6c: 490px;--s-16top53: 768px;--s-168v9p4: 1040px;--s-39rcwl: 1440px;--s-1ewrifx: 0 0 0 4px rgba(1, 150, 237, .36);
}
#​#​#​#​#​#​#​ svg {
min-width: 0;
}
#​#​#​#​#​#​#​ .ComplexityCallout-LeftComponent img {
object-fit: cover;
}
#​#​#​#​#​#​#​ .ComplexityCallout-LeftComponent img > * {
--s1-flex-basis-y: auto;
}
#​#​#​#​#​#​#​ .ComplexityCallout-LeftComponent img {
height: var(--s-1dhvzlo);--s1-flex-y: 1 1 auto;--s1-object-height: ;
}
#​#​#​#​#​#​#​ .ComplexityCallout-LeftComponent img {
width: var(--s-1dhvzlo);--s1-flex-x: 1 1 auto;
}
#​#​#​#​#​#​#​ .ComplexityCallout-LeftComponent img {
display: var(--s1-display-block);--s1-align-self-display: auto;
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p > *, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::before, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::after {
--s1-padding-top-ref: 0px;--s1-padding-right-ref: 0px;--s1-padding-bottom-ref: 0px;--s1-padding-left-ref: 0px;
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p {
padding: 0px;--s1-padding-top: 0px;--s1-padding-right: 0px;--s1-padding-bottom: 0px;--s1-padding-left: 0px;
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p {
margin: 0px;
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p {
font-weight: var(--s-3e711j);font-family: var(--s-6ei0h9);text-transform: var(--qn2mzx);
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p > *, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::before, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::after {
--s1-line-height-ref: var(--s-9wmggx);
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p {
--s1-line-height: var(--s-9wmggx);line-height: var(--s-9wmggx);
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p > *, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::before, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::after {
--s1-font-size-ref: var(--s-1sb81nu);
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p {
--s1-font-size: var(--s-1sb81nu);font-size: var(--s-1sb81nu);
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p > *, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::before, #​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p::after {
--s1-ascender-ref: calc(var(--s-1fhxeb1) / var(--b7hgv2));--s1-cap-height-ref: calc(var(--s-143uq4p) / var(--b7hgv2));--s1-x-height-ref: calc(var(--s-1f30grx) / var(--b7hgv2));--s1-descender-ref: calc(var(--s-5rlmc9) / var(--b7hgv2));
}
#​#​#​#​#​#​#​ .ComplexityCallout-RightComponent p {
--s1-ascender: calc(var(--s-1fhxeb1) / var(--b7hgv2));--s1-cap-height: calc(var(--s-143uq4p) / var(--b7hgv2));--s1-x-height: calc(var(--s-1f30grx) / var(--b7hgv2));--s1-descender: calc(var(--s-5rlmc9) / var(--b7hgv2));
}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-object-height {inherits: false;syntax: "*";}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-distribute: initial;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-align-x {inherits: false;syntax: "flex-start | flex-end | center | stretch";initial-value: stretch;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-right-ref {inherits: false;syntax: "*";initial-value: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-baseline-multiplier: 1;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-flex-y: 1 0 auto;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-transform-y: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-focus-ring: 0 0 0 0 transparent;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-transform {inherits: false;syntax: "*";initial-value: scale(1);}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-top-ref: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-line-height {inherits: true;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-descender {inherits: true;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-row-gap: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-left-ref: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-align-x: stretch;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-row-gap {inherits: false;syntax: "*";initial-value: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-align-y: baseline;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-align-self-x {inherits: false;syntax: "auto | flex-start | flex-end | center | stretch";initial-value: auto;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-baseline-alignment-content {inherits: false;syntax: "*";initial-value: none;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-column-gap: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-top-ref {inherits: false;syntax: "*";initial-value: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-bottom-ref: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-keyline {inherits: false;syntax: "<color>";initial-value: transparent;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-transform: scale(1);}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-transform-scale {inherits: false;syntax: "*";initial-value: 1;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-ascender-ref {inherits: true;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-cap-height-ref {inherits: true;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-focus-ring {inherits: false;syntax: "*";initial-value: 0 0 0 0 transparent;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-object-height: initial;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-x-height-ref {inherits: true;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-display-block: block;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-transform-align-y: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-font-size {inherits: true;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-align-self-display {inherits: false;syntax: "auto | flex-start | flex-end | center | stretch | baseline";initial-value: auto;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-font-size-ref {inherits: true;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-left-ref {inherits: false;syntax: "*";initial-value: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-top: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-align-self-y {inherits: false;syntax: "auto | flex-start | flex-end | center | stretch | baseline";initial-value: auto;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-box-shadow {inherits: false;syntax: "*";initial-value: 0 0 0 0 transparent;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-align-self-x: auto;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-flex-basis-y {inherits: false;syntax: "*";initial-value: auto;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-box-shadow: 0 0 0 0 transparent;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-transform-y {inherits: false;syntax: "*";initial-value: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-flex-x: 1 0 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-cap-height {inherits: true;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-descender-ref {inherits: true;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-right: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-line-height-ref {inherits: true;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-baseline-alignment-content: none;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-column-gap {inherits: false;syntax: "*";initial-value: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-transform-x {inherits: false;syntax: "*";initial-value: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-transform-rotate {inherits: false;syntax: "*";initial-value: 0deg;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-transform-rotate: 0deg;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-right-ref: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-top-shadow {inherits: false;syntax: "*";initial-value: 0 0 0 0 transparent;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-ascender {inherits: true;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-left: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-transform-align-y {inherits: false;syntax: "*";initial-value: 0;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-flex-x {inherits: false;syntax: "*";initial-value: 1 0 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-font-metrics-multiplier: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-top-shadow: 0 0 0 0 transparent;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-align-y {inherits: false;syntax: "flex-start | flex-end | center | stretch | baseline";initial-value: baseline;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-bottom-ref {inherits: false;syntax: "*";initial-value: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-right {inherits: false;syntax: "*";initial-value: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-baseline-multiplier {inherits: false;syntax: "*";initial-value: 1;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-flex-y {inherits: false;syntax: "*";initial-value: 1 0 auto;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-left {inherits: false;syntax: "*";initial-value: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-flex-basis-y: auto;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-align-self-display: auto;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-keyline-width: 1px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-top {inherits: false;syntax: "*";initial-value: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-display-block {inherits: false;syntax: "*";initial-value: block;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-padding-bottom: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-keyline-width {inherits: false;syntax: "*";initial-value: 1px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-padding-bottom {inherits: false;syntax: "*";initial-value: 0px;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-x-height {inherits: true;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-align-self-y: auto;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-distribute {inherits: false;syntax: "*";}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-transform-scale: 1;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-display-inline: inline;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-font-metrics-multiplier {inherits: false;syntax: "*";initial-value: 0;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-transform-x: 0px;}}
@supports not (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {*, ::before, ::after {--s1-keyline: transparent;}}
@supports (((content-visibility: auto) and (text-size-adjust: auto)) or (margin-trim: none)) {@property --s1-display-inline {inherits: false;syntax: "*";initial-value: inline;}}
.__sn-sheet-order { --order: '⚙zt9d9k,⚙xt1stb,⚙1yo3sbe,⚙qrrui9,⚙ibomy1,⚙6xirtm,⚙oe0m89,⚙190wbps,⚙ttw25t,⚙3ixpgw,⚙1mptn6v,⚙1bwzyju,⚙k6ckjk,⚙98e2wu,⚙16nnyiq,⚙ecg0go,⚙v5hwuv,⚙uqlsqo,⚙j3f3me,⚙1mwz531,⚙oj6ufm,⚙i0r5bd,⚙2c4thh,⚙1hfvrca,_12sr817:11,_1azpwt4,_1uy35im,⚙1rfy8l7,⚙1ah4nk4,⚙epmw6r,⚙ievryk,⚙1pa8ai5,⚙ys2mqf,⚙uygqqj,⚙tbdqyf,⚙46dinx,⚙62chd2,⚙y3hlau,⚙icuvt2,⚙1m9xjld,⚙b4nmrq,⚙b7lxy3,⚙1mihnhk,⚙114302z,⚙1stch5l,⚙574fjo,⚙qe11hd,⚙ufhol0,⚙1ts9di7,⚙iom3u6,⚙1kiw4lr,⚙16c5075,⚙1igip63,⚙x421ul,⚙114vivv,⚙3sfw59,⚙wlyl2p,⚙l51mtc,⚙18z051y,⚙1l0m5c9,⚙4vulkc,⚙fb62bi,⚙1ptesta,⚙79qs3w,⚙1qogruv,⚙vathzi,⚙1tao6ma,⚙1cperjo,⚙7uttts,⚙1xvilw5,⚙1ys2uvp,⚙1clma7e,⚙alccww,⚙1kgdb8e,⚙1grihr5,⚙i0zwg1,⚙1wfdzbw,⚙bnamax,⚙yiqg9g,⚙6lqju6,⚙196yzns,⚙crzjh1,⚙dnfagg,⚙1pjdhp,⚙x7jhyg,⚙1bqs249,⚙1pgtoir,_61iamg:5,_nhlaib:12';--keys: '⚙18kmp6u,⚙669a4x,⚙1eezyan,⚙f6qo9j,⚙1wdxy8r';  }</style><style data-layer="dynamic" data-server="37.0.0">#​#​#​#​#​#​#​#​ .sn-oam45h { display: flex; flex-direction: row; align-items: var(--distribute-y, var(--align-y)); justify-content: var(--distribute-x, var(--align-x)); --when-flex-x:  ; --when-flex-y: initial; --align-y: center; --column-gap: var(--j1opnm9c-space-xsmall); --row-gap: var(--j1opnm9c-space-xsmall); background: var(--j1opnm9c-backgroundColor-surface); --keyline: var(--j1opnm9c-borderColor-neutral); border-radius: var(--j1opnm9c-radius-xsmall); --padding-left: var(--j1opnm9c-space-small); --padding-right: var(--j1opnm9c-space-small); --padding-top: var(--j1opnm9c-space-xxsmall); --padding-bottom: var(--j1opnm9c-space-xxsmall); cursor: pointer; width: 400px; --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​#​#​#​ .sn-oam45h > * { flex: var(--flex-x); align-self: var(--align-self-y); justify-self: var(--align-self-x); }
#​#​#​#​#​#​#​#​ .sn-oam45h > * { --flex-y: initial; --s1-flex-y: 0 1 auto; }
#​#​#​#​#​#​#​#​ .sn-130oky6 { width: var(--j1opnm9c-size-fill); --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​#​#​#​ .sn-130oky6 input { --box-shadow: var(--j1opnm9c-shadow-none); font-size: 14px; --padding-top: var(--j1opnm9c-space-xsmall); --padding-right: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); --padding-left: var(--j1opnm9c-space-xsmall); cursor: pointer; }
#​#​#​#​#​#​#​#​ .sn-1at0gm8 { display: flex; flex-direction: column; align-items: var(--align-x); justify-content: var(--align-y); }
#​#​#​#​#​#​#​#​ .sn-1at0gm8 > * { align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-gsc9hu { width: var(--j1opnm9c-size-fill); --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​#​#​#​ .sn-gsc9hu input { --box-shadow: var(--j1opnm9c-shadow-none); font-size: 14px; --padding-top: var(--j1opnm9c-space-xsmall); --padding-right: var(--j1opnm9c-space-xsmall); --padding-bottom: var(--j1opnm9c-space-xsmall); --padding-left: var(--j1opnm9c-space-xsmall); cursor: pointer; }
#​#​#​#​#​#​#​#​ .sn-gsc9hu { display: flex; flex-direction: column; align-items: var(--align-x); justify-content: var(--align-y); }
#​#​#​#​#​#​#​#​ .sn-gsc9hu > * { align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-1815sgv { display: flex; flex-direction: column; align-items: var(--distribute-x, var(--align-x)); justify-content: var(--distribute-y, var(--align-y)); --when-flex-y:  ; --when-flex-x: initial; --column-gap: var(--j1opnm9c-space-xsmall); --row-gap: var(--j1opnm9c-space-xsmall); }
#​#​#​#​#​#​#​#​ .sn-1815sgv > * { flex: var(--flex-y); align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-e2owhy { display: flex; flex-direction: column; align-items: var(--distribute-x, var(--align-x)); justify-content: var(--distribute-y, var(--align-y)); --when-flex-y:  ; --when-flex-x: initial; --column-gap: 0; --row-gap: 0; }
#​#​#​#​#​#​#​#​ .sn-e2owhy > * { flex: var(--flex-y); align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-n505ii { display: flex; flex-direction: column; align-items: var(--distribute-x, var(--align-x)); justify-content: var(--distribute-y, var(--align-y)); --when-flex-y:  ; --when-flex-x: initial; }
#​#​#​#​#​#​#​#​ .sn-n505ii > * { flex: var(--flex-y); align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-yee6io { width: var(--j1opnm9c-size-fit); --flex-x: initial; --s1-flex-x: 0 1 auto; --padding-left: var(--j1opnm9c-space-xsmall); --padding-right: var(--j1opnm9c-space-xsmall); --padding-top: var(--j1opnm9c-space-xxsmall); --padding-bottom: var(--j1opnm9c-space-xxsmall); font-family: var(--j1opnm9c-typeface-monospace); font-size: 14px; line-height: 14px; background: var(--j1opnm9c-backgroundColor-container); border: 1px solid var(--j1opnm9c-color-neutral150); border-radius: var(--j1opnm9c-radius-xsmall); }
#​#​#​#​#​#​#​#​ .sn-1wxqwr8 { display: flex; flex-direction: column; align-items: var(--distribute-x, var(--align-x)); justify-content: var(--distribute-y, var(--align-y)); --when-flex-y:  ; --when-flex-x: initial; --align-x: flex-start; --column-gap: 12px; --row-gap: 12px; line-height: 20px; --padding-right: var(--j1opnm9c-space-medium); }
#​#​#​#​#​#​#​#​ .sn-1wxqwr8 > * { flex: var(--flex-y); align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-1wxqwr8 > * { --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​#​#​#​ .sn-1rnuivo { display: flex; flex-direction: column; align-items: var(--distribute-x, var(--align-x)); justify-content: var(--distribute-y, var(--align-y)); --when-flex-y:  ; --when-flex-x: initial; --align-x: flex-start; --column-gap: 8px; --row-gap: 8px; --padding-top: 10px; --padding-left: var(--j1opnm9c-space-small); }
#​#​#​#​#​#​#​#​ .sn-1rnuivo > * { flex: var(--flex-y); align-self: var(--align-self-x); justify-self: var(--align-self-y); }
#​#​#​#​#​#​#​#​ .sn-1rnuivo > * { --flex-x: initial; --s1-flex-x: 0 1 auto; }
#​#​#​#​#​#​#​#​ .sn-r1day4 { overflow-y: hidden; }
#​#​#​#​#​#​#​#​ .sn-1x2oozu { display: none; }
#​#​#​#​#​#​#​#​ .sn-18ydfix { display: flex; flex-direction: row; align-items: var(--distribute-y, var(--align-y)); justify-content: var(--distribute-x, var(--align-x)); --when-flex-x:  ; --when-flex-y: initial; --column-gap: var(--j1opnm9c-space-small); --row-gap: var(--j1opnm9c-space-small); flex-wrap: wrap; }
#​#​#​#​#​#​#​#​ .sn-18ydfix > * { flex: var(--flex-x); align-self: var(--align-self-y); justify-self: var(--align-self-x); }</style><style data-layer="deprecatedOverride" data-server="37.0.0"></style><style data-layer="atomic" data-server="37.0.0">#​#​#​#​#​#​#​#​#​#​ .as125 > svg {
--s1-flex-x: 0 0 auto;--s1-flex-y: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as125 > * {
flex: var(--s1-flex-y);--s1-align-self-x: var(--s1-align-self-display);align-self: var(--s1-align-self-x);--s1-baseline-multiplier: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as125 {
flex-direction: column;align-items: var(--s1-align-x);justify-content: var(--s1-distribute, var(--s1-align-y));
}
#​#​#​#​#​#​#​#​#​#​ .as125 {
--s1-display-block: flex;--s1-display-inline: inline-flex;
}
#​#​#​#​#​#​#​#​#​#​ .as1o > svg {
--s1-flex-x: 0 0 auto;--s1-flex-y: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as1o > * {
flex: var(--s1-flex-x);--s1-align-self-y: auto;align-self: var(--s1-align-self-y);--s1-baseline-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as1o::before {
--s1-baseline-alignment-content: "\200B";
}
#​#​#​#​#​#​#​#​#​#​ .as1o {
flex-direction: row;align-items: var(--s1-align-y);justify-content: var(--s1-distribute, var(--s1-align-x));
}
#​#​#​#​#​#​#​#​#​#​ .as1o {
--s1-display-block: flex;--s1-display-inline: inline-flex;
}
@media (max-width: 768px) {
#​#​#​#​#​#​#​#​#​#​ .as13i {
--s1-display-block: flex;--s1-display-inline: inline-flex;
}
#​#​#​#​#​#​#​#​#​#​ .as13i {
flex-direction: column;align-items: var(--s1-align-x);justify-content: var(--s1-distribute, var(--s1-align-y));
}
#​#​#​#​#​#​#​#​#​#​ .as13i > * {
flex: var(--s1-flex-y);--s1-align-self-x: var(--s1-align-self-display);align-self: var(--s1-align-self-x);--s1-baseline-multiplier: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as13i > svg {
--s1-flex-x: 0 0 auto;--s1-flex-y: 0 0 auto;
}
}
#​#​#​#​#​#​#​#​#​#​ .as1p {
display: var(--s1-display-inline);--s1-align-self-display: flex-start;--s1-flex-x: 0 1 auto;--s1-flex-y: 0 1 auto;
}
@media (max-width: 800px) {
#​#​#​#​#​#​#​#​#​#​ .as14j {
display: var(--s1-display-block);--s1-align-self-display: auto;
}
}
#​#​#​#​#​#​#​#​#​#​ .as1q > * {
--s1-align-self-x: center;--s1-flex-x: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as1q {
--s1-align-x: center;
}
#​#​#​#​#​#​#​#​#​#​ .as13k > * {
--s1-align-self-y: var(--s1-align-self-display);--s1-baseline-multiplier: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as13k {
--s1-align-y: stretch;
}
#​#​#​#​#​#​#​#​#​#​ .as13s > * {
--s1-align-self-x: flex-start;--s1-flex-x: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as13s {
--s1-align-x: flex-start;
}
#​#​#​#​#​#​#​#​#​#​ .as13z > * {
--s1-align-self-x: flex-end;--s1-flex-x: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as13z {
--s1-align-x: flex-end;
}
#​#​#​#​#​#​#​#​#​#​ .as1r > * {
--s1-align-self-y: center;--s1-baseline-multiplier: 0;--s1-flex-y: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as1r {
--s1-align-y: center;
}
#​#​#​#​#​#​#​#​#​#​ .as13t > * {
--s1-align-self-y: flex-start;--s1-baseline-multiplier: 0;--s1-flex-y: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as13t {
--s1-align-y: flex-start;
}
#​#​#​#​#​#​#​#​#​#​ .as12h {
font-weight: var(--s-3e711j);font-family: var(--s-6ei0h9);text-transform: var(--qn2mzx);
}
#​#​#​#​#​#​#​#​#​#​ .as12h > *, #​#​#​#​#​#​#​#​#​#​ .as12h::before, #​#​#​#​#​#​#​#​#​#​ .as12h::after {
--s1-line-height-ref: var(--s-9wmggx);
}
#​#​#​#​#​#​#​#​#​#​ .as12h > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as12h {
--s1-line-height: var(--s-9wmggx);line-height: var(--s-9wmggx);
}
#​#​#​#​#​#​#​#​#​#​ .as12h > *, #​#​#​#​#​#​#​#​#​#​ .as12h::before, #​#​#​#​#​#​#​#​#​#​ .as12h::after {
--s1-font-size-ref: var(--s-1sb81nu);
}
#​#​#​#​#​#​#​#​#​#​ .as12h > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as12h {
--s1-font-size: var(--s-1sb81nu);font-size: var(--s-1sb81nu);
}
#​#​#​#​#​#​#​#​#​#​ .as12h > *, #​#​#​#​#​#​#​#​#​#​ .as12h::before, #​#​#​#​#​#​#​#​#​#​ .as12h::after {
--s1-ascender-ref: calc(var(--s-1fhxeb1) / var(--b7hgv2));--s1-cap-height-ref: calc(var(--s-143uq4p) / var(--b7hgv2));--s1-x-height-ref: calc(var(--s-1f30grx) / var(--b7hgv2));--s1-descender-ref: calc(var(--s-5rlmc9) / var(--b7hgv2));
}
#​#​#​#​#​#​#​#​#​#​ .as12h {
--s1-ascender: calc(var(--s-1fhxeb1) / var(--b7hgv2));--s1-cap-height: calc(var(--s-143uq4p) / var(--b7hgv2));--s1-x-height: calc(var(--s-1f30grx) / var(--b7hgv2));--s1-descender: calc(var(--s-5rlmc9) / var(--b7hgv2));
}
#​#​#​#​#​#​#​#​#​#​ .as113 {
font-weight: var(--skc02j);font-family: var(--s-13qvh5w);text-transform: var(--ffu7fm);
}
#​#​#​#​#​#​#​#​#​#​ .as113 > *, #​#​#​#​#​#​#​#​#​#​ .as113::before, #​#​#​#​#​#​#​#​#​#​ .as113::after {
--s1-line-height-ref: var(--b0g687);
}
#​#​#​#​#​#​#​#​#​#​ .as113 > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as113 {
--s1-line-height: var(--b0g687);line-height: var(--b0g687);
}
#​#​#​#​#​#​#​#​#​#​ .as113 > *, #​#​#​#​#​#​#​#​#​#​ .as113::before, #​#​#​#​#​#​#​#​#​#​ .as113::after {
--s1-font-size-ref: var(--s-1x07hze);
}
#​#​#​#​#​#​#​#​#​#​ .as113 > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as113 {
--s1-font-size: var(--s-1x07hze);font-size: var(--s-1x07hze);
}
#​#​#​#​#​#​#​#​#​#​ .as113 > *, #​#​#​#​#​#​#​#​#​#​ .as113::before, #​#​#​#​#​#​#​#​#​#​ .as113::after {
--s1-ascender-ref: calc(var(--mf6h07) / var(--s-9r1q2x));--s1-cap-height-ref: calc(var(--votkrv) / var(--s-9r1q2x));--s1-x-height-ref: calc(var(--s-1yidgyv) / var(--s-9r1q2x));--s1-descender-ref: calc(var(--s-11tb2b2) / var(--s-9r1q2x));
}
#​#​#​#​#​#​#​#​#​#​ .as113 {
--s1-ascender: calc(var(--mf6h07) / var(--s-9r1q2x));--s1-cap-height: calc(var(--votkrv) / var(--s-9r1q2x));--s1-x-height: calc(var(--s-1yidgyv) / var(--s-9r1q2x));--s1-descender: calc(var(--s-11tb2b2) / var(--s-9r1q2x));
}
#​#​#​#​#​#​#​#​#​#​ .as11m:active {
--s1-top-shadow: var(--hsw0nb);
}
#​#​#​#​#​#​#​#​#​#​ .as11r:active {
--s1-keyline: var(--rlq803);
}
#​#​#​#​#​#​#​#​#​#​ .as11e {
--s1-keyline: var(--s-7bxd58);
}
#​#​#​#​#​#​#​#​#​#​ .as112:focus {
--s1-focus-ring: var(--s-1ewrifx);outline: 1px solid transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as11w {
transform: translateY(var(--s1-transform-align-y)) translate(var(--s1-transform-x), var(--s1-transform-y)) rotate(var(--s1-transform-rotate)) scale(var(--s1-transform-scale)) var(--s1-transform);--s1-transform-align-y: calc((50% - calc(calc(var(--s1-font-size-ref) * var(--s1-cap-height-ref)) / 2)) * var(--s1-baseline-multiplier) * var(--s1-font-metrics-multiplier) * clamp(0, 10000 * var(--s1-ascender-ref), 1));
}
#​#​#​#​#​#​#​#​#​#​ .as12 {
--s1-focus-ring: 0 0 0 0 transparent;outline: none;
}
#​#​#​#​#​#​#​#​#​#​ .as15g {
font-weight: var(--s-1jejdum);font-family: var(--s-1cl7pww);text-transform: var(--uniudj);
}
#​#​#​#​#​#​#​#​#​#​ .as15g > *, #​#​#​#​#​#​#​#​#​#​ .as15g::before, #​#​#​#​#​#​#​#​#​#​ .as15g::after {
--s1-line-height-ref: var(--s-18v87mp);
}
#​#​#​#​#​#​#​#​#​#​ .as15g > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as15g {
--s1-line-height: var(--s-18v87mp);line-height: var(--s-18v87mp);
}
#​#​#​#​#​#​#​#​#​#​ .as15g > *, #​#​#​#​#​#​#​#​#​#​ .as15g::before, #​#​#​#​#​#​#​#​#​#​ .as15g::after {
--s1-font-size-ref: var(--lvtze0);
}
#​#​#​#​#​#​#​#​#​#​ .as15g > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as15g {
--s1-font-size: var(--lvtze0);font-size: var(--lvtze0);
}
#​#​#​#​#​#​#​#​#​#​ .as15g > *, #​#​#​#​#​#​#​#​#​#​ .as15g::before, #​#​#​#​#​#​#​#​#​#​ .as15g::after {
--s1-ascender-ref: calc(var(--s-3ct44m) / var(--s-1xt8t4l));--s1-cap-height-ref: calc(var(--s-1fxz13r) / var(--s-1xt8t4l));--s1-x-height-ref: calc(var(--vu62q8) / var(--s-1xt8t4l));--s1-descender-ref: calc(var(--s-1hdqvhk) / var(--s-1xt8t4l));
}
#​#​#​#​#​#​#​#​#​#​ .as15g {
--s1-ascender: calc(var(--s-3ct44m) / var(--s-1xt8t4l));--s1-cap-height: calc(var(--s-1fxz13r) / var(--s-1xt8t4l));--s1-x-height: calc(var(--vu62q8) / var(--s-1xt8t4l));--s1-descender: calc(var(--s-1hdqvhk) / var(--s-1xt8t4l));
}
#​#​#​#​#​#​#​#​#​#​ .as13b {
font-weight: var(--m4sml6);font-family: var(--s-1891xzp);
}
#​#​#​#​#​#​#​#​#​#​ .as13b > *, #​#​#​#​#​#​#​#​#​#​ .as13b::before, #​#​#​#​#​#​#​#​#​#​ .as13b::after {
--s1-line-height-ref: var(--uepx14);
}
#​#​#​#​#​#​#​#​#​#​ .as13b > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as13b {
--s1-line-height: var(--uepx14);line-height: var(--uepx14);
}
#​#​#​#​#​#​#​#​#​#​ .as13b > *, #​#​#​#​#​#​#​#​#​#​ .as13b::before, #​#​#​#​#​#​#​#​#​#​ .as13b::after {
--s1-font-size-ref: var(--s-1hh4eo9);
}
#​#​#​#​#​#​#​#​#​#​ .as13b > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as13b {
--s1-font-size: var(--s-1hh4eo9);font-size: var(--s-1hh4eo9);
}
#​#​#​#​#​#​#​#​#​#​ .as13b > *, #​#​#​#​#​#​#​#​#​#​ .as13b::before, #​#​#​#​#​#​#​#​#​#​ .as13b::after {
--s1-ascender-ref: calc(var(--l8mruw) / var(--s-1q38l8w));--s1-cap-height-ref: calc(var(--s-1eoooa6) / var(--s-1q38l8w));--s1-x-height-ref: calc(var(--s-5t44cm) / var(--s-1q38l8w));--s1-descender-ref: calc(var(--uk5i7u) / var(--s-1q38l8w));
}
#​#​#​#​#​#​#​#​#​#​ .as13b {
--s1-ascender: calc(var(--l8mruw) / var(--s-1q38l8w));--s1-cap-height: calc(var(--s-1eoooa6) / var(--s-1q38l8w));--s1-x-height: calc(var(--s-5t44cm) / var(--s-1q38l8w));--s1-descender: calc(var(--uk5i7u) / var(--s-1q38l8w));
}
#​#​#​#​#​#​#​#​#​#​ .as11i:hover:not(:active) {
--s1-top-shadow: var(--s-1oztsuh);
}
#​#​#​#​#​#​#​#​#​#​ .as14f {
font-weight: var(--s-1bd51sx);font-family: var(--s-1mh89d9);text-transform: var(--efze5y);
}
#​#​#​#​#​#​#​#​#​#​ .as14f > *, #​#​#​#​#​#​#​#​#​#​ .as14f::before, #​#​#​#​#​#​#​#​#​#​ .as14f::after {
--s1-line-height-ref: var(--s-1jm53sp);
}
#​#​#​#​#​#​#​#​#​#​ .as14f > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as14f {
--s1-line-height: var(--s-1jm53sp);line-height: var(--s-1jm53sp);
}
#​#​#​#​#​#​#​#​#​#​ .as14f > *, #​#​#​#​#​#​#​#​#​#​ .as14f::before, #​#​#​#​#​#​#​#​#​#​ .as14f::after {
--s1-font-size-ref: var(--s-1uhhnrs);
}
#​#​#​#​#​#​#​#​#​#​ .as14f > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as14f {
--s1-font-size: var(--s-1uhhnrs);font-size: var(--s-1uhhnrs);
}
#​#​#​#​#​#​#​#​#​#​ .as14f > *, #​#​#​#​#​#​#​#​#​#​ .as14f::before, #​#​#​#​#​#​#​#​#​#​ .as14f::after {
--s1-ascender-ref: calc(var(--s-14q7gba) / var(--s-11qnqq5));--s1-cap-height-ref: calc(var(--s-1swlvea) / var(--s-11qnqq5));--s1-x-height-ref: calc(var(--s-6il4re) / var(--s-11qnqq5));--s1-descender-ref: calc(var(--s-1ux9gt8) / var(--s-11qnqq5));
}
#​#​#​#​#​#​#​#​#​#​ .as14f {
--s1-ascender: calc(var(--s-14q7gba) / var(--s-11qnqq5));--s1-cap-height: calc(var(--s-1swlvea) / var(--s-11qnqq5));--s1-x-height: calc(var(--s-6il4re) / var(--s-11qnqq5));--s1-descender: calc(var(--s-1ux9gt8) / var(--s-11qnqq5));
}
#​#​#​#​#​#​#​#​#​#​ .as13q {
--s1-distribute: initial;
}
#​#​#​#​#​#​#​#​#​#​ .as13f {
font-weight: var(--s-14yx3nv);font-family: var(--s-1udxcy2);text-transform: var(--s-1bdgkp2);
}
#​#​#​#​#​#​#​#​#​#​ .as13f > *, #​#​#​#​#​#​#​#​#​#​ .as13f::before, #​#​#​#​#​#​#​#​#​#​ .as13f::after {
--s1-line-height-ref: var(--iuichs);
}
#​#​#​#​#​#​#​#​#​#​ .as13f > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as13f {
--s1-line-height: var(--iuichs);line-height: var(--iuichs);
}
#​#​#​#​#​#​#​#​#​#​ .as13f > *, #​#​#​#​#​#​#​#​#​#​ .as13f::before, #​#​#​#​#​#​#​#​#​#​ .as13f::after {
--s1-font-size-ref: var(--rp73qs);
}
#​#​#​#​#​#​#​#​#​#​ .as13f > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as13f {
--s1-font-size: var(--rp73qs);font-size: var(--rp73qs);
}
#​#​#​#​#​#​#​#​#​#​ .as13f > *, #​#​#​#​#​#​#​#​#​#​ .as13f::before, #​#​#​#​#​#​#​#​#​#​ .as13f::after {
--s1-ascender-ref: calc(var(--eu8biu) / var(--s-1ma8561));--s1-cap-height-ref: calc(var(--s-6urt2) / var(--s-1ma8561));--s1-x-height-ref: calc(var(--ajniz9) / var(--s-1ma8561));--s1-descender-ref: calc(var(--lulp4v) / var(--s-1ma8561));
}
#​#​#​#​#​#​#​#​#​#​ .as13f {
--s1-ascender: calc(var(--eu8biu) / var(--s-1ma8561));--s1-cap-height: calc(var(--s-6urt2) / var(--s-1ma8561));--s1-x-height: calc(var(--ajniz9) / var(--s-1ma8561));--s1-descender: calc(var(--lulp4v) / var(--s-1ma8561));
}
#​#​#​#​#​#​#​#​#​#​ .as11h:hover:not(:active) {
--s1-keyline: var(--s-1sj7mqq);
}
#​#​#​#​#​#​#​#​#​#​ .as126 > * {
--s1-flex-x: 0 1 auto;--s1-flex-y: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as126::before {
--s1-baseline-alignment-content: none;
}
#​#​#​#​#​#​#​#​#​#​ .as126 {
--s1-distribute: space-between;
}
#​#​#​#​#​#​#​#​#​#​ .as159 {
font-weight: var(--s-17k00zo);font-family: var(--oxdnph);text-transform: var(--ybwfpo);
}
#​#​#​#​#​#​#​#​#​#​ .as159 > *, #​#​#​#​#​#​#​#​#​#​ .as159::before, #​#​#​#​#​#​#​#​#​#​ .as159::after {
--s1-line-height-ref: var(--pd2j2s);
}
#​#​#​#​#​#​#​#​#​#​ .as159 > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as159 {
--s1-line-height: var(--pd2j2s);line-height: var(--pd2j2s);
}
#​#​#​#​#​#​#​#​#​#​ .as159 > *, #​#​#​#​#​#​#​#​#​#​ .as159::before, #​#​#​#​#​#​#​#​#​#​ .as159::after {
--s1-font-size-ref: var(--s-1a694k8);
}
#​#​#​#​#​#​#​#​#​#​ .as159 > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as159 {
--s1-font-size: var(--s-1a694k8);font-size: var(--s-1a694k8);
}
#​#​#​#​#​#​#​#​#​#​ .as159 > *, #​#​#​#​#​#​#​#​#​#​ .as159::before, #​#​#​#​#​#​#​#​#​#​ .as159::after {
--s1-ascender-ref: calc(var(--s-1v2jigb) / var(--s-1cvxchg));--s1-cap-height-ref: calc(var(--s-1tl15kd) / var(--s-1cvxchg));--s1-x-height-ref: calc(var(--fmz3ja) / var(--s-1cvxchg));--s1-descender-ref: calc(var(--s-1avjijv) / var(--s-1cvxchg));
}
#​#​#​#​#​#​#​#​#​#​ .as159 {
--s1-ascender: calc(var(--s-1v2jigb) / var(--s-1cvxchg));--s1-cap-height: calc(var(--s-1tl15kd) / var(--s-1cvxchg));--s1-x-height: calc(var(--fmz3ja) / var(--s-1cvxchg));--s1-descender: calc(var(--s-1avjijv) / var(--s-1cvxchg));
}
#​#​#​#​#​#​#​#​#​#​ .as11f {
--s1-top-shadow: var(--s-1f9fps);
}
@media (max-width: 768px) {
#​#​#​#​#​#​#​#​#​#​ .as13r {
--s1-distribute: initial;
}
}
#​#​#​#​#​#​#​#​#​#​ .as13c > *, #​#​#​#​#​#​#​#​#​#​ .as13c::before, #​#​#​#​#​#​#​#​#​#​ .as13c::after {
--s1-row-gap: var(--wakwuf);--s1-column-gap: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as13c {
gap: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as127 { transition: width 150ms ease-in-out, padding 200ms ease-out; }
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5p .sn-token-provider) {
--s-1spctmq: 0px -1px 0px 0px #f46b7d;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5o .sn-token-provider) {
--s-7ov28t: 0px -1px 0px 0px #f46b7d;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5n .sn-token-provider) {
--s-64r5d4: 0px -1px 0px 0px transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5m .sn-token-provider) {
--s-7atgo9: 0px -1px 0px 0px transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5l .sn-token-provider) {
--w5xoe5: 0px -1px 0px 0px #f46b7d;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5k .sn-token-provider) {
--mjq3b0: 0px -1px 0px 0px #3E444F;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5j .sn-token-provider) {
--s-21whxu: 0px -1px 0px 0px #3E444F;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5i .sn-token-provider) {
--s-1oztsuh: 0px -1px 0px 0px transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5h .sn-token-provider) {
--hsw0nb: 0px -1px 0px 0px transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5g .sn-token-provider) {
--s-1f9fps: 0px -1px 0px 0px #3E444F;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5f .sn-token-provider) {
--wo1e52: 0px -1px 0px 0px #746CFF;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5e .sn-token-provider) {
--x4bvhj: 0px -1px 0px 0px #746CFF;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5d .sn-token-provider) {
--lo4c27: 0px -1px 0px 0px transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5c .sn-token-provider) {
--tiaege: 0px -1px 0px 0px transparent;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5b .sn-token-provider) {
--mjgjmg: 0px -1px 0px 0px #746CFF;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5a .sn-token-provider) {
--s-7a0j1x: 0px 0px 15px 0px rgba(0, 0, 0, 0.12), 0px 0px 35px 0px rgba(14, 14, 17, 0.40);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t59 .sn-token-provider) {
--g937p5: 0px 5px 15px 0px rgba(0, 0, 0, 0.12), 0px 15px 35px 0px rgba(14, 14, 17, 0.40);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t58 .sn-token-provider) {
--qs4ku3: 0px 5px 15px 0px rgba(0, 0, 0, 0.12), 0px 15px 35px 0px rgba(14, 14, 17, 0.40), 0px 50px 100px 0px rgba(14, 14, 17, 0.40);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t57 .sn-token-provider) {
--d914l4: 0px 5px 15px 0px rgba(0, 0, 0, 0.12), 0px 15px 35px 0px rgba(14, 14, 17, 0.40);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t56 .sn-token-provider) {
--s-8l07y: 0px 3px 6px 0px rgba(0, 0, 0, 0.12), 0px 7px 14px 0px rgba(48, 49, 61, 0.08);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t55 .sn-token-provider) {
--s-1b2ukxq: 0px 1px 1px 0px rgba(0, 0, 0, 0.12), 0px 2px 5px 0px rgba(14, 14, 17, 0.40);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t54 .sn-token-provider) {
--s-1ewrifx: 0 0 0 4px rgba(43, 157, 246, .36);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t53 .sn-token-provider) {
--s-1dcvg3n: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t52 .sn-token-provider) {
--sqqb9n: var(--s-1o4vxc1);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t51 .sn-token-provider) {
--s-1blre6q: var(--s-1rqht5u);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t50 .sn-token-provider) {
--s-1j12dez: var(--s-1jyx6vs);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4z .sn-token-provider) {
--s-1kg5x24: var(--s-1vll12g);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4y .sn-token-provider) {
--s-86f532: var(--s-18opahw);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4x .sn-token-provider) {
--s-13i1jik: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4w .sn-token-provider) {
--u8r7f5: var(--zm2mc2);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4v .sn-token-provider) {
--s-108vj5t: var(--s-1y9f7st);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4u .sn-token-provider) {
--s-1xisg59: var(--z65pau);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4t .sn-token-provider) {
--s-1w3b1qd: var(--s-106q4ol);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4s .sn-token-provider) {
--s-1jlrcc7: var(--s-1y9f7st);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4r .sn-token-provider) {
--s-18r3dqz: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4q .sn-token-provider) {
--t64yag: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4p .sn-token-provider) {
--vx8kig: var(--s-5zs1ad);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4o .sn-token-provider) {
--s-1lpcjiv: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4n .sn-token-provider) {
--l1x3ad: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4m .sn-token-provider) {
--fpcras: #1A1D24;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4l .sn-token-provider) {
--s-22yv9j: #1A1D24;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4k .sn-token-provider) {
--s-43lvt7: #1A1D24;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4j .sn-token-provider) {
--s-16sajzl: #1F222A;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4i .sn-token-provider) {
--s-1a86f09: #1A1D24;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4h .sn-token-provider) {
--cygpcj: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4g .sn-token-provider) {
--cv8cw0: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4f .sn-token-provider) {
--s-1qtnt7g: var(--s-19n87kv);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4e .sn-token-provider) {
--s-18c9gmp: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4d .sn-token-provider) {
--s-1k9kdee: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4c .sn-token-provider) {
--z284p7: rgba(14, 14, 17, 0.70);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4b .sn-token-provider) {
--fejzm1: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4a .sn-token-provider) {
--s-13ujujc: var(--zm2mc2);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t49 .sn-token-provider) {
--s-11cdlbd: var(--s-1y9f7st);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t48 .sn-token-provider) {
--pn1rkb: var(--z65pau);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t47 .sn-token-provider) {
--s-1yjlmzq: var(--s-106q4ol);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t46 .sn-token-provider) {
--s-1slq11h: var(--s-1y9f7st);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t45 .sn-token-provider) {
--v04zm6: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t44 .sn-token-provider) {
--s-21pyuk: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t43 .sn-token-provider) {
--bm8rpi: var(--s-5zs1ad);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t42 .sn-token-provider) {
--fs94fp: var(--s-2cu6zi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t41 .sn-token-provider) {
--s-15074ip: var(--y7s7k0);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t40 .sn-token-provider) {
--r1b5f3: #272C34;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3z .sn-token-provider) {
--s-17ywbgi: #272C34;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3y .sn-token-provider) {
--rlq803: #2b3039;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3x .sn-token-provider) {
--s-1sj7mqq: var(--s-1jfnc6w);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3w .sn-token-provider) {
--s-7bxd58: #272C34;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3v .sn-token-provider) {
--inirux: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3u .sn-token-provider) {
--ja0yya: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3t .sn-token-provider) {
--s-1l0cjti: var(--s-19n87kv);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3s .sn-token-provider) {
--elt8dy: var(--s-1ktj483);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3r .sn-token-provider) {
--n6ta3v: var(--s-1mdin37);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3q .sn-token-provider) {
--s-10uvd0q: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3p .sn-token-provider) {
--s-1rkv6lc: var(--s-2cu6zi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3o .sn-token-provider) {
--s-1yrxr3n: var(--s-2cu6zi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3n .sn-token-provider) {
--s-1db3ld0: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3m .sn-token-provider) {
--s-19kjrpm: var(--mf1o3l);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3l .sn-token-provider) {
--g3849b: var(--mf1o3l);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3k .sn-token-provider) {
--xlhs1a: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3j .sn-token-provider) {
--hka14c: var(--s-1bl904v);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3i .sn-token-provider) {
--fz2ost: var(--s-1bl904v);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3h .sn-token-provider) {
--ui4gnz: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3g .sn-token-provider) {
--s-1pv50w4: var(--z65pau);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3f .sn-token-provider) {
--y9f4s8: var(--z65pau);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3e .sn-token-provider) {
--s-1wsur91: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3d .sn-token-provider) {
--x58q2y: var(--hzmptb);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3c .sn-token-provider) {
--a2dcvq: var(--hzmptb);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3b .sn-token-provider) {
--s-1qsi7g0: var(--s-1lep9r4);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3a .sn-token-provider) {
--s-1goc069: var(--s-2cu6zi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t39 .sn-token-provider) {
--s-14zlcek: var(--s-2cu6zi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t38 .sn-token-provider) {
--s-10jfx8h: var(--s-1e9tus1);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t37 .sn-token-provider) {
--s-11f4lqo: var(--mf1o3l);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t36 .sn-token-provider) {
--z8298k: var(--mf1o3l);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t35 .sn-token-provider) {
--s-1wpcpvd: var(--s-1722y2g);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t34 .sn-token-provider) {
--s-14e93on: var(--s-1bl904v);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t33 .sn-token-provider) {
--s-172kq9q: var(--s-1bl904v);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t32 .sn-token-provider) {
--s-1gve41q: var(--i13pct);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t31 .sn-token-provider) {
--n9sb7k: var(--z65pau);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t30 .sn-token-provider) {
--s-1ckgtno: var(--z65pau);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2z .sn-token-provider) {
--s-150x9a0: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2y .sn-token-provider) {
--b08xi: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2x .sn-token-provider) {
--hu66gz: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2w .sn-token-provider) {
--s-1oivf8c: var(--a8unbt);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2v .sn-token-provider) {
--rcr92y: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2u .sn-token-provider) {
--s-92nnz: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2t .sn-token-provider) {
--s-1c81pv4: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2s .sn-token-provider) {
--s-5dd97j: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2r .sn-token-provider) {
--s-14qjs0z: var(--fkrzzi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2q .sn-token-provider) {
--cb4f03: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2p .sn-token-provider) {
--o1vbkc: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2o .sn-token-provider) {
--tfkw8i: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2n .sn-token-provider) {
--s-100zh1s: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2m .sn-token-provider) {
--s-15166zx: var(--s-1tmnwho);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2l .sn-token-provider) {
--su36nc: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2k .sn-token-provider) {
--crum9i: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2j .sn-token-provider) {
--ngwhj9: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2i .sn-token-provider) {
--s-19nxpxs: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2h .sn-token-provider) {
--x1dlyg: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2g .sn-token-provider) {
--ackspn: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2f .sn-token-provider) {
--s-18dm7q4: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2e .sn-token-provider) {
--s-1qi578m: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2d .sn-token-provider) {
--s-9wt2bo: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2c .sn-token-provider) {
--s-182wy52: var(--a8unbt);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2b .sn-token-provider) {
--s1m9us: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2a .sn-token-provider) {
--ujexro: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t29 .sn-token-provider) {
--s-1ucq813: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t28 .sn-token-provider) {
--noyak3: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t27 .sn-token-provider) {
--s-17tgeby: var(--fkrzzi);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t26 .sn-token-provider) {
--s-1u8xpcw: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t25 .sn-token-provider) {
--s-16bsmau: var(--imky77);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t24 .sn-token-provider) {
--s-1dbakge: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t23 .sn-token-provider) {
--s-19ts3om: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t22 .sn-token-provider) {
--s-5w371o: var(--s-1tmnwho);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t21 .sn-token-provider) {
--s-1kpf4mq: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t20 .sn-token-provider) {
--hw2pv4: var(--ats9nf);
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1z .sn-token-provider) {
--s-88zd47: #efecfd;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1y .sn-token-provider) {
--ve805z: #d1c8fc;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1x .sn-token-provider) {
--dvka16: #b1a7fd;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1w .sn-token-provider) {
--s-76rpk3: #9289fe;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1v .sn-token-provider) {
--s-10xndze: #746cff;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1u .sn-token-provider) {
--tvai7j: #5f4cfe;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1t .sn-token-provider) {
--s-16v520k: #581bf7;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1s .sn-token-provider) {
--s-1xzl7p9: #5017b7;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1r .sn-token-provider) {
--t9j43l: #3c147c;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1q .sn-token-provider) {
--s-16j4vwc: #2f105f;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1p .sn-token-provider) {
--ny0rv5: #270e50;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1o .sn-token-provider) {
--puo2mc: #1e0a3f;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1n .sn-token-provider) {
--s-1y1c5hi: #fee9ed;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1m .sn-token-provider) {
--s-174anhu: #fabfc9;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1l .sn-token-provider) {
--s-1ozjfdr: #f796a3;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1k .sn-token-provider) {
--s-81nx1f: #f46b7d;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1j .sn-token-provider) {
--s-14cz887: #f23154;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1i .sn-token-provider) {
--s-5mm8k9: #cc2748;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1h .sn-token-provider) {
--s-1iasqaw: #a81d40;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1g .sn-token-provider) {
--s-1dgr74e: #851338;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1f .sn-token-provider) {
--s-1q5oanh: #61092d;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1e .sn-token-provider) {
--up777m: #4d0425;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1d .sn-token-provider) {
--s-1gk3ehx: #420320;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1c .sn-token-provider) {
--s-1t7mps: #35021a;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1b .sn-token-provider) {
--s-13ct4b3: #ffeea4;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1a .sn-token-provider) {
--s-1g4xc4j: #ffc46b;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t19 .sn-token-provider) {
--s-194qeup: #ff9926;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t18 .sn-token-provider) {
--s-1h34jtw: #f27400;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t17 .sn-token-provider) {
--ujxcy5: #dc5600;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t16 .sn-token-provider) {
--s-1q0d9tb: #c13e00;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t15 .sn-token-provider) {
--iyvse1: #a22d00;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t14 .sn-token-provider) {
--s-1crwnfz: #822000;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t13 .sn-token-provider) {
--hnbgpe: #5f1400;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t12 .sn-token-provider) {
--n2mpk8: #4b0e00;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t11 .sn-token-provider) {
--u4jjkb: #400a00;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t10 .sn-token-provider) {
--s-99ec8l: #330700;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tz .sn-token-provider) {
--s-1b0410v: #c2fdbd;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .ty .sn-token-provider) {
--jka70k: #5eea42;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tx .sn-token-provider) {
--s-132w510: #4bca2e;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tw .sn-token-provider) {
--zwe7y8: #3eae20;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tv .sn-token-provider) {
--oaeadu: #369318;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tu .sn-token-provider) {
--g0lq1q: #317a14;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tt .sn-token-provider) {
--p72ilt: #2d6312;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .ts .sn-token-provider) {
--s-4sbfxo: #284d10;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tr .sn-token-provider) {
--w5l7f0: #20360c;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tq .sn-token-provider) {
--bhj88k: #192909;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tp .sn-token-provider) {
--s-1yr9l19: #152207;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .to .sn-token-provider) {
--s-10jl95j: #101a05;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tn .sn-token-provider) {
--s-13bq0ie: #b9f9fb;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tm .sn-token-provider) {
--s-1uptbp9: #79dbf9;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tl .sn-token-provider) {
--x0lqxc: #4abcf9;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tk .sn-token-provider) {
--yxahr4: #2b9df6;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tj .sn-token-provider) {
--s-1to41zi: #2280eb;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .ti .sn-token-provider) {
--s-13v83o0: #1c66d8;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .th .sn-token-provider) {
--s-1wruhgp: #1650bc;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tg .sn-token-provider) {
--s-9x60ag: #0f3d99;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tf .sn-token-provider) {
--s-1m6fo2: #092a70;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .te .sn-token-provider) {
--r90027: #062059;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .td .sn-token-provider) {
--ci1dgr: #051a4c;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tc .sn-token-provider) {
--s-11jovqg: #03143d;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .tb .sn-token-provider) {
--s0sep: #eceef1;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .ta .sn-token-provider) {
--s-75w7wt: #c9ced8;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t9 .sn-token-provider) {
--s-12tuc0b: #a9b2c2;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t8 .sn-token-provider) {
--wzo298: #8c99ad;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t7 .sn-token-provider) {
--s-8fnp1p: #768193;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t6 .sn-token-provider) {
--a89uwn: #636c7b;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t5 .sn-token-provider) {
--s-1e1ml9y: #505865;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t4 .sn-token-provider) {
--s-737gv9: #3e444f;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t3 .sn-token-provider) {
--s-1o2np2t: #2b3039;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t2 .sn-token-provider) {
--s-1ey9fwj: #21252c;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t1 .sn-token-provider) {
--s-1q5hicg: #1b1e25;
}
#​#​#​#​#​#​#​#​#​#​ .as140.as140.as140.as140.as140.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as140 .sn-token-provider:not(.as140 .t0 .sn-token-provider) {
--s-1mljngx: #14171d;
}
#​#​#​#​#​#​#​#​#​#​ .as1e > * {
--s1-flex-basis-y: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as1e {
height: var(--mxwppq);--s1-flex-y: 0 0 auto;--s1-object-height: var(--mxwppq);
}
#​#​#​#​#​#​#​#​#​#​ .as11k:hover:not(:active) { color: var(--s-1u8xpcw); }
#​#​#​#​#​#​#​#​#​#​ .as133 > * {
--s1-flex-basis-y: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as133 {
height: 16px;--s1-flex-y: 0 0 auto;--s1-object-height: 16px;
}
#​#​#​#​#​#​#​#​#​#​ .as11l:hover:not(:active) { fill: var(--cb4f03); }
#​#​#​#​#​#​#​#​#​#​ .as12w:hover { fill: var(--uusauu); }
#​#​#​#​#​#​#​#​#​#​ .as1z > * {
--s1-flex-basis-y: auto;
}
#​#​#​#​#​#​#​#​#​#​ .as1z {
height: var(--y5bp6f);--s1-flex-y: 0 1 auto;--s1-object-height: ;
}
#​#​#​#​#​#​#​#​#​#​ .as1m:focus { clip: auto; }
#​#​#​#​#​#​#​#​#​#​ .as141 { border: 1.5px solid #273059; }
#​#​#​#​#​#​#​#​#​#​ .as19 { left: var(--s-157v8v7); }
#​#​#​#​#​#​#​#​#​#​ .as12m { fill: var(--s-1gsrn4k); }
#​#​#​#​#​#​#​#​#​#​ .as1t { position: relative; }
#​#​#​#​#​#​#​#​#​#​ .as11d { fill: var(--o1vbkc); }
#​#​#​#​#​#​#​#​#​#​ .as12q { fill: var(--juy1v9); }
#​#​#​#​#​#​#​#​#​#​ .as12j { color: var(--imky77); }
#​#​#​#​#​#​#​#​#​#​ .as13e > *, #​#​#​#​#​#​#​#​#​#​ .as13e::before, #​#​#​#​#​#​#​#​#​#​ .as13e::after {
--s1-padding-top-ref: var(--s-5ofbw3);--s1-padding-right-ref: var(--s-5ofbw3);--s1-padding-bottom-ref: var(--s-5ofbw3);--s1-padding-left-ref: var(--s-5ofbw3);
}
#​#​#​#​#​#​#​#​#​#​ .as13e {
padding: var(--s-5ofbw3);--s1-padding-top: var(--s-5ofbw3);--s1-padding-right: var(--s-5ofbw3);--s1-padding-bottom: var(--s-5ofbw3);--s1-padding-left: var(--s-5ofbw3);
}
#​#​#​#​#​#​#​#​#​#​ .as11q:active { fill: var(--s-14qjs0z); }
#​#​#​#​#​#​#​#​#​#​ .as12t { fill: var(--uusauu); }
#​#​#​#​#​#​#​#​#​#​ .as120 > * {
--s1-flex-basis-y: auto;
}
#​#​#​#​#​#​#​#​#​#​ .as120 {
height: var(--s-1dhvzlo);--s1-flex-y: 1 1 auto;--s1-object-height: ;
}
#​#​#​#​#​#​#​#​#​#​ .as144 > *, #​#​#​#​#​#​#​#​#​#​ .as144::before, #​#​#​#​#​#​#​#​#​#​ .as144::after {
--s1-padding-top-ref: 2px;--s1-padding-right-ref: 6px;--s1-padding-bottom-ref: 2px;--s1-padding-left-ref: 6px;
}
#​#​#​#​#​#​#​#​#​#​ .as144 {
padding: 2px 6px;--s1-padding-top: 2px;--s1-padding-right: 6px;--s1-padding-bottom: 2px;--s1-padding-left: 6px;
}
#​#​#​#​#​#​#​#​#​#​ .as13 { cursor: pointer; }
#​#​#​#​#​#​#​#​#​#​ .as13p > * {
--s1-flex-basis-y: auto;
}
#​#​#​#​#​#​#​#​#​#​ .as13p {
height: auto;--s1-flex-y: 1 0 var(--s1-flex-basis-y);--s1-object-height: ;
}
#​#​#​#​#​#​#​#​#​#​ .as12e > *, #​#​#​#​#​#​#​#​#​#​ .as12e::before, #​#​#​#​#​#​#​#​#​#​ .as12e::after {
--s1-row-gap: var(--s-157v8v7);--s1-column-gap: var(--s-157v8v7);
}
#​#​#​#​#​#​#​#​#​#​ .as12e {
gap: var(--s-157v8v7);
}
#​#​#​#​#​#​#​#​#​#​ .as18 { top: var(--s-157v8v7); }
#​#​#​#​#​#​#​#​#​#​ .as13d { margin: var(--s-5ofbw3); }
#​#​#​#​#​#​#​#​#​#​ .as1i { fill: white; }
#​#​#​#​#​#​#​#​#​#​ .as1l:focus > * {
--s1-flex-basis-y: auto;
}
#​#​#​#​#​#​#​#​#​#​ .as1l:focus {
height: auto;--s1-flex-y: 1 0 var(--s1-flex-basis-y);--s1-object-height: ;
}
#​#​#​#​#​#​#​#​#​#​ .as1f > *, #​#​#​#​#​#​#​#​#​#​ .as1f::before, #​#​#​#​#​#​#​#​#​#​ .as1f::after {
--s1-padding-top-ref: var(--wakwuf);--s1-padding-right-ref: var(--wakwuf);--s1-padding-bottom-ref: var(--wakwuf);--s1-padding-left-ref: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as1f {
padding: var(--wakwuf);--s1-padding-top: var(--wakwuf);--s1-padding-right: var(--wakwuf);--s1-padding-bottom: var(--wakwuf);--s1-padding-left: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as135:hover { fill: var(--s-1gsrn4k); }
#​#​#​#​#​#​#​#​#​#​ .as13w { fill: var(--s-10xndze); }
#​#​#​#​#​#​#​#​#​#​ .as11x { fill: inherit; }
#​#​#​#​#​#​#​#​#​#​ .as13u > *, #​#​#​#​#​#​#​#​#​#​ .as13u::before, #​#​#​#​#​#​#​#​#​#​ .as13u::after {
--s1-padding-top-ref: var(--s-68055w);--s1-padding-right-ref: var(--s-68055w);--s1-padding-bottom-ref: var(--s-68055w);--s1-padding-left-ref: var(--s-68055w);
}
#​#​#​#​#​#​#​#​#​#​ .as13u {
padding: var(--s-68055w);--s1-padding-top: var(--s-68055w);--s1-padding-right: var(--s-68055w);--s1-padding-bottom: var(--s-68055w);--s1-padding-left: var(--s-68055w);
}
#​#​#​#​#​#​#​#​#​#​ .as11c { color: var(--s-16bsmau); }
#​#​#​#​#​#​#​#​#​#​ .as1k:focus {
width: auto;--s1-flex-x: 1 0 0;
}
#​#​#​#​#​#​#​#​#​#​ .as15d { fill: var(--sail-color-text-link); }
@media (max-width: 800px) {
#​#​#​#​#​#​#​#​#​#​ .as13a.as13a.as13a.as13a.as13a.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as13a .sn-token-provider:not(.as13a .t5w .sn-token-provider) {
--qv7n20: 24px;
}
}
#​#​#​#​#​#​#​#​#​#​ .as1n:focus { overflow: visible; }
#​#​#​#​#​#​#​#​#​#​ .as11t { border: none; }
#​#​#​#​#​#​#​#​#​#​ .as129 {
width: var(--sidebar-width);--s1-flex-x: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as11p:active { color: var(--s-17tgeby); }
#​#​#​#​#​#​#​#​#​#​ .as1d {
width: var(--mxwppq);--s1-flex-x: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as1b { overflow: hidden; }
#​#​#​#​#​#​#​#​#​#​ .as13y > *, #​#​#​#​#​#​#​#​#​#​ .as13y::before, #​#​#​#​#​#​#​#​#​#​ .as13y::after {
--s1-row-gap: var(--s-1qxqza7);--s1-column-gap: var(--s-1qxqza7);
}
#​#​#​#​#​#​#​#​#​#​ .as13y {
gap: var(--s-1qxqza7);
}
#​#​#​#​#​#​#​#​#​#​ .as12u:hover { color: var(--s-1gijnyh); }
#​#​#​#​#​#​#​#​#​#​ .as11y > * {
--s1-flex-basis-y: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as11y {
height: 12px;--s1-flex-y: 0 0 auto;--s1-object-height: 12px;
}
#​#​#​#​#​#​#​#​#​#​ .as12z { top: var(--s-5ofbw3); }
#​#​#​#​#​#​#​#​#​#​ .as130 { right: var(--s-5ofbw3); }
#​#​#​#​#​#​#​#​#​#​ .as119 > *, #​#​#​#​#​#​#​#​#​#​ .as119::before, #​#​#​#​#​#​#​#​#​#​ .as119::after {
--s1-row-gap: var(--s-1bqi3k5);--s1-column-gap: var(--s-1bqi3k5);
}
#​#​#​#​#​#​#​#​#​#​ .as119 {
gap: var(--s-1bqi3k5);
}
#​#​#​#​#​#​#​#​#​#​ .as150 > *, #​#​#​#​#​#​#​#​#​#​ .as150::before, #​#​#​#​#​#​#​#​#​#​ .as150::after {
--s1-padding-top-ref: 0;--s1-padding-right-ref: 16px;--s1-padding-bottom-ref: 8px;--s1-padding-left-ref: 16px;
}
#​#​#​#​#​#​#​#​#​#​ .as150 {
padding: 0 16px 8px 16px;--s1-padding-top: 0;--s1-padding-right: 16px;--s1-padding-bottom: 8px;--s1-padding-left: 16px;
}
#​#​#​#​#​#​#​#​#​#​ .as12n > * {
--s1-flex-basis-y: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as12n {
height: 8px;--s1-flex-y: 0 0 auto;--s1-object-height: 8px;
}
#​#​#​#​#​#​#​#​#​#​ .as1c { clip: rect(1px, 1px, 1px, 1px); }
#​#​#​#​#​#​#​#​#​#​ .as11.as11.as11.as11.as11.sn-token-provider, #​#​#​#​#​#​#​#​#​#​ .as11 .sn-token-provider:not(.as11 .t5q .sn-token-provider) {
--s-1gijnyh: var(--sail-color-text-link);
}
#​#​#​#​#​#​#​#​#​#​ .as12o {
width: 8px;--s1-flex-x: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as134 {
width: 16px;--s1-flex-x: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as110 {
width: var(--y5bp6f);--s1-flex-x: 0 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as17 { position: absolute; }
#​#​#​#​#​#​#​#​#​#​ .as12l:hover { color: var(--imky77); }
#​#​#​#​#​#​#​#​#​#​ .as13j > *, #​#​#​#​#​#​#​#​#​#​ .as13j::before, #​#​#​#​#​#​#​#​#​#​ .as13j::after {
--s1-row-gap: var(--s-1kewenr);--s1-column-gap: var(--s-1kewenr);
}
#​#​#​#​#​#​#​#​#​#​ .as13j {
gap: var(--s-1kewenr);
}
#​#​#​#​#​#​#​#​#​#​ .as11z {
width: 12px;--s1-flex-x: 0 0 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as13n {
width: auto;--s1-flex-x: 1 0 0;
}
#​#​#​#​#​#​#​#​#​#​ .as14i {
width: var(--s-1dhvzlo);--s1-flex-x: 1 1 auto;
}
#​#​#​#​#​#​#​#​#​#​ .as13x { fill: var(--s-1ft0b00); }
#​#​#​#​#​#​#​#​#​#​ .as1h { color: white; }
#​#​#​#​#​#​#​#​#​#​ .as12s { color: var(--s-1gijnyh); }
#​#​#​#​#​#​#​#​#​#​ .as12p { color: var(--fkrzzi); }
@media (max-width: 768px) {
#​#​#​#​#​#​#​#​#​#​ .as13o {
width: var(--s-1dhvzlo);--s1-flex-x: 1 1 auto;
}
}
#​#​#​#​#​#​#​#​#​#​ .as1a { z-index: 9999; }
#​#​#​#​#​#​#​#​#​#​ .as14h { overflow-x: auto; }
#​#​#​#​#​#​#​#​#​#​ .as12g { font-weight: weight.normal; }
#​#​#​#​#​#​#​#​#​#​ .as11s { margin-left: var(--wakwuf); }
#​#​#​#​#​#​#​#​#​#​ .as14v { background-color: transparent; }
#​#​#​#​#​#​#​#​#​#​ .as11g:hover:not(:active) { background-color: var(--s-16sajzl); }
#​#​#​#​#​#​#​#​#​#​ .as15b { margin-bottom: var(--s-1bqi3k5); }
#​#​#​#​#​#​#​#​#​#​ .as15 > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as15 {
font-size: inherit;
}
#​#​#​#​#​#​#​#​#​#​ .as1w { transition-property: background-color, box-shadow; }
#​#​#​#​#​#​#​#​#​#​ .as117 > *, #​#​#​#​#​#​#​#​#​#​ .as117::before, #​#​#​#​#​#​#​#​#​#​ .as117::after {
--s1-padding-top-ref: var(--s-1qxqza7);
}
#​#​#​#​#​#​#​#​#​#​ .as117 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-top: var(--s-1qxqza7);
}
#​#​#​#​#​#​#​#​#​#​ .as12r { font-weight: 500; }
#​#​#​#​#​#​#​#​#​#​ .as11n:active { background-color: var(--s-43lvt7); }
#​#​#​#​#​#​#​#​#​#​ .as14p { table-layout: auto; }
#​#​#​#​#​#​#​#​#​#​ .as115 > *, #​#​#​#​#​#​#​#​#​#​ .as115::before, #​#​#​#​#​#​#​#​#​#​ .as115::after {
--s1-padding-left-ref: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as115 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-left: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as14a { margin-bottom: var(--s-1exq009); }
#​#​#​#​#​#​#​#​#​#​ .as111:hover { transition-duration: var(--vsesr7); }
#​#​#​#​#​#​#​#​#​#​ .as146 { margin-top: var(--s-19xjsri); }
#​#​#​#​#​#​#​#​#​#​ .as138 > *, #​#​#​#​#​#​#​#​#​#​ .as138::before, #​#​#​#​#​#​#​#​#​#​ .as138::after {
--s1-padding-left-ref: var(--qv7n20);
}
#​#​#​#​#​#​#​#​#​#​ .as138 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-left: var(--qv7n20);
}
#​#​#​#​#​#​#​#​#​#​ .as11v { margin-bottom: max(0, calc((var(--s1-line-height-ref) - var(--s1-line-height) - (calc((calc(var(--s1-font-size-ref) * var(--s1-ascender-ref)) + calc(var(--s1-font-size-ref) * var(--s1-descender-ref)) + var(--s1-line-height-ref)) / 2) - var(--s1-object-height, calc((calc(var(--s1-font-size) * var(--s1-ascender)) + calc(var(--s1-font-size) * var(--s1-descender)) + var(--s1-line-height)) / 2))) - var(--s1-padding-bottom)) * var(--s1-baseline-multiplier) * var(--s1-font-metrics-multiplier) * clamp(0, 10000 * var(--s1-ascender-ref), 1))); }
#​#​#​#​#​#​#​#​#​#​ .as136 > *, #​#​#​#​#​#​#​#​#​#​ .as136::before, #​#​#​#​#​#​#​#​#​#​ .as136::after {
--s1-padding-top-ref: var(--a3jq3a);
}
#​#​#​#​#​#​#​#​#​#​ .as136 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-top: var(--a3jq3a);
}
#​#​#​#​#​#​#​#​#​#​ .as14b { border-color: var(--s-737gv9); }
#​#​#​#​#​#​#​#​#​#​ .as13l { flex-wrap: wrap; }
#​#​#​#​#​#​#​#​#​#​ .as1g { background-color: var(--s-75w7wt); }
#​#​#​#​#​#​#​#​#​#​ .as158 { list-style: none; }
#​#​#​#​#​#​#​#​#​#​ .as12i > *, #​#​#​#​#​#​#​#​#​#​ .as12i::before, #​#​#​#​#​#​#​#​#​#​ .as12i::after {
--s1-padding-left-ref: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as12i {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-left: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as131 { margin-top: var(--wakwuf); }
@media (max-width: 800px) { #​#​#​#​#​#​#​#​#​#​ .as14n { margin-top: auto; } }
#​#​#​#​#​#​#​#​#​#​ .as1u { z-index: 0; }
#​#​#​#​#​#​#​#​#​#​ .as143:hover { border-color: #615f8b; }
@media (max-width: 800px) { #​#​#​#​#​#​#​#​#​#​ .as14o { margin-bottom: auto; } }
#​#​#​#​#​#​#​#​#​#​ .as11b { background-color: container; }
#​#​#​#​#​#​#​#​#​#​ .as10 { background-color: var(--s-8xx9mc); }
@media (max-width: 800px) { #​#​#​#​#​#​#​#​#​#​ .as14m { margin-right: var(--s-5ofbw3); } }
#​#​#​#​#​#​#​#​#​#​ .as14r { border-spacing: 0; }
#​#​#​#​#​#​#​#​#​#​ .as1s { white-space: nowrap; }
#​#​#​#​#​#​#​#​#​#​ .as155 { column-count: 1; }
#​#​#​#​#​#​#​#​#​#​ .as1v { border-radius: var(--ngwazx); }
#​#​#​#​#​#​#​#​#​#​ .as123 { border-color: var(--f4kkk5); }
#​#​#​#​#​#​#​#​#​#​ .as124 > *, #​#​#​#​#​#​#​#​#​#​ .as124::before, #​#​#​#​#​#​#​#​#​#​ .as124::after {
--s1-padding-bottom-ref: 0px;
}
#​#​#​#​#​#​#​#​#​#​ .as124 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-bottom: 0px;
}
#​#​#​#​#​#​#​#​#​#​ .as12a > *, #​#​#​#​#​#​#​#​#​#​ .as12a::before, #​#​#​#​#​#​#​#​#​#​ .as12a::after {
--s1-padding-right-ref: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as12a {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-right: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as14w { vertical-align: bottom; }
#​#​#​#​#​#​#​#​#​#​ .as116 > *, #​#​#​#​#​#​#​#​#​#​ .as116::before, #​#​#​#​#​#​#​#​#​#​ .as116::after {
--s1-padding-right-ref: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as116 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-right: var(--s-1exq009);
}
@media (max-width: 800px) {
#​#​#​#​#​#​#​#​#​#​ .as14k {
max-width: var(--y5bp6f);
}
}
#​#​#​#​#​#​#​#​#​#​ .as145 { text-transform: capitalize; }
#​#​#​#​#​#​#​#​#​#​ .as14s:not(:first-child) { margin-top: 20px; }
#​#​#​#​#​#​#​#​#​#​ .as14t {
max-width: calc(100% - 2px);
}
#​#​#​#​#​#​#​#​#​#​ .as15c > *, #​#​#​#​#​#​#​#​#​#​ .as15c::before, #​#​#​#​#​#​#​#​#​#​ .as15c::after {
--s1-padding-left-ref: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as15c {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-left: 0;
}
#​#​#​#​#​#​#​#​#​#​ .as14 { text-decoration: none; }
#​#​#​#​#​#​#​#​#​#​ .as12d { overflow-y: auto; }
#​#​#​#​#​#​#​#​#​#​ .as157 { counter-reset: undefined; }
#​#​#​#​#​#​#​#​#​#​ .as11o:active { border-color: var(--rlq803); }
#​#​#​#​#​#​#​#​#​#​ .as14z { text-transform: uppercase; }
#​#​#​#​#​#​#​#​#​#​ .as114 {
min-height: var(--s-1ne0mse);
}
#​#​#​#​#​#​#​#​#​#​ .as12k { font-weight: 700; }
#​#​#​#​#​#​#​#​#​#​ .as13m { border-width: var(--s-1vfb1y8); }
#​#​#​#​#​#​#​#​#​#​ .as156 { column-gap: 1em; }
#​#​#​#​#​#​#​#​#​#​ .as122 { border-style: var(--s-128y0wy); }
#​#​#​#​#​#​#​#​#​#​ .as12v:hover { border-color: var(--n6ta3v); }
#​#​#​#​#​#​#​#​#​#​ .as12f > *, #​#​#​#​#​#​#​#​#​#​ .as12f::before, #​#​#​#​#​#​#​#​#​#​ .as12f::after {
--s1-line-height-ref: 20px;
}
#​#​#​#​#​#​#​#​#​#​ .as12f > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as12f {
--s1-line-height: 20px;line-height: 20px;
}
#​#​#​#​#​#​#​#​#​#​ .as147 { margin-bottom: var(--s-19xjsri); }
#​#​#​#​#​#​#​#​#​#​ .as12c > *, #​#​#​#​#​#​#​#​#​#​ .as12c::before, #​#​#​#​#​#​#​#​#​#​ .as12c::after {
--s1-padding-bottom-ref: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as12c {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-bottom: var(--wakwuf);
}
#​#​#​#​#​#​#​#​#​#​ .as1x { transition-duration: var(--s-6jad4q); }
#​#​#​#​#​#​#​#​#​#​ .as13v { background-color: var(--jw7pn6); }
#​#​#​#​#​#​#​#​#​#​ .as14g > *, #​#​#​#​#​#​#​#​#​#​ .as14g::before, #​#​#​#​#​#​#​#​#​#​ .as14g::after {
--s1-padding-bottom-ref: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as14g {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-bottom: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as15e > *, #​#​#​#​#​#​#​#​#​#​ .as15e::before, #​#​#​#​#​#​#​#​#​#​ .as15e::after {
--s1-padding-top-ref: var(--s-68055w);
}
#​#​#​#​#​#​#​#​#​#​ .as15e {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-top: var(--s-68055w);
}
#​#​#​#​#​#​#​#​#​#​ .as139 > *, #​#​#​#​#​#​#​#​#​#​ .as139::before, #​#​#​#​#​#​#​#​#​#​ .as139::after {
--s1-padding-right-ref: var(--qv7n20);
}
#​#​#​#​#​#​#​#​#​#​ .as139 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-right: var(--qv7n20);
}
#​#​#​#​#​#​#​#​#​#​ .as13g > *, #​#​#​#​#​#​#​#​#​#​ .as13g::before, #​#​#​#​#​#​#​#​#​#​ .as13g::after {
--s1-padding-top-ref: var(--s-157v8v7);
}
#​#​#​#​#​#​#​#​#​#​ .as13g {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-top: var(--s-157v8v7);
}
#​#​#​#​#​#​#​#​#​#​ .as14q { border-collapse: separate; }
#​#​#​#​#​#​#​#​#​#​ .as142 { background-color: #151C3E; }
@media (max-width: 800px) { #​#​#​#​#​#​#​#​#​#​ .as14l { margin-left: var(--s-5ofbw3); } }
#​#​#​#​#​#​#​#​#​#​ .as15a { margin-top: var(--s-1bqi3k5); }
#​#​#​#​#​#​#​#​#​#​ .as14u { margin-bottom: var(--s-157v8v7); }
#​#​#​#​#​#​#​#​#​#​ .as14c { margin-top: var(--s-5ofbw3); }
#​#​#​#​#​#​#​#​#​#​ .as13h { margin-top: var(--s-1kewenr); }
#​#​#​#​#​#​#​#​#​#​ .as15f > *, #​#​#​#​#​#​#​#​#​#​ .as15f::before, #​#​#​#​#​#​#​#​#​#​ .as15f::after {
--s1-padding-bottom-ref: var(--s-68055w);
}
#​#​#​#​#​#​#​#​#​#​ .as15f {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-bottom: var(--s-68055w);
}
#​#​#​#​#​#​#​#​#​#​ .as16 { font-weight: inherit; }
#​#​#​#​#​#​#​#​#​#​ .as118 > *, #​#​#​#​#​#​#​#​#​#​ .as118::before, #​#​#​#​#​#​#​#​#​#​ .as118::after {
--s1-padding-bottom-ref: var(--s-1qxqza7);
}
#​#​#​#​#​#​#​#​#​#​ .as118 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-bottom: var(--s-1qxqza7);
}
#​#​#​#​#​#​#​#​#​#​ .as11u { margin-top: calc(((calc((calc(var(--s1-font-size-ref) * var(--s1-ascender-ref)) + calc(var(--s1-font-size-ref) * var(--s1-descender-ref)) + var(--s1-line-height-ref)) / 2) - var(--s1-object-height, calc((calc(var(--s1-font-size) * var(--s1-ascender)) + calc(var(--s1-font-size) * var(--s1-descender)) + var(--s1-line-height)) / 2))) - var(--s1-padding-top) - 0.5px) * var(--s1-baseline-multiplier) * var(--s1-font-metrics-multiplier) * clamp(0, 10000 * var(--s1-ascender-ref), 1)); }
#​#​#​#​#​#​#​#​#​#​ .as14d > *, #​#​#​#​#​#​#​#​#​#​ .as14d::before, #​#​#​#​#​#​#​#​#​#​ .as14d::after {
--s1-padding-top-ref: var(--s-5ofbw3);
}
#​#​#​#​#​#​#​#​#​#​ .as14d {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-top: var(--s-5ofbw3);
}
#​#​#​#​#​#​#​#​#​#​ .as12b > *, #​#​#​#​#​#​#​#​#​#​ .as12b::before, #​#​#​#​#​#​#​#​#​#​ .as12b::after {
--s1-padding-top-ref: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as12b {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-top: var(--s-1exq009);
}
#​#​#​#​#​#​#​#​#​#​ .as11j:hover:not(:active) { border-color: var(--s-1sj7mqq); }
#​#​#​#​#​#​#​#​#​#​ .as128 {
min-width: var(--s-5ofbw3);
}
#​#​#​#​#​#​#​#​#​#​ .as14y > *, #​#​#​#​#​#​#​#​#​#​ .as14y::before, #​#​#​#​#​#​#​#​#​#​ .as14y::after {
--s1-font-size-ref: 13px;
}
#​#​#​#​#​#​#​#​#​#​ .as14y > * {
--s1-font-metrics-multiplier: 1;
}
#​#​#​#​#​#​#​#​#​#​ .as14y {
--s1-font-size: 13px;font-size: 13px;
}
#​#​#​#​#​#​#​#​#​#​ .as132 { margin-right: var(--wakwuf); }
#​#​#​#​#​#​#​#​#​#​ .as137 > *, #​#​#​#​#​#​#​#​#​#​ .as137::before, #​#​#​#​#​#​#​#​#​#​ .as137::after {
--s1-padding-bottom-ref: var(--a3jq3a);
}
#​#​#​#​#​#​#​#​#​#​ .as137 {
padding: var(--s1-padding-top) var(--s1-padding-right) var(--s1-padding-bottom) var(--s1-padding-left);--s1-padding-bottom: var(--a3jq3a);
}
#​#​#​#​#​#​#​#​#​#​ .as11a { border-color: var(--s-7bxd58); }
#​#​#​#​#​#​#​#​#​#​ .as1j { border-radius: var(--s-18c2hzb); }
#​#​#​#​#​#​#​#​#​#​ .as12x { border-color: var(--n6ta3v); }
#​#​#​#​#​#​#​#​#​#​ .as151 { border-color: var(--s-1ey9fwj); }
#​#​#​#​#​#​#​#​#​#​ .as14x { text-align: left; }
#​#​#​#​#​#​#​#​#​#​ .as14e { font-weight: var(--s-411eab); }
#​#​#​#​#​#​#​#​#​#​ .as154:last-child { border-right-width: var(--s-1vfb1y8); }
#​#​#​#​#​#​#​#​#​#​ .as148 { border-left-width: var(--s-90vaui); }
#​#​#​#​#​#​#​#​#​#​ .as153:first-child { border-left-width: var(--s-1vfb1y8); }
#​#​#​#​#​#​#​#​#​#​ .as149 { border-left-style: var(--s-128y0wy); }
#​#​#​#​#​#​#​#​#​#​ .as152 { border-bottom-width: var(--s-1vfb1y8); }
#​#​#​#​#​#​#​#​#​#​ .as1y { transition-timing-function: var(--s-5b7tpa); }
#​#​#​#​#​#​#​#​#​#​ .as121 { border-right-width: var(--s-1vfb1y8); }
#​#​#​#​#​#​#​#​#​#​ .as12y { border-top-width: 1px; }
.__sn-sheet-order { --order: 'a201lz25p,a10orfs98,a001pdj6dy,a101onkw2o,a201x73dxx,a2013meya3:2,a20o8q7l4,a10qaqzbh,a101wsrgwj,a101br62fw,a2010e8p8g,a10e8c2i8,a10nxht8,a10czyi7q,a10123priu:2,a1035b1fs:2,a201h1ywlh,a10vydl29,a101yoxu2x,a20x5ulad,a108yu10,a102n4njk:2,a1017ncrlb,a10apeln5,6001uctm5o:5,80012tgbtu,90015jd6p8:2,9005mz02i:2,a201n8ash7,a101f9gxzh,a201imlo78,a201os11fb,a20156gw78,a20921kgp,a30397nj0,a1016rhrk2:2,a10pjnceg,a201al8fdu,a001mo7cla,a0015jse61:9,a202siv7s,a20196zic5:2,a201s822ty:2,a20165flmy:2,a20ozoywb:2,a10n2tfod:2,a20x428sd,a201loc8kv,a107dij34,a101ficfj2,a001l4ebv,a00vbo98h,a201244xir,a00hy7zal,a003ria42,a20qqdpft,a10138uxvq,a1013ysgho,a001e2gkwl,a2018wajhd,a2020uin8,a10cooc3r,a101kuldkj,a001hdgjlz,a2011mxqn4,a10beqw7r,a20p53vk7,a201fmmis8,a001no7ds4,a104ew5og,a10gme1ni:2,a10sxv78s,a101nr4zyv:2,a30eldatj,a207lc7vt,a201p3fkij,a201pr4d5p:2,6001mnb39s:4,a00iejmxg:3,a1011rld2b,a20stvzx0,a10bhqzy3,a201pxb2xe:2,a20q0ccnt:2,a208te6nc:2,a201xbs9vq,a101vp7fh3:2,a208dqwwr:3,a20113v5b2,a0014klaeg:9,a201hnce8j:2,a101j9twtx,a202skar,a10qeupj1,a101d2eckz,a10nq245a:2,a10ou9kg2,a10zmvjqz,a101ibjiy3,a20189skj,a10wjoa1g,a101kxm4t4,a10g6f96i,a208ak0ty,a1015q0c9g,a20xjr9a8,a30wzsbp6,a10gsrpr6,a10j53u97,a201hooctf,a20u0skxm,a1013rvzbu:2,a10pgcyes,a1040y09j,a201gh1r3c:2,a20voilnr:2,a201eezjyf:2,a20elmrwn:2,a10a0ziau,a001uvxebw:9,a10108pauw:2,a101xp56if,a101k05ru:2,a00eytfd6:9,a20elzdkk:2,a20n1pqnk,6011l934qa,a10rl7tu2:2,90017hpo94:2,a201gwrhd7,a204s5eq5,a10tg08b7,a117usvge,a101ow6zor:2,a005euduo,a011ajjw7k,9001y7rptp:2,900iuyu6e:2,a106xwgcv:2,a2094arms,a1049hlme,a10ua3c0c,a10eo7tj9:2,9004avrmy:2,a10120l7dt:206,a101al0k6e,a20gy5e6j,a201ipkd5k,a101o6n08z:2,a201tug1x3,a201eazqbs,a208k0pl,a30129iikw,a301dk58xx,a201997op6,a201glty7s,a20lqatc3,a20pmwgkm:2,a20zxpp2z,a0051ijgm:9,a20buyijp:2,a2010mly6l,a10trvfj1,8001krzxc2,a201tmfqjc,a20h3tf9h,a201m54wrp,a201i3b61r,a201jtbt56,a2018xw74c,a20f4dqsh,a201mr4uhi,a201ugryp5,a201uyi949,a20i7qgno,a2011vv77o,a201pyxv02,a20yj4gxb,a20tdp6iy:3,a202hgpy4,a10n2vnlc:2,a20y8eymc,a301tb648r,a301a5kqdv,a3010ce1cs,a201nfs6xl,a207fnmgb,a201yc4v19,a201h4hm9a,a00qj76pe:9,a20h989rr,a2012ja96a,a201vksz5n:2,a108zcmne,a20cwtz3t:2,a20n3yyd8:2,a001tpsrp5:9'; }</style>
        </head>
        <body >
          <div id="root"><div class="sn-1slzz8u sn-ymfoco"><div class="⚙ ⚙"><div class="Shell Shell-loaded Sidebar--expanded sn-token-provider ⚙ t5q as10 as11 ⚙1bte1jh"><a href="#main-content" tabindex="1" class="⚙ rs10 rs11  as12 as13 as14 as15 as16 as17 as18 as19 as1a as1b as1c as1d as1e as1f as1g as1h as1i as1j as1k as1l as1m as1n ⚙82thdr">Skip to content</a><div class="Header Box-root Flex-flex Flex-direction--column Flex-justifyContent--spaceBetween"><div class="Header--small Box-root"><div class="MobileNav Box-root"><button class="UnstyledLink MobileNav-button" type="button"><div class="Box-root Flex-flex Flex-alignItems--center"><div class="Box-root Margin-right--8 Margin-left--8"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--mobilenav Icon-color Icon-color--gray600 Box-root Flex-flex"><svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--mobilenav-svg Icon-color-svg Icon-color--gray600-svg" height="12" width="12"><path d="M0 4a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm1 3a1 1 0 100 2h14a1 1 0 100-2H1z" fill="#4F566B"></path></svg></div></div><span style="overflow:hidden;white-space:nowrap;text-overflow:ellipsis" class="Text-color--dark Text-fontSize--16 Text-fontWeight--medium Text-lineHeight--24 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Build a subscriptions integration</span></div></button></div><div class="Header-buttons--small MobileNavRightLink--loggedOutWrapper Box-root Padding-right--8 Padding-left--16 Flex-flex Flex-alignItems--center"><a class="UnstyledLink ButtonLink MobileNavRightLink--loggedOutButtonLink Flex-flex" href="https://dashboard.stripe.com/register/billing"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><span style="margin-top:-1px" class="ButtonLink-label Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">Create account</span></div></div></a> or <a class="UnstyledLink ButtonLink MobileNavRightLink--loggedOutButtonLink Flex-flex" href="https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fbilling%2Fsubscriptions%2Fbuild-subscriptions"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><span style="margin-top:-1px" class="ButtonLink-label Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">Sign in</span></div></div></a></div></div><div class="Header--full Box-root"><div class="Header-top Box-root Box-background--offset Margin-left--4 Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div class="Box-root Box-background--offset Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart" style="flex-basis:25%;flex-shrink:0"><a class="UnstyledLink InlineLink Text-color--blue" href="/"><div class="Box-root Padding-all--20" style="margin-bottom:-1px"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px"><div class="Box-root Box-hideIfEmpty Margin-left--4" style="pointer-events:auto"><svg width="121" height="25" viewBox="0 0 943 187" fill="none" xmlns="http://www.w3.org/2000/svg"><title>The Stripe Docs logo</title><path fill-rule="evenodd" clip-rule="evenodd" d="M447 96.1048C447 64.3182 431.603 39.2366 402.176 39.2366C372.624 39.2366 354.744 64.3182 354.744 95.8565C354.744 133.231 375.852 152.104 406.149 152.104C420.925 152.104 432.1 148.751 440.543 144.033V119.2C432.1 123.421 422.415 126.029 410.122 126.029C398.078 126.029 387.4 121.807 386.034 107.156H446.752C446.752 105.541 447 99.0848 447 96.1048ZM385.662 84.309C385.662 70.2782 394.229 64.4424 402.052 64.4424C409.626 64.4424 417.697 70.2782 417.697 84.309H385.662Z" fill="#0A2540"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M306.816 39.2366C294.648 39.2366 286.825 44.9482 282.48 48.9216L280.865 41.2232H253.549V186.001L284.59 179.42L284.715 144.281C289.185 147.51 295.765 152.104 306.692 152.104C328.918 152.104 349.157 134.224 349.157 94.8631C349.033 58.8549 328.545 39.2366 306.816 39.2366ZM299.366 124.787C292.04 124.787 287.695 122.18 284.715 118.951L284.59 72.8857C287.819 69.2848 292.289 66.8015 299.366 66.8015C310.665 66.8015 318.488 79.4665 318.488 95.7323C318.488 112.371 310.79 124.787 299.366 124.787Z" fill="#0A2540"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M210.835 31.9108L242.001 25.2058V0L210.835 6.58082V31.9108Z" fill="#0A2540"></path><path d="M242.001 41.3474H210.835V149.993H242.001V41.3474Z" fill="#0A2540"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M177.435 50.5357L175.448 41.3474H148.628V149.993H179.67V76.3624C186.995 66.8015 199.412 68.5399 203.261 69.9057V41.3474C199.288 39.8574 184.76 37.1258 177.435 50.5357Z" fill="#0A2540"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M115.351 14.4033L85.0539 20.86L84.9297 120.317C84.9297 138.694 98.7122 152.228 117.089 152.228C127.271 152.228 134.721 150.366 138.818 148.131V122.925C134.845 124.539 115.226 130.251 115.226 111.874V67.7949H138.818V41.3474H115.226L115.351 14.4033Z" fill="#0A2540"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M31.4142 72.8857C31.4142 68.0432 35.3875 66.1807 41.9683 66.1807C51.405 66.1807 63.325 69.0365 72.7617 74.1273V44.9482C62.4558 40.8507 52.2742 39.2366 41.9683 39.2366C16.7625 39.2366 0 52.3982 0 74.3757C0 108.646 47.1833 103.182 47.1833 117.958C47.1833 123.67 42.2167 125.532 35.2633 125.532C24.9575 125.532 11.7958 121.311 1.36583 115.599V145.151C12.9133 150.117 24.585 152.228 35.2633 152.228C61.09 152.228 78.8458 139.439 78.8458 117.213C78.7217 80.2115 31.4142 86.7923 31.4142 72.8857Z" fill="#0A2540"></path><path d="M502.828 150H541.36C576.616 150 598.144 128.16 598.144 93.9959C598.144 59.8319 576.616 37.9919 541.36 37.9919H502.828V150ZM525.292 130.344V57.6479H541.204C563.044 57.6479 575.524 71.8439 575.524 93.9959C575.524 115.992 563.044 130.344 541.36 130.344H525.292Z" fill="#556CD6"></path><path d="M617.021 93.9959C617.021 127.848 639.173 151.716 670.061 151.716C700.793 151.716 722.945 127.848 722.945 93.9959C722.945 60.1439 700.793 36.2759 670.061 36.2759C639.173 36.2759 617.021 60.1439 617.021 93.9959ZM699.857 93.9959C699.857 116.928 687.533 131.592 670.061 131.592C652.433 131.592 640.109 116.928 640.109 93.9959C640.109 71.0639 652.433 56.3999 670.061 56.3999C687.533 56.3999 699.857 71.0639 699.857 93.9959Z" fill="#556CD6"></path><path d="M763.879 93.9959C763.879 71.2199 775.892 56.3999 793.052 56.3999C805.22 56.3999 814.112 64.0439 817.232 76.5239L838.759 69.3479C832.207 49.0679 816.296 36.2759 793.052 36.2759C762.788 36.2759 740.792 60.1439 740.792 93.9959C740.792 127.848 762.788 151.716 793.052 151.716C816.296 151.716 832.207 138.924 838.759 118.644L817.232 111.468C814.112 123.948 805.22 131.592 793.052 131.592C775.892 131.592 763.879 116.772 763.879 93.9959Z" fill="#556CD6"></path><path d="M851.06 129.564C860.108 143.136 879.764 151.716 898.64 151.716C922.508 151.716 942.476 138.144 942.476 115.524C942.476 91.0319 920.636 86.5079 902.852 82.6079C888.188 79.3319 880.076 77.6159 880.076 68.8799C880.076 60.7679 887.564 55.4639 898.484 55.4639C910.964 55.4639 919.7 61.7039 926.252 70.9079L941.384 56.0879C933.584 44.8559 918.452 36.2759 899.108 36.2759C875.864 36.2759 857.456 49.6919 857.456 71.0639C857.456 93.2159 875.552 98.5199 892.244 102.42C909.092 106.164 919.7 107.568 919.7 117.864C919.7 127.38 911.12 132.528 899.42 132.528C887.096 132.528 875.084 125.976 866.816 114.276L851.06 129.564Z" fill="#556CD6"></path></svg></div></div></div></div></a></div><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--center"><a class="sn-1vwnd89 sn-1vwnd89-disabled-false sn-1vwnd89-pressed-false sn-1sklbmg sn-1d3r5le sn-1a8bmlv sn-1hi09z2 sn-1ldpfz2 sn-15bbs9a sn-oam45h" tabindex="0" role="button"><svg class="sn-1mj7mtw sn-1mj7mtw-size-xsmall sn-1d1lbgb" aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.579 11.816a6 6 0 1 1 1.238-1.238l3.427 3.428a.875.875 0 1 1-1.238 1.238l-3.427-3.428ZM11.25 7a4.25 4.25 0 1 1-8.5 0 4.25 4.25 0 0 1 8.5 0Z"></path></svg><div class="sn-1bu9ebj sn-1gnz4lb sn-gsc9hu"><div class="sn-1d3r5le sn-1a8bmlv sn-1815sgv"><div class="sn-1sklbmg sn-1d3r5le sn-1a8bmlv sn-pemo68 sn-e2owhy"><label for="react-aria-1" id="react-aria-4" class="sn-1sklbmg sn-pemo68 sn-1qebben">Search the docs or ask a question</label></div><div class="sn-1d3r5le sn-n505ii"><input type="text" tabindex="-1" placeholder="Search the docs or ask a question" class="sn-1euh7h0 sn-1euh7h0-invalid-false sn-1euh7h0-size-large sn-1ldpfz2 sn-1hi09z2 sn-187ps8u sn-41v2s4 sn-1wtty7i sn-1mtz54m sn-1f7ww87 sn-9eofcw sn-1t231v2" id="react-aria-1" aria-invalid="false" aria-labelledby="react-aria-4"/></div></div></div><kbd class="sn-1sklbmg sn-yee6io">/</kbd></a></div><div class="Box-root Padding-right--24 Padding-left--32 Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexEnd" style="flex-basis:25%;flex-shrink:0"><div data-testid="docs-header-logged-out-view" class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-24px;margin-top:-24px"><div class="Box-root Box-hideIfEmpty Margin-top--24 Margin-left--24" style="pointer-events:auto"><span class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline"><a class="UnstyledLink InlineLink Text-color--blue" href="https://dashboard.stripe.com/register/billing">Create account</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--24 Margin-left--24" style="pointer-events:auto"><div class="PressableCore PressableCore--cursor--pointer PressableCore--height--medium PressableCore--radius--all PressableCore--width PressableCore--width--auto PressableButton Button Button--color--white Box-root Flex-inlineFlex" style="background-color:#ffffff;box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 1px 1px 0 rgba(0, 0, 0, 0.12),0 0 0 1px rgba(60, 66, 87, 0.16), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 2px 5px 0 rgba(60, 66, 87, 0.08)"><div class="PressableCore-base Box-root"><a target="_self" data-testid="docs-sign-in-button-selector" class="UnstyledLink Button-element PressableContext Padding-horizontal--8 Padding-vertical--4 PressableContext--cursor--pointer PressableContext--display--inlineFlex PressableContext--fontLineHeight--20 PressableContext--fontSize--14 PressableContext--fontWeight--medium PressableContext--height PressableContext--height--medium PressableContext--radius--all PressableContext--width PressableContext--width--auto" href="https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fbilling%2Fsubscriptions%2Fbuild-subscriptions" style="color:#3c4257"><div class="Button-align Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--center" style="width:100%;line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><span style="margin-top:-1px" class="Button-label Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">Sign in</span></div></div></a></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div></div></div></div></div></div><div data-db-analytics-name="docs_top_right_nav" class="Header-collapsable Box-root Box-background--offset Box-divider--light-bottom-1 Padding-left--24 Flex-flex Flex-alignItems--flexEnd Flex-justifyContent--spaceBetween"><div class="Header-menu Header-menu--widest Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div role="tablist" class="ContentTabs Box-root Box-divider--light-bottom-1 Flex-flex"><div data-testid="docs-header-get-started-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="1" aria-selected="false" aria-setsize="6" class="UnstyledLink ContentTab-link" href="/get-started" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Get started</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-payments-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="2" aria-selected="false" aria-setsize="6" class="UnstyledLink ContentTab-link" href="/payments" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Payments</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-finance-automation-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="3" aria-selected="false" aria-setsize="6" class="UnstyledLink ContentTab-link" href="/finance-automation" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Header-tab-text-active Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Finance automation</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-banking-as-a-service-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="4" aria-selected="false" aria-setsize="6" class="UnstyledLink ContentTab-link" href="/financial-services" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Banking as a service</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-developer-tools-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="5" aria-selected="false" aria-setsize="6" class="UnstyledLink ContentTab-link" href="/development" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Developer tools</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-no-code-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="6" aria-selected="false" aria-setsize="6" class="UnstyledLink ContentTab-link" href="/no-code" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">No-code</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div></div></div></div></div><div class="Header-menu Header-menu--skinny Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div role="tablist" class="ContentTabs Box-root Box-divider--light-bottom-1 Flex-flex"><div data-testid="docs-header-get-started-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="1" aria-selected="false" aria-setsize="3" class="UnstyledLink ContentTab-link" href="/get-started" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Get started</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-payments-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="2" aria-selected="false" aria-setsize="3" class="UnstyledLink ContentTab-link" href="/payments" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Payments</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-finance-automation-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="3" aria-selected="false" aria-setsize="3" class="UnstyledLink ContentTab-link" href="/finance-automation" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Header-tab-text-active Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Finance automation</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-5" style="user-select:none" class="⚙ rs10 rs11 rs12 rs13 rs11 rs10 rs14 rs15  as12 as13 as14 as1o as1p as1q as1r as1s as1t as1u as1v as1w as1x as1y as1z as110 as111 as112 as113 as114 as115 as116 as117 as118 as119 as11a as11b as11c as11d as11e as11f as11g as11h as11i as11j as11k as11l as11m as11n as11o as11p as11q as11r as11s as11t ⚙1usdgrv"><svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as11x as11y as11z ⚙8816m6"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5.5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm-11 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path></svg></a></div></div></div><div class="Header-menu Header-menu--wide Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div role="tablist" class="ContentTabs Box-root Box-divider--light-bottom-1 Flex-flex"><div data-testid="docs-header-get-started-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="1" aria-selected="false" aria-setsize="5" class="UnstyledLink ContentTab-link" href="/get-started" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Get started</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-payments-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="2" aria-selected="false" aria-setsize="5" class="UnstyledLink ContentTab-link" href="/payments" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Payments</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-finance-automation-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="3" aria-selected="false" aria-setsize="5" class="UnstyledLink ContentTab-link" href="/finance-automation" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Header-tab-text-active Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Finance automation</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-banking-as-a-service-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="4" aria-selected="false" aria-setsize="5" class="UnstyledLink ContentTab-link" href="/financial-services" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Banking as a service</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div><div data-testid="docs-header-developer-tools-tab-selector" class="ContentTab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><a aria-posinset="5" aria-selected="false" aria-setsize="5" class="UnstyledLink ContentTab-link" href="/development" role="tab" tabindex="-1"><div class="ContentTab-inner Box-root Margin-right--12 Padding-horizontal--0 Padding-vertical--4"><span class="Text-color--gray Text-align--center Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><span class="Header-tab-text Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Developer tools</span> </span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></a></div></div></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-7" style="user-select:none" class="⚙ rs10 rs11 rs12 rs13 rs11 rs10 rs14 rs15  as12 as13 as14 as1o as1p as1q as1r as1s as1t as1u as1v as1w as1x as1y as1z as110 as111 as112 as113 as114 as115 as116 as117 as118 as119 as11a as11b as11c as11d as11e as11f as11g as11h as11i as11j as11k as11l as11m as11n as11o as11p as11q as11r as11s as11t ⚙1usdgrv"><svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as11x as11y as11z ⚙8816m6"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5.5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm-11 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path></svg></a></div></div></div><div class="Box-root Margin-right--24" style="pointer-events:none;margin-bottom:10px"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-24px;margin-top:-24px"><div class="Box-root Box-hideIfEmpty Margin-top--24 Margin-left--24" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink ButtonLink IconParent Flex-flex" type="button"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--rowReversed" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--rowReversed Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronDown Icon-color Icon-color--gray700 Box-root Margin-left--4 Flex-flex" style="transform:translateY(1.08px)"><svg margin="[object Object]" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronDown-svg Icon-color-svg Icon-color--gray700-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 4.381a.875.875 0 0 1 1.238 0L8 10.763l6.381-6.382A.875.875 0 1 1 15.62 5.62l-7 7a.875.875 0 0 1-1.238 0l-7-7a.875.875 0 0 1 0-1.238Z"></path></svg></div><span style="margin-top:-1px" class="ButtonLink-label Text-color--gray700 Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">APIs &amp; SDKs</span></div></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--24 Margin-left--24" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink ButtonLink IconParent Flex-flex" type="button"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--rowReversed" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--rowReversed Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronDown Icon-color Icon-color--gray700 Box-root Margin-left--4 Flex-flex" style="transform:translateY(1.08px)"><svg margin="[object Object]" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronDown-svg Icon-color-svg Icon-color--gray700-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 4.381a.875.875 0 0 1 1.238 0L8 10.763l6.381-6.382A.875.875 0 1 1 15.62 5.62l-7 7a.875.875 0 0 1-1.238 0l-7-7a.875.875 0 0 1 0-1.238Z"></path></svg></div><span style="margin-top:-1px" class="ButtonLink-label Text-color--gray700 Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">Help</span></div></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--24 Margin-left--24" style="pointer-events:auto"></div></div></div></div></div></div><div class="Shell-container Box-root Flex-flex"><div class="SidebarContainer ⚙  as120 as1t ⚙yavp1c" data-db-analytics-name="docs_sidebar"><div class="⚙ rs12 as1t as121 as122 as123 as124 as125 as120 as126 as127 as1b as128 as129 ⚙3g4wyx"><div class="⚙  as1t as129 as115 as12a as12b as12c as12d as120 ⚙1wblbtv"><div style="opacity:1"><div class="sn-1d3r5le sn-1a8bmlv sn-1sklbmg sn-1wxqwr8"><a data-testid="docs-sidebar-node-link" href="/finance-automation" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12j ⚙1jkyktu"><span class="⚙">Overview</span></a><div data-testid="docs-sidebar-null-product-selector"><a data-testid="docs-sidebar-node-link" aria-current="true" title="Build and scale your recurring business model" class="⚙ rs12 rs11 as1o as12e as13 as12f as12k as12h as12j as12l ⚙8ok1q2"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown open" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 4.381a.875.875 0 0 1 1.238 0L8 10.763l6.381-6.382A.875.875 0 1 1 15.62 5.62l-7 7a.875.875 0 0 1-1.238 0l-7-7a.875.875 0 0 1 0-1.238Z"></path></svg><span class="⚙"><span>Billing</span></span></a><div style="opacity:1;height:auto;transform:none"><ul data-testid="subtree" class="sn-1d3r5le sn-1a8bmlv sn-1sklbmg sn-1rnuivo"><div data-testid="docs-sidebar-item-Overview-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Overview</span></span></a></div><div data-testid="docs-sidebar-item-About the Billing APIs-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/billing-apis" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>About the Billing APIs</span></span></a></div><div data-testid="docs-sidebar-item-Subscriptions-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/subscriptions" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown open" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 4.381a.875.875 0 0 1 1.238 0L8 10.763l6.381-6.382A.875.875 0 1 1 15.62 5.62l-7 7a.875.875 0 0 1-1.238 0l-7-7a.875.875 0 0 1 0-1.238Z"></path></svg><span class="⚙"><span>Subscriptions</span></span></a><div class="sn-r1day4"><div style="opacity:1;height:auto;transform:none"><ul data-testid="subtree" class="sn-1d3r5le sn-1a8bmlv sn-1sklbmg sn-1rnuivo"><div data-testid="docs-sidebar-item-Overview-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/overview" title="Learn about the lifecycles of Stripe Billing’s subscriptions and invoices" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Overview</span></span></a></div><div data-testid="docs-sidebar-item-Quickstart-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/quickstart" title="Quickstart" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Quickstart</span></span></a></div><div data-testid="docs-sidebar-item-Use cases-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/use-cases" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Use cases</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Build your integration-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/integration" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown open" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 4.381a.875.875 0 0 1 1.238 0L8 10.763l6.381-6.382A.875.875 0 1 1 15.62 5.62l-7 7a.875.875 0 0 1-1.238 0l-7-7a.875.875 0 0 1 0-1.238Z"></path></svg><span class="⚙"><span>Build your integration</span></span></a><div class="sn-r1day4"><div style="opacity:1;height:auto;transform:none"><ul data-testid="subtree" class="sn-1d3r5le sn-1a8bmlv sn-1sklbmg sn-1rnuivo"><div data-testid="docs-sidebar-item-Design a subscriptions integration-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/designing-integration" title="Learn what choices you need to make for integrating subscriptions into your business" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Design a subscriptions integration</span></span></a></div><div data-testid="docs-sidebar-item-Build a subscriptions integration-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" aria-current="true" title="Create and manage subscriptions to accept recurring payments" class="⚙ rs12 rs11  as1o as12e as13 as12f as12r as12h as12i as12s as12t as12u as12v as12w as12x ⚙1g12s9p"><span class="⚙"><span>Build a subscriptions integration</span></span></a></div><div data-testid="docs-sidebar-item-Integrate with Salesforce-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/integrations/salesforce" title="Leverage Stripe seamlessly through your Salesforce workflows and processes" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Integrate with Salesforce</span></span></a></div><div data-testid="docs-sidebar-item-Subscription webhooks-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/webhooks" title="Learn to use webhooks to receive notifications of subscription activity" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Subscription webhooks</span></span></a></div></ul></div></div></div><div data-testid="docs-sidebar-item-Subscription features-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/features" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Subscription features</span></span></a><div class="sn-r1day4"></div></div></ul></div></div></div><div data-testid="docs-sidebar-item-Invoicing-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/invoicing" title="Create and manage invoices for one-time payments" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Invoicing</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Usage-based Billing-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/subscriptions/usage-based" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Usage-based Billing</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Connect and Billing-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/multi-entity-business" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Connect and Billing</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Tax and Billing-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/taxes" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Tax and Billing</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Quotes-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/quotes" title="Learn about quotes" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Quotes</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Revenue recovery-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/revenue-recovery" title="Learn about automated revenue recovery features for subscriptions" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Revenue recovery</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Automations-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/automations" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Automations</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Revenue recognition-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/revenue-recognition/methodology/subscriptions-and-invoicing" title="Use Revenue Recognition with subscriptions" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Revenue recognition</span></span></a></div><div data-testid="docs-sidebar-item-Customer management-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/customer-management" title="Learn how to enable self-serve customer management" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Customer management</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Entitlements-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/entitlements" title="Determine when you can grant your customers access to your product&#x27;s features and when to revoke access." class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Entitlements</span></span></a></div><div data-testid="docs-sidebar-item-Test your integration-selector" aria-hidden="false" class="sn-ic9kkx"><a data-testid="docs-sidebar-node-link" href="/billing/testing" title="Test your billing integration" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12p as12q as12l ⚙ott5dw"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Test your integration</span></span></a><div class="sn-r1day4"></div></div><div data-testid="docs-sidebar-item-Invoices API updates-selector" aria-hidden="true" class="sn-1x2oozu"><a data-testid="docs-sidebar-node-link" href="/billing/migration/invoice-states" class="⚙ rs12 rs11  as1o as12e as13 as12f as12g as12h as12i as12p as12q as12l ⚙1j0wcml"><span class="⚙"><span>Invoices API updates</span></span></a></div></ul></div></div><div data-testid="docs-sidebar-tax-product-selector"><a data-testid="docs-sidebar-node-link" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12j ⚙t2kl89"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Tax</span></span></a></div><div data-testid="docs-sidebar-null-product-selector"><a data-testid="docs-sidebar-node-link" title="Analyze the Stripe data related to your recurring revenue business." class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12j ⚙t2kl89"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Reporting</span></span></a></div><div data-testid="docs-sidebar-null-product-selector"><a data-testid="docs-sidebar-node-link" title="Stripe data" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12j ⚙t2kl89"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Data</span></span></a></div><div data-testid="docs-sidebar-atlas-product-selector"><a data-testid="docs-sidebar-node-link" title="Turn your idea into a startup" class="⚙ rs12 rs11 as1o as12e as13 as12f as12g as12h as12j ⚙t2kl89"><svg data-testid="docs-sidebar-node-chevron" role="img" aria-hidden="false" aria-label="Dropdown closed" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙    as11u as11v as11w as1p as12m as12n as12o as13 ⚙2fmxew"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.381.381a.875.875 0 0 0 0 1.238L10.763 8 4.38 14.381a.875.875 0 1 0 1.24 1.239l7-7a.875.875 0 0 0 0-1.238l-7-7a.875.875 0 0 0-1.238 0Z"></path></svg><span class="⚙"><span>Startup incorporation</span></span></a></div></div></div></div><div class="⚙ rs12 as125 as12e as1f as12y as122 as123 as129 ⚙t2vzoc"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><div style="outline:none" tabindex="-1"><button color="gray" aria-controls="menu13" aria-haspopup="menu" id="menu13-button" aria-label="Change the country setting" type="button" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div title="US" class="SVGInline SVGInline--cleaned SVG Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg class="SVGInline-svg SVGInline--cleaned-svg SVG-svg" height="16" width="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd"><path fill="#E25950" fill-rule="nonzero" d="M14 14H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"></path><path fill="#F6F9FC" fill-rule="nonzero" d="M0 11h16v1H0v-1Zm14 3H2a2 2 0 0 1-1.732-1h15.464A2 2 0 0 1 14 14ZM0 9h16v1H0V9Zm8-2h8v1H8V7Zm0-2h8v1H8V5Zm0-2h7.723c.171.295.277.634.277 1H8V3Z"></path><path fill="#E25950" fill-rule="nonzero" d="M14 14H2a2 2 0 0 1-2-2V8h1v4a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H8V2h6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z" opacity="0.1"></path><path fill="#43458B" fill-rule="nonzero" d="M0 8V3.714C0 2.768.796 2 1.778 2H8v6H0Z"></path><path fill="#FFF" fill-rule="nonzero" d="M7.026 5.501a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM5.518 5a.5.5 0 1 1-.038-1 .5.5 0 0 1 .038 1Zm-.492.501a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM3.518 5a.5.5 0 1 1-.038-1 .5.5 0 0 1 .038 1Zm-.492.501a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm4-2a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm-1.507 1.5a.5.5 0 1 1-.038-.999.5.5 0 0 1 .038 1Zm.014 1A.5.5 0 1 1 1.57 7a.5.5 0 0 1-.037-1Zm2 0A.5.5 0 1 1 3.57 7a.5.5 0 0 1-.037-1Zm2 0A.5.5 0 1 1 5.57 7a.5.5 0 0 1-.037-1Z"></path><path fill="#FFF" d="M6.533 7a.5.5 0 1 1 .037 1 .5.5 0 0 1-.037-1Zm-2 0a.5.5 0 1 1 .037 1 .5.5 0 0 1-.037-1Zm-2 0a.5.5 0 1 1 .037 1 .5.5 0 0 1-.037-1ZM.482 7a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0-2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0-2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm1-1a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm2 0a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm2 0a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm2 0a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0 2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0 2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Z" opacity="0.5"></path></g></svg></div><div class="Box-root Margin-left--2 Padding-left--8"><span style="margin-top:-1px" class="Text-color--gray Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block"><span style="white-space:nowrap">United States</span></span></div></div></div></button></div></div></div><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><div style="outline:none" tabindex="-1"><button aria-controls="menu14" aria-haspopup="menu" id="menu14-button" aria-label="Change the language setting" type="button" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--locale Icon-color Icon-color--gray Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 16 16" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--locale-svg Icon-color-svg Icon-color--gray-svg" height="16" width="16"><path d="M11.6 13.1l-2 2.5c-.3.3-.7.3-.9 0-.1-.1-.2-.3-.2-.5v-2c-2.5-.5-4-2.3-4-4.4 0-2.5 2.1-4.5 5.5-4.5s5.5 2 5.5 4.5c-.1 2.3-1.7 4.1-3.9 4.4z"></path></svg></div><div class="Box-root Margin-left--2 Padding-left--8"><span style="margin-top:-1px" class="Text-color--gray Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block"><span style="white-space:nowrap">English (United States)</span></span></div></div></div></button></div></div></div></div></div><a tabindex="0" role="button" class="⚙ rs10 rs11 rs10 as12 as13 as14 as15 as16 as12z as130 as17 as131 as132 ⚙eub4te"><svg aria-label="Click to collapse the sidebar and hide the navigation" aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12q as133 as134 as135 ⚙v4vk5p"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.125 1c.483 0 .875.392.875.875v12.25a.875.875 0 0 1-1.75 0V1.875c0-.483.392-.875.875-.875Zm-6.899.867c.35.333.363.887.03 1.237L3.418 7.125h6.706a.875.875 0 0 1 0 1.75H3.487l3.754 3.757a.875.875 0 1 1-1.238 1.236L.756 8.618a.873.873 0 0 1-.014-1.222l5.247-5.5a.875.875 0 0 1 1.237-.03Z"></path></svg></a></div><div class="Box-root" style="display:flex;width:100%;flex-flow:column nowrap;align-items:stretch;justify-content:flex-start;flex-grow:1"><div class="Content Box-root"><a id="main-content" tabindex="-1"></a><div class="Content-container Box-root"><div class="Content-articleContainer sn-token-provider ⚙  t5w as136 as137 as138 as139 as10 as13a ⚙u3y0ng"><div role="navigation" aria-label="Breadcrumbs" class="Breadcrumbs-container Box-root" style="pointer-events:none;padding-bottom:16px"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div class="Breadcrumbs Box-root"><span class="Breadcrumbs-link Text-color--gray Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Home" href="/" class="UnstyledLink">Home</a></span><span class="Breadcrumbs-link Text-color--gray Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Finance automation" href="/finance-automation" class="UnstyledLink">Finance automation</a></span><span class="Breadcrumbs-link Text-color--gray Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Billing" href="/billing" class="UnstyledLink">Billing</a></span><span class="Breadcrumbs-link Text-color--gray Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Subscriptions" href="/subscriptions" class="UnstyledLink">Subscriptions</a></span><span class="Breadcrumbs-link Text-color--gray Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Build your integration" href="/billing/subscriptions/integration" class="UnstyledLink">Build your integration</a></span></div></div></div></div><div class="Box-root Flex-flex Flex-direction--row"><div class="Content-article MarkdocContentWrapper Box-root"><article id="content" data-locale="en-US"><div class="Box-root Padding-bottom--24"><h1 data-testid="docs-markdoc-content-title" class="⚙ rs11 rs12 as13b as1o as13c as13d as13e ⚙18rg4dj">Build a subscriptions integration</h1><h2 data-testid="docs-markdoc-content-subtitle" class="⚙ rs11 as13f as13d as13g as13e ⚙ku9zlo">Create and manage subscriptions to accept recurring payments.</h2></div><div class="Document" data-testid="docs-content"><div class="AdvancedPageSelector Box-root"><fieldset class="Toggle"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-wrap--wrap"><div class="Box-root Padding-right--8"><label class="ToggleItem" for="ToggleItem-16"><div class="PressableCore PressableCore--cursor--pointer PressableCore--height--medium PressableCore--radius--all PressableCore--width PressableCore--width--auto PressableToggle Box-root Flex-inlineFlex" style="background-color:#ffffff;box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 2px #5469d4, 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><input type="radio" class="ToggleItem-source" id="ToggleItem-16" tabindex="0" checked="" name="Toggle-15"/><div class="ToggleItem-fill Box-root Padding-horizontal--8 Padding-vertical--4 Flex-flex Flex-alignItems--center Flex-direction--row" style="color:#5469d4"><span class="ToggleItem-label Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Web</span></div></div><div class="PressableCore-overlay PressableCore-overlay--extendBy2 Box-root Box-background--white"></div></div></label></div><div class="Box-root Padding-right--8"><label class="ToggleItem" for="ToggleItem-17"><div class="PressableCore PressableCore--cursor--pointer PressableCore--height--medium PressableCore--radius--all PressableCore--width PressableCore--width--auto PressableToggle Box-root Flex-inlineFlex" style="background-color:#ffffff;box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 1px rgba(60, 66, 87, 0.16), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><input type="radio" class="ToggleItem-source" id="ToggleItem-17" tabindex="0" name="Toggle-15"/><div class="ToggleItem-fill Box-root Padding-horizontal--8 Padding-vertical--4 Flex-flex Flex-alignItems--center Flex-direction--row" style="color:#3c4257"><span class="ToggleItem-label Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">iOS</span></div></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div></label></div><div class="Box-root Padding-right--8"><label class="ToggleItem" for="ToggleItem-18"><div class="PressableCore PressableCore--cursor--pointer PressableCore--height--medium PressableCore--radius--all PressableCore--width PressableCore--width--auto PressableToggle Box-root Flex-inlineFlex" style="background-color:#ffffff;box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 1px rgba(60, 66, 87, 0.16), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><input type="radio" class="ToggleItem-source" id="ToggleItem-18" tabindex="0" name="Toggle-15"/><div class="ToggleItem-fill Box-root Padding-horizontal--8 Padding-vertical--4 Flex-flex Flex-alignItems--center Flex-direction--row" style="color:#3c4257"><span class="ToggleItem-label Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Android</span></div></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div></label></div><div class="Box-root"><label class="ToggleItem" for="ToggleItem-19"><div class="PressableCore PressableCore--cursor--pointer PressableCore--height--medium PressableCore--radius--all PressableCore--width PressableCore--width--auto PressableToggle Box-root Flex-inlineFlex" style="background-color:#ffffff;box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 1px rgba(60, 66, 87, 0.16), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><input type="radio" class="ToggleItem-source" id="ToggleItem-19" tabindex="0" name="Toggle-15"/><div class="ToggleItem-fill Box-root Padding-horizontal--8 Padding-vertical--4 Flex-flex Flex-alignItems--center Flex-direction--row" style="color:#3c4257"><span class="ToggleItem-label Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">React Native</span></div></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div></label></div></div></fieldset><div class="Box-root Box-divider--light-bottom-1 Padding-top--16"><div role="tablist" class="ContentTabs Box-root Box-divider--light-bottom-1 Flex-flex"><div class="ContentTab Subselector-tab ContentTab--active Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><button aria-controls="content-Stripe-hosted page" aria-posinset="1" aria-selected="true" aria-setsize="3" class="UnstyledLink ContentTab-link" id="tab-Stripe-hosted page" role="tab" tabindex="0" type="button"><div class="ContentTab-inner ContentTab-inner--active ContentTab-inner--activeBottom Box-root Padding-horizontal--20 Padding-vertical--16"><span class="Text-color--blue Text-align--center Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text">Stripe-hosted page</span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></button></div></div></div><div class="ContentTab Subselector-tab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><button aria-controls="content-Embedded form" aria-posinset="2" aria-selected="false" aria-setsize="3" class="UnstyledLink ContentTab-link" id="tab-Embedded form" role="tab" tabindex="-1" type="button"><div class="ContentTab-inner Box-root Padding-horizontal--20 Padding-vertical--16"><span class="Text-color--gray Text-align--center Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text">Embedded form</span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></button></div></div></div><div class="ContentTab Subselector-tab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><button aria-controls="content-Custom flow" aria-posinset="3" aria-selected="false" aria-setsize="3" class="UnstyledLink ContentTab-link" id="tab-Custom flow" role="tab" tabindex="-1" type="button"><div class="ContentTab-inner Box-root Padding-horizontal--20 Padding-vertical--16"><span class="Text-color--gray Text-align--center Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text">Custom flow</span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></button></div></div></div></div></div></div><div role="tabpanel" id="content-Stripe-hosted page" aria-labelledby="tab-Stripe-hosted page" class="Page Box-root Padding-all--12" style="position:relative;overflow:hidden;margin-left:-12px;margin-right:-12px"><div class="Page--transition" style="z-index:1;opacity:1;position:relative;transform:none"><div class="ComplexityCallout ⚙ rs12 as13h as1o as13i as13j as13k as13l ⚙12490k4"><div class="ComplexityCallout-LeftComponent ⚙   as1j as13m as123 as122 as13n as13o as1z as1b ⚙9l1cte"><img src="https://b.stripecdn.com/docs-statics-srv/assets/checkout-subs-preview.d409ee79bf1f3280b9dfd3968b314c21.png" alt="Checkout subscription page" class="⚙"/></div><div class="ComplexityCallout-RightComponent ⚙ rs16 rs12 as1j as13m as123 as122 as13p as125 as13i as13q as13r as13s as13t as13c as13u as13v ⚙4kbx1d"><div class="⚙ rs12 as1o as13l as12e as1r ⚙16n0crd">Low code<div role="presentation" class="⚙ rs12 as1o as1s as1r ⚙1hvh3hv"><svg aria-hidden="true" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as13w as133 as134 ⚙o2g98p"><g fill-rule="evenodd"><g><circle cx="6" cy="6" r="4"></circle></g></g></svg><svg aria-hidden="true" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as13w as133 as134 ⚙o2g98p"><g fill-rule="evenodd"><g><circle cx="6" cy="6" r="4"></circle></g></g></svg><svg aria-hidden="true" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as13x as133 as134 ⚙ragzh6"><g fill-rule="evenodd"><g><circle cx="6" cy="6" r="4"></circle></g></g></svg><svg aria-hidden="true" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as13x as133 as134 ⚙ragzh6"><g fill-rule="evenodd"><g><circle cx="6" cy="6" r="4"></circle></g></g></svg></div></div><p>Customize logo, images, and colors.</p><p>Use prebuilt hosted forms to collect payments and manage <span><span><a title="subscriptions" class="UnstyledLink InlineLink Text-color--blue Glossary-term no-api-tag" href="/billing/subscriptions/creating">subscriptions</a></span></span>.</p><p>Clone a sample integration <a class="Link" href="https://github.com/stripe-samples/checkout-single-subscription"><span>from GitHub</span></a>.</p><p>For an immersive version of this guide, see the <a class="Link" href="/billing/quickstart"><span>Billing integration quickstart</span></a>.</p><p><a class="Link" href="https://checkout.stripe.dev/?mode=subscription"><span>View the demo</span></a> to see a hosted example.</p></div></div><h2 class="Heading Heading--anchored" id="build"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr">What you’ll build </span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><p>This guide describes how to sell fixed-price monthly subscriptions using <span><span><a class="Link" href="/payments/checkout"><span>Stripe Checkout</span></a></span></span>.</p><p>This guide shows you how to:</p><ul class="List default" style="column-count:1"><li class="">Model your business by building a product catalog</li><li class="">Add a Checkout session to your site, including a button and success and cancellation pages</li><li class="">Monitor subscription events and provision access to your service</li><li class="ListItem--hasMultipleChildren">Set up the <span><span><a class="Link" href="/customer-management"><span>customer portal</span></a></span></span></li><li class="">Add a customer portal session to your site, including a button and redirect</li><li class="">Let customers manage their subscription through the portal</li></ul><aside class="Aside"><p>If you aren’t ready to code an integration, you can set up basic subscriptions <span><span><a class="Link" href="/no-code/subscriptions"><span>manually in the Dashboard</span></a></span></span> or use <span><span><a class="Link" href="/payment-links"><span>Payment Links</span></a></span></span> to set up subscriptions without writing any code.</p><p>Learn more about <span><span><a class="Link" href="/billing/subscriptions/designing-integration"><span>designing an integration</span></a></span></span> to understand the decisions and required resources in a full integration.</p></aside><p>After you complete the integration, you can extend it to:</p><ul class="List default" style="column-count:1"><li class=""><span><span><a class="Link" href="/payments/checkout/taxes"><span>Display taxes</span></a></span></span></li><li class=""><span><span><a class="Link" href="/billing/subscriptions/coupons#using-coupons-in-checkout"><span>Apply discounts</span></a></span></span></li><li class=""><span><span><a class="Link" href="/billing/subscriptions/trials"><span>Offer customers a free trial period</span></a></span></span></li><li class=""><span><span><a class="Link" href="/payments/payment-methods/integration-options#low-code"><span>Add more payment methods</span></a></span></span></li><li class=""><span><span><a class="Link" href="/invoicing/hosted-invoice-page"><span>Integrate the hosted invoice page</span></a></span></span></li><li class=""><span><span><a class="Link" href="/payments/save-and-reuse"><span>Use Checkout in setup mode</span></a></span></span></li><li class="ListItem--hasMultipleChildren"><span><span><a class="Link" href="/products-prices/pricing-models#usage-based-pricing"><span>Set up metered billing</span></a></span></span>, <span><span><a class="Link" href="/products-prices/pricing-models#tiered-pricing"><span>pricing tiers</span></a></span></span>, and <span><span><a class="Link" href="/products-prices/pricing-models#usage-based-pricing"><span>usage-based pricing</span></a></span></span></li><li class=""><span><span><a class="Link" href="/billing/subscriptions/prorations"><span>Manage prorations</span></a></span></span></li><li class=""><span><span><a class="Link" href="/billing/subscriptions/multiple-products"><span>Allow customers to subscribe to multiple products</span></a></span></span></li><li class=""><span><span><a class="Link" href="/billing/entitlements"><span>Integrate entitlements to manage access to your product’s features</span></a></span></span></li></ul><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#set-up-stripe"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="set-up-stripe"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Set up Stripe<div class="Section-badge-list Box-root Padding-left--8"></div></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>Install the Stripe client of your choice:</p><div id="codetab_dfc4a6aff5f3711c66bdb90a3f37589faa94b1f4" class="CodeTabGroup Box-root"><div class="CodeTabGroup-content-dropdown-select ControlledContentGroup-content" style="height:auto;overflow:hidden;width:100%;display:flex;justify-content:center;position:relative;flex-direction:row"><span style="width:100%;height:auto;origin-x:0.5px;origin-y:0.5px"><div class="Box-root"><div data-language="bash" class="CodeBlock Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="Command Line" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--api CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--api-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 2.5H3A1.5 1.5 0 0 0 1.5 4v8A1.5 1.5 0 0 0 3 13.5h10a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 13 2.5ZM3 1a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H3Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3.43 4.512a.75.75 0 0 1 1.058-.081l3.5 3a.75.75 0 0 1 0 1.138l-3.5 3a.75.75 0 1 1-.976-1.138L6.348 8 3.512 5.57a.75.75 0 0 1-.081-1.058ZM8 10.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">Command Line</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div role="codeblock-dropdown" class="sn-token-provider ⚙ rs12 t0 t1 t2 t3 t4 t5 t6 t7 t8 t9 ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz t10 t11 t12 t13 t14 t15 t16 t17 t18 t19 t1a t1b t1c t1d t1e t1f t1g t1h t1i t1j t1k t1l t1m t1n t1o t1p t1q t1r t1s t1t t1u t1v t1w t1x t1y t1z t20 t21 t22 t23 t24 t25 t26 t27 t28 t29 t2a t2b t2c t2d t2e t2f t2g t2h t2i t2j t2k t2l t2m t2n t2o t2p t2q t2r t2s t2t t2u t2v t2w t2x t2y t2z t30 t31 t32 t33 t34 t35 t36 t37 t38 t39 t3a t3b t3c t3d t3e t3f t3g t3h t3i t3j t3k t3l t3m t3n t3o t3p t3q t3r t3s t3t t3u t3v t3w t3x t3y t3z t40 t41 t42 t43 t44 t45 t46 t47 t48 t49 t4a t4b t4c t4d t4e t4f t4g t4h t4i t4j t4k t4l t4m t4n t4o t4p t4q t4r t4s t4t t4u t4v t4w t4x t4y t4z t50 t51 t52 t53 t54 t55 t56 t57 t58 t59 t5a t5b t5c t5d t5e t5f t5g t5h t5i t5j t5k t5l t5m t5n t5o t5p as1o as13z as116 as13y as140 ⚙1ciwn6p"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-9" style="user-select:none" class="⚙ rs10 rs11 rs11 rs12 as12 as13 as14 as141 as142 as143 as144 as1j as145 as12h as146 as147 as12j as1o as1r as12e ⚙1ynwnf5">Ruby<svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12m as11y as11z ⚙3e165s"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.35 9.915a.875.875 0 0 1 1.235-.065L8 13.823l4.415-3.973a.875.875 0 0 1 1.17 1.3l-5 4.5a.873.873 0 0 1-1.17 0l-5-4.5a.875.875 0 0 1-.065-1.235ZM7.415.35a.873.873 0 0 1 1.17 0l5 4.5a.875.875 0 1 1-1.17 1.3L8 2.177 3.585 6.15a.875.875 0 0 1-1.17-1.3l5-4.5Z"></path></svg></a></div></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token comment"># Available as a gem</span><span class="token function">
sudo</span><span class="token function"> gem</span><span class="token function"> install</span><span class="token stripe"> stripe</span></code></div></pre></div></div><div data-language="ruby" class="CodeBlock Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="Gemfile" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">Gemfile</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div role="codeblock-dropdown" class="sn-token-provider ⚙ rs12 t0 t1 t2 t3 t4 t5 t6 t7 t8 t9 ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz t10 t11 t12 t13 t14 t15 t16 t17 t18 t19 t1a t1b t1c t1d t1e t1f t1g t1h t1i t1j t1k t1l t1m t1n t1o t1p t1q t1r t1s t1t t1u t1v t1w t1x t1y t1z t20 t21 t22 t23 t24 t25 t26 t27 t28 t29 t2a t2b t2c t2d t2e t2f t2g t2h t2i t2j t2k t2l t2m t2n t2o t2p t2q t2r t2s t2t t2u t2v t2w t2x t2y t2z t30 t31 t32 t33 t34 t35 t36 t37 t38 t39 t3a t3b t3c t3d t3e t3f t3g t3h t3i t3j t3k t3l t3m t3n t3o t3p t3q t3r t3s t3t t3u t3v t3w t3x t3y t3z t40 t41 t42 t43 t44 t45 t46 t47 t48 t49 t4a t4b t4c t4d t4e t4f t4g t4h t4i t4j t4k t4l t4m t4n t4o t4p t4q t4r t4s t4t t4u t4v t4w t4x t4y t4z t50 t51 t52 t53 t54 t55 t56 t57 t58 t59 t5a t5b t5c t5d t5e t5f t5g t5h t5i t5j t5k t5l t5m t5n t5o t5p as1o as13z as116 as13y as140 ⚙1ciwn6p"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-11" style="user-select:none" class="⚙ rs10 rs11 rs11 rs12 as12 as13 as14 as141 as142 as143 as144 as1j as145 as12h as146 as147 as12j as1o as1r as12e ⚙1ynwnf5">Ruby<svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12m as11y as11z ⚙3e165s"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.35 9.915a.875.875 0 0 1 1.235-.065L8 13.823l4.415-3.973a.875.875 0 0 1 1.17 1.3l-5 4.5a.873.873 0 0 1-1.17 0l-5-4.5a.875.875 0 0 1-.065-1.235ZM7.415.35a.873.873 0 0 1 1.17 0l5 4.5a.875.875 0 1 1-1.17 1.3L8 2.177 3.585 6.15a.875.875 0 0 1-1.17-1.3l5-4.5Z"></path></svg></a></div></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token comment"># If you use bundler, you can add this line to your Gemfile</span><span class="token unknown-token">
gem </span><span class="token string">&#x27;stripe&#x27;</span></code></div></pre></div></div></div></span></div></div><p>Install the Stripe CLI (optional). The CLI provides <span><span><a class="Link" href="/webhooks#test-webhook"><span>webhook</span></a></span></span> testing, and you can run it to create your products and prices.</p><div id="codetab_bfcad54629d52f79a55410a10b6600ac8d2a665d" class="CodeTabGroup Box-root"><div class="CodeTabGroup-content ControlledContentGroup-content" style="height:auto;overflow:hidden;width:100%;display:flex;justify-content:center;position:relative;flex-direction:row"><span style="width:100%;height:auto;origin-x:0.5px;origin-y:0.5px"><div class="Box-root"><div data-language="bash" class="CodeBlock Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="Command Line" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--api CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--api-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 2.5H3A1.5 1.5 0 0 0 1.5 4v8A1.5 1.5 0 0 0 3 13.5h10a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 13 2.5ZM3 1a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H3Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3.43 4.512a.75.75 0 0 1 1.058-.081l3.5 3a.75.75 0 0 1 0 1.138l-3.5 3a.75.75 0 1 1-.976-1.138L6.348 8 3.512 5.57a.75.75 0 0 1-.081-1.058ZM8 10.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">Command Line</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div role="codeblock-dropdown" class="sn-token-provider ⚙ rs12 t0 t1 t2 t3 t4 t5 t6 t7 t8 t9 ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz t10 t11 t12 t13 t14 t15 t16 t17 t18 t19 t1a t1b t1c t1d t1e t1f t1g t1h t1i t1j t1k t1l t1m t1n t1o t1p t1q t1r t1s t1t t1u t1v t1w t1x t1y t1z t20 t21 t22 t23 t24 t25 t26 t27 t28 t29 t2a t2b t2c t2d t2e t2f t2g t2h t2i t2j t2k t2l t2m t2n t2o t2p t2q t2r t2s t2t t2u t2v t2w t2x t2y t2z t30 t31 t32 t33 t34 t35 t36 t37 t38 t39 t3a t3b t3c t3d t3e t3f t3g t3h t3i t3j t3k t3l t3m t3n t3o t3p t3q t3r t3s t3t t3u t3v t3w t3x t3y t3z t40 t41 t42 t43 t44 t45 t46 t47 t48 t49 t4a t4b t4c t4d t4e t4f t4g t4h t4i t4j t4k t4l t4m t4n t4o t4p t4q t4r t4s t4t t4u t4v t4w t4x t4y t4z t50 t51 t52 t53 t54 t55 t56 t57 t58 t59 t5a t5b t5c t5d t5e t5f t5g t5h t5i t5j t5k t5l t5m t5n t5o t5p as1o as13z as116 as13y as140 ⚙1ciwn6p"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-13" style="user-select:none" class="⚙ rs10 rs11 rs11 rs12 as12 as13 as14 as141 as142 as143 as144 as1j as145 as12h as146 as147 as12j as1o as1r as12e ⚙1ynwnf5">homebrew<svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12m as11y as11z ⚙3e165s"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.35 9.915a.875.875 0 0 1 1.235-.065L8 13.823l4.415-3.973a.875.875 0 0 1 1.17 1.3l-5 4.5a.873.873 0 0 1-1.17 0l-5-4.5a.875.875 0 0 1-.065-1.235ZM7.415.35a.873.873 0 0 1 1.17 0l5 4.5a.875.875 0 1 1-1.17 1.3L8 2.177 3.585 6.15a.875.875 0 0 1-1.17-1.3l5-4.5Z"></path></svg></a></div></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token comment"># Install Homebrew to run this command: <a class="CodeBlock-code-link" href="https://brew.sh/">https://brew.sh/</a></span><span class="token unknown-token">
brew</span><span class="token function"> install</span><span class="token unknown-token"> stripe/stripe-cli/stripe

</span><span class="token comment"># Connect the CLI to your dashboard</span><span class="token stripe">
stripe</span><span class="token unknown-token"> login</span></code></div></pre></div></div></div></span></div></div><p>For additional install options, see <span><span><a class="Link" href="/stripe-cli"><span>Get started with the Stripe CLI</span></a></span></span>.</p></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#create-pricing-model"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="create-pricing-model"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Create the pricing <span class="Section-title-with-badges">model<div class="Section-badge-list Box-root Padding-left--8"><div aria-label="Dashboard or Stripe CLI" class="Badge Badge--variant--status Section-badge Box-root Box-background--gray100 Flex-inlineFlex Flex-alignItems--center Flex-direction--row"><span class="Badge-text Text-color--gray600 Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline">Dashboard or Stripe CLI</span></div></div></span></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>Create your <span><span><a title="subscription products" class="UnstyledLink InlineLink Text-color--blue Glossary-term no-api-tag" href="/api/products">products</a></span></span> and their <span><span><a title="Prices" class="UnstyledLink InlineLink Text-color--blue Glossary-term no-api-tag" href="/api/prices">prices</a></span></span> in the Dashboard or with the Stripe CLI.</p><p>This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. (If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.)</p><p>In this example, each product bills at monthly intervals. The price for the Basic product is 5 <!-- -->USD<!-- -->. The price for the Premium product is 15 <!-- -->USD<!-- -->.</p><div class="TabGroup TabGroup--tabs Box-root"><div role="tablist" class="ContentTabs Box-root Box-divider--light-bottom-1 Flex-flex"><div class="ContentTab TabGroup-tab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><button aria-posinset="1" aria-selected="false" aria-setsize="2" class="UnstyledLink ContentTab-link" role="tab" tabindex="-1" type="button"><div class="ContentTab-inner Box-root Padding-horizontal--20 Padding-vertical--16"><span class="Text-color--gray Text-align--center Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><div class="Box-root" style="pointer-events:none;display:inline-flex"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto">Dashboard</div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"></div></div></div></span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></button></div></div></div><div class="ContentTab TabGroup-tab Box-root"><div style="outline:none" tabindex="-1"><div class="Box-root Flex-flex"><button aria-posinset="2" aria-selected="false" aria-setsize="2" class="UnstyledLink ContentTab-link" role="tab" tabindex="-1" type="button"><div class="ContentTab-inner Box-root Padding-horizontal--20 Padding-vertical--16"><span class="Text-color--gray Text-align--center Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block"><span class="ContentTab-text"><div class="Box-root" style="pointer-events:none;display:inline-flex"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto">Stripe CLI</div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"></div></div></div></span></span><div class="ContentTab-chip ContentTab-chip--small Box-root Box-background--blue"></div></div></button></div></div></div></div><div style="height:auto;overflow:hidden;width:100%;display:flex;justify-content:center;position:relative;flex-direction:row" class="ControlledContentGroup-content"><span style="width:100%;height:auto;z-index:1;opacity:1;position:relative;transform:none;transform-origin:50% 50% 0"><div class="TabGroup-Tab Box-root"><p>Go to the <a class="Link" href="https://dashboard.stripe.com/test/products/create"><span>Add a product</span></a> page and create two products. Add one price for each product, each with a monthly recurring billing period:</p><ul class="List default" style="column-count:1"><li class="ListItem--hasMultipleChildren"><p>Premium product: Premium service with extra features</p><ul class="List default" style="column-count:1"><li class="ListItem--hasMultipleChildren">Price: Standard pricing | 15 <!-- -->USD</li></ul></li><li class="ListItem--hasMultipleChildren"><p>Basic product: Basic service with minimum features</p><ul class="List default" style="column-count:1"><li class="ListItem--hasMultipleChildren">Price: Standard pricing | 5 <!-- -->USD</li></ul></li></ul><p>After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: <code class="InlineCode">price_G0FvDp6vZvdwRZ</code>.</p><p>When you’re ready, use the <strong>Copy to live mode</strong> button at the top right of the page to clone your product from <span><span><a class="Link" href="/keys#test-live-modes"><span>test mode to live mode</span></a></span></span>.</p></div></span></div></div><p>If you offer multiple billing intervals, use Checkout to <span><span><a class="Link" href="/payments/checkout/upsells"><span>upsell</span></a></span></span> customers on longer billing intervals and collect more revenue upfront.</p><p>For other pricing models, see <span><span><a class="Link" href="/products-prices/pricing-models"><span>Billing examples</span></a></span></span>.</p></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#create-session"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="create-session"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Create a Checkout <span class="Section-title-with-badges">Session<div class="Section-badge-list Box-root Padding-left--8"><div aria-label="Client and Server" class="Badge Badge--variant--status Section-badge Box-root Box-background--gray100 Flex-inlineFlex Flex-alignItems--center Flex-direction--row"><span class="Badge-text Text-color--gray600 Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline">Client and Server</span></div></div></span></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>Add a checkout button to your website that calls a server-side endpoint to create a Checkout Session.</p><div data-language="html" class="CodeBlock CodeBlock-numbered Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="index.html" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">index.html</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="https://github.com/stripe-samples/checkout-single-subscription/blob/master/client/index.html" title="View full sample on GitHub" class="UnstyledLink CodeBlock-github-link"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><span class="CodeBlock-github-link-text Text-color--default Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">View full sample</span></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--github CodeBlock-github-link-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--github-svg CodeBlock-github-link-icon-svg Icon-color-svg Icon-color--gray300-svg" height="16" width="16"><path d="M7.5 0C3.4 0 0 3.4 0 7.5c0 3.2 2.1 6.1 5.1 7.1.4.1.5-.2.5-.4v-1.4c-2.1.5-2.5-.8-2.5-.8-.3-.9-.8-1.1-.8-1.1-.7-.5 0-.5 0-.5.8.1 1.2.8 1.2.8.7 1.1 1.8.8 2.2.6.1-.5.3-.8.5-1-1.7-.2-3.5-.8-3.5-3.7 0-.8.3-1.5.8-2-.1-.2-.3-1 .1-2 0 0 .6-.2 2.1.8.6-.2 1.2-.3 1.9-.3.6 0 1.3.1 1.9.3 1.4-1 2.1-.8 2.1-.8.4 1 .1 1.8.1 2 .5.5.8 1.2.8 2 0 2.9-1.8 3.5-3.4 3.7.3.2.5.7.5 1.4v2.1c0 .2.1.4.5.4 3.9-1.3 6.1-5.6 4.7-9.5C13.6 2.1 10.7 0 7.5 0" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></div></a></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token punctuation">&lt;</span><span class="token tag">html</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;</span><span class="token tag">head</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
    </span><span class="token punctuation">&lt;</span><span class="token tag">title</span><span class="token punctuation">&gt;</span><span class="token unknown-token">Checkout</span><span class="token punctuation">&lt;/</span><span class="token tag">title</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;/</span><span class="token tag">head</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;</span><span class="token tag">body</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
    </span><span class="token punctuation">&lt;</span><span class="token tag">form</span><span class="token tag"> </span><span class="token attr-name">action</span><span class="token punctuation">=</span><span class="token string">&quot;/create-checkout-session&quot;</span><span class="token tag"> </span><span class="token attr-name">method</span><span class="token punctuation">=</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
      </span><span class="token comment">&lt;!-- Note: If using PHP set the action to /create-checkout-session.php --&gt;</span><span class="token unknown-token">

      </span><span class="token punctuation">&lt;</span><span class="token tag">input</span><span class="token tag"> </span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token string">&quot;hidden&quot;</span><span class="token tag"> </span><span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token string">&quot;priceId&quot;</span><span class="token tag"> </span><span class="token attr-name">value</span><span class="token punctuation">=</span><span class="token string">&quot;price_G0FvDp6vZvdwRZ&quot;</span><span class="token tag"> </span><span class="token punctuation">/&gt;</span><span class="token unknown-token">
      </span><span class="token punctuation">&lt;</span><span class="token tag">button</span><span class="token tag"> </span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">&gt;</span><span class="token unknown-token">Checkout</span><span class="token punctuation">&lt;/</span><span class="token tag">button</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
    </span><span class="token punctuation">&lt;/</span><span class="token tag">form</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;/</span><span class="token tag">body</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
</span><span class="token punctuation">&lt;/</span><span class="token tag">html</span><span class="token punctuation">&gt;</span></code><span class="CodeBlock-lineNumbers" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></div></pre></div></div><p>On the backend of your application, define an endpoint that <a class="Link" href="/api/checkout/sessions/create"><span>creates the session</span></a> for your frontend to call. You need these values:</p><ul class="List default" style="column-count:1"><li class="">The price ID of the subscription the customer is signing up for—your frontend passes this value</li><li class="ListItem--hasMultipleChildren">Your <code class="InlineCode">success_url</code>, a page on your website that Checkout returns your customer to after they complete the payment</li></ul><p>You can optionally provide <code class="InlineCode">cancel_url</code>, a page on your website that Checkout returns your customer to if they cancel the payment process. You can also configure a <span><span><a class="Link" href="/billing/subscriptions/billing-cycle"><span>billing cycle anchor</span></a></span></span> to your subscription in this call.</p><p>If you created a one-time price in <span><span><a class="Link" href="/billing/subscriptions/build-subscriptions#create-pricing-model"><span>step 2</span></a></span></span>, pass that price ID as well. After creating a Checkout Session, redirect your customer to the <a class="Link" href="/api/checkout/sessions/object#checkout_session_object-url"><span>URL</span></a> returned in the response.</p><div class="CalloutWrapper ⚙ rs12  as148 as149 as125 as13y as115 as13h as14a as14b ⚙9gre5x"><h4 data-component="CalloutHeading" class="⚙ rs11 as14c as14d as14e as14f as12j ⚙1l1v5a">Note</h4><div class="⚙ rs11 as12h ⚙1l88ufi"><p>You can use <span><span><a class="Link" href="/products-prices/manage-prices#lookup-keys"><span>lookup_keys</span></a></span></span> to fetch prices rather than Price IDs. See the <a class="Link" href="https://github.com/stripe-samples/subscription-use-cases/tree/main/fixed-price-subscriptions"><span>sample application</span></a> for an example.</p></div></div><div id="codetab_6fabcd2be09668ca3c7e89f53e6b793b145dbf6e" class="CodeTabGroup Box-root"><div class="CodeTabGroup-content-dropdown-select ControlledContentGroup-content" style="height:auto;overflow:hidden;width:100%;display:flex;justify-content:center;position:relative;flex-direction:row"><span style="width:100%;height:auto;origin-x:0.5px;origin-y:0.5px"><div class="Box-root"><div data-language="ruby" class="CodeBlock CodeBlock-numbered Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="server.rb" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">server.rb</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div role="codeblock-dropdown" class="sn-token-provider ⚙ rs12 t0 t1 t2 t3 t4 t5 t6 t7 t8 t9 ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz t10 t11 t12 t13 t14 t15 t16 t17 t18 t19 t1a t1b t1c t1d t1e t1f t1g t1h t1i t1j t1k t1l t1m t1n t1o t1p t1q t1r t1s t1t t1u t1v t1w t1x t1y t1z t20 t21 t22 t23 t24 t25 t26 t27 t28 t29 t2a t2b t2c t2d t2e t2f t2g t2h t2i t2j t2k t2l t2m t2n t2o t2p t2q t2r t2s t2t t2u t2v t2w t2x t2y t2z t30 t31 t32 t33 t34 t35 t36 t37 t38 t39 t3a t3b t3c t3d t3e t3f t3g t3h t3i t3j t3k t3l t3m t3n t3o t3p t3q t3r t3s t3t t3u t3v t3w t3x t3y t3z t40 t41 t42 t43 t44 t45 t46 t47 t48 t49 t4a t4b t4c t4d t4e t4f t4g t4h t4i t4j t4k t4l t4m t4n t4o t4p t4q t4r t4s t4t t4u t4v t4w t4x t4y t4z t50 t51 t52 t53 t54 t55 t56 t57 t58 t59 t5a t5b t5c t5d t5e t5f t5g t5h t5i t5j t5k t5l t5m t5n t5o t5p as1o as13z as116 as13y as140 ⚙1ciwn6p"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-15" style="user-select:none" class="⚙ rs10 rs11 rs11 rs12 as12 as13 as14 as141 as142 as143 as144 as1j as145 as12h as146 as147 as12j as1o as1r as12e ⚙1ynwnf5">Ruby<svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12m as11y as11z ⚙3e165s"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.35 9.915a.875.875 0 0 1 1.235-.065L8 13.823l4.415-3.973a.875.875 0 0 1 1.17 1.3l-5 4.5a.873.873 0 0 1-1.17 0l-5-4.5a.875.875 0 0 1-.065-1.235ZM7.415.35a.873.873 0 0 1 1.17 0l5 4.5a.875.875 0 1 1-1.17 1.3L8 2.177 3.585 6.15a.875.875 0 0 1-1.17-1.3l5-4.5Z"></path></svg></a></div></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="https://github.com/stripe-samples/checkout-single-subscription/blob/master/server/ruby/server.rb" title="View full sample on GitHub" class="UnstyledLink CodeBlock-github-link"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><span class="CodeBlock-github-link-text Text-color--default Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">View full sample</span></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--github CodeBlock-github-link-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--github-svg CodeBlock-github-link-icon-svg Icon-color-svg Icon-color--gray300-svg" height="16" width="16"><path d="M7.5 0C3.4 0 0 3.4 0 7.5c0 3.2 2.1 6.1 5.1 7.1.4.1.5-.2.5-.4v-1.4c-2.1.5-2.5-.8-2.5-.8-.3-.9-.8-1.1-.8-1.1-.7-.5 0-.5 0-.5.8.1 1.2.8 1.2.8.7 1.1 1.8.8 2.2.6.1-.5.3-.8.5-1-1.7-.2-3.5-.8-3.5-3.7 0-.8.3-1.5.8-2-.1-.2-.3-1 .1-2 0 0 .6-.2 2.1.8.6-.2 1.2-.3 1.9-.3.6 0 1.3.1 1.9.3 1.4-1 2.1-.8 2.1-.8.4 1 .1 1.8.1 2 .5.5.8 1.2.8 2 0 2.9-1.8 3.5-3.4 3.7.3.2.5.7.5 1.4v2.1c0 .2.1.4.5.4 3.9-1.3 6.1-5.6 4.7-9.5C13.6 2.1 10.7 0 7.5 0" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></div></a></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token comment"># Set your secret key. Remember to switch to your live secret key in production.</span><span class="token unknown-token">
</span><span class="token comment"># See your keys here: <a class="CodeBlock-code-link" href="https://dashboard.stripe.com/apikeys">https://dashboard.stripe.com/apikeys</a></span><span class="token unknown-token">
</span><span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token unknown-token">api_key </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token string"><div class="Box-root Flex-flex" style="display:inline"><div class="Box-root Flex-flex" style="display:inline"><span class="KeyToken" data-key-type="secret" data-testid="keytoken-secret" role="button">&#x27;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#x27;</span></div></div></span><span class="token unknown-token">

</span><span class="token comment"># The price ID passed from the front end.</span><span class="token unknown-token">
</span><span class="token comment">#   price_id = params[&#x27;priceId&#x27;]</span><span class="token unknown-token">
price_id </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token string">&#x27;{{PRICE_ID}}&#x27;</span><span class="token unknown-token">

session </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Checkout</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Session</span><span class="token punctuation">.</span><span class="token unknown-token">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token unknown-token">
  success_url</span><span class="token punctuation">:</span><span class="token unknown-token"> </span><span class="token string">&#x27;https://example.com/success.html?session_id={CHECKOUT_SESSION_ID}&#x27;</span><span class="token punctuation">,</span><span class="token unknown-token">
  cancel_url</span><span class="token punctuation">:</span><span class="token unknown-token"> </span><span class="token string">&#x27;https://example.com/canceled.html&#x27;</span><span class="token punctuation">,</span><span class="token unknown-token">
  mode</span><span class="token punctuation">:</span><span class="token unknown-token"> </span><span class="token string">&#x27;subscription&#x27;</span><span class="token punctuation">,</span><span class="token unknown-token">
  line_items</span><span class="token punctuation">:</span><span class="token unknown-token"> </span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token unknown-token">
    </span><span class="token comment"># For metered billing, do not pass quantity</span><span class="token unknown-token">
    quantity</span><span class="token punctuation">:</span><span class="token unknown-token"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token unknown-token">
    price</span><span class="token punctuation">:</span><span class="token unknown-token"> price_id</span><span class="token punctuation">,</span><span class="token unknown-token">
  </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token unknown-token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token unknown-token">

</span><span class="token comment"># Redirect to the URL returned on the session</span><span class="token unknown-token">
</span><span class="token comment">#   redirect session.url, 303</span></code><span class="CodeBlock-lineNumbers" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></div></pre></div></div></div></span></div></div><p>This example customizes the <code class="InlineCode">success_url</code> by appending the Session ID. For more information about this approach, see the documentation on how to <span><span><a class="Link" href="/payments/checkout/custom-success-page"><span>Customize your success page</span></a></span></span>.</p><p>From your <a class="Link" href="https://dashboard.stripe.com/settings/payment_methods"><span>Dashboard</span></a>, enable the payment methods you want to accept from your customers. Checkout supports <span><span><a class="Link" href="/payments/payment-methods/integration-options#payment-method-product-support"><span>several payment methods</span></a></span></span>.</p></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#provision-and-monitor"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="provision-and-monitor"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Provision and monitor <span class="Section-title-with-badges">subscriptions<div class="Section-badge-list Box-root Padding-left--8"><div aria-label="Server" class="Badge Badge--variant--status Section-badge Box-root Box-background--gray100 Flex-inlineFlex Flex-alignItems--center Flex-direction--row"><span class="Badge-text Text-color--gray600 Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline">Server</span></div></div></span></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>After the subscription signup succeeds, the customer returns to your website at the <code class="InlineCode">success_url</code>, which initiates a <code class="InlineCode">checkout.session.completed</code> <span><span><a title="webhook" class="UnstyledLink InlineLink Text-color--blue Glossary-term no-api-tag" href="/webhooks">webhooks</a></span></span>. When you receive a <code class="InlineCode">checkout.session.completed</code> event, you can <span><span><a class="Link" href="/billing/subscriptions/overview#provisioning"><span>provision the subscription</span></a></span></span>. Continue to provision each month (if billing monthly) as you receive <code class="InlineCode">invoice.paid</code> events. If you receive an <code class="InlineCode">invoice.payment_failed</code> event, notify your customer and send them to the customer portal to update their payment method.</p><p>To determine the next step for your system’s logic, check the event type and parse the payload of each <a class="Link" href="/api/events/object"><span>event object</span></a>, such as <code class="InlineCode">invoice.paid</code>. Store the <code class="InlineCode">subscription.id</code> and <code class="InlineCode">customer.id</code> event objects in your database for verification.</p><p>For testing purposes, you can monitor events in the <a class="Link" href="https://dashboard.stripe.com/events"><span>Dashboard</span></a>. For production, set up a webhook endpoint and subscribe to appropriate event types. If you don’t know your <code class="InlineCode">STRIPE_WEBHOOK_SECRET</code> key, click the <a class="Link" href="https://dashboard.stripe.com/webhooks"><span>webhook</span></a> in the Dashboard to view it.</p><div id="codetab_b1011e43dd316e05e236e8673666daa331ab028b" class="CodeTabGroup Box-root"><div class="CodeTabGroup-content-dropdown-select ControlledContentGroup-content" style="height:auto;overflow:hidden;width:100%;display:flex;justify-content:center;position:relative;flex-direction:row"><span style="width:100%;height:auto;origin-x:0.5px;origin-y:0.5px"><div class="Box-root"><div data-language="ruby" class="CodeBlock CodeBlock-numbered Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="server.rb" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">server.rb</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div role="codeblock-dropdown" class="sn-token-provider ⚙ rs12 t0 t1 t2 t3 t4 t5 t6 t7 t8 t9 ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz t10 t11 t12 t13 t14 t15 t16 t17 t18 t19 t1a t1b t1c t1d t1e t1f t1g t1h t1i t1j t1k t1l t1m t1n t1o t1p t1q t1r t1s t1t t1u t1v t1w t1x t1y t1z t20 t21 t22 t23 t24 t25 t26 t27 t28 t29 t2a t2b t2c t2d t2e t2f t2g t2h t2i t2j t2k t2l t2m t2n t2o t2p t2q t2r t2s t2t t2u t2v t2w t2x t2y t2z t30 t31 t32 t33 t34 t35 t36 t37 t38 t39 t3a t3b t3c t3d t3e t3f t3g t3h t3i t3j t3k t3l t3m t3n t3o t3p t3q t3r t3s t3t t3u t3v t3w t3x t3y t3z t40 t41 t42 t43 t44 t45 t46 t47 t48 t49 t4a t4b t4c t4d t4e t4f t4g t4h t4i t4j t4k t4l t4m t4n t4o t4p t4q t4r t4s t4t t4u t4v t4w t4x t4y t4z t50 t51 t52 t53 t54 t55 t56 t57 t58 t59 t5a t5b t5c t5d t5e t5f t5g t5h t5i t5j t5k t5l t5m t5n t5o t5p as1o as13z as116 as13y as140 ⚙1ciwn6p"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-17" style="user-select:none" class="⚙ rs10 rs11 rs11 rs12 as12 as13 as14 as141 as142 as143 as144 as1j as145 as12h as146 as147 as12j as1o as1r as12e ⚙1ynwnf5">Ruby<svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12m as11y as11z ⚙3e165s"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.35 9.915a.875.875 0 0 1 1.235-.065L8 13.823l4.415-3.973a.875.875 0 0 1 1.17 1.3l-5 4.5a.873.873 0 0 1-1.17 0l-5-4.5a.875.875 0 0 1-.065-1.235ZM7.415.35a.873.873 0 0 1 1.17 0l5 4.5a.875.875 0 1 1-1.17 1.3L8 2.177 3.585 6.15a.875.875 0 0 1-1.17-1.3l5-4.5Z"></path></svg></a></div></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="https://github.com/stripe-samples/checkout-single-subscription/blob/master/server/ruby/server.rb" title="View full sample on GitHub" class="UnstyledLink CodeBlock-github-link"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><span class="CodeBlock-github-link-text Text-color--default Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">View full sample</span></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--github CodeBlock-github-link-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--github-svg CodeBlock-github-link-icon-svg Icon-color-svg Icon-color--gray300-svg" height="16" width="16"><path d="M7.5 0C3.4 0 0 3.4 0 7.5c0 3.2 2.1 6.1 5.1 7.1.4.1.5-.2.5-.4v-1.4c-2.1.5-2.5-.8-2.5-.8-.3-.9-.8-1.1-.8-1.1-.7-.5 0-.5 0-.5.8.1 1.2.8 1.2.8.7 1.1 1.8.8 2.2.6.1-.5.3-.8.5-1-1.7-.2-3.5-.8-3.5-3.7 0-.8.3-1.5.8-2-.1-.2-.3-1 .1-2 0 0 .6-.2 2.1.8.6-.2 1.2-.3 1.9-.3.6 0 1.3.1 1.9.3 1.4-1 2.1-.8 2.1-.8.4 1 .1 1.8.1 2 .5.5.8 1.2.8 2 0 2.9-1.8 3.5-3.4 3.7.3.2.5.7.5 1.4v2.1c0 .2.1.4.5.4 3.9-1.3 6.1-5.6 4.7-9.5C13.6 2.1 10.7 0 7.5 0" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></div></a></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token comment"># Set your secret key. Remember to switch to your live secret key in production.</span><span class="token unknown-token">
</span><span class="token comment"># See your keys here: <a class="CodeBlock-code-link" href="https://dashboard.stripe.com/apikeys">https://dashboard.stripe.com/apikeys</a></span><span class="token unknown-token">
</span><span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token unknown-token">api_key </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token string"><div class="Box-root Flex-flex" style="display:inline"><div class="Box-root Flex-flex" style="display:inline"><span class="KeyToken" data-key-type="secret" data-testid="keytoken-secret" role="button">&#x27;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#x27;</span></div></div></span><span class="token unknown-token">

post </span><span class="token string">&#x27;/webhook&#x27;</span><span class="token unknown-token"> </span><span class="token keyword">do</span><span class="token unknown-token">
  webhook_secret </span><span class="token operator">=</span><span class="token unknown-token"> <div class="Box-root Flex-flex" style="display:inline"><div class="Box-root Flex-flex" style="display:inline"><span class="CodeTooltip">&#x27;{{STRIPE_WEBHOOK_SECRET}}&#x27;</span></div></div>
  payload </span><span class="token operator">=</span><span class="token unknown-token"> request</span><span class="token punctuation">.</span><span class="token unknown-token">body</span><span class="token punctuation">.</span><span class="token unknown-token">read
  </span><span class="token keyword">if</span><span class="token unknown-token"> </span><span class="token operator">!</span><span class="token unknown-token">webhook_secret</span><span class="token punctuation">.</span><span class="token unknown-token">empty</span><span class="token operator">?</span><span class="token unknown-token">
    </span><span class="token comment"># Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.</span><span class="token unknown-token">
    sig_header </span><span class="token operator">=</span><span class="token unknown-token"> request</span><span class="token punctuation">.</span><span class="token unknown-token">env</span><span class="token punctuation">[</span><span class="token string">&#x27;HTTP_STRIPE_SIGNATURE&#x27;</span><span class="token punctuation">]</span><span class="token unknown-token">
    event </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token keyword">nil</span><span class="token unknown-token">

    </span><span class="token keyword">begin</span><span class="token unknown-token">
      event </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Webhook</span><span class="token punctuation">.</span><span class="token unknown-token">construct_event</span><span class="token punctuation">(</span><span class="token unknown-token">
        payload</span><span class="token punctuation">,</span><span class="token unknown-token"> sig_header</span><span class="token punctuation">,</span><span class="token unknown-token"> webhook_secret
      </span><span class="token punctuation">)</span><span class="token unknown-token">
    </span><span class="token keyword">rescue</span><span class="token unknown-token"> </span><span class="token constant">JSON</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ParserError</span><span class="token unknown-token"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token unknown-token"> e
      </span><span class="token comment"># Invalid payload</span><span class="token unknown-token">
      status </span><span class="token number">400</span><span class="token unknown-token">
      </span><span class="token keyword">return</span><span class="token unknown-token">
    </span><span class="token keyword">rescue</span><span class="token unknown-token"> </span><span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">SignatureVerificationError</span><span class="token unknown-token"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token unknown-token"> e
      </span><span class="token comment"># Invalid signature</span><span class="token unknown-token">
      puts </span><span class="token string">&#x27;⚠️  Webhook signature verification failed.&#x27;</span><span class="token unknown-token">
      status </span><span class="token number">400</span><span class="token unknown-token">
      </span><span class="token keyword">return</span><span class="token unknown-token">
    </span><span class="token keyword">end</span><span class="token unknown-token">
  </span><span class="token keyword">else</span><span class="token unknown-token">
    data </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token unknown-token">parse</span><span class="token punctuation">(</span><span class="token unknown-token">payload</span><span class="token punctuation">,</span><span class="token unknown-token"> symbolize_names</span><span class="token punctuation">:</span><span class="token unknown-token"> </span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token unknown-token">
    event </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Event</span><span class="token punctuation">.</span><span class="token unknown-token">construct_from</span><span class="token punctuation">(</span><span class="token unknown-token">data</span><span class="token punctuation">)</span><span class="token unknown-token">
  </span><span class="token keyword">end</span><span class="token unknown-token">
  </span><span class="token comment"># Get the type of webhook event sent</span><span class="token unknown-token">
  event_type </span><span class="token operator">=</span><span class="token unknown-token"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;type&#x27;</span><span class="token punctuation">]</span><span class="token unknown-token">
  data </span><span class="token operator">=</span><span class="token unknown-token"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;data&#x27;</span><span class="token punctuation">]</span><span class="token unknown-token">
  data_object </span><span class="token operator">=</span><span class="token unknown-token"> data</span><span class="token punctuation">[</span><span class="token string">&#x27;object&#x27;</span><span class="token punctuation">]</span><span class="token unknown-token">

  </span><span class="token keyword">case</span><span class="token unknown-token"> event_type
  </span><span class="token keyword">when</span><span class="token unknown-token"> </span><span class="token string">&#x27;checkout.session.completed&#x27;</span><span class="token unknown-token">
    </span><span class="token comment"># Payment is successful and the subscription is created.</span><span class="token unknown-token">
    </span><span class="token comment"># You should provision the subscription and save the customer ID to your database.</span><span class="token unknown-token">
  </span><span class="token keyword">when</span><span class="token unknown-token"> </span><span class="token string">&#x27;invoice.paid&#x27;</span><span class="token unknown-token">
    </span><span class="token comment"># Continue to provision the subscription as payments continue to be made.</span><span class="token unknown-token">
    </span><span class="token comment"># Store the status in your database and check when a user accesses your service.</span><span class="token unknown-token">
    </span><span class="token comment"># This approach helps you avoid hitting rate limits.</span><span class="token unknown-token">
  </span><span class="token keyword">when</span><span class="token unknown-token"> </span><span class="token string">&#x27;invoice.payment_failed&#x27;</span><span class="token unknown-token">
    </span><span class="token comment"># The payment failed or the customer does not have a valid payment method.</span><span class="token unknown-token">
    </span><span class="token comment"># The subscription becomes past_due. Notify your customer and send them to the</span><span class="token unknown-token">
    </span><span class="token comment"># customer portal to update their payment information.</span><span class="token unknown-token">
  </span><span class="token keyword">else</span><span class="token unknown-token">
    puts </span><span class="token string">&quot;Unhandled event type: \</span><span class="token delimiter">#{</span><span class="token interpolation">event</span><span class="token punctuation">.</span><span class="token interpolation">type</span><span class="token delimiter">}</span><span class="token string">&quot;</span><span class="token unknown-token">
  </span><span class="token keyword">end</span><span class="token unknown-token">

  status </span><span class="token number">200</span><span class="token unknown-token">
</span><span class="token keyword">end</span></code><span class="CodeBlock-lineNumbers" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></div></pre></div></div></div></span></div></div><p>The minimum event types to monitor:</p><div class="Table Table--striped ⚙  as1t as12b as14g as14h as14i as14j as14k as14l as14m as14n as14o ⚙mdgryj"><table class="⚙  as14p as14q as14r as14s as14i as14t as131 as14u ⚙1vows7j"><thead><tr class="⚙ as14v ⚙w3ccfk"><th class="⚙ rs11 as14w as14x as13n as12r as14y as12p as12q as14z as150 ⚙1a0j2e" scope="column">Event name</th><th class="⚙ rs11 as14w as14x as13n as12r as14y as12p as12q as14z as150 ⚙1a0j2e" scope="column">Description</th></tr></thead><tbody><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl"><code class="InlineCode">checkout.session.completed</code></td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Sent when a customer clicks the Pay or Subscribe button in Checkout, informing you of a new purchase.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl"><code class="InlineCode">invoice.paid</code></td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Sent each billing interval when a payment succeeds.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl"><code class="InlineCode">invoice.payment_failed</code></td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Sent each billing interval if there is an issue with your customer’s payment method.</td></tr></tbody></table></div><p>For even more events to monitor, see <span><span><a class="Link" href="/billing/subscriptions/webhooks"><span>Subscription webhooks</span></a></span></span>.</p></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#configure-portal"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="configure-portal"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Configure the customer <span class="Section-title-with-badges">portal<div class="Section-badge-list Box-root Padding-left--8"><div aria-label="Dashboard" class="Badge Badge--variant--status Section-badge Box-root Box-background--gray100 Flex-inlineFlex Flex-alignItems--center Flex-direction--row"><span class="Badge-text Text-color--gray600 Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline">Dashboard</span></div></div></span></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>The <span><span><a class="Link" href="/customer-management"><span>customer portal</span></a></span></span> lets your customers directly manage their existing subscriptions and invoices.</p><p>Use <a class="Link" href="https://dashboard.stripe.com/test/settings/billing/portal"><span>the Dashboard</span></a> to configure the portal. At a minimum, make sure to configure it so that customers can update their payment methods. See <span><span><a class="Link" href="/customer-management"><span>Integrating the customer portal</span></a></span></span> for information about other settings you can configure.</p></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#create-portal-session"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="create-portal-session"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Create a portal <span class="Section-title-with-badges">Session<div class="Section-badge-list Box-root Padding-left--8"><div aria-label="Server" class="Badge Badge--variant--status Section-badge Box-root Box-background--gray100 Flex-inlineFlex Flex-alignItems--center Flex-direction--row"><span class="Badge-text Text-color--gray600 Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline">Server</span></div></div></span></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>Define an endpoint that <a class="Link" href="/api/customer_portal/sessions/create"><span>creates the customer portal session</span></a> for your frontend to call. Here <code class="InlineCode">CUSTOMER_ID</code> refers to the customer ID created by a Checkout Session that you saved while processing the <code class="InlineCode">checkout.session.completed</code> webhook. You can also set a default redirect link for the portal in the Dashboard.</p><p>Pass an optional <code class="InlineCode">return_url</code> value for the page on your site to redirect your customer to after they finish managing their subscription:</p><div id="codetab_5b6baba536241d36e9095be0b8db8d5ac7c37bc9" class="CodeTabGroup Box-root"><div class="CodeTabGroup-content-dropdown-select ControlledContentGroup-content" style="height:auto;overflow:hidden;width:100%;display:flex;justify-content:center;position:relative;flex-direction:row"><span style="width:100%;height:auto;origin-x:0.5px;origin-y:0.5px"><div class="Box-root"><div data-language="ruby" class="CodeBlock CodeBlock-numbered Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="server.rb" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">server.rb</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div role="codeblock-dropdown" class="sn-token-provider ⚙ rs12 t0 t1 t2 t3 t4 t5 t6 t7 t8 t9 ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz t10 t11 t12 t13 t14 t15 t16 t17 t18 t19 t1a t1b t1c t1d t1e t1f t1g t1h t1i t1j t1k t1l t1m t1n t1o t1p t1q t1r t1s t1t t1u t1v t1w t1x t1y t1z t20 t21 t22 t23 t24 t25 t26 t27 t28 t29 t2a t2b t2c t2d t2e t2f t2g t2h t2i t2j t2k t2l t2m t2n t2o t2p t2q t2r t2s t2t t2u t2v t2w t2x t2y t2z t30 t31 t32 t33 t34 t35 t36 t37 t38 t39 t3a t3b t3c t3d t3e t3f t3g t3h t3i t3j t3k t3l t3m t3n t3o t3p t3q t3r t3s t3t t3u t3v t3w t3x t3y t3z t40 t41 t42 t43 t44 t45 t46 t47 t48 t49 t4a t4b t4c t4d t4e t4f t4g t4h t4i t4j t4k t4l t4m t4n t4o t4p t4q t4r t4s t4t t4u t4v t4w t4x t4y t4z t50 t51 t52 t53 t54 t55 t56 t57 t58 t59 t5a t5b t5c t5d t5e t5f t5g t5h t5i t5j t5k t5l t5m t5n t5o t5p as1o as13z as116 as13y as140 ⚙1ciwn6p"><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" id="react-aria-19" style="user-select:none" class="⚙ rs10 rs11 rs11 rs12 as12 as13 as14 as141 as142 as143 as144 as1j as145 as12h as146 as147 as12j as1o as1r as12e ⚙1ynwnf5">Ruby<svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as12m as11y as11z ⚙3e165s"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.35 9.915a.875.875 0 0 1 1.235-.065L8 13.823l4.415-3.973a.875.875 0 0 1 1.17 1.3l-5 4.5a.873.873 0 0 1-1.17 0l-5-4.5a.875.875 0 0 1-.065-1.235ZM7.415.35a.873.873 0 0 1 1.17 0l5 4.5a.875.875 0 1 1-1.17 1.3L8 2.177 3.585 6.15a.875.875 0 0 1-1.17-1.3l5-4.5Z"></path></svg></a></div></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="https://github.com/stripe-samples/checkout-single-subscription/blob/master/server/ruby/server.rb" title="View full sample on GitHub" class="UnstyledLink CodeBlock-github-link"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><span class="CodeBlock-github-link-text Text-color--default Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">View full sample</span></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--github CodeBlock-github-link-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--github-svg CodeBlock-github-link-icon-svg Icon-color-svg Icon-color--gray300-svg" height="16" width="16"><path d="M7.5 0C3.4 0 0 3.4 0 7.5c0 3.2 2.1 6.1 5.1 7.1.4.1.5-.2.5-.4v-1.4c-2.1.5-2.5-.8-2.5-.8-.3-.9-.8-1.1-.8-1.1-.7-.5 0-.5 0-.5.8.1 1.2.8 1.2.8.7 1.1 1.8.8 2.2.6.1-.5.3-.8.5-1-1.7-.2-3.5-.8-3.5-3.7 0-.8.3-1.5.8-2-.1-.2-.3-1 .1-2 0 0 .6-.2 2.1.8.6-.2 1.2-.3 1.9-.3.6 0 1.3.1 1.9.3 1.4-1 2.1-.8 2.1-.8.4 1 .1 1.8.1 2 .5.5.8 1.2.8 2 0 2.9-1.8 3.5-3.4 3.7.3.2.5.7.5 1.4v2.1c0 .2.1.4.5.4 3.9-1.3 6.1-5.6 4.7-9.5C13.6 2.1 10.7 0 7.5 0" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></div></a></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token comment"># Set your secret key. Remember to switch to your live secret key in production.</span><span class="token unknown-token">
</span><span class="token comment"># See your keys here: <a class="CodeBlock-code-link" href="https://dashboard.stripe.com/apikeys">https://dashboard.stripe.com/apikeys</a></span><span class="token unknown-token">
</span><span class="token constant">Stripe</span><span class="token punctuation">.</span><span class="token unknown-token">api_key </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token string"><div class="Box-root Flex-flex" style="display:inline"><div class="Box-root Flex-flex" style="display:inline"><span class="KeyToken" data-key-type="secret" data-testid="keytoken-secret" role="button">&#x27;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#x27;</span></div></div></span><span class="token unknown-token">

</span><span class="token comment"># This is the URL to which users will be redirected after they are done</span><span class="token unknown-token">
</span><span class="token comment"># managing their billing.</span><span class="token unknown-token">
return_url </span><span class="token operator">=</span><span class="token unknown-token"> <div class="Box-root Flex-flex" style="display:inline"><div class="Box-root Flex-flex" style="display:inline"><span class="CodeTooltip">&#x27;{{DOMAIN_URL}}&#x27;</span></div></div>
customer_id </span><span class="token operator">=</span><span class="token unknown-token"> <div class="Box-root Flex-flex" style="display:inline"><div class="Box-root Flex-flex" style="display:inline"><span class="CodeTooltip">&#x27;{{CUSTOMER_ID}}&#x27;</span></div></div>

session </span><span class="token operator">=</span><span class="token unknown-token"> </span><span class="token constant">Stripe</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">BillingPortal</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Session</span><span class="token punctuation">.</span><span class="token unknown-token">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token unknown-token">
  customer</span><span class="token punctuation">:</span><span class="token unknown-token"> customer_id</span><span class="token punctuation">,</span><span class="token unknown-token">
  return_url</span><span class="token punctuation">:</span><span class="token unknown-token"> return_url</span><span class="token punctuation">,</span><span class="token unknown-token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token unknown-token">

</span><span class="token comment"># Redirect to the URL for the session</span><span class="token unknown-token">
</span><span class="token comment">#   redirect session.url, 303</span></code><span class="CodeBlock-lineNumbers" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></div></pre></div></div></div></span></div></div></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#send-to-portal"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="send-to-portal"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Send customers to the customer <span class="Section-title-with-badges">portal<div class="Section-badge-list Box-root Padding-left--8"><div aria-label="Client" class="Badge Badge--variant--status Section-badge Box-root Box-background--gray100 Flex-inlineFlex Flex-alignItems--center Flex-direction--row"><span class="Badge-text Text-color--gray600 Text-fontSize--12 Text-fontWeight--medium Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--inline">Client</span></div></div></span></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><p>On your frontend, add a button to the page at the <code class="InlineCode">success_url</code> that provides a link to the customer portal:</p><div data-language="html" class="CodeBlock CodeBlock-numbered Box-root Box-background--blue800"><div class="CodeBlock-header Box-root Flex-flex Flex-alignItems--center Flex-justifyContent--spaceBetween"><div title="success.html" class="CodeBlock-filename Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-4px;margin-top:-4px"><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document CodeBlock-file-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg CodeBlock-file-icon-svg Icon-color-svg Icon-color--gray300-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><div class="Box-root Box-hideIfEmpty Margin-top--4 Margin-left--4" style="pointer-events:auto">success.html</div></div></div><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="https://github.com/stripe-samples/checkout-single-subscription/blob/master/client/success.html" title="View full sample on GitHub" class="UnstyledLink CodeBlock-github-link"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><span class="CodeBlock-github-link-text Text-color--default Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">View full sample</span></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--github CodeBlock-github-link-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--github-svg CodeBlock-github-link-icon-svg Icon-color-svg Icon-color--gray300-svg" height="16" width="16"><path d="M7.5 0C3.4 0 0 3.4 0 7.5c0 3.2 2.1 6.1 5.1 7.1.4.1.5-.2.5-.4v-1.4c-2.1.5-2.5-.8-2.5-.8-.3-.9-.8-1.1-.8-1.1-.7-.5 0-.5 0-.5.8.1 1.2.8 1.2.8.7 1.1 1.8.8 2.2.6.1-.5.3-.8.5-1-1.7-.2-3.5-.8-3.5-3.7 0-.8.3-1.5.8-2-.1-.2-.3-1 .1-2 0 0 .6-.2 2.1.8.6-.2 1.2-.3 1.9-.3.6 0 1.3.1 1.9.3 1.4-1 2.1-.8 2.1-.8.4 1 .1 1.8.1 2 .5.5.8 1.2.8 2 0 2.9-1.8 3.5-3.4 3.7.3.2.5.7.5 1.4v2.1c0 .2.1.4.5.4 3.9-1.3 6.1-5.6 4.7-9.5C13.6 2.1 10.7 0 7.5 0" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></div></a></div><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-alignItems--stretch Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button aria-label="Report incorrect code" type="button" class="UnstyledLink"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--warningCircle CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--warningCircle-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 0 0 14.5 8c0-3.592-2.9-6.5-6.5-6.5A6.5 6.5 0 0 0 1.5 8 6.5 6.5 0 0 0 8 14.5ZM8 16a8 8 0 0 0 8-8c0-4.419-3.57-8-8-8a8 8 0 0 0-8 8 8 8 0 0 0 8 8Z"></path><path d="M9.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.053 4.999a.949.949 0 1 1 1.894 0L8.79 8a.79.79 0 0 1-1.578 0l-.159-3Z"></path></svg></div></button></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><button class="UnstyledLink CodeBlock-copy-button" aria-label="Copy" type="button"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--clipboard CodeBlock-action-icon Icon-color Icon-color--gray300 Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--clipboard-svg CodeBlock-action-icon-svg Icon-color-svg Icon-color--gray300-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 11.25a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm0-3a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.83 2H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1.17a3.001 3.001 0 0 1 5.66 0ZM8 1.5A1.5 1.5 0 0 1 9.5 3v1h-3V3A1.5 1.5 0 0 1 8 1.5Zm3 3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1H4a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V4a.5.5 0 0 0-.5-.5h-1v1Z"></path></svg></div></button></div></div></div></div></div></div></div></div></div><div style="opacity:1;transform:none"><pre class="CodeBlock-content"><div class="CodeBlock-wrapper"><code class="CodeBlock-code"><span class="token punctuation">&lt;</span><span class="token tag">html</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;</span><span class="token tag">head</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
    </span><span class="token punctuation">&lt;</span><span class="token tag">title</span><span class="token punctuation">&gt;</span><span class="token unknown-token">Manage Billing</span><span class="token punctuation">&lt;/</span><span class="token tag">title</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;/</span><span class="token tag">head</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;</span><span class="token tag">body</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
    </span><span class="token punctuation">&lt;</span><span class="token tag">form</span><span class="token tag"> </span><span class="token attr-name">action</span><span class="token punctuation">=</span><span class="token string">&quot;/customer-portal&quot;</span><span class="token tag"> </span><span class="token attr-name">method</span><span class="token punctuation">=</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
      </span><span class="token comment">&lt;!-- Note: If using PHP set the action to /customer-portal.php --&gt;</span><span class="token unknown-token">
      </span><span class="token punctuation">&lt;</span><span class="token tag">button</span><span class="token tag"> </span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">&gt;</span><span class="token unknown-token">Manage Billing</span><span class="token punctuation">&lt;/</span><span class="token tag">button</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
    </span><span class="token punctuation">&lt;/</span><span class="token tag">form</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
  </span><span class="token punctuation">&lt;/</span><span class="token tag">body</span><span class="token punctuation">&gt;</span><span class="token unknown-token">
</span><span class="token punctuation">&lt;/</span><span class="token tag">html</span><span class="token punctuation">&gt;</span></code><span class="CodeBlock-lineNumbers" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></div></pre></div></div><p>After exiting the customer portal, the Customer returns to your website at the <code class="InlineCode">return_url</code>. Continue to <span><span><a class="Link" href="/billing/subscriptions/webhooks"><span>monitor webhooks</span></a></span></span> to track the state of the Customer’s subscription.</p><p>If you configure the customer portal to allow actions such as canceling a subscription, see <span><span><a class="Link" href="/customer-management/integrate-customer-portal#webhooks"><span>Integrating the customer portal</span></a></span></span> for additional events to monitor.</p></div></div><div aria-expanded="true" class="Section Section--numbered Box-root"><a class="UnstyledLink InlineLink Text-color--blue" href="#test"><div class="Box-root Padding-top--16 Padding-bottom--12"><div class="Box-root Flex-flex Flex-alignItems--center Flex-direction--row Flex-justifyContent--spaceBetween"><h2 class="Heading Heading--anchored Section-header" id="test"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr"><span>Test your integration<div class="Section-badge-list Box-root Padding-left--8"></div></span></span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--chevronUp Section-expand-icon Icon-color Icon-color--gray Box-root Flex-flex"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--chevronUp-svg Section-expand-icon-svg Icon-color-svg Icon-color--gray-svg" height="14" width="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.381 11.619a.875.875 0 0 0 1.238 0L8 5.237l6.381 6.382a.875.875 0 1 0 1.238-1.238l-7-7a.875.875 0 0 0-1.238 0l-7 7a.875.875 0 0 0 0 1.238Z"></path></svg></div></div></div></a><div tabindex="-1" class="Section-content Box-root Padding-top--0 Padding-bottom--32"><h3 class="Heading Heading--anchored" id="test-payment-methods"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr">Test payment methods</span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h3><p>Use the following table to test different payment methods and scenarios.</p><div class="Table Table--striped ⚙  as1t as12b as14g as14h as14i as14j as14k as14l as14m as14n as14o ⚙mdgryj"><table class="⚙  as14p as14q as14r as14s as14i as14t as131 as14u ⚙1vows7j"><thead><tr class="⚙ as14v ⚙w3ccfk"><th class="⚙ rs11 as14w as14x as13n as12r as14y as12p as12q as14z as150 ⚙1a0j2e" scope="column">Payment method</th><th class="⚙ rs11 as14w as14x as13n as12r as14y as12p as12q as14z as150 ⚙1a0j2e" scope="column">Scenario</th><th class="⚙ rs11 as14w as14x as13n as12r as14y as12p as12q as14z as150 ⚙1a0j2e" scope="column">How to test</th></tr></thead><tbody><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">BECS Direct Debit</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Your customer successfully pays with BECS Direct Debit.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the form using the account number <code class="InlineCode">900123456</code> and BSB <code class="InlineCode">000-000</code>. The confirmed PaymentIntent initially transitions to <code class="InlineCode">processing</code>, then transitions to the <code class="InlineCode">succeeded</code> status three minutes later.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">BECS Direct Debit</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Your customer’s payment fails with an <code class="InlineCode">account_closed</code> error code.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the form using the account number <code class="InlineCode">111111113</code> and BSB <code class="InlineCode">000-000</code>.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Credit card</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">The card payment succeeds and does not require authentication.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the credit card form using the credit card number <code class="InlineCode">4242 4242 4242 4242</code> with any expiration, CVC, and postal code.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Credit card</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">The card payment requires <span><span><a title="Strong Customer Authentication" class="UnstyledLink InlineLink Text-color--blue Glossary-term no-api-tag" href="/strong-customer-authentication">authentication</a></span></span>.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the credit card form using the credit card number <code class="InlineCode">4000 0025 0000 3155</code> with any expiration, CVC, and postal code.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Credit card</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">The card is declined with a decline code like <code class="InlineCode">insufficient_funds</code>.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the credit card form using the credit card number <code class="InlineCode">4000 0000 0000 9995</code> with any expiration, CVC, and postal code.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">SEPA Direct Debit</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Your customer successfully pays with SEPA Direct Debit.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the form using the account number <code class="InlineCode">AT321904300235473204</code>. The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later.</td></tr><tr class="⚙ as14v ⚙w3ccfk"><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">SEPA Direct Debit</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Your customer’s payment intent status transition from <code class="InlineCode">processing</code> to <code class="InlineCode">requires_payment_method</code>.</td><td class="⚙  as14x as1f as151 as122 as152 as153 as154 ⚙golgbl">Fill out the form using the account number <code class="InlineCode">AT861904300235473202</code>.</td></tr></tbody></table></div><h3 class="Heading Heading--anchored" id="monitoring-events"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr">Monitoring events</span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h3><p>Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about <span><span><a class="Link" href="/billing/subscriptions/webhooks"><span>subscription webhooks</span></a></span></span>. You can view events in the <a class="Link" href="https://dashboard.stripe.com/test/events"><span>Dashboard</span></a> or with the <span><span><a class="Link" href="/webhooks#test-webhook"><span>Stripe CLI</span></a></span></span>.</p><p>For more details about <span><span><a class="Link" href="/billing/testing"><span>testing your Billing integration</span></a></span></span>, read the guide.</p></div></div><div class="SeeAlso Box-root"><h2 class="Heading Heading--anchored" id="see-also"><span class="⚙ rs12 as1o as1r as13y ⚙1deu5hq"><span class="algolia-heading-content ⚙ rs12  as1o as1r as13y as126 ⚙162xusr">See also</span><img alt="" src="https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg" width="13" height="13" class="Heading-Anchor"/></span></h2><ul role="list" columns="1" class="⚙  as155 as156 as12b ⚙i0xyd2"><li class="⚙ rs12 rs11  as157 as158 as1o as159 as13c as15a as15b as15c ⚙1qyxzo"><svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as15d as133 as134 ⚙sce6cr"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.75C0 1.784.784 1 1.75 1H5.5c1.005 0 1.904.456 2.5 1.173A3.243 3.243 0 0 1 10.5 1h3.75c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75ZM7.25 13.5V4.25A1.75 1.75 0 0 0 5.5 2.5H1.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h5.5Zm1.5 0h5.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25h-1.754v3.75a.75.75 0 0 1-1.5 0V2.5H10.5a1.75 1.75 0 0 0-1.75 1.75v9.25Z"></path></svg><span class="⚙"><span><span><a class="Link" href="/billing/subscriptions/trials"><span>Offer customers a free trial period</span></a></span></span></span></li><li class="⚙ rs12 rs11  as157 as158 as1o as159 as13c as15a as15b as15c ⚙1qyxzo"><svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as15d as133 as134 ⚙sce6cr"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.75C0 1.784.784 1 1.75 1H5.5c1.005 0 1.904.456 2.5 1.173A3.243 3.243 0 0 1 10.5 1h3.75c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75ZM7.25 13.5V4.25A1.75 1.75 0 0 0 5.5 2.5H1.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h5.5Zm1.5 0h5.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25h-1.754v3.75a.75.75 0 0 1-1.5 0V2.5H10.5a1.75 1.75 0 0 0-1.75 1.75v9.25Z"></path></svg><span class="⚙"><span><span><a class="Link" href="/billing/subscriptions/coupons#using-coupons-in-checkout"><span>Apply discounts</span></a></span></span></span></li><li class="⚙ rs12 rs11  as157 as158 as1o as159 as13c as15a as15b as15c ⚙1qyxzo"><svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as15d as133 as134 ⚙sce6cr"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.75C0 1.784.784 1 1.75 1H5.5c1.005 0 1.904.456 2.5 1.173A3.243 3.243 0 0 1 10.5 1h3.75c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75ZM7.25 13.5V4.25A1.75 1.75 0 0 0 5.5 2.5H1.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h5.5Zm1.5 0h5.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25h-1.754v3.75a.75.75 0 0 1-1.5 0V2.5H10.5a1.75 1.75 0 0 0-1.75 1.75v9.25Z"></path></svg><span class="⚙"><span><span><a class="Link" href="/billing/subscriptions/prorations"><span>Manage prorations</span></a></span></span></span></li><li class="⚙ rs12 rs11  as157 as158 as1o as159 as13c as15a as15b as15c ⚙1qyxzo"><svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="⚙   as11u as11v as11w as1p as15d as133 as134 ⚙sce6cr"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.75C0 1.784.784 1 1.75 1H5.5c1.005 0 1.904.456 2.5 1.173A3.243 3.243 0 0 1 10.5 1h3.75c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75ZM7.25 13.5V4.25A1.75 1.75 0 0 0 5.5 2.5H1.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h5.5Zm1.5 0h5.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25h-1.754v3.75a.75.75 0 0 1-1.5 0V2.5H10.5a1.75 1.75 0 0 0-1.75 1.75v9.25Z"></path></svg><span class="⚙"><span><span><a class="Link" href="/billing/entitlements"><span>Integrate entitlements to manage access to your product’s features</span></a></span></span></span></li></ul></div></div></div></div></article><div class="Footer Box-root Margin-top--80" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-20px;margin-top:-20px"><div class="Box-root Box-hideIfEmpty Margin-top--20 Margin-left--20" style="pointer-events:auto"><div class="FeedbackContainer"><div style="opacity:1"><div class="⚙  as15e as15f ⚙1f6aqdm"><div class="⚙ rs12 as13c as1o as1r ⚙1g7uiuq"><span class="⚙ rs11 as15g ⚙uic2f5">Was this page helpful?</span><div class="⚙"><div class="sn-1d3r5le sn-1a8bmlv sn-18ydfix"><a class="sn-1vwnd89 sn-1vwnd89-disabled-false sn-1vwnd89-pressed-false sn-1w3n5ld sn-1w3n5ld-size-medium sn-1w3n5ld-type-secondary sn-1sklbmg sn-1d3r5le sn-1ldpfz2 sn-t31rsr sn-1j3iz2p sn-14p2m9e sn-1itx9zb sn-1u2x1fz sn-1ml4wum sn-90f29w sn-5r9jbc sn-eo3f0r sn-1tgmvto sn-unidi4 sn-lwfrcw sn-1pb0pp0 sn-1xchwve sn-lnvig6 sn-9eumg2" tabindex="0" role="button"><svg class="sn-1mj7mtw sn-1mj7mtw-size-xsmall sn-1d1lbgb" aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.152 0a2.62 2.62 0 0 1 2.612 2.838l-.255 3.054a.1.1 0 0 0 .1.108H13.5C14.88 6 16 7.143 16 8.523c0 .31-.072.622-.211.9L15.25 10.5v1.145a1 1 0 0 1-.224.63l-.588.725-.28.895A3 3 0 0 1 11.294 16H2a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h2l.001-.002 2.545-5.94A1.747 1.747 0 0 1 8.152 0ZM5.5 7.308V14.5h5.794a1.5 1.5 0 0 0 1.432-1.053l.28-.894a1.5 1.5 0 0 1 .267-.499l.477-.587V10.5a1.5 1.5 0 0 1 .158-.67l.54-1.079a.519.519 0 0 0 .052-.228 1.02 1.02 0 0 0-1-1.023h-2.891a1.6 1.6 0 0 1-1.595-1.733l.255-3.053A1.12 1.12 0 0 0 8.152 1.5a.247.247 0 0 0-.227.15L5.5 7.308ZM4 8.5H2a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h2v-6Z"></path></svg>Yes</a><a class="sn-1vwnd89 sn-1vwnd89-disabled-false sn-1vwnd89-pressed-false sn-1w3n5ld sn-1w3n5ld-size-medium sn-1w3n5ld-type-secondary sn-1sklbmg sn-1d3r5le sn-1ldpfz2 sn-t31rsr sn-1j3iz2p sn-14p2m9e sn-1itx9zb sn-1u2x1fz sn-1ml4wum sn-90f29w sn-5r9jbc sn-eo3f0r sn-1tgmvto sn-unidi4 sn-lwfrcw sn-1pb0pp0 sn-1xchwve sn-lnvig6 sn-9eumg2" tabindex="0" role="button"><svg class="sn-1mj7mtw sn-1mj7mtw-size-xsmall sn-1d1lbgb" aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.848 16a2.62 2.62 0 0 1-2.611-2.838l.254-3.054a.1.1 0 0 0-.1-.108H2.5C1.12 10 0 8.857 0 7.477c0-.31.072-.622.211-.9L.75 5.5V4.355a1 1 0 0 1 .224-.63L1.563 3l.28-.895A3 3 0 0 1 4.705 0H14a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2l-.001.002-2.545 5.94A1.747 1.747 0 0 1 7.848 16ZM10.5 8.692V1.5H4.706a1.5 1.5 0 0 0-1.432 1.053l-.28.894a1.5 1.5 0 0 1-.267.499l-.477.587V5.5a1.5 1.5 0 0 1-.158.67l-.54 1.079a.519.519 0 0 0-.052.228c0 .57.466 1.023 1 1.023h2.891a1.6 1.6 0 0 1 1.595 1.733l-.255 3.053A1.12 1.12 0 0 0 7.848 14.5a.247.247 0 0 0 .227-.15L10.5 8.692ZM12 7.5h2a.5.5 0 0 0 .5-.5V2a.5.5 0 0 0-.5-.5h-2v6Z"></path></svg>No</a></div></div></div></div></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--20 Margin-left--20" style="pointer-events:auto"><div data-db-analytics-name="docs_footer" class="Footer-content Box-root Box-divider--light-top-1 Padding-vertical--32 Flex-flex Flex-justifyContent--spaceBetween"><div class="Footer-links Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root Margin-top--4 Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="Box-root Margin-right--12"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--support Icon-color Icon-color--gray600 Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--support-svg Icon-color-svg Icon-color--gray600-svg" height="16" width="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.472 6.472 0 0 1-1.404 4.035l-1.07-1.07a5.032 5.032 0 0 1-1.06 1.061l1.07 1.07A6.472 6.472 0 0 1 8 14.5a6.472 6.472 0 0 1-4.035-1.404l1.07-1.07A4.98 4.98 0 0 0 8 13a5 5 0 0 0 4.026-7.965l1.07-1.07A6.472 6.472 0 0 1 14.5 8Zm-2.464-5.096A6.472 6.472 0 0 0 8 1.5a6.472 6.472 0 0 0-4.035 1.404l1.07 1.07A4.978 4.978 0 0 1 8 3c1.11 0 2.136.362 2.966.974l1.07-1.07Zm-8.062 8.062A4.977 4.977 0 0 1 3 8c0-1.11.362-2.136.974-2.965l-1.07-1.07A6.472 6.472 0 0 0 1.5 8c0 1.525.525 2.927 1.404 4.036l1.07-1.07ZM11.5 8a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z"></path></svg></div></div><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Need help? <a target="_blank" data-db-analytics-name="docs_footer_support_link" class="UnstyledLink InlineLink Text-color--blue" href="https://support.stripe.com/" rel="noopener noreferrer">Contact Support</a>.</span></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root Margin-top--4 Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="Box-root Margin-right--12"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--rocket Icon-color Icon-color--gray600 Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--rocket-svg Icon-color-svg Icon-color--gray600-svg" height="16" width="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.959 5.473a1.013 1.013 0 1 1-1.433-1.432 1.013 1.013 0 0 1 1.433 1.432Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.842 1.742a.75.75 0 0 0-.584-.585c-1.957-.4-4.02-.105-5.548.808a12.33 12.33 0 0 0-1.404.968.76.76 0 0 0-.085.004l-3.223.358a.75.75 0 0 0-.54.33L.591 7.922a.75.75 0 0 0 .442 1.144l2.73.682a.75.75 0 0 0 .135.185l2.168 2.168a.75.75 0 0 0 .185.135l.682 2.73a.75.75 0 0 0 1.144.442l4.297-2.865a.75.75 0 0 0 .33-.541l.357-3.223a.74.74 0 0 0 .005-.085c.335-.417.657-.883.969-1.404.912-1.528 1.206-3.591.806-5.548Zm-6.71 11.827-.384-1.534c1.08-.316 2.092-.705 3.032-1.29a8.95 8.95 0 0 0 .6-.41l-.128 1.154-3.12 2.08ZM3.964 8.252c.316-1.08.705-2.092 1.29-3.032a8.95 8.95 0 0 1 .41-.6l-1.154.128-2.08 3.12 1.534.384Zm5.514-5c1.045-.623 2.5-.902 3.978-.709.193 1.477-.086 2.933-.71 3.978-.855 1.433-1.76 2.326-2.76 2.95-.914.57-1.94.937-3.163 1.265l-1.56-1.56c.328-1.223.695-2.249 1.265-3.162.624-1.002 1.517-1.906 2.95-2.762Z"></path><path d="M1.76 11.03a.75.75 0 0 1 1.06 0l2.15 2.15a.75.75 0 1 1-1.061 1.06L1.76 12.09a.75.75 0 0 1 0-1.06Z"></path></svg></div></div><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Join our <a target="_blank" data-db-analytics-name="docs_footer_stripe_insiders_link" class="UnstyledLink InlineLink Text-color--blue" href="https://insiders.stripe.dev/" rel="noopener noreferrer">early access program</a>.</span></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root Margin-top--4 Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="Box-root Margin-right--12"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--document Icon-color Icon-color--gray600 Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--document-svg Icon-color-svg Icon-color--gray600-svg" height="16" width="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 11a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5ZM4.5 8.75A.75.75 0 0 1 5.25 8h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM9.25 5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 13.5v-11A2.5 2.5 0 0 0 12 0H6.328a2 2 0 0 0-1.414.586L2.086 3.414A2 2 0 0 0 1.5 4.828V13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5ZM13 2.5a1 1 0 0 0-1-1H8v3.25A1.75 1.75 0 0 1 6.25 6.5H3v7a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-11Zm-6.672-1H6.5v3.25a.25.25 0 0 1-.25.25H3v-.172a.5.5 0 0 1 .146-.353l2.829-2.829a.5.5 0 0 1 .353-.146Z"></path></svg></div></div><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Check out our <a target="_blank" class="UnstyledLink InlineLink Text-color--blue" href="https://stripe.com/blog/changelog" rel="noopener noreferrer">product changelog</a>.</span></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root Margin-top--4 Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="Box-root Margin-right--12"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--help Icon-color Icon-color--gray600 Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--help-svg Icon-color-svg Icon-color--gray600-svg" height="16" width="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.886 4.923c-.232.25-.386.63-.386 1.122a.75.75 0 1 1-1.5 0c0-.803.254-1.57.788-2.144C6.33 3.32 7.1 3 8 3c.9 0 1.67.32 2.212.901.534.574.788 1.341.788 2.144 0 1.234-.869 1.922-1.436 2.332-.094.068-.178.127-.255.181-.19.134-.33.233-.449.343a.64.64 0 0 0-.11.121V9.5a.75.75 0 0 1-1.5 0V9c0-.563.326-.956.593-1.202.198-.183.457-.364.672-.516l.17-.121c.559-.404.815-.693.815-1.116 0-.492-.154-.872-.386-1.122C8.888 4.68 8.533 4.5 8 4.5c-.533 0-.888.18-1.114.423Z"></path><path d="M9 12a1.001 1.001 0 0 1-2 0 1.001 1.001 0 0 1 2 0Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5A6.5 6.5 0 1 0 1.5 8c0 1.022.179 1.608.603 2.399.316.59.407 1.313.178 2.003l-.66 1.976 1.977-.659a2.541 2.541 0 0 1 2.004.178c.79.424 1.376.603 2.398.603ZM8 16a8 8 0 1 0-8-8c0 1.29.25 2.117.78 3.107.136.252.168.549.078.82l-.807 2.42a1 1 0 0 0-.051.315V15a1 1 0 0 0 1 1h.338a1 1 0 0 0 .316-.051l2.419-.807c.271-.09.568-.057.82.078.99.53 1.817.78 3.107.78Z"></path></svg></div></div><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Questions? <a target="_blank" data-db-analytics-name="docs_footer_sales_link" class="UnstyledLink InlineLink Text-color--blue" href="https://stripe.com/contact/sales" rel="noopener noreferrer">Contact Sales</a>.</span></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Footer-powered-by Box-root"><span class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Powered by <a target="_blank" class="UnstyledLink InlineLink Text-color--blue" href="https://markdoc.dev" rel="noopener noreferrer">Markdoc</a></span></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Footer-selectors Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--row Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><div style="outline:none" tabindex="-1"><button color="gray" aria-controls="menu42" aria-haspopup="menu" id="menu42-button" aria-label="Change the country setting" type="button" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div title="US" class="SVGInline SVGInline--cleaned SVG Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg class="SVGInline-svg SVGInline--cleaned-svg SVG-svg" height="16" width="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd"><path fill="#E25950" fill-rule="nonzero" d="M14 14H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"></path><path fill="#F6F9FC" fill-rule="nonzero" d="M0 11h16v1H0v-1Zm14 3H2a2 2 0 0 1-1.732-1h15.464A2 2 0 0 1 14 14ZM0 9h16v1H0V9Zm8-2h8v1H8V7Zm0-2h8v1H8V5Zm0-2h7.723c.171.295.277.634.277 1H8V3Z"></path><path fill="#E25950" fill-rule="nonzero" d="M14 14H2a2 2 0 0 1-2-2V8h1v4a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H8V2h6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z" opacity="0.1"></path><path fill="#43458B" fill-rule="nonzero" d="M0 8V3.714C0 2.768.796 2 1.778 2H8v6H0Z"></path><path fill="#FFF" fill-rule="nonzero" d="M7.026 5.501a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM5.518 5a.5.5 0 1 1-.038-1 .5.5 0 0 1 .038 1Zm-.492.501a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM3.518 5a.5.5 0 1 1-.038-1 .5.5 0 0 1 .038 1Zm-.492.501a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm4-2a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Zm-1.507 1.5a.5.5 0 1 1-.038-.999.5.5 0 0 1 .038 1Zm.014 1A.5.5 0 1 1 1.57 7a.5.5 0 0 1-.037-1Zm2 0A.5.5 0 1 1 3.57 7a.5.5 0 0 1-.037-1Zm2 0A.5.5 0 1 1 5.57 7a.5.5 0 0 1-.037-1Z"></path><path fill="#FFF" d="M6.533 7a.5.5 0 1 1 .037 1 .5.5 0 0 1-.037-1Zm-2 0a.5.5 0 1 1 .037 1 .5.5 0 0 1-.037-1Zm-2 0a.5.5 0 1 1 .037 1 .5.5 0 0 1-.037-1ZM.482 7a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0-2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0-2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm1-1a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm2 0a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm2 0a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm2 0a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0 2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Zm0 2a.5.5 0 1 1 .036 1 .5.5 0 0 1-.036-1Z" opacity="0.5"></path></g></svg></div></div></div></button></div></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root Flex-flex"><div class="Box-root Flex-flex"><div style="outline:none" tabindex="-1"><button aria-controls="menu43" aria-haspopup="menu" id="menu43-button" aria-label="Change the language setting" type="button" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--locale Icon-color Icon-color--gray Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 16 16" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--locale-svg Icon-color-svg Icon-color--gray-svg" height="16" width="16"><path d="M11.6 13.1l-2 2.5c-.3.3-.7.3-.9 0-.1-.1-.2-.3-.2-.5v-2c-2.5-.5-4-2.3-4-4.4 0-2.5 2.1-4.5 5.5-4.5s5.5 2 5.5 4.5c-.1 2.3-1.7 4.1-3.9 4.4z"></path></svg></div></div></div></button></div></div></div></div></div></div></div></div></div><div id="footer-digest-signup" class="Footer-digest-signup Box-root Margin-top--4"><div style="opacity:1"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8" style="pointer-events:auto"><label for="Footer-DevDigest"><span class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">Sign up for developer updates:</span></label></div><div class="Box-root Box-hideIfEmpty Margin-top--8" style="pointer-events:auto"><div class="Box-root Flex-flex Flex-direction--column"><div class="PressableCore PressableCore--cursor--text PressableCore--height--large PressableCore--radius--all PressableCore--width PressableCore--width--maximized PressableField InputBase Box-root Flex-inlineFlex" style="background-color:#ffffff;box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 1px rgba(60, 66, 87, 0.16), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><div class="InputBase-row Box-root Flex-flex"><div class="InputBase-item Box-root Flex-flex" style="align-self:stretch;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="PressableCore PressableCore--cursor--text PressableCore--height--large PressableCore--radius--all PressableCore--width PressableCore--width--maximized PressableField TextInput InputBase-pressable Box-root Flex-inlineFlex" style="box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><input type="email" aria-invalid="false" id="Footer-DevDigest" placeholder="" style="color:#3c4257" value="" class="Input Input--nowrap PressableContext Padding-horizontal--12 Padding-vertical--8 PressableContext--cursor--text PressableContext--display--inlineFlex PressableContext--fontLineHeight--20 PressableContext--fontSize--14 PressableContext--fontWeight--regular PressableContext--height PressableContext--height--large PressableContext--radius--all PressableContext--width PressableContext--width--maximized TextInput-element TextInput-element--align--left PressableContext Padding-horizontal--12 Padding-vertical--8 PressableContext--cursor--text PressableContext--display--inlineFlex PressableContext--fontLineHeight--20 PressableContext--fontSize--14 PressableContext--fontWeight--regular PressableContext--height PressableContext--height--large PressableContext--radius--all PressableContext--width PressableContext--width--maximized"/></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div></div><div class="InputBase-item Box-root Flex-flex" style="align-self:flex-start;flex-basis:auto;flex-grow:0;flex-shrink:0"><div class="PressableCore PressableCore--height--large PressableCore--radius--all PressableCore--width PressableCore--width--auto PressableButton Button Button--color--white Is--disabled Box-root Flex-inlineFlex" style="box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0), 0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0)"><div class="PressableCore-base Box-root"><button class="UnstyledLink Button-element PressableContext Padding-horizontal--12 Padding-vertical--4 PressableContext--display--inlineFlex PressableContext--fontLineHeight--28 PressableContext--fontSize--16 PressableContext--fontWeight--medium PressableContext--height PressableContext--height--large PressableContext--radius--all PressableContext--width PressableContext--width--auto" disabled="" type="button" style="color:#a3acb9"><div class="Button-align Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:28px;font-size:16px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--center" style="width:100%;line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><span style="margin-top:-1px" class="Button-label Text-color--disabled Text-fontSize--16 Text-fontWeight--medium Text-lineHeight--28 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">Sign up</span></div></div></button></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div></div></div></div><div class="PressableCore-overlay PressableCore-overlay--extendBy1 Box-root Box-background--white"></div></div><div class="Box-root Margin-top--8"><span class="Text-color--default Text-fontSize--12 Text-fontWeight--regular Text-lineHeight--16 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline">You can unsubscribe at any time. Read our <a class="UnstyledLink InlineLink Text-color--blue" href="https://stripe.com/privacy">privacy policy</a>.</span></div></div></div></div></div></div></div></div></div></div></div></div><div class="RightPane Box-root"><div class="RightPaneScrollable--has-no-video Box-root"><div class="Box-root Padding-bottom--24"><a class="UnstyledLink ButtonLink IconParent Flex-flex" href="/billing/quickstart"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--rowReversed" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--rowReversed Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div aria-hidden="true" class="SVGInline SVGInline--cleaned SVG Icon Icon--arrowRight Icon-color Icon-color--blue Box-root Margin-left--4 Flex-flex" style="transform:translateY(1.08px)"><svg margin="[object Object]" aria-hidden="true" class="SVGInline-svg SVGInline--cleaned-svg SVG-svg Icon-svg Icon--arrowRight-svg Icon-color-svg Icon-color--blue-svg" height="12" width="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.619 1.381A.875.875 0 1 0 8.38 2.62l4.507 4.506H1a.875.875 0 1 0 0 1.75h11.888L8.38 13.381a.875.875 0 1 0 1.24 1.239l6-6a.872.872 0 0 0 0-1.238l-6-6Z"></path></svg></div><span style="margin-top:-1px" class="ButtonLink-label Text-color--blue Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--noWrap Text-display--block">Code quickstart</span></div></div></a></div><div class="TableOfContents Box-root Padding-bottom--24"><span class="TableOfContents-header Text-color--dark Text-fontSize--13 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--upper Text-wrap--wrap Text-display--inline">On this page</span><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-12px;margin-top:-12px"><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="What you’ll build " class="UnstyledLink InlineLink Text-color--blue" href="#build">What you’ll build </a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Set up Stripe" class="UnstyledLink InlineLink Text-color--gray" href="#set-up-stripe">Set up Stripe</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Create the pricing model" class="UnstyledLink InlineLink Text-color--gray" href="#create-pricing-model">Create the pricing model</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Create a Checkout Session" class="UnstyledLink InlineLink Text-color--gray" href="#create-session">Create a Checkout Session</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Provision and monitor subscriptions" class="UnstyledLink InlineLink Text-color--gray" href="#provision-and-monitor">Provision and monitor subscriptions</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Configure the customer portal" class="UnstyledLink InlineLink Text-color--gray" href="#configure-portal">Configure the customer portal</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Create a portal Session" class="UnstyledLink InlineLink Text-color--gray" href="#create-portal-session">Create a portal Session</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Send customers to the customer portal" class="UnstyledLink InlineLink Text-color--gray" href="#send-to-portal">Send customers to the customer portal</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="Test your integration" class="UnstyledLink InlineLink Text-color--gray" href="#test">Test your integration</a></span></div><div class="Box-root Box-hideIfEmpty Margin-top--12 Margin-left--12" style="pointer-events:auto"><span class="Text-color--default Text-fontWeight--regular Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--inline"><a title="See also" class="UnstyledLink InlineLink Text-color--gray" href="#see-also">See also</a></span></div></div></div></div><div class="RightPaneList Box-root"><span class="RightPaneList-header Text-color--dark Text-fontSize--13 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--upper Text-wrap--wrap Text-display--inline">Products Used</span><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap" style="margin-left:-8px;margin-top:-8px"><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="/billing" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="SVGInline SVGInline--cleaned SVG ProductIcon Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg class="SVGInline-svg SVGInline--cleaned-svg SVG-svg ProductIcon-svg" height="16" width="16" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26 3.465A2.467 2.467 0 0 0 23.53 1H2.47A2.467 2.467 0 0 0 0 3.465v30.07c0 .835.423 1.612 1.124 2.067a2.475 2.475 0 0 0 2.35.185l10.188-4.522 10.871-4.831A2.465 2.465 0 0 0 26 24.18V3.465Z" fill="url(#pi_subscriptions__a)"></path><path d="M26.5 40C33.956 40 40 33.956 40 26.5S33.956 13 26.5 13 13 19.044 13 26.5 19.044 40 26.5 40Z" fill="#00D924"></path><path d="M26 13.009v11.172c0 .974-.575 1.857-1.467 2.252l-10.697 4.755A13.49 13.49 0 0 1 13 26.5c0-7.288 5.776-13.228 13-13.491Z" fill="url(#pi_subscriptions__b)"></path><defs><linearGradient id="pi_subscriptions__a" x1="13" y1="7.353" x2="13.001" y2="36.032" gradientUnits="userSpaceOnUse"><stop stop-color="#FFD748"></stop><stop offset="1" stop-color="#FFC148"></stop></linearGradient><linearGradient id="pi_subscriptions__b" x1="19.5" y1="13.009" x2="19.5" y2="31.188" gradientUnits="userSpaceOnUse"><stop stop-color="#00A600"></stop><stop offset="1" stop-color="#00D924"></stop></linearGradient></defs></svg></div><div class="Box-root Padding-left--8"><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Billing</span></div></div></div></a></div></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="/payments/checkout" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="SVGInline SVGInline--cleaned SVG ProductIcon Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg class="SVGInline-svg SVGInline--cleaned-svg SVG-svg ProductIcon-svg" height="16" width="16" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M31.535 4H11.837c-.842 0-1.627.43-2.084 1.143a2.522 2.522 0 0 0-.18 2.387l5.1 11.456a2.483 2.483 0 0 1 0 2.028L8 36h23.535a2.48 2.48 0 0 0 2.262-1.48l5.987-13.497a2.524 2.524 0 0 0 0-2.043l-5.987-13.5A2.48 2.48 0 0 0 31.536 4Z" fill="#96F"></path><path d="M7.228 36a2.309 2.309 0 0 1-.868-.166 1.22 1.22 0 0 1-.111-.056h.043A2.434 2.434 0 0 1 5.06 34.55L.217 23.533a2.542 2.542 0 0 1 .177-2.388A2.453 2.453 0 0 1 2.461 20h19.507c.959 0 1.828.573 2.22 1.462l4.794 10.849c.198.45.564 1.271.684 1.531.103.214.232.414.385.595.489.648 1.202 1.305 1.977 1.516a2.239 2.239 0 0 1-.545.047c-.21 0-.296-.002-.35-.003h-.055a1.32 1.32 0 0 0-.06.003H7.228Z" fill="url(#pi_checkout__a)"></path><path d="M21.968 20a2.43 2.43 0 0 1 2.141 1.3l.08.162 4.793 10.849c.198.45.564 1.271.684 1.531.103.214.232.414.385.595.448.594 1.19 1.165 1.908 1.42l.195.06a2.353 2.353 0 0 1-.619.083h-.462l-.055.001L8 35.999l6.673-14.985A2.48 2.48 0 0 0 14.889 20h7.079Z" fill="url(#pi_checkout__b)"></path><defs><linearGradient id="pi_checkout__a" x1="16.008" y1="35.587" x2="16.008" y2="21.16" gradientUnits="userSpaceOnUse"><stop stop-color="#21CFE0"></stop><stop offset="0.17" stop-color="#20D1E0"></stop><stop offset="0.38" stop-color="#18E2E2"></stop><stop offset="0.61" stop-color="#13ECE3"></stop><stop offset="1" stop-color="#11EFE3"></stop></linearGradient><linearGradient id="pi_checkout__b" x1="21.066" y1="43" x2="21.066" y2="14.5" gradientUnits="userSpaceOnUse"><stop stop-color="#0048E5"></stop><stop offset="1" stop-color="#9B66FF"></stop></linearGradient></defs></svg></div><div class="Box-root Padding-left--8"><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Checkout</span></div></div></div></a></div></div></div></div><div class="Box-root Box-hideIfEmpty Margin-top--8 Margin-left--8" style="pointer-events:auto"><div class="Box-root" style="pointer-events:none"><div class="Box-root Flex-flex Flex-direction--column Flex-justifyContent--flexStart Flex-wrap--nowrap"><div class="Box-root Box-hideIfEmpty" style="pointer-events:auto"><a href="/payments/elements" class="UnstyledLink"><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row" style="position:relative"><div aria-hidden="true" class="TextAligner Box-root" style="line-height:20px;font-size:14px;flex-basis:auto;flex-grow:0;flex-shrink:0"></div><div class="Box-root Flex-flex Flex-alignItems--baseline Flex-direction--row Flex-justifyContent--flexStart" style="line-height:0;flex-basis:auto;flex-grow:1;flex-shrink:1"><div class="SVGInline SVGInline--cleaned SVG ProductIcon Box-root Flex-flex" style="margin-top:-2.19px;transform:translateY(3.08px)"><svg class="SVGInline-svg SVGInline--cleaned-svg SVG-svg ProductIcon-svg" height="16" width="16" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 10.6c0-.91.486-1.75 1.274-2.206l12.215-7.053a2.548 2.548 0 0 1 2.548 0l12.216 7.053a2.548 2.548 0 0 1 1.274 2.207v5.751l-4.797-2.77a2.548 2.548 0 0 0-2.546-.002l-9.11 5.248a2.548 2.548 0 0 0-1.277 2.207v10.489c0 .855.43 1.65 1.135 2.12L3.274 26.913A2.548 2.548 0 0 1 2 24.706V10.601Z" fill="url(#pi_elements__a)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m14.933 33.645.556.32c.789.456 1.76.456 2.548 0l12.216-7.052a2.548 2.548 0 0 0 1.274-2.206v-8.355l4.284 2.475a2.548 2.548 0 0 1 1.273 2.206v10.493c0 .91-.485 1.75-1.273 2.206l-9.08 5.246a2.548 2.548 0 0 1-2.547.002l-9.11-5.248a2.61 2.61 0 0 1-.14-.087Z" fill="#96F"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m31.527 16.353-4.797-2.771a2.548 2.548 0 0 0-2.546-.002l-9.11 5.248a2.548 2.548 0 0 0-1.277 2.208v10.488c0 .857.43 1.651 1.137 2.122l.555.32c.789.456 1.76.456 2.548 0l12.216-7.052a2.548 2.548 0 0 0 1.274-2.207v-8.354Z" fill="url(#pi_elements__b)"></path><defs><linearGradient id="pi_elements__a" x1="16.763" y1="3.144" x2="16.367" y2="31.828" gradientUnits="userSpaceOnUse"><stop stop-color="#11EFE3"></stop><stop offset="0.33" stop-color="#15E8E2"></stop><stop offset="0.74" stop-color="#1FD3E0"></stop><stop offset="1" stop-color="#21CFE0"></stop></linearGradient><linearGradient id="pi_elements__b" x1="21.108" y1="40.096" x2="29.388" y2="10.16" gradientUnits="userSpaceOnUse"><stop stop-color="#0048E5"></stop><stop offset="0.64" stop-color="#625AF5"></stop><stop offset="1" stop-color="#8A62FC"></stop></linearGradient></defs></svg></div><div class="Box-root Padding-left--8"><span style="margin-top:-1px" class="Text-color--default Text-fontSize--14 Text-fontWeight--medium Text-lineHeight--20 Text-numericSpacing--proportional Text-typeface--base Text-wrap--wrap Text-display--block">Elements</span></div></div></div></a></div></div></div></div></div></div></div></div><div class="RightPane--fade"></div></div></div></div></div></div></div></div><div class="CookieBanner" style="opacity:0;transform:translateY(100px) translateZ(0)"></div></div></div></div></div>
        </body>
        <script nonce="YG0GsOFwEPRkvAwr0i7aGw==">
          window.__INITIAL_STATE__ = {"account":{"availableCountries":[{"code":"AE","beta":false},{"code":"AT","beta":false},{"code":"AU","beta":false},{"code":"BE","beta":false},{"code":"BG","beta":false},{"code":"BR","beta":false},{"code":"CA","beta":false},{"code":"CH","beta":false},{"code":"CY","beta":false},{"code":"CZ","beta":false},{"code":"DE","beta":false},{"code":"DK","beta":false},{"code":"EE","beta":false},{"code":"ES","beta":false},{"code":"FI","beta":false},{"code":"FR","beta":false},{"code":"GB","beta":false},{"code":"GI","beta":false},{"code":"GR","beta":false},{"code":"HK","beta":false},{"code":"HR","beta":false},{"code":"HU","beta":false},{"code":"IE","beta":false},{"code":"IT","beta":false},{"code":"JP","beta":false},{"code":"LI","beta":false},{"code":"LT","beta":false},{"code":"LU","beta":false},{"code":"LV","beta":false},{"code":"MT","beta":false},{"code":"MX","beta":false},{"code":"MY","beta":false},{"code":"NL","beta":false},{"code":"NO","beta":false},{"code":"NZ","beta":false},{"code":"PL","beta":false},{"code":"PT","beta":false},{"code":"RO","beta":false},{"code":"SE","beta":false},{"code":"SG","beta":false},{"code":"SI","beta":false},{"code":"SK","beta":false},{"code":"TH","beta":false},{"code":"US","beta":false},{"code":"IN","beta":true}],"availableLocales":[{"code":"id-ID","name":"Bahasa Indonesia","generated":false},{"code":"de-DE","name":"Deutsch","generated":false},{"code":"en-GB","name":"English \u0028United Kingdom\u0029","generated":false},{"code":"en-US","name":"English \u0028United States\u0029","generated":false},{"code":"es-419","name":"Español \u0028América Latina\u0029","generated":false},{"code":"es-ES","name":"Español \u0028España\u0029","generated":false},{"code":"fr-CA","name":"Français \u0028Canada\u0029","generated":false},{"code":"fr-FR","name":"Français \u0028France\u0029","generated":false},{"code":"it-IT","name":"Italiano","generated":false},{"code":"pt-BR","name":"Português \u0028Brasil\u0029","generated":false},{"code":"ja-JP","name":"日本語","generated":false},{"code":"zh-CN","name":"简体中文","generated":false}],"latestApiVersion":"2024-06-20","cookieEnforcementMode":"open","country":{"code":"US","beta":false},"isSearchIndexer":false,"flags":{"dev_community_link_kill_switch":false,"docs_disable_report_code_snippet":false,"docs_disable_image_source_dimensions":false,"docs_disable_prefetch_articles":true,"use_beta_index_for_docs_search":false,"docs_enable_gpt_search":true,"docs_enable_codegen_snippet_flavors":true,"connect_display_account_traits":true,"docs_replace_algolia_with_smartdocs_force_treatment":false,"docs_v2_account_picker":false,"enable_link_to_stripe_insiders":true,"docs_emergency_disable_surveys":false,"enable_fuse_in_narrative":true,"api_reference_version_picker":false},"hosts":{"dashboard.stripe.com":"https:\u002F\u002Fdashboard.stripe.com","support.stripe.com":"https:\u002F\u002Fsupport.stripe.com","api.stripe.com":"https:\u002F\u002Fapi.stripe.com"},"keys":{"publishable":"pk_test_TYooMQauvdEDq54NiTphI7jx","secret":"sk_test_4eC39HqLyjWDarjtT1zdp7dc","is_merchant_key":false},"locale":{"code":"en-US","name":"English \u0028United States\u0029","generated":false},"merchant":{"apiVersion":"2024-06-20","isLoggedIn":false,"isSandbox":false,"currency":"usd","defaultCurrency":"usd","country":"US","created":null,"iconUrl":"","nickname":"","token":""},"treatments":{"variants":{"docs_home_aa":"control_test","docs_create_account_cta":"control","docs_create_account_cta_aa":"control","acquisition_docs_payment_links_demo_aa":"control_test","acquisition_docs_payment_element_demo_aa":"control","acquisition_docs_financial_connections_demo_aa":"control_test","docs_replace_algolia_with_smartdocs_aa":"control_test","docs_replace_algolia_with_smartdocs_ab":"control","automatic_tax_quickstart_guide":"control","invoicing_discovery_docs_site":"control"},"arb_id":"424a38ba-3be2-438b-9086-168670173621"},"user":null,"xray":null},"article":{"content":{"\u0024\u0024mdtype":"Tag","name":"Document","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"AdvancedPageSelector","attributes":{"options":[{"children":[{"children":[],"prefs":{"platform":"web","ui":"stripe-hosted"},"title":"Stripe-hosted page"},{"children":[],"prefs":{"platform":"web","ui":"embedded-form"},"title":"Embedded form"},{"children":[],"prefs":{"platform":"web","ui":"elements"},"title":"Custom flow"}],"prefs":{"platform":"web"},"title":"Web"},{"children":[],"prefs":{"platform":"ios"},"title":"iOS"},{"children":[],"prefs":{"platform":"android"},"title":"Android"},{"children":[],"prefs":{"platform":"react-native"},"title":"React Native"}]},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Page","attributes":{"id":"subscription-checkout","prefs":{"platform":"web","ui":"stripe-hosted"},"title":"Stripe-hosted page"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCallout","attributes":{"image":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Fcheckout-subs-preview.d409ee79bf1f3280b9dfd3968b314c21.png","imageAlt":"Checkout subscription page","isHorizontal":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityRating","attributes":{"rating":2,"color":"purple"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Customize logo, images, and colors."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use prebuilt hosted forms to collect payments and manage ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"subscriptions"},"children":["subscriptions"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Clone a sample integration ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription"},"children":["from GitHub"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For an immersive version of this guide, see the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fquickstart"},"children":["Billing integration quickstart"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fcheckout.stripe.dev\u002F?mode=subscription"},"children":["View the demo"]}," to see a hosted example."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"build","level":2,"anchored":true,"toc":"What you’ll build "},"children":["What you’ll build "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This guide describes how to sell fixed-price monthly subscriptions using ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fcheckout"},"children":["Stripe Checkout"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This guide shows you how to:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Model your business by building a product catalog"]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Add a Checkout session to your site, including a button and success and cancellation pages"]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Monitor subscription events and provision access to your service"]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Set up the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Add a customer portal session to your site, including a button and redirect"]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Let customers manage their subscription through the portal"]}]},{"\u0024\u0024mdtype":"Tag","name":"Aside","attributes":{"wide":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you aren’t ready to code an integration, you can set up basic subscriptions ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fno-code\u002Fsubscriptions"},"children":["manually in the Dashboard"]}," or use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayment-links"},"children":["Payment Links"]}," to set up subscriptions without writing any code."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fdesigning-integration"},"children":["designing an integration"]}," to understand the decisions and required resources in a full integration."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you complete the integration, you can extend it to:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fcheckout\u002Ftaxes"},"children":["Display taxes"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fcoupons#using-coupons-in-checkout"},"children":["Apply discounts"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Ftrials"},"children":["Offer customers a free trial period"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#low-code"},"children":["Add more payment methods"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Finvoicing\u002Fhosted-invoice-page"},"children":["Integrate the hosted invoice page"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fsave-and-reuse"},"children":["Use Checkout in setup mode"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fproducts-prices\u002Fpricing-models#usage-based-pricing"},"children":["Set up metered billing"]},", ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fproducts-prices\u002Fpricing-models#tiered-pricing"},"children":["pricing tiers"]},", and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fproducts-prices\u002Fpricing-models#usage-based-pricing"},"children":["usage-based pricing"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["Manage prorations"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fmultiple-products"},"children":["Allow customers to subscribe to multiple products"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements"},"children":["Integrate entitlements to manage access to your product’s features"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"set-up-stripe","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Set up Stripe","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Install the Stripe client of your choice:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Flibraries.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Available as a gem\nsudo gem install stripe\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"Gemfile","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install through pip\npip3 install --upgrade stripe\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"PyPi","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or find the Stripe package on http:\u002F\u002Fpypi.python.org\u002Fpypi\u002Fstripe\u002F\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"requirements.txt","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Find the version you want to pin:\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-python\u002Fblob\u002Fmaster\u002FCHANGELOG.md\n# Specify that version in your requirements.txt file\nstripe\u003E=5.0.0\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install the PHP library with Composer\ncomposer require stripe\u002Fstripe-php\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"Source","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or download the source directly: https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-php\u002Freleases\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"build.gradle","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F*\n  For Gradle, add the following dependency to your build.gradle and replace with\n  the version number you want to use from:\n  - https:\u002F\u002Fmvnrepository.com\u002Fartifact\u002Fcom.stripe\u002Fstripe-java or\n  - https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n*\u002F\nimplementation \"com.stripe:stripe-java:","26.0.0","\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"xml","filename":"pom.xml","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003C\u0021--\n  For Maven, add the following dependency to your POM and replace with the\n  version number you want to use from:\n  - https:\u002F\u002Fmvnrepository.com\u002Fartifact\u002Fcom.stripe\u002Fstripe-java or\n  - https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n--\u003E\n\u003Cdependency\u003E\n  \u003CgroupId\u003Ecom.stripe\u003C\u002FgroupId\u003E\n  \u003CartifactId\u003Estripe-java\u003C\u002FartifactId\u003E\n  \u003Cversion\u003E","26.0.0","\u003C\u002Fversion\u003E\n\u003C\u002Fdependency\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"Other environments","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# For other environments, manually install the following JARs:\n# - The Stripe JAR from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n# - Google Gson from https:\u002F\u002Fgithub.com\u002Fgoogle\u002Fgson\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install with npm\nnpm install stripe --save\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Make sure your project is using Go Modules\ngo mod init\n# Install stripe-go\ngo get -u github.com\u002Fstripe\u002Fstripe-go\u002Fv","79","\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"app.go","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Then import the package\nimport \u0028\n  \"github.com\u002Fstripe\u002Fstripe-go\u002Fv","79","\"\n\u0029\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install with dotnet\ndotnet add package Stripe.net\ndotnet restore\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or install with NuGet\nInstall-Package Stripe.net\n"]}]}}],"codeTabGroupID":"codetab_dfc4a6aff5f3711c66bdb90a3f37589faa94b1f4"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Install the Stripe CLI \u0028optional\u0029. The CLI provides ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["webhook"]}," testing, and you can run it to create your products and prices."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fstripe-cli-install.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"StripeCliInstall","attributes":{"sectionMap":{"mac":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install Homebrew to run this command: https:\u002F\u002Fbrew.sh\u002F\nbrew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060mac-os\u0060 tar.gz file of your cpu architecture type from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Tar the downloaded file\ntar -xvf stripe_[X.X.X]_mac-os_[ARCH_TYPE].tar.gz\n\n# Optionally, install the binary in a location where you can execute it globally \u0028for example, \u0060\u002Fusr\u002Flocal\u002Fbin\u0060\u0029.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_bfcad54629d52f79a55410a10b6600ac8d2a665d"},"children":[]}],"linux":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["brew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"apt","title":"apt","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"apt","title":"apt"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"mistake"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On April 5th, 2024, we changed Stripe CLI’s GPG key to install the Stripe CLI through apt. If you configured the public key before April 5th, you’ll encounter this error:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable InRelease: The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Failed to fetch https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local\u002Fdists\u002Fstable\u002FInRelease  The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Some index files failed to download. They have been ignored, or old ones used instead\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To resolve this error, refresh Stripe’s GPG key by following step 1."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add Stripe CLI's GPG key to the apt sources keyring:\ncurl -s https:\u002F\u002Fpackages.stripe.dev\u002Fapi\u002Fsecurity\u002Fkeypair\u002Fstripe-cli-gpg\u002Fpublic | gpg --dearmor | sudo tee \u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg\n\n# 2. Add CLI's apt repository to the apt sources list:\necho \"deb [signed-by=\u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg] https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable main\" | sudo tee -a \u002Fetc\u002Fapt\u002Fsources.list.d\u002Fstripe.list\n\n# 3. Update the package list\nsudo apt update\n\n# 4. Install the CLI\nsudo apt install stripe\n\n# 5. Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"yum","title":"yum","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"yum","title":"yum"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add CLI's yum repository to the yum sources list:\necho -e \"[Stripe]\\nname=stripe\\nbaseurl=https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-rpm-local\u002F\\nenabled=1\\ngpgcheck=0\" \u003E\u003E \u002Fetc\u002Fyum.repos.d\u002Fstripe.repo\n\n# 2. Install the CLI\nsudo yum install stripe\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Download the latest \u0060linux\u0060 tar.gz file from \u003Chttps:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\u003E\n\n# Unzip the file:\ntar -xvf stripe_X.X.X_linux_x86_64.tar.gz\n\n# Move \u0060.\u002Fstripe\u0060 to your execution path.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_58aa30da375f22c90c6974cc89fd9531c6978ce2"},"children":[]}],"windows":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060windows\u0060 zip file from\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Unzip the \u0060stripe_X.X.X_windows_x86_64.zip\u0060 file\n\n# 3. Run the unzipped \u0060.exe\u0060 file\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"scoop","title":"scoop","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"scoop","title":"scoop"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# See https:\u002F\u002Fscoop.sh\n\nscoop bucket add stripe https:\u002F\u002Fgithub.com\u002Fstripe\u002Fscoop-stripe-cli.git\n\nscoop install stripe\n"]}]}}],"codeTabGroupID":"codetab_02b0729429bd0e3865a8b5213471b8d84fb75449"},"children":[]}]}},"children":["For additional install options, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["Get started with the Stripe CLI"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-pricing-model","beta":false,"badges":["Dashboard or Stripe CLI"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the pricing model","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcreate-business-model.md","variables":{"payment_currency":"usd","stripe_cli_install_link":false}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create your ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products-subs"},"children":["products"]}," and their ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["prices"]}," in the Dashboard or with the Stripe CLI."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. \u0028If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.\u0029"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In this example, each product bills at monthly intervals. The price for the Basic product is 5 ","USD",". The price for the Premium product is 15 ","USD","."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"dashboard","title":"Dashboard","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Dashboard"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fproducts\u002Fcreate"},"children":["Add a product"]}," page and create two products. Add one price for each product, each with a monthly recurring billing period:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Premium product: Premium service with extra features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 15 ","USD"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Basic product: Basic service with minimum features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 5 ","USD"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_G0FvDp6vZvdwRZ"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you’re ready, use the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy to live mode"]}," button at the top right of the page to clone your product from ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["test mode to live mode"]},"."]}]}},{"id":"stripe-cli","title":"Stripe CLI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Stripe CLI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you haven’t already, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["install the Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next create the product objects:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium product\nstripe products create \\\n  --name=\"Billing Guide: Premium Service\" \\\n  --description=\"Premium service with extra features\"\n\n# Basic product\nstripe products create \\\n  --name=\"Billing Guide: Basic Service\" \\\n  --description=\"Basic service with minimum features\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the product ID for each product. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"prod_H94k5odtwJXMtQ\",\n  \"object\": \"product\",\n  \"active\": true,\n  \"attributes\": [\n\n  ],\n  \"created\": 1587577341,\n  \"description\": \"Premium service with extra features\",\n  \"images\": [\n\n  ],\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": \"Billing Guide: Premium Service\",\n  \"statement_descriptor\": null,\n  \"type\": \"service\",\n  \"unit_label\": null,\n  \"updated\": 1587577341\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the product IDs to create a price for each product. The ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"unit_amount"},"children":[]}," number is in cents, so ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"1500"},"children":[]}," = 15 ","USD",", for example."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium price\n  stripe prices create \\\n    -d product=prod_H94k5odtwJXMtQ \\\n    -d unit_amount=1500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n\n# Basic price\n  stripe prices create \\\n    -d product=prod_HGd6W1VUqqXGvr \\\n    -d unit_amount=500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the price ID for each price so you can use them in subsequent steps. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"price_HGd7M3DV3IMXkC\",\n  \"object\": \"price\",\n  \"product\": \"prod_HGd6W1VUqqXGvr\",\n  \"type\": \"recurring\",\n  \"currency\": \"","usd","\",\n  \"recurring\": {\n    \"aggregate_usage\": null,\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"active\": true,\n  \"billing_scheme\": \"per_unit\",\n  \"created\": 1589319695,\n  \"livemode\": false,\n  \"lookup_key\": null,\n  \"metadata\": {\n  },\n  \"nickname\": null,\n  \"unit_amount\": 1500,\n  \"unit_amount_decimal\": \"1500\",\n  \"tiers\": null,\n  \"tiers_mode\": null,\n  \"transform_quantity\": null\n}\n"]}]}}]},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you offer multiple billing intervals, use Checkout to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fcheckout\u002Fupsells"},"children":["upsell"]}," customers on longer billing intervals and collect more revenue upfront."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For other pricing models, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fproducts-prices\u002Fpricing-models"},"children":["Billing examples"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-session","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create a Checkout Session","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Add a checkout button to your website that calls a server-side endpoint to create a Checkout Session."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"index.html","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fclient\u002Findex.html","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003Chtml\u003E\n  \u003Chead\u003E\n    \u003Ctitle\u003ECheckout\u003C\u002Ftitle\u003E\n  \u003C\u002Fhead\u003E\n  \u003Cbody\u003E\n    \u003Cform action=\"\u002Fcreate-checkout-session\" method=\"POST\"\u003E\n      \u003C\u0021-- Note: If using PHP set the action to \u002Fcreate-checkout-session.php --\u003E\n\n      \u003Cinput type=\"hidden\" name=\"priceId\" value=\"price_G0FvDp6vZvdwRZ\" \u002F\u003E\n      \u003Cbutton type=\"submit\"\u003ECheckout\u003C\u002Fbutton\u003E\n    \u003C\u002Fform\u003E\n  \u003C\u002Fbody\u003E\n\u003C\u002Fhtml\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend of your application, define an endpoint that ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate"},"children":["creates the session"]}," for your frontend to call. You need these values:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["The price ID of the subscription the customer is signing up for—your frontend passes this value"]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"success_url"},"children":[]},", a page on your website that Checkout returns your customer to after they complete the payment"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can optionally provide ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cancel_url"},"children":[]},", a page on your website that Checkout returns your customer to if they cancel the payment process. You can also configure a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fbilling-cycle"},"children":["billing cycle anchor"]}," to your subscription in this call."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you created a one-time price in ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscriptions#create-pricing-model"},"children":["step 2"]},", pass that price ID as well. After creating a Checkout Session, redirect your customer to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fobject#checkout_session_object-url"},"children":["URL"]}," returned in the response."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fproducts-prices\u002Fmanage-prices#lookup-keys"},"children":["lookup_keys"]}," to fetch prices rather than Price IDs. See the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fsubscription-use-cases\u002Ftree\u002Fmain\u002Ffixed-price-subscriptions"},"children":["sample application"]}," for an example."]}]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-checkout-session.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fruby\u002Fserver.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n# The price ID passed from the front end.\n#   price_id = params['priceId']\nprice_id = '{{PRICE_ID}}'\n\nsession = Stripe::Checkout::Session.create\u0028{\n  success_url: 'https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}',\n  cancel_url: 'https:\u002F\u002Fexample.com\u002Fcanceled.html',\n  mode: 'subscription',\n  line_items: [{\n    # For metered billing, do not pass quantity\n    quantity: 1,\n    price: price_id,\n  }],\n}\u0029\n\n# Redirect to the URL returned on the session\n#   redirect session.url, 303\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Ftree\u002Fmaster\u002Fserver\u002Fpython\u002Fserver.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n# The price ID passed from the front end.\n#   price_id = request.form.get\u0028'priceId'\u0029\nprice_id = '{{PRICE_ID}}'\n\nsession = stripe.checkout.Session.create\u0028\n  success_url='https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}',\n  cancel_url='https:\u002F\u002Fexample.com\u002Fcanceled.html',\n  mode='subscription',\n  line_items=[{\n    'price': price_id,\n    # For metered billing, do not pass quantity\n    'quantity': 1\n  }],\n\u0029\n\n# Redirect to the URL returned on the session\n#   return redirect\u0028session.url, code=303\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"create-checkout-session.php","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fphp\u002Fpublic\u002Fcreate-checkout-session.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u002F\u002F The price ID passed from the front end.\n\u002F\u002F   \u0024priceId = \u0024_POST['priceId'];\n\u0024priceId = '{{PRICE_ID}}';\n\n\u0024session = \\Stripe\\Checkout\\Session::create\u0028[\n  'success_url' =\u003E 'https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}',\n  'cancel_url' =\u003E 'https:\u002F\u002Fexample.com\u002Fcanceled.html',\n  'mode' =\u003E 'subscription',\n  'line_items' =\u003E [[\n    'price' =\u003E \u0024priceId,\n    \u002F\u002F For metered billing, do not pass quantity\n    'quantity' =\u003E 1,\n  ]],\n]\u0029;\n\n\u002F\u002F Redirect to the URL returned on the Checkout Session.\n\u002F\u002F With vanilla PHP, you can redirect with:\n\u002F\u002F   header\u0028\"HTTP\u002F1.1 303 See Other\"\u0029;\n\u002F\u002F   header\u0028\"Location: \" . \u0024session-\u003Eurl\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fjava\u002Fsrc\u002Fmain\u002Fjava\u002Fcom\u002Fstripe\u002Fsample\u002FServer.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n\u002F\u002F The price ID passed from the client\n\u002F\u002F   String priceId = request.queryParams\u0028\"priceId\"\u0029;\nString priceId = \"{{PRICE_ID}}\";\n\nSessionCreateParams params = new SessionCreateParams.Builder\u0028\u0029\n  .setSuccessUrl\u0028\"https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}\"\u0029\n  .setCancelUrl\u0028\"https:\u002F\u002Fexample.com\u002Fcanceled.html\"\u0029\n  .setMode\u0028SessionCreateParams.Mode.SUBSCRIPTION\u0029\n  .addLineItem\u0028new SessionCreateParams.LineItem.Builder\u0028\u0029\n    \u002F\u002F For metered billing, do not pass quantity\n    .setQuantity\u00281L\u0029\n    .setPrice\u0028priceId\u0029\n    .build\u0028\u0029\n  \u0029\n  .build\u0028\u0029;\n\nSession session = Session.create\u0028params\u0029;\n\n\u002F\u002F Redirect to the URL returned on the Checkout Session.\n\u002F\u002F With Spark, you can redirect with:\n\u002F\u002F   response.redirect\u0028session.getUrl\u0028\u0029, 303\u0029;\n\u002F\u002F   return \"\";\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fnode\u002Fserver.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u002F\u002F The price ID passed from the client\n\u002F\u002F   const {priceId} = req.body;\nconst priceId = '{{PRICE_ID}}';\n\nconst session = await stripe.checkout.sessions.create\u0028{\n  mode: 'subscription',\n  line_items: [\n    {\n      price: priceId,\n      \u002F\u002F For metered billing, do not pass quantity\n      quantity: 1,\n    },\n  ],\n  \u002F\u002F {CHECKOUT_SESSION_ID} is a string literal; do not change it\u0021\n  \u002F\u002F the actual Session ID is returned in the query parameter when your customer\n  \u002F\u002F is redirected to the success page.\n  success_url: 'https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}',\n  cancel_url: 'https:\u002F\u002Fexample.com\u002Fcanceled.html',\n}\u0029;\n\n\u002F\u002F Redirect to the URL returned on the Checkout Session.\n\u002F\u002F With express, you can redirect with:\n\u002F\u002F   res.redirect\u0028303, session.url\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fgo\u002Fserver.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\n\u002F\u002F The price ID passed from the front end\n\u002F\u002F You can extract the form value with the following:\n\u002F\u002F   r.ParseForm\u0028\u0029\n\u002F\u002F   priceId, err := strconv.ParseInt\u0028r.PostFormValue\u0028\"priceId\"\u0029[0:], 10, 64\u0029\n\u002F\u002F   if err \u0021= nil {\n\u002F\u002F     http.Error\u0028w, fmt.Sprintf\u0028\"error parsing quantity %v\", err.Error\u0028\u0029\u0029, http.StatusInternalServerError\u0029\n\u002F\u002F     return\n\u002F\u002F   }\npriceId := \"{{PRICE_ID}}\"\n\nparams := \u0026stripe.CheckoutSessionParams{\n  SuccessURL: \"https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}\",\n  CancelURL: \"https:\u002F\u002Fexample.com\u002Fcanceled.html\",\n  Mode: stripe.String\u0028string\u0028stripe.CheckoutSessionModeSubscription\u0029\u0029,\n  LineItems: []*stripe.CheckoutSessionLineItemParams{\n    \u0026stripe.CheckoutSessionLineItemParams{\n      Price:    stripe.String\u0028priceId\u0029,\n      \u002F\u002F For metered billing, do not pass quantity\n      Quantity: stripe.Int64\u00281\u0029,\n    },\n  },\n}\n\ns, _ := session.New\u0028params\u0029\n\n\u002F\u002F Then redirect to the URL on the Checkout Session\n\u002F\u002F   http.Redirect\u0028w, r, s.URL, http.StatusSeeOther\u0029\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"PaymentsController.cs","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fdotnet\u002FControllers\u002FPaymentsController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n\u002F\u002F The price ID passed from the front end.\n\u002F\u002F You can extract the form value with the following:\n\u002F\u002F   var priceId = Request.Form[\"priceId\"];\nvar priceId = \"{{PRICE_ID}}\";\n\nvar options = new SessionCreateOptions\n{\n  \u002F\u002F See https:\u002F\u002Fstripe.com\u002Fdocs\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate\n  \u002F\u002F for additional parameters to pass.\n  \u002F\u002F {CHECKOUT_SESSION_ID} is a string literal; do not change it\u0021\n  \u002F\u002F the actual Session ID is returned in the query parameter when your customer\n  \u002F\u002F is redirected to the success page.\n  SuccessUrl = \"https:\u002F\u002Fexample.com\u002Fsuccess.html?session_id={CHECKOUT_SESSION_ID}\",\n  CancelUrl = \"https:\u002F\u002Fexample.com\u002Fcanceled.html\",\n  Mode = \"subscription\",\n  LineItems = new List\u003CSessionLineItemOptions\u003E\n  {\n    new SessionLineItemOptions\n    {\n      Price = priceId,\n      \u002F\u002F For metered billing, do not pass quantity\n      Quantity = 1,\n    },\n  },\n};\n\nvar service = new SessionService\u0028\u0029;\nvar session = await service.CreateAsync\u0028options\u0029;\n\n\u002F\u002F Redirect to the URL returned on the Checkout Session.\n\u002F\u002F   Response.Headers.Add\u0028\"Location\", session.Url\u0029;\n\u002F\u002F   return new StatusCodeResult\u0028303\u0029;\n"]}]}}],"codeTabGroupID":"codetab_6fabcd2be09668ca3c7e89f53e6b793b145dbf6e"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example customizes the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"success_url"},"children":[]}," by appending the Session ID. For more information about this approach, see the documentation on how to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fcheckout\u002Fcustom-success-page"},"children":["Customize your success page"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["From your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Fpayment_methods"},"children":["Dashboard"]},", enable the payment methods you want to accept from your customers. Checkout supports ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#payment-method-product-support"},"children":["several payment methods"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"provision-and-monitor","beta":false,"badges":["Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Provision and monitor subscriptions","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After the subscription signup succeeds, the customer returns to your website at the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"success_url"},"children":[]},", which initiates a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"checkout.session.completed"},"children":[]}," ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"webhook"},"children":["webhooks"]},". When you receive a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"checkout.session.completed"},"children":[]}," event, you can ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#provisioning"},"children":["provision the subscription"]},". Continue to provision each month \u0028if billing monthly\u0029 as you receive ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"invoice.paid"},"children":[]}," events. If you receive an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"invoice.payment_failed"},"children":[]}," event, notify your customer and send them to the customer portal to update their payment method."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To determine the next step for your system’s logic, check the event type and parse the payload of each ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fevents\u002Fobject"},"children":["event object"]},", such as ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"invoice.paid"},"children":[]},". Store the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.id"},"children":[]}," event objects in your database for verification."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For testing purposes, you can monitor events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fevents"},"children":["Dashboard"]},". For production, set up a webhook endpoint and subscribe to appropriate event types. If you don’t know your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"STRIPE_WEBHOOK_SECRET"},"children":[]}," key, click the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fwebhooks"},"children":["webhook"]}," in the Dashboard to view it."]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fruby\u002Fserver.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fwebhook' do\n  webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},"\n  payload = request.body.read\n  if \u0021webhook_secret.empty?\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    sig_header = request.env['HTTP_STRIPE_SIGNATURE']\n    event = nil\n\n    begin\n      event = Stripe::Webhook.construct_event\u0028\n        payload, sig_header, webhook_secret\n      \u0029\n    rescue JSON::ParserError =\u003E e\n      # Invalid payload\n      status 400\n      return\n    rescue Stripe::SignatureVerificationError =\u003E e\n      # Invalid signature\n      puts '⚠️  Webhook signature verification failed.'\n      status 400\n      return\n    end\n  else\n    data = JSON.parse\u0028payload, symbolize_names: true\u0029\n    event = Stripe::Event.construct_from\u0028data\u0029\n  end\n  # Get the type of webhook event sent\n  event_type = event['type']\n  data = event['data']\n  data_object = data['object']\n\n  case event_type\n  when 'checkout.session.completed'\n    # Payment is successful and the subscription is created.\n    # You should provision the subscription and save the customer ID to your database.\n  when 'invoice.paid'\n    # Continue to provision the subscription as payments continue to be made.\n    # Store the status in your database and check when a user accesses your service.\n    # This approach helps you avoid hitting rate limits.\n  when 'invoice.payment_failed'\n    # The payment failed or the customer does not have a valid payment method.\n    # The subscription becomes past_due. Notify your customer and send them to the\n    # customer portal to update their payment information.\n  else\n    puts \"Unhandled event type: \\#{event.type}\"\n  end\n\n  status 200\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmain\u002Fserver\u002Fpython\u002Fserver.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fwebhook', methods=['POST']\u0029\ndef webhook_received\u0028\u0029:\n  webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},"\n  request_data = json.loads\u0028request.data\u0029\n\n  if webhook_secret:\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    signature = request.headers.get\u0028'stripe-signature'\u0029\n    try:\n      event = stripe.Webhook.construct_event\u0028\n          payload=request.data, sig_header=signature, secret=webhook_secret\u0029\n      data = event['data']\n    except Exception as e:\n      return e\n    # Get the type of webhook event sent - used to check the status of PaymentIntents.\n    event_type = event['type']\n  else:\n    data = request_data['data']\n    event_type = request_data['type']\n  data_object = data['object']\n\n  if event_type == 'checkout.session.completed':\n    # Payment is successful and the subscription is created.\n    # You should provision the subscription and save the customer ID to your database.\n    print\u0028data\u0029\n  elif event_type == 'invoice.paid':\n    # Continue to provision the subscription as payments continue to be made.\n    # Store the status in your database and check when a user accesses your service.\n    # This approach helps you avoid hitting rate limits.\n    print\u0028data\u0029\n  elif event_type == 'invoice.payment_failed':\n    # The payment failed or the customer does not have a valid payment method.\n    # The subscription becomes past_due. Notify your customer and send them to the\n    # customer portal to update their payment information.\n    print\u0028data\u0029\n  else:\n    print\u0028'Unhandled event type {}'.format\u0028event_type\u0029\u0029\n\n  return jsonify\u0028{'status': 'success'}\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"webhook.php","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmain\u002Fserver\u002Fphp\u002Fpublic\u002Fwebhook.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u0024event = null;\n\u0024payload = @file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n\u0024sig_header = \u0024_SERVER['HTTP_STRIPE_SIGNATURE'];\n\u0024webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},";\n\ntry {\n  \u0024event = \\Stripe\\Webhook::constructEvent\u0028\n    \u0024payload, \u0024sig_header, \u0024webhook_secret\n  \u0029;\n} catch\u0028\\UnexpectedValueException \u0024e\u0029 {\n  \u002F\u002F Invalid payload\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n} catch\u0028\\Stripe\\Exception\\SignatureVerificationException \u0024e\u0029 {\n  \u002F\u002F Invalid signature\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n}\n\n\u002F\u002F Handle the event\nswitch \u0028\u0024event-\u003Etype\u0029 {\n  case 'checkout.session.completed':\n    \u002F\u002F Payment is successful and the subscription is created.\n    \u002F\u002F You should provision the subscription and save the customer ID to your database.\n    break;\n  case 'invoice.paid':\n    \u002F\u002F Continue to provision the subscription as payments continue to be made.\n    \u002F\u002F Store the status in your database and check when a user accesses your service.\n    \u002F\u002F This approach helps you avoid hitting rate limits.\n    break;\n  case 'invoice.payment_failed':\n    \u002F\u002F The payment failed or the customer does not have a valid payment method.\n    \u002F\u002F The subscription becomes past_due. Notify your customer and send them to the\n    \u002F\u002F customer portal to update their payment information.\n    break;\n  default:\n    \u002F\u002F Unhandled event type\n}\n\nhttp_response_code\u0028200\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fjava\u002Fsrc\u002Fmain\u002Fjava\u002Fcom\u002Fstripe\u002Fsample\u002FServer.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\"\u002Fwebhook\", \u0028request, response\u0029 -\u003E {\n  String payload = request.body\u0028\u0029;\n  String sigHeader = request.headers\u0028\"Stripe-Signature\"\u0029;\n  String endpointSecret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["\"{{STRIPE_WEBHOOK_SECRET}}\""]},"children":[]},";\n\n  Event event = null;\n\n  try {\n    event = Webhook.constructEvent\u0028payload, sigHeader, endpointSecret\u0029;\n  } catch \u0028SignatureVerificationException e\u0029 {\n    \u002F\u002F Invalid signature\n    response.status\u0028400\u0029;\n    return \"\";\n  }\n\n  switch \u0028event.getType\u0028\u0029\u0029 {\n    case \"checkout.session.completed\":\n      \u002F\u002F Payment is successful and the subscription is created.\n      \u002F\u002F You should provision the subscription and save the customer ID to your database.\n      break;\n    case \"invoice.paid\":\n      \u002F\u002F Continue to provision the subscription as payments continue to be made.\n      \u002F\u002F Store the status in your database and check when a user accesses your service.\n      \u002F\u002F This approach helps you avoid hitting rate limits.\n      break;\n    case \"invoice.payment_failed\":\n      \u002F\u002F The payment failed or the customer does not have a valid payment method.\n      \u002F\u002F The subscription becomes past_due. Notify your customer and send them to the\n      \u002F\u002F customer portal to update their payment information.\n      break;\n    default:\n      \u002F\u002F System.out.println\u0028\"Unhandled event type: \" \u002B event.getType\u0028\u0029\u0029;\n  }\n\n  response.status\u0028200\u0029;\n  return \"\";\n}\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fnode\u002Fserver.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028\"\u002Fwebhook\", async \u0028req, res\u0029 =\u003E {\n  let data;\n  let eventType;\n  \u002F\u002F Check if webhook signing is configured.\n  const webhookSecret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},";\n  if \u0028webhookSecret\u0029 {\n    \u002F\u002F Retrieve the event by verifying the signature using the raw body and secret.\n    let event;\n    let signature = req.headers[\"stripe-signature\"];\n\n    try {\n      event = stripe.webhooks.constructEvent\u0028\n        req.body,\n        signature,\n        webhookSecret\n      \u0029;\n    } catch \u0028err\u0029 {\n      console.log\u0028\u0060⚠️  Webhook signature verification failed.\u0060\u0029;\n      return res.sendStatus\u0028400\u0029;\n    }\n    \u002F\u002F Extract the object from the event.\n    data = event.data;\n    eventType = event.type;\n  } else {\n    \u002F\u002F Webhook signing is recommended, but if the secret is not configured in \u0060config.js\u0060,\n    \u002F\u002F retrieve the event data directly from the request body.\n    data = req.body.data;\n    eventType = req.body.type;\n  }\n\n  switch \u0028eventType\u0029 {\n    case 'checkout.session.completed':\n      \u002F\u002F Payment is successful and the subscription is created.\n      \u002F\u002F You should provision the subscription and save the customer ID to your database.\n      break;\n    case 'invoice.paid':\n      \u002F\u002F Continue to provision the subscription as payments continue to be made.\n      \u002F\u002F Store the status in your database and check when a user accesses your service.\n      \u002F\u002F This approach helps you avoid hitting rate limits.\n      break;\n    case 'invoice.payment_failed':\n      \u002F\u002F The payment failed or the customer does not have a valid payment method.\n      \u002F\u002F The subscription becomes past_due. Notify your customer and send them to the\n      \u002F\u002F customer portal to update their payment information.\n      break;\n    default:\n      \u002F\u002F Unhandled event type\n  }\n\n  res.sendStatus\u0028200\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fgo\u002Fserver.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleWebhook\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  b, err := ioutil.ReadAll\u0028r.Body\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"ioutil.ReadAll: %v\", err\u0029\n    return\n  }\n\n  event, err := webhook.ConstructEvent\u0028b, r.Header.Get\u0028\"Stripe-Signature\"\u0029, ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["\"{{STRIPE_WEBHOOK_SECRET}}\""]},"children":[]},"\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"webhook.ConstructEvent: %v\", err\u0029\n    return\n  }\n\n  switch event.Type {\n    case \"checkout.session.completed\":\n      \u002F\u002F Payment is successful and the subscription is created.\n      \u002F\u002F You should provision the subscription and save the customer ID to your database.\n    case \"invoice.paid\":\n      \u002F\u002F Continue to provision the subscription as payments continue to be made.\n      \u002F\u002F Store the status in your database and check when a user accesses your service.\n      \u002F\u002F This approach helps you avoid hitting rate limits.\n    case \"invoice.payment_failed\":\n      \u002F\u002F The payment failed or the customer does not have a valid payment method.\n      \u002F\u002F The subscription becomes past_due. Notify your customer and send them to the\n      \u002F\u002F customer portal to update their payment information.\n    default:\n      \u002F\u002F unhandled event type\n  }\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"PaymentsController.cs","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fdotnet\u002FControllers\u002FPaymentsController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"webhook\"\u0029]\npublic async Task\u003CIActionResult\u003E Webhook\u0028\u0029\n{\n  var json = await new StreamReader\u0028HttpContext.Request.Body\u0029.ReadToEndAsync\u0028\u0029;\n  Event stripeEvent;\n  try\n  {\n    var webhookSecret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["\"{{STRIPE_WEBHOOK_SECRET}}\""]},"children":[]},"\n    stripeEvent = EventUtility.ConstructEvent\u0028\n      json,\n      Request.Headers[\"Stripe-Signature\"],\n      webhookSecret\n    \u0029;\n    Console.WriteLine\u0028\u0024\"Webhook notification with type: {stripeEvent.Type} found for {stripeEvent.Id}\"\u0029;\n  }\n  catch \u0028Exception e\u0029\n  {\n    Console.WriteLine\u0028\u0024\"Something failed {e}\"\u0029;\n    return BadRequest\u0028\u0029;\n  }\n\n  switch \u0028stripeEvent.Type\u0029 {\n    case \"checkout.session.completed\":\n      \u002F\u002F Payment is successful and the subscription is created.\n      \u002F\u002F You should provision the subscription and save the customer ID to your database.\n      break;\n    case \"invoice.paid\":\n      \u002F\u002F Continue to provision the subscription as payments continue to be made.\n      \u002F\u002F Store the status in your database and check when a user accesses your service.\n      \u002F\u002F This approach helps you avoid hitting rate limits.\n      break;\n    case \"invoice.payment_failed\":\n      \u002F\u002F The payment failed or the customer does not have a valid payment method.\n      \u002F\u002F The subscription becomes past_due. Notify your customer and send them to the\n      \u002F\u002F customer portal to update their payment information.\n      break;\n    default:\n      \u002F\u002F Unhandled event type\n      break;\n  }\n\n  return Ok\u0028\u0029;\n}\n"]}]}}],"codeTabGroupID":"codetab_b1011e43dd316e05e236e8673666daa331ab028b"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The minimum event types to monitor:"]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Event name"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Description"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"checkout.session.completed"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Sent when a customer clicks the Pay or Subscribe button in Checkout, informing you of a new purchase."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"invoice.paid"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Sent each billing interval when a payment succeeds."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"invoice.payment_failed"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Sent each billing interval if there is an issue with your customer’s payment method."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For even more events to monitor, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["Subscription webhooks"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"configure-portal","beta":false,"badges":["Dashboard"],"collapsable":true,"numbered":true,"optional":false,"title":"Configure the customer portal","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]}," lets your customers directly manage their existing subscriptions and invoices."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fsettings\u002Fbilling\u002Fportal"},"children":["the Dashboard"]}," to configure the portal. At a minimum, make sure to configure it so that customers can update their payment methods. See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["Integrating the customer portal"]}," for information about other settings you can configure."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-portal-session","beta":false,"badges":["Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create a portal Session","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Define an endpoint that ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomer_portal\u002Fsessions\u002Fcreate"},"children":["creates the customer portal session"]}," for your frontend to call. Here ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"CUSTOMER_ID"},"children":[]}," refers to the customer ID created by a Checkout Session that you saved while processing the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"checkout.session.completed"},"children":[]}," webhook. You can also set a default redirect link for the portal in the Dashboard."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Pass an optional ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]}," value for the page on your site to redirect your customer to after they finish managing their subscription:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-portal-session.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fruby\u002Fserver.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n# This is the URL to which users will be redirected after they are done\n# managing their billing.\nreturn_url = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},"\ncustomer_id = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},"\n\nsession = Stripe::BillingPortal::Session.create\u0028{\n  customer: customer_id,\n  return_url: return_url,\n}\u0029\n\n# Redirect to the URL for the session\n#   redirect session.url, 303\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fpython\u002Fserver.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n# This is the URL to which the customer will be redirected after they are\n# done managing their billing with the portal.\nreturn_url = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},"\ncustomer_id = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},"\n\nsession = stripe.billing_portal.Session.create\u0028\n    customer=customer_id,\n    return_url=return_url,\n\u0029\n\n# redirect to the URL for the session\n#   return redirect\u0028session.url, code=303\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"customer-portal.php","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fphp\u002Fpublic\u002Fcustomer-portal.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u002F\u002F This is the URL to which the user will be redirected after they have\n\u002F\u002F finished managing their billing in the portal.\n\u0024return_url = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},";\n\u0024stripe_customer_id = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},";\n\n\u0024session = \\Stripe\\BillingPortal\\Session::create\u0028[\n  'customer' =\u003E \u0024stripe_customer_id,\n  'return_url' =\u003E \u0024return_url,\n]\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   header\u0028\"HTTP\u002F1.1 303 See Other\"\u0029;\n\u002F\u002F   header\u0028\"Location: \" . \u0024session-\u003Eurl\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fjava\u002Fsrc\u002Fmain\u002Fjava\u002Fcom\u002Fstripe\u002Fsample\u002FServer.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n\u002F\u002F This is the URL to which the user will be redirected after they have\n\u002F\u002F finished managing their billing in the portal.\nString domainUrl = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["\"{{DOMAIN_URL}}\""]},"children":[]},";\nString customer = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["\"{{CUSTOMER_ID}}\""]},"children":[]},";\n\ncom.stripe.param.billingportal.SessionCreateParams params = new com.stripe.param.billingportal.SessionCreateParams.Builder\u0028\u0029\n    .setReturnUrl\u0028domainUrl\u0029\n    .setCustomer\u0028customer\u0029\n    .build\u0028\u0029;\ncom.stripe.model.billingportal.Session portalSession = com.stripe.model.billingportal.Session.create\u0028params\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   response.redirect\u0028portalSession.getUrl\u0028\u0029, 303\u0029;\n\u002F\u002F   return \"\";\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fnode\u002Fserver.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u002F\u002F This is the url to which the customer will be redirected when they are done\n\u002F\u002F managing their billing with the portal.\nconst returnUrl = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},";\nconst customerId = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},";\n\nconst portalSession = await stripe.billingPortal.sessions.create\u0028{\n  customer: customerId,\n  return_url: returnUrl,\n}\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   res.redirect\u0028303, portalSession.url\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fgo\u002Fserver.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\n\u002F\u002F The URL to which the user is redirected when they are done managing\n\u002F\u002F billing in the portal.\nreturnURL := ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Flocalhost","value":["\"{{DOMAIN_URL}}\""]},"children":[]},"\ncustomerID := ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["\"{{CUSTOMER_ID}}\""]},"children":[]},"\n\nparams := \u0026stripe.BillingPortalSessionParams{\n  Customer:  stripe.String\u0028customerID\u0029,\n  ReturnURL: stripe.String\u0028returnURL\u0029,\n}\nps, _ := portalsession.New\u0028params\u0029\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   http.Redirect\u0028w, r, ps.URL, http.StatusSeeOther\u0029\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"PaymentsController.cs","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fdotnet\u002FControllers\u002FPaymentsController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n\u002F\u002F This is the URL to which your customer will return after\n\u002F\u002F they are done managing billing in the .\nvar customerId = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},",\nvar returnUrl = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},",\n\nvar options = new Stripe.BillingPortal.SessionCreateOptions\n{\n    Customer = customerId,\n    ReturnUrl = returnUrl,\n};\nvar service = new Stripe.BillingPortal.SessionService\u0028this.client\u0029;\nvar session = await service.CreateAsync\u0028options\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   Response.Headers.Add\u0028\"Location\", session.Url\u0029;\n\u002F\u002F   return new StatusCodeResult\u0028303\u0029;\n"]}]}}],"codeTabGroupID":"codetab_5b6baba536241d36e9095be0b8db8d5ac7c37bc9"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"send-to-portal","beta":false,"badges":["Client"],"collapsable":true,"numbered":true,"optional":false,"title":"Send customers to the customer portal","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On your frontend, add a button to the page at the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"success_url"},"children":[]}," that provides a link to the customer portal:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"success.html","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fclient\u002Fsuccess.html","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003Chtml\u003E\n  \u003Chead\u003E\n    \u003Ctitle\u003EManage Billing\u003C\u002Ftitle\u003E\n  \u003C\u002Fhead\u003E\n  \u003Cbody\u003E\n    \u003Cform action=\"\u002Fcustomer-portal\" method=\"POST\"\u003E\n      \u003C\u0021-- Note: If using PHP set the action to \u002Fcustomer-portal.php --\u003E\n      \u003Cbutton type=\"submit\"\u003EManage Billing\u003C\u002Fbutton\u003E\n    \u003C\u002Fform\u003E\n  \u003C\u002Fbody\u003E\n\u003C\u002Fhtml\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After exiting the customer portal, the Customer returns to your website at the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]},". Continue to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["monitor webhooks"]}," to track the state of the Customer’s subscription."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you configure the customer portal to allow actions such as canceling a subscription, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management\u002Fintegrate-customer-portal#webhooks"},"children":["Integrating the customer portal"]}," for additional events to monitor."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"test","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Test your integration","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Ftesting-scenarios.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"test-payment-methods"},"children":["Test payment methods"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the following table to test different payment methods and scenarios."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Payment method"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Scenario"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["How to test"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"900123456"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},". The confirmed PaymentIntent initially transitions to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},", then transitions to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment fails with an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"account_closed"},"children":[]}," error code."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"111111113"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment succeeds and does not require authentication."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4242 4242 4242 4242"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment requires ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["authentication"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0025 0000 3155"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card is declined with a decline code like ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"insufficient_funds"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0000 0000 9995"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with SEPA Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT321904300235473204"},"children":[]},". The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment intent status transition from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT861904300235473202"},"children":[]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"monitoring-events"},"children":["Monitoring events"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["subscription webhooks"]},". You can view events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fevents"},"children":["Dashboard"]}," or with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For more details about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Ftesting"},"children":["testing your Billing integration"]},", read the guide."]}]},{"\u0024\u0024mdtype":"Tag","name":"SeeAlso","attributes":{"level":2,"children":[{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1,"type":"guide"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Ftrials"},"children":["Offer customers a free trial period"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fcoupons#using-coupons-in-checkout"},"children":["Apply discounts"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["Manage prorations"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements"},"children":["Integrate entitlements to manage access to your product’s features"]}]}]}],"titleDescriptor":{"id":"docsApp.components.seealso.defaultHeading","defaultMessage":"See also"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1,"type":"guide"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Ftrials"},"children":["Offer customers a free trial period"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fcoupons#using-coupons-in-checkout"},"children":["Apply discounts"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["Manage prorations"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements"},"children":["Integrate entitlements to manage access to your product’s features"]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Page","attributes":{"id":"subscription-embedded-checkout","prefs":{"platform":"web","ui":"embedded-form"},"title":"Embedded form"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCallout","attributes":{"demo":"embedded-checkout-subscription","isHorizontal":true,"embeddedCheckoutHost":"https:\u002F\u002Fjs.stripe.com\u002Fv3\u002Fembedded-checkout-inner.html"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCalloutRow","attributes":{"title":"Integration effort"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityRating","attributes":{"rating":2,"color":"purple"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"ComplexityCalloutRow","attributes":{"title":"UI customization"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Customize the appearance."]}]},{"\u0024\u0024mdtype":"Tag","name":"ComplexityCalloutRow","attributes":{"title":"Integration type"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use prebuilt embedded forms to collect payments and manage ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"subscriptions"},"children":["subscriptions"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"set-up-server","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Set up the server","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"set-up-stripe"},"children":["Set up Stripe"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Install the Stripe client of your choice:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Flibraries.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Available as a gem\nsudo gem install stripe\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"Gemfile","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install through pip\npip3 install --upgrade stripe\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"PyPi","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or find the Stripe package on http:\u002F\u002Fpypi.python.org\u002Fpypi\u002Fstripe\u002F\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"requirements.txt","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Find the version you want to pin:\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-python\u002Fblob\u002Fmaster\u002FCHANGELOG.md\n# Specify that version in your requirements.txt file\nstripe\u003E=5.0.0\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install the PHP library with Composer\ncomposer require stripe\u002Fstripe-php\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"Source","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or download the source directly: https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-php\u002Freleases\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"build.gradle","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F*\n  For Gradle, add the following dependency to your build.gradle and replace with\n  the version number you want to use from:\n  - https:\u002F\u002Fmvnrepository.com\u002Fartifact\u002Fcom.stripe\u002Fstripe-java or\n  - https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n*\u002F\nimplementation \"com.stripe:stripe-java:","26.0.0","\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"xml","filename":"pom.xml","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003C\u0021--\n  For Maven, add the following dependency to your POM and replace with the\n  version number you want to use from:\n  - https:\u002F\u002Fmvnrepository.com\u002Fartifact\u002Fcom.stripe\u002Fstripe-java or\n  - https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n--\u003E\n\u003Cdependency\u003E\n  \u003CgroupId\u003Ecom.stripe\u003C\u002FgroupId\u003E\n  \u003CartifactId\u003Estripe-java\u003C\u002FartifactId\u003E\n  \u003Cversion\u003E","26.0.0","\u003C\u002Fversion\u003E\n\u003C\u002Fdependency\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"Other environments","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# For other environments, manually install the following JARs:\n# - The Stripe JAR from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n# - Google Gson from https:\u002F\u002Fgithub.com\u002Fgoogle\u002Fgson\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install with npm\nnpm install stripe --save\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Make sure your project is using Go Modules\ngo mod init\n# Install stripe-go\ngo get -u github.com\u002Fstripe\u002Fstripe-go\u002Fv","79","\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"app.go","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Then import the package\nimport \u0028\n  \"github.com\u002Fstripe\u002Fstripe-go\u002Fv","79","\"\n\u0029\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install with dotnet\ndotnet add package Stripe.net\ndotnet restore\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or install with NuGet\nInstall-Package Stripe.net\n"]}]}}],"codeTabGroupID":"codetab_dfc4a6aff5f3711c66bdb90a3f37589faa94b1f4"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"create-a-product-and-price"},"children":["Create a product and price"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcreate-business-model.md","variables":{"payment_currency":"usd","stripe_cli_install_link":false}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create your ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products-subs"},"children":["products"]}," and their ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["prices"]}," in the Dashboard or with the Stripe CLI."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. \u0028If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.\u0029"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In this example, each product bills at monthly intervals. The price for the Basic product is 5 ","USD",". The price for the Premium product is 15 ","USD","."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"dashboard","title":"Dashboard","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Dashboard"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fproducts\u002Fcreate"},"children":["Add a product"]}," page and create two products. Add one price for each product, each with a monthly recurring billing period:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Premium product: Premium service with extra features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 15 ","USD"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Basic product: Basic service with minimum features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 5 ","USD"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_G0FvDp6vZvdwRZ"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you’re ready, use the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy to live mode"]}," button at the top right of the page to clone your product from ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["test mode to live mode"]},"."]}]}},{"id":"stripe-cli","title":"Stripe CLI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Stripe CLI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you haven’t already, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["install the Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next create the product objects:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium product\nstripe products create \\\n  --name=\"Billing Guide: Premium Service\" \\\n  --description=\"Premium service with extra features\"\n\n# Basic product\nstripe products create \\\n  --name=\"Billing Guide: Basic Service\" \\\n  --description=\"Basic service with minimum features\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the product ID for each product. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"prod_H94k5odtwJXMtQ\",\n  \"object\": \"product\",\n  \"active\": true,\n  \"attributes\": [\n\n  ],\n  \"created\": 1587577341,\n  \"description\": \"Premium service with extra features\",\n  \"images\": [\n\n  ],\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": \"Billing Guide: Premium Service\",\n  \"statement_descriptor\": null,\n  \"type\": \"service\",\n  \"unit_label\": null,\n  \"updated\": 1587577341\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the product IDs to create a price for each product. The ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"unit_amount"},"children":[]}," number is in cents, so ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"1500"},"children":[]}," = 15 ","USD",", for example."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium price\n  stripe prices create \\\n    -d product=prod_H94k5odtwJXMtQ \\\n    -d unit_amount=1500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n\n# Basic price\n  stripe prices create \\\n    -d product=prod_HGd6W1VUqqXGvr \\\n    -d unit_amount=500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the price ID for each price so you can use them in subsequent steps. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"price_HGd7M3DV3IMXkC\",\n  \"object\": \"price\",\n  \"product\": \"prod_HGd6W1VUqqXGvr\",\n  \"type\": \"recurring\",\n  \"currency\": \"","usd","\",\n  \"recurring\": {\n    \"aggregate_usage\": null,\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"active\": true,\n  \"billing_scheme\": \"per_unit\",\n  \"created\": 1589319695,\n  \"livemode\": false,\n  \"lookup_key\": null,\n  \"metadata\": {\n  },\n  \"nickname\": null,\n  \"unit_amount\": 1500,\n  \"unit_amount_decimal\": \"1500\",\n  \"tiers\": null,\n  \"tiers_mode\": null,\n  \"transform_quantity\": null\n}\n"]}]}}]},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you offer multiple billing intervals, use Checkout to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fcheckout\u002Fupsells"},"children":["upsell"]}," customers on longer billing intervals and collect more revenue upfront."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For other pricing models, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fproducts-prices\u002Fpricing-models"},"children":["Billing examples"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"create-a-checkout-session"},"children":["Create a Checkout Session"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Add an endpoint on your server that creates a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"checkout-session"},"children":["Checkout Session"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you create the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate"},"children":["Checkout Session"]},", pass the following parameters:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["To use the embedded Checkout form, set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate#create_checkout_session-ui_mode"},"children":["ui_mode"]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"embedded"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["To create subscriptions when your customer checks out, set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate#create_checkout_session-mode"},"children":["mode"]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["To define the page your customer returns to after completing or attempting payment, specify a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate#create_checkout_session-return_url"},"children":["return_url"]},". Include the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"{CHECKOUT_SESSION_ID}"},"children":[]}," template variable in the URL. Checkout replaces the variable with the Checkout Session ID before redirecting your customer. You create and host the return page on your website."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To mount Checkout, use the Checkout Session’s ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"client_secret"},"children":[]}," returned in the response."]},{"\u0024\u0024mdtype":"Tag","name":"CodegenSnippet","attributes":{"generatedCodeBlocks":[{"lang":"curl","generatedCode":{"resources":"curl https:\u002F\u002Fapi.stripe.com\u002Fv1\u002Fcheckout\u002Fsessions \\\n  -u \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024:\" \\\n  -d mode=subscription \\\n  -d \"line_items[0][price]\"=\"\u0024\u0024_RESOURCE_price\u0024\u0024\" \\\n  -d \"line_items[0][quantity]\"=1 \\\n  -d ui_mode=embedded \\\n  --data-urlencode return_url=\"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\""},"codegenError":null,"overriddenCodeBlock":null},{"lang":"cli","generatedCode":{"resources":"stripe checkout sessions create  \\\n  --mode=subscription \\\n  -d \"line_items[0][price]\"=\"\u0024\u0024_RESOURCE_price\u0024\u0024\" \\\n  -d \"line_items[0][quantity]\"=1 \\\n  --ui-mode=embedded \\\n  --return-url=\"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\""},"codegenError":null,"overriddenCodeBlock":null},{"lang":"ruby","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.api_key = '\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\n\nStripe::Checkout::Session.create\u0028{\n  mode: 'subscription',\n  line_items: [\n    {\n      price: '\u0024\u0024_RESOURCE_price\u0024\u0024',\n      quantity: 1,\n    },\n  ],\n  ui_mode: 'embedded',\n  return_url: 'https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}',\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"python","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nimport stripe\nstripe.api_key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nstripe.checkout.Session.create\u0028\n  mode=\"subscription\",\n  line_items=[{\"price\": \"\u0024\u0024_RESOURCE_price\u0024\u0024\", \"quantity\": 1}],\n  ui_mode=\"embedded\",\n  return_url=\"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\",\n\u0029","services":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nclient = StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029\n\nclient.checkout.sessions.create\u0028{\n  \"mode\": \"subscription\",\n  \"line_items\": [{\"price\": \"\u0024\u0024_RESOURCE_price\u0024\u0024\", \"quantity\": 1}],\n  \"ui_mode\": \"embedded\",\n  \"return_url\": \"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\",\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"php","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n\u0024stripe = new \\Stripe\\StripeClient\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\n\u0024stripe-\u003Echeckout-\u003Esessions-\u003Ecreate\u0028[\n  'mode' =\u003E 'subscription',\n  'line_items' =\u003E [\n    [\n      'price' =\u003E '\u0024\u0024_RESOURCE_price\u0024\u0024',\n      'quantity' =\u003E 1,\n    ],\n  ],\n  'ui_mode' =\u003E 'embedded',\n  'return_url' =\u003E 'https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}',\n]\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"java","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.apiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nSessionCreateParams params =\n  SessionCreateParams.builder\u0028\u0029\n    .setMode\u0028SessionCreateParams.Mode.SUBSCRIPTION\u0029\n    .addLineItem\u0028\n      SessionCreateParams.LineItem.builder\u0028\u0029\n        .setPrice\u0028\"\u0024\u0024_RESOURCE_price\u0024\u0024\"\u0029\n        .setQuantity\u00281L\u0029\n        .build\u0028\u0029\n    \u0029\n    .setUiMode\u0028SessionCreateParams.UiMode.EMBEDDED\u0029\n    .setReturnUrl\u0028\"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\"\u0029\n    .build\u0028\u0029;\n\nSession session = Session.create\u0028params\u0029;","services":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeClient client = new StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029;\n\nSessionCreateParams params =\n  SessionCreateParams.builder\u0028\u0029\n    .setMode\u0028SessionCreateParams.Mode.SUBSCRIPTION\u0029\n    .addLineItem\u0028\n      SessionCreateParams.LineItem.builder\u0028\u0029\n        .setPrice\u0028\"\u0024\u0024_RESOURCE_price\u0024\u0024\"\u0029\n        .setQuantity\u00281L\u0029\n        .build\u0028\u0029\n    \u0029\n    .setUiMode\u0028SessionCreateParams.UiMode.EMBEDDED\u0029\n    .setReturnUrl\u0028\"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\"\u0029\n    .build\u0028\u0029;\n\nSession session = client.checkout\u0028\u0029.sessions\u0028\u0029.create\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"node","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nconst stripe = require\u0028'stripe'\u0029\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\nconst session = await stripe.checkout.sessions.create\u0028{\n  mode: 'subscription',\n  line_items: [\n    {\n      price: '\u0024\u0024_RESOURCE_price\u0024\u0024',\n      quantity: 1,\n    },\n  ],\n  ui_mode: 'embedded',\n  return_url: 'https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}',\n}\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"go","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nstripe.Key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nparams := \u0026stripe.CheckoutSessionParams{\n  Mode: stripe.String\u0028string\u0028stripe.CheckoutSessionModeSubscription\u0029\u0029,\n  LineItems: []*stripe.CheckoutSessionLineItemParams{\n    \u0026stripe.CheckoutSessionLineItemParams{\n      Price: stripe.String\u0028\"\u0024\u0024_RESOURCE_price\u0024\u0024\"\u0029,\n      Quantity: stripe.Int64\u00281\u0029,\n    },\n  },\n  UIMode: stripe.String\u0028string\u0028stripe.CheckoutSessionUIModeEmbedded\u0029\u0029,\n  ReturnURL: stripe.String\u0028\"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\"\u0029,\n};\nresult, err := session.New\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"dotnet","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeConfiguration.ApiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nvar options = new Stripe.Checkout.SessionCreateOptions\n{\n    Mode = \"subscription\",\n    LineItems = new List\u003CStripe.Checkout.SessionLineItemOptions\u003E\n    {\n        new Stripe.Checkout.SessionLineItemOptions\n        {\n            Price = \"\u0024\u0024_RESOURCE_price\u0024\u0024\",\n            Quantity = 1,\n        },\n    },\n    UiMode = \"embedded\",\n    ReturnUrl = \"https:\u002F\u002Fexample.com\u002Fcheckout\u002Freturn?session_id={CHECKOUT_SESSION_ID}\",\n};\nvar service = new Stripe.Checkout.SessionService\u0028\u0029;\nservice.Create\u0028options\u0029;"},"codegenError":null,"overriddenCodeBlock":null}],"codeTabGroupID":"codetab_8d4aebf4dc74fdd104a5859fc36c2e40135ff629","argsToHighlight":["ui_mode","return_url"],"httpPath":"\u002Fv1\u002Fcheckout\u002Fsessions","httpVerb":"post","v2ApiVersion":"2024-05-23.preview-v2"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"build-page","beta":false,"badges":["Client"],"collapsable":true,"numbered":true,"optional":false,"title":"Build your subscription page","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"mount-checkout"},"children":["Mount Checkout"]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"pref":"client","selector":"tabs","items":[{"id":"html","title":"HTML \u002B JS","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"html","title":"HTML \u002B JS"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"load-stripe.js"},"children":["Load Stripe.js"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"stripe-js"},"children":["Stripe.js"]}," to remain ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"pci-compliance"},"children":["PCI compliant"]}," by ensuring that payment details are sent directly to Stripe without hitting your server. Always load Stripe.js from js.stripe.com to remain compliant. Don’t include the script in a bundle or host it yourself."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"define-the-payment-form"},"children":["Define the payment form"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To securely collect the customer’s information, create an empty placeholder ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"div"},"children":[]},". Stripe inserts an iframe into the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"div"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Checkout is available as part of ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fjs"},"children":["Stripe.js"]},". Include the Stripe.js script on your page by adding it to the head of your HTML file. Next, create an empty DOM node \u0028container\u0029 to use for mounting."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"index.html","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":9,"end":10},{"start":13,"end":18}],"add":[],"remove":[]}},"children":["\u003C\u0021DOCTYPE html\u003E\n\u003Chtml lang=\"en\"\u003E\n  \u003Chead\u003E\n    \u003Cmeta charset=\"utf-8\" \u002F\u003E\n    \u003Ctitle\u003EAccept a payment\u003C\u002Ftitle\u003E\n    \u003Cmeta name=\"description\" content=\"A demo of a payment on Stripe\" \u002F\u003E\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\" \u002F\u003E\n    \u003Clink rel=\"stylesheet\" href=\"style.css\" \u002F\u003E",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n    \u003C\u0021-- Add the Stripe.js script here --\u003E\n    \u003Cscript src=\"https:\u002F\u002Fjs.stripe.com\u002Fv3\u002F\"\u003E\u003C\u002Fscript\u003E"},"children":["\n    \u003C\u0021-- Add the Stripe.js script here --\u003E\n    \u003Cscript src=\"https:\u002F\u002Fjs.stripe.com\u002Fv3\u002F\"\u003E\u003C\u002Fscript\u003E"]},"\n    \u003Cscript src=\"checkout.js\" defer\u003E\u003C\u002Fscript\u003E\n  \u003C\u002Fhead\u003E",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \u003Cbody\u003E\n    \u003C\u0021-- Display a payment form --\u003E\n      \u003Cdiv id=\"checkout\"\u003E\n        \u003C\u0021-- Checkout inserts the payment form here --\u003E\n      \u003C\u002Fdiv\u003E\n  \u003C\u002Fbody\u003E"},"children":["\n  \u003Cbody\u003E\n    \u003C\u0021-- Display a payment form --\u003E\n      \u003Cdiv id=\"checkout\"\u003E\n        \u003C\u0021-- Checkout inserts the payment form here --\u003E\n      \u003C\u002Fdiv\u003E\n  \u003C\u002Fbody\u003E"]},"\n\u003C\u002Fhtml\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"initialize-stripe.js"},"children":["Initialize Stripe.js"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Initialize Stripe.js with your publishable API key."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"fetch-a-checkout-session-client-secret"},"children":["Fetch a Checkout Session client secret"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create an asynchronous ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fetchClientSecret"},"children":[]}," function that makes a request to your server to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate"},"children":["create a Checkout Session"]}," and retrieve the client secret."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"initialize-checkout"},"children":["Initialize Checkout"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Initialize Checkout with your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fetchClientSecret"},"children":[]}," function and mount it to the placeholder ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"\u003Cdiv\u003E"},"children":[]}," in your payment form. Checkout is rendered in an iframe that securely sends payment information to Stripe over an HTTPS connection."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Avoid placing Checkout within another iframe because some payment methods require redirecting to another page for payment confirmation."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fcheckout\u002Fclient\u002Finit-embedded-checkout.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"index.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Initialize Stripe.js","\nconst stripe = Stripe\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"'\u0029;","\n\ninitialize\u0028\u0029;\n\n\u002F\u002F Fetch Checkout Session and retrieve the client secret\nasync function initialize\u0028\u0029 {\n  const fetchClientSecret = async \u0028\u0029 =\u003E {\n    const response = await fetch\u0028\"\u002Fcreate-checkout-session\", {\n      method: \"POST\",\n    }\u0029;\n    const { clientSecret } = await response.json\u0028\u0029;\n    return clientSecret;\n  };\n\n  \u002F\u002F Initialize Checkout\n  const checkout = await stripe.initEmbeddedCheckout\u0028{\n    fetchClientSecret,\n  }\u0029;\n\n  \u002F\u002F Mount Checkout\n  checkout.mount\u0028'#checkout'\u0029;\n}\n"]}]}]}},{"id":"react","title":"React","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"react","title":"React"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"add-stripe-to-your-react-app"},"children":["Add Stripe to your React app"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To stay ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"pci-compliance"},"children":["PCI compliant"]}," by ensuring that payment details go directly to Stripe and never reach your server, install ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-js\u002Freact"},"children":["React Stripe.js"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Command","attributes":{"text":"npm install --save @stripe\u002Freact-stripe-js @stripe\u002Fstripe-js","type":"copy"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"load-stripe.js"},"children":["Load Stripe.js"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To configure the Stripe library, call ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"loadStripe\u0028\u0029"},"children":[]}," with your Stripe publishable API key. Create an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"EmbeddedCheckoutProvider"},"children":[]},". Pass the returned ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Promise"},"children":[]}," to the provider."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"fetch-a-checkout-session-client-secret"},"children":["Fetch a Checkout Session client secret"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create an asynchronous ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fetchClientSecret"},"children":[]}," function that makes a request to your server to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate"},"children":["create a Checkout Session"]}," and retrieve the client secret."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"initialize-checkout"},"children":["Initialize Checkout"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To allow the child components to access the Stripe service through the embedded Checkout consumer, pass the resulting promise from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"loadStripe"},"children":[]}," and the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fetchClientSecret"},"children":[]}," function as an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"option"},"children":[]}," to the embedded Checkout provider."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"jsx","filename":"App.jsx","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import * as React from 'react';\nimport {loadStripe} from '@stripe\u002Fstripe-js';\nimport {\n  EmbeddedCheckoutProvider,\n  EmbeddedCheckout\n} from '@stripe\u002Freact-stripe-js';\n\n\u002F\u002F Make sure to call \u0060loadStripe\u0060 outside of a component’s render to avoid\n\u002F\u002F recreating the \u0060Stripe\u0060 object on every render.\nconst stripePromise = loadStripe\u0028'pk_test_123', {\n}\u0029;\n\nconst App = \u0028{fetchClientSecret}\u0029 =\u003E {\n  const options = {fetchClientSecret};\n\n  return \u0028\n    \u003CEmbeddedCheckoutProvider\n      stripe={stripePromise}\n      options={options}\n    \u003E\n      \u003CEmbeddedCheckout \u002F\u003E\n    \u003C\u002FEmbeddedCheckoutProvider\u003E\n  \u0029\n}\n"]}]}}]},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"return-page","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Show a return page","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After your customer attempts payment, Stripe redirects them to a return page that you host on your site. When you created the Checkout Session, you specified the URL of the return page in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate#create_checkout_session-return_url"},"children":["return_url"]}," parameter."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["During payment, some payment methods redirect the customer to an intermediate page, such as a bank authorization page. When they complete that page, Stripe redirects them to your return page."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"create-an-endpoint-to-retrieve-a-checkout-session"},"children":["Create an endpoint to retrieve a Checkout Session"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Add an endpoint to retrieve a Checkout Session status with the Checkout Session ID in the URL."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"retrieve-a-checkout-session"},"children":["Retrieve a Checkout Session"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To use details for the Checkout session, immediately make a request to the endpoint on your server to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fretrieve"},"children":["retrieve the Checkout Session"]}," status using the Checkout Session ID in the URL as soon as your return page loads."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"handle-the-session"},"children":["Handle the session"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Handle the result according to the session status:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"complete"},"children":[]},": The payment succeeded. Use the information from the Checkout Session to render a success page."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"open"},"children":[]},": The payment failed or was canceled. Remount Checkout so that your customer can try again."]}]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"js","filename":"return.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":1,"end":10}],"add":[],"remove":[]}},"children":[{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n\u002F\u002F Retrieve a Checkout Session\n\u002F\u002F Use the session ID\ninitialize\u0028\u0029;\n\nasync function initialize\u0028\u0029 {\n  const queryString = window.location.search;\n  const urlParams = new URLSearchParams\u0028queryString\u0029;\n  const sessionId = urlParams.get\u0028'session_id'\u0029;\n  const response = await fetch\u0028\u0060\u002Fsession-status?session_id=\u0024{sessionId}\u0060\u0029;\n  const session = await response.json\u0028\u0029;"},"children":["\n\u002F\u002F Retrieve a Checkout Session\n\u002F\u002F Use the session ID\ninitialize\u0028\u0029;\n\nasync function initialize\u0028\u0029 {\n  const queryString = window.location.search;\n  const urlParams = new URLSearchParams\u0028queryString\u0029;\n  const sessionId = urlParams.get\u0028'session_id'\u0029;\n  const response = await fetch\u0028\u0060\u002Fsession-status?session_id=\u0024{sessionId}\u0060\u0029;\n  const session = await response.json\u0028\u0029;"]},"\n\u002F\u002F Handle the session according to its status\n  if \u0028session.status == 'open'\u0029 {\n    \u002F\u002F Remount embedded Checkout\n    window.location.replace\u0028'http:\u002F\u002Flocalhost:4242\u002Fcheckout.html'\u0029\n  } else if \u0028session.status == 'complete'\u0029 {\n    document.getElementById\u0028'success'\u0029.classList.remove\u0028'hidden'\u0029;\n    document.getElementById\u0028'customer-email'\u0029.textContent = session.customer_email;\n    \u002F\u002F Show success page\n    \u002F\u002F Optionally use session.payment_status or session.customer_email\n    \u002F\u002F to customize the success page\n  }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Add an endpoint to fetch the Checkout Session status\napp.get\u0028'\u002Fsession_status', async \u0028req, res\u0029 =\u003E {\n  const session = await stripe.checkout.sessions.retrieve\u0028req.query.session_id\u0029;\n  const customer = await stripe.customers.retrieve\u0028session.customer\u0029;\n\n  res.send\u0028{\n    status: session.status,\n    payment_status: session.payment_status,\n    customer_email: customer.email\n  }\u0029;\n}\u0029;\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"configure-portal","beta":false,"collapsable":true,"numbered":true,"optional":true,"title":"Configure the customer portal","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can set up the ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"customer-portal"},"children":["customer portal"]}," to let your customers directly manage their existing subscriptions and invoices."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can configure the portal in the Dashboard. To reduce churn, you can configure the portal to allow customers to update their payment methods in the case of failed payments."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To help customers find it, add a button on your website to redirect to the customer portal to allow customers to manage their subscription. Clicking this button redirects your customer to the Stripe-hosted customer portal page."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Read more about the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]}," and other customer management options."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"create-a-portal-session"},"children":["Create a portal session"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To add the portal to your customer experience, define an endpoint that ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomer_portal\u002Fsessions\u002Fcreate"},"children":["creates the customer portal session"]}," for your frontend to call. Here ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"CUSTOMER_ID"},"children":[]}," refers to the customer ID created by a Checkout Session that you saved while processing the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"checkout.session.completed"},"children":[]}," webhook. You can also set a default redirect link for the portal in the Dashboard."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Pass an optional ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]}," value for the page on your site to redirect your customer to after they finish managing their subscription:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-portal-session.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fruby\u002Fserver.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n# This is the URL to which users will be redirected after they are done\n# managing their billing.\nreturn_url = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},"\ncustomer_id = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},"\n\nsession = Stripe::BillingPortal::Session.create\u0028{\n  customer: customer_id,\n  return_url: return_url,\n}\u0029\n\n# Redirect to the URL for the session\n#   redirect session.url, 303\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fpython\u002Fserver.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n# This is the URL to which the customer will be redirected after they are\n# done managing their billing with the portal.\nreturn_url = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},"\ncustomer_id = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},"\n\nsession = stripe.billing_portal.Session.create\u0028\n    customer=customer_id,\n    return_url=return_url,\n\u0029\n\n# redirect to the URL for the session\n#   return redirect\u0028session.url, code=303\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"customer-portal.php","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fphp\u002Fpublic\u002Fcustomer-portal.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u002F\u002F This is the URL to which the user will be redirected after they have\n\u002F\u002F finished managing their billing in the portal.\n\u0024return_url = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},";\n\u0024stripe_customer_id = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},";\n\n\u0024session = \\Stripe\\BillingPortal\\Session::create\u0028[\n  'customer' =\u003E \u0024stripe_customer_id,\n  'return_url' =\u003E \u0024return_url,\n]\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   header\u0028\"HTTP\u002F1.1 303 See Other\"\u0029;\n\u002F\u002F   header\u0028\"Location: \" . \u0024session-\u003Eurl\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fjava\u002Fsrc\u002Fmain\u002Fjava\u002Fcom\u002Fstripe\u002Fsample\u002FServer.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n\u002F\u002F This is the URL to which the user will be redirected after they have\n\u002F\u002F finished managing their billing in the portal.\nString domainUrl = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["\"{{DOMAIN_URL}}\""]},"children":[]},";\nString customer = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["\"{{CUSTOMER_ID}}\""]},"children":[]},";\n\ncom.stripe.param.billingportal.SessionCreateParams params = new com.stripe.param.billingportal.SessionCreateParams.Builder\u0028\u0029\n    .setReturnUrl\u0028domainUrl\u0029\n    .setCustomer\u0028customer\u0029\n    .build\u0028\u0029;\ncom.stripe.model.billingportal.Session portalSession = com.stripe.model.billingportal.Session.create\u0028params\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   response.redirect\u0028portalSession.getUrl\u0028\u0029, 303\u0029;\n\u002F\u002F   return \"\";\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fnode\u002Fserver.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u002F\u002F This is the url to which the customer will be redirected when they are done\n\u002F\u002F managing their billing with the portal.\nconst returnUrl = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},";\nconst customerId = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},";\n\nconst portalSession = await stripe.billingPortal.sessions.create\u0028{\n  customer: customerId,\n  return_url: returnUrl,\n}\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   res.redirect\u0028303, portalSession.url\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fgo\u002Fserver.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\n\u002F\u002F The URL to which the user is redirected when they are done managing\n\u002F\u002F billing in the portal.\nreturnURL := ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Flocalhost","value":["\"{{DOMAIN_URL}}\""]},"children":[]},"\ncustomerID := ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["\"{{CUSTOMER_ID}}\""]},"children":[]},"\n\nparams := \u0026stripe.BillingPortalSessionParams{\n  Customer:  stripe.String\u0028customerID\u0029,\n  ReturnURL: stripe.String\u0028returnURL\u0029,\n}\nps, _ := portalsession.New\u0028params\u0029\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   http.Redirect\u0028w, r, ps.URL, http.StatusSeeOther\u0029\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"PaymentsController.cs","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fserver\u002Fdotnet\u002FControllers\u002FPaymentsController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n\u002F\u002F This is the URL to which your customer will return after\n\u002F\u002F they are done managing billing in the .\nvar customerId = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: cus_GBV60HKsE0mb5v","value":["'{{CUSTOMER_ID}}'"]},"children":[]},",\nvar returnUrl = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: http:\u002F\u002Fexample.com","value":["'{{DOMAIN_URL}}'"]},"children":[]},",\n\nvar options = new Stripe.BillingPortal.SessionCreateOptions\n{\n    Customer = customerId,\n    ReturnUrl = returnUrl,\n};\nvar service = new Stripe.BillingPortal.SessionService\u0028this.client\u0029;\nvar session = await service.CreateAsync\u0028options\u0029;\n\n\u002F\u002F Redirect to the URL for the session\n\u002F\u002F   Response.Headers.Add\u0028\"Location\", session.Url\u0029;\n\u002F\u002F   return new StatusCodeResult\u0028303\u0029;\n"]}]}}],"codeTabGroupID":"codetab_5b6baba536241d36e9095be0b8db8d5ac7c37bc9"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"send-customers-to-the-customer-portal"},"children":["Send customers to the customer portal"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On your frontend, add a button to the page at the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"success_url"},"children":[]}," that provides a link to the customer portal:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"success.html","link":"https:\u002F\u002Fgithub.com\u002Fstripe-samples\u002Fcheckout-single-subscription\u002Fblob\u002Fmaster\u002Fclient\u002Fsuccess.html","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003Chtml\u003E\n  \u003Chead\u003E\n    \u003Ctitle\u003EManage Billing\u003C\u002Ftitle\u003E\n  \u003C\u002Fhead\u003E\n  \u003Cbody\u003E\n    \u003Cform action=\"\u002Fcustomer-portal\" method=\"POST\"\u003E\n      \u003C\u0021-- Note: If using PHP set the action to \u002Fcustomer-portal.php --\u003E\n      \u003Cbutton type=\"submit\"\u003EManage Billing\u003C\u002Fbutton\u003E\n    \u003C\u002Fform\u003E\n  \u003C\u002Fbody\u003E\n\u003C\u002Fhtml\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After exiting the customer portal, the Customer returns to your website at the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]},". Continue to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["monitor webhooks"]}," to track the state of the Customer’s subscription."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you configure the customer portal to allow actions such as canceling a subscription, you should monitor ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management\u002Fintegrate-customer-portal#webhooks"},"children":["additional events"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"provision-access","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Provision access","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Now that the subscription is active, give your user access to your service.  To do this, listen to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.created"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]},", and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," events.  These events pass a subscription object that contains a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"status"},"children":[]}," field indicating whether the subscription is active, past due, or canceled.  See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-lifecycle"},"children":["the subscription lifecycle"]}," for a complete list of statuses. To learn about managing access to your product’s feature, see the doc on ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements"},"children":["integrating entitlements"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your webhook handler:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Verify the subscription status.  If it’s ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"active"},"children":[]}," then your user has paid for your product."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Check the product the customer subscribed to and grant access to your service. Checking the product instead of the price gives you more flexibility if you need to change the pricing or billing interval."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Store the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"product.id"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.status"},"children":[]}," in your database along with the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.id"},"children":[]}," you already saved.  Check this record when determining which features to enable for the user in your application."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The state of a subscription might change at any point during its lifetime, even if your application does not directly make any calls to Stripe.  For example, a renewal might fail due to an expired credit card, which puts the subscription into a past due state.  Or, if you implement the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]},", a user might cancel their subscription without directly visiting your application.  Implementing your handler correctly keeps your application state in sync with Stripe."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"test-embedded-page","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Test your integration","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Ftesting-scenarios.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"test-payment-methods"},"children":["Test payment methods"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the following table to test different payment methods and scenarios."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Payment method"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Scenario"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["How to test"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"900123456"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},". The confirmed PaymentIntent initially transitions to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},", then transitions to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment fails with an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"account_closed"},"children":[]}," error code."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"111111113"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment succeeds and does not require authentication."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4242 4242 4242 4242"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment requires ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["authentication"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0025 0000 3155"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card is declined with a decline code like ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"insufficient_funds"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0000 0000 9995"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with SEPA Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT321904300235473204"},"children":[]},". The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment intent status transition from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT861904300235473202"},"children":[]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"monitoring-events"},"children":["Monitoring events"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["subscription webhooks"]},". You can view events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fevents"},"children":["Dashboard"]}," or with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Ftesting"},"children":["testing your Billing integration"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Page","attributes":{"id":"subscription-elements","prefs":{"platform":"web","ui":"elements"},"title":"Custom flow"},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCallout","attributes":{"image":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-collect-payment-details.ca5aa7a3f81fcc3f24954a39e800cc9d.png","imageAlt":"Fixed-price subscription page with Stripe Checkout","isHorizontal":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityRating","attributes":{"rating":3,"color":"purple"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Customize with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api"},"children":["Appearance API"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"beta","title":"Interested in using Stripe Billing?"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["We’re developing a Payment Element integration that helps manage subscription features, including free trials, billing cycle anchors, and proration. Read the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcheckout\u002Fcustom-checkout"},"children":["Build a checkout page"]}," guide to learn more."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use this guide to learn how to sell fixed-price ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"subscriptions"},"children":["subscriptions"]},". You’ll use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-element"},"children":["Payment Element"]}," to create a custom payment form that you embed in your application."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you don’t want to build a custom payment form, you can integrate with Checkout. For an immersive version of that end-to-end integration guide, see the Billing ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fquickstart"},"children":["quickstart"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you aren’t ready to code an integration, you can set up basic subscriptions ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fno-code\u002Fsubscriptions"},"children":["manually in the Dashboard"]},". You can also use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayment-links"},"children":["Payment Links"]}," to set up subscriptions without writing any code. Learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fdesigning-integration"},"children":["designing an integration"]}," to understand the decisions you need to make and the resources you need."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"build","level":2,"anchored":true,"toc":"What you’ll build "},"children":["What you’ll build "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This guide shows you how to:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Model your business by building a product catalog."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Build a registration process that creates a customer."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create subscriptions and collect payment information."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Test and monitor payment and subscription status."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Let customers change their plan or cancel the subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":2,"anchored":true,"toc":"How to model it on Stripe","id":"how-to-model-it-on-stripe"},"children":["How to model it on Stripe"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscriptions"]}," simplify your billing by automatically creating ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"invoices"},"children":["Invoices"]}," and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntents"]}," for you.  To create and activate a subscription, you need to first create a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products"},"children":["Product"]}," to model what is being sold, and a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["Price"]}," which determines the interval and amount to charge. You also need a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}," to store ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"payment-methods"},"children":["PaymentMethods"]}," used to make each recurring payment."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fdiagrams\u002Fbilling-api-objects.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Diagram","attributes":{"type":"entity","description":"A diagram illustrating common billing objects and their relationships","size":"xlarge","elements":[{"id":"subscription","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject"},"children":["Subscription object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"sub_1234"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"open"},"children":[]},"handle":null},{"name":"latest_invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"invoiceId"},{"name":"default_payment_method","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":"paymentMethodId"},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":"customerId"},{"name":"items.data.price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":"priceId"},{"name":"pending_setup_intent","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"seti_1234"},"children":[]},"handle":"setupIntentId"}],"handles":["invoiceId","paymentMethodId","customerId","priceId","setupIntentId"]},"position":{"x":0,"y":0}},{"id":"invoice","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fobject"},"children":["Invoice object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":null},{"name":"currency","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"usd"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"draft"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_method","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods\u002Fobject"},"children":["PaymentMethod object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"card"},"children":[]},"handle":null},{"name":"card[brand]","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"visa"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"customer","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Jenny Rosen"},"children":[]},"handle":null},{"name":"email","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"jennyrosen@example.com"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"price","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"product","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":"productId"},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":["productId"]},"position":{"x":0,"y":0}},{"id":"product","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":null},{"name":"active","value":"true","handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Widget, blue"},"children":[]},"handle":null},{"name":"default_price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_intent","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pi_1234"},"children":[]},"handle":null},{"name":"amount","value":"1000","handle":null},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"pi_invoiceId"},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},"handle":null}],"handles":["pi_invoiceId"]},"position":{"x":0,"y":0}},{"id":"edge-invoiceId-invoice-auto-auto","source":"subscription","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"invoiceId"},{"id":"edge-paymentMethodId-payment_method-auto-auto","source":"subscription","target":"payment_method","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"paymentMethodId"},{"id":"edge-customerId-customer-auto-auto","source":"subscription","target":"customer","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"customerId"},{"id":"edge-priceId-price-auto-auto","source":"subscription","target":"price","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"priceId"},{"id":"edge-productId-product-auto-auto","source":"price","target":"product","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"productId"},{"id":"edge-pi_invoiceId-invoice-auto-auto","source":"payment_intent","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"pi_invoiceId"}],"positioning":"auto"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Collapsable","attributes":{"open":false,"heading":"API object definitions"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fapi-definitions.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{"width":35},"children":["Resource "]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Definition"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer who purchases a subscription. Use the Customer object associated with a subscription to make and track recurring charges and to manage the products that they subscribe to."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Factive-entitlement"},"children":["Entitlement"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s access to a feature included in a service product that they subscribe to. When you create a subscription for a customer’s recurring purchase of a product, an active entitlement is automatically created for each feature associated with that product. When a customer accesses your services, use their active entitlements to enable the features included in their subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Ffeature"},"children":["Feature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a function or ability that your customers can access when they subscribe to a service product. You can include features in a product by creating ProductFeatures."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices"},"children":["Invoice"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A statement of amounts a customer owes that tracks payment statuses from draft through paid or otherwise finalized. Subscriptions automatically generate invoices."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A way to build dynamic payment flows. A PaymentIntent tracks the lifecycle of a customer checkout flow and triggers additional authentication steps when required by regulatory mandates, custom Radar fraud rules, or redirect-based payment methods. Invoices automatically create PaymentIntents."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods"},"children":["PaymentMethod"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A customer’s payment instruments that they use to pay for your products. For example, you can store a credit card on a Customer object and use it to make recurring payments for that customer. Typically used with the Payment Intents or Setup Intents APIs."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Defines the unit price, currency, and billing cycle for a product."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A good or service that your business sells. A service product can include one or more features."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproduct-feature"},"children":["ProductFeature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a single feature’s inclusion in a single product. Each product is associated with a ProductFeature for each feature that it includes, and each feature is associated with a ProductFeature for each product that includes it."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s scheduled recurring purchase of a product. Use a subscription to collect payments and provide repeated delivery of or continuous access to a product."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Here’s an example of how products, features, and entitlements work together. Imagine that you want to set up a subscription service that offers two tiers: a standard product with basic functionality, and an advanced product that adds extended functionality."]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two features: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two products: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the standard product, you create one ProductFeature that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the advanced product, you create two ProductFeatures: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]}," and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["A customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]},", subscribes to the standard product. When you create the subscription, Stripe automatically creates an Entitlement that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Another customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]},", subscribes to the advanced product. When you create the Subscription, Stripe automatically creates two Entitlements: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},", and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can determine which features to provision for a customer by ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements#entitlements"},"children":["retrieving their active entitlements or listening to the Active Entitlement Summary webhook"]},". You don’t have to retrieve their subscriptions, products, and features."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"install-setup","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Set up Stripe","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Install the Stripe client of your choice:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Flibraries.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Available as a gem\nsudo gem install stripe\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"Gemfile","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# If you use bundler, you can add this line to your Gemfile\ngem 'stripe'\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install through pip\npip3 install --upgrade stripe\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"PyPi","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or find the Stripe package on http:\u002F\u002Fpypi.python.org\u002Fpypi\u002Fstripe\u002F\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"requirements.txt","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Find the version you want to pin:\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-python\u002Fblob\u002Fmaster\u002FCHANGELOG.md\n# Specify that version in your requirements.txt file\nstripe\u003E=5.0.0\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install the PHP library with Composer\ncomposer require stripe\u002Fstripe-php\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"Source","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or download the source directly: https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-php\u002Freleases\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"build.gradle","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F*\n  For Gradle, add the following dependency to your build.gradle and replace with\n  the version number you want to use from:\n  - https:\u002F\u002Fmvnrepository.com\u002Fartifact\u002Fcom.stripe\u002Fstripe-java or\n  - https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n*\u002F\nimplementation \"com.stripe:stripe-java:","26.0.0","\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"xml","filename":"pom.xml","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003C\u0021--\n  For Maven, add the following dependency to your POM and replace with the\n  version number you want to use from:\n  - https:\u002F\u002Fmvnrepository.com\u002Fartifact\u002Fcom.stripe\u002Fstripe-java or\n  - https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n--\u003E\n\u003Cdependency\u003E\n  \u003CgroupId\u003Ecom.stripe\u003C\u002FgroupId\u003E\n  \u003CartifactId\u003Estripe-java\u003C\u002FartifactId\u003E\n  \u003Cversion\u003E","26.0.0","\u003C\u002Fversion\u003E\n\u003C\u002Fdependency\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","filename":"Other environments","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# For other environments, manually install the following JARs:\n# - The Stripe JAR from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-java\u002Freleases\u002Flatest\n# - Google Gson from https:\u002F\u002Fgithub.com\u002Fgoogle\u002Fgson\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install with npm\nnpm install stripe --save\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Make sure your project is using Go Modules\ngo mod init\n# Install stripe-go\ngo get -u github.com\u002Fstripe\u002Fstripe-go\u002Fv","79","\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"app.go","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Then import the package\nimport \u0028\n  \"github.com\u002Fstripe\u002Fstripe-go\u002Fv","79","\"\n\u0029\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install with dotnet\ndotnet add package Stripe.net\ndotnet restore\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Or install with NuGet\nInstall-Package Stripe.net\n"]}]}}],"codeTabGroupID":"codetab_dfc4a6aff5f3711c66bdb90a3f37589faa94b1f4"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["And then install the Stripe CLI. The CLI provides webhook testing and you can run it to make API calls to Stripe.  This guide shows how to use the CLI to set up a pricing model in a later section."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fstripe-cli-install.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"StripeCliInstall","attributes":{"sectionMap":{"mac":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install Homebrew to run this command: https:\u002F\u002Fbrew.sh\u002F\nbrew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060mac-os\u0060 tar.gz file of your cpu architecture type from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Tar the downloaded file\ntar -xvf stripe_[X.X.X]_mac-os_[ARCH_TYPE].tar.gz\n\n# Optionally, install the binary in a location where you can execute it globally \u0028for example, \u0060\u002Fusr\u002Flocal\u002Fbin\u0060\u0029.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_bfcad54629d52f79a55410a10b6600ac8d2a665d"},"children":[]}],"linux":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["brew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"apt","title":"apt","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"apt","title":"apt"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"mistake"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On April 5th, 2024, we changed Stripe CLI’s GPG key to install the Stripe CLI through apt. If you configured the public key before April 5th, you’ll encounter this error:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable InRelease: The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Failed to fetch https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local\u002Fdists\u002Fstable\u002FInRelease  The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Some index files failed to download. They have been ignored, or old ones used instead\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To resolve this error, refresh Stripe’s GPG key by following step 1."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add Stripe CLI's GPG key to the apt sources keyring:\ncurl -s https:\u002F\u002Fpackages.stripe.dev\u002Fapi\u002Fsecurity\u002Fkeypair\u002Fstripe-cli-gpg\u002Fpublic | gpg --dearmor | sudo tee \u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg\n\n# 2. Add CLI's apt repository to the apt sources list:\necho \"deb [signed-by=\u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg] https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable main\" | sudo tee -a \u002Fetc\u002Fapt\u002Fsources.list.d\u002Fstripe.list\n\n# 3. Update the package list\nsudo apt update\n\n# 4. Install the CLI\nsudo apt install stripe\n\n# 5. Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"yum","title":"yum","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"yum","title":"yum"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add CLI's yum repository to the yum sources list:\necho -e \"[Stripe]\\nname=stripe\\nbaseurl=https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-rpm-local\u002F\\nenabled=1\\ngpgcheck=0\" \u003E\u003E \u002Fetc\u002Fyum.repos.d\u002Fstripe.repo\n\n# 2. Install the CLI\nsudo yum install stripe\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Download the latest \u0060linux\u0060 tar.gz file from \u003Chttps:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\u003E\n\n# Unzip the file:\ntar -xvf stripe_X.X.X_linux_x86_64.tar.gz\n\n# Move \u0060.\u002Fstripe\u0060 to your execution path.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_58aa30da375f22c90c6974cc89fd9531c6978ce2"},"children":[]}],"windows":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060windows\u0060 zip file from\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Unzip the \u0060stripe_X.X.X_windows_x86_64.zip\u0060 file\n\n# 3. Run the unzipped \u0060.exe\u0060 file\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"scoop","title":"scoop","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"scoop","title":"scoop"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# See https:\u002F\u002Fscoop.sh\n\nscoop bucket add stripe https:\u002F\u002Fgithub.com\u002Fstripe\u002Fscoop-stripe-cli.git\n\nscoop install stripe\n"]}]}}],"codeTabGroupID":"codetab_02b0729429bd0e3865a8b5213471b8d84fb75449"},"children":[]}]}},"children":["For additional install options, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["Get started with the Stripe CLI"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-pricing-model","beta":false,"badges":["Stripe CLI or Dashboard"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the pricing model","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcreate-business-model.md","variables":{"payment_currency":"usd","stripe_cli_install_link":"#install-setup"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create your ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products-subs"},"children":["products"]}," and their ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["prices"]}," in the Dashboard or with the Stripe CLI."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. \u0028If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.\u0029"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In this example, each product bills at monthly intervals. The price for the Basic product is 5 ","USD",". The price for the Premium product is 15 ","USD","."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"dashboard","title":"Dashboard","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Dashboard"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fproducts\u002Fcreate"},"children":["Add a product"]}," page and create two products. Add one price for each product, each with a monthly recurring billing period:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Premium product: Premium service with extra features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 15 ","USD"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Basic product: Basic service with minimum features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 5 ","USD"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_G0FvDp6vZvdwRZ"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you’re ready, use the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy to live mode"]}," button at the top right of the page to clone your product from ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["test mode to live mode"]},"."]}]}},{"id":"stripe-cli","title":"Stripe CLI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Stripe CLI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you haven’t already, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["install the Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next create the product objects:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium product\nstripe products create \\\n  --name=\"Billing Guide: Premium Service\" \\\n  --description=\"Premium service with extra features\"\n\n# Basic product\nstripe products create \\\n  --name=\"Billing Guide: Basic Service\" \\\n  --description=\"Basic service with minimum features\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the product ID for each product. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"prod_H94k5odtwJXMtQ\",\n  \"object\": \"product\",\n  \"active\": true,\n  \"attributes\": [\n\n  ],\n  \"created\": 1587577341,\n  \"description\": \"Premium service with extra features\",\n  \"images\": [\n\n  ],\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": \"Billing Guide: Premium Service\",\n  \"statement_descriptor\": null,\n  \"type\": \"service\",\n  \"unit_label\": null,\n  \"updated\": 1587577341\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the product IDs to create a price for each product. The ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"unit_amount"},"children":[]}," number is in cents, so ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"1500"},"children":[]}," = 15 ","USD",", for example."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium price\n  stripe prices create \\\n    -d product=prod_H94k5odtwJXMtQ \\\n    -d unit_amount=1500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n\n# Basic price\n  stripe prices create \\\n    -d product=prod_HGd6W1VUqqXGvr \\\n    -d unit_amount=500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the price ID for each price so you can use them in subsequent steps. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"price_HGd7M3DV3IMXkC\",\n  \"object\": \"price\",\n  \"product\": \"prod_HGd6W1VUqqXGvr\",\n  \"type\": \"recurring\",\n  \"currency\": \"","usd","\",\n  \"recurring\": {\n    \"aggregate_usage\": null,\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"active\": true,\n  \"billing_scheme\": \"per_unit\",\n  \"created\": 1589319695,\n  \"livemode\": false,\n  \"lookup_key\": null,\n  \"metadata\": {\n  },\n  \"nickname\": null,\n  \"unit_amount\": 1500,\n  \"unit_amount_decimal\": \"1500\",\n  \"tiers\": null,\n  \"tiers_mode\": null,\n  \"transform_quantity\": null\n}\n"]}]}}]},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-customer","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the customer","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe needs a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"customers"},"children":["customer"]}," for each subscription.  In your application frontend, collect any necessary information from your users and pass it to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you need to collect address details, the Address Element enables you to collect a shipping or billing address for your customers. For more information on the Address Element, visit the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Faddress-element"},"children":["Address Element"]}," page."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"register.html","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003Cform id=\"signup-form\"\u003E\n  \u003Clabel\u003E\n    Email\n    \u003Cinput id=\"email\" type=\"email\" placeholder=\"Email address\" value=\"test@example.com\" required \u002F\u003E\n  \u003C\u002Flabel\u003E\n\n  \u003Cbutton type=\"submit\"\u003E\n    Register\n  \u003C\u002Fbutton\u003E\n\u003C\u002Fform\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"register.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const emailInput = document.querySelector\u0028'#email'\u0029;\n\nfetch\u0028'\u002Fcreate-customer', {\n  method: 'post',\n  headers: {\n    'Content-Type': 'application\u002Fjson',\n  },\n  body: JSON.stringify\u0028{\n    email: emailInput.value,\n  }\u0029,\n}\u0029.then\u0028r =\u003E r.json\u0028\u0029\u0029;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the server, create the Stripe customer object."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-customer.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodegenSnippet","attributes":{"generatedCodeBlocks":[{"lang":"curl","generatedCode":{"resources":"curl https:\u002F\u002Fapi.stripe.com\u002Fv1\u002Fcustomers \\\n  -u \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024:\" \\\n  -d email={{CUSTOMER_EMAIL}} \\\n  -d name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"cli","generatedCode":{"resources":"stripe customers create  \\\n  --email={{CUSTOMER_EMAIL}} \\\n  --name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"ruby","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.api_key = '\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\n\nStripe::Customer.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"python","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nimport stripe\nstripe.api_key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nstripe.Customer.create\u0028\n  email=\"{{CUSTOMER_EMAIL}}\",\n  name=\"{{CUSTOMER_NAME}}\",\n  shipping={\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  address={\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n\u0029","services":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nclient = StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029\n\nclient.customers.create\u0028{\n  \"email\": \"{{CUSTOMER_EMAIL}}\",\n  \"name\": \"{{CUSTOMER_NAME}}\",\n  \"shipping\": {\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  \"address\": {\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"php","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n\u0024stripe = new \\Stripe\\StripeClient\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\n\u0024stripe-\u003Ecustomers-\u003Ecreate\u0028[\n  'email' =\u003E '{{CUSTOMER_EMAIL}}',\n  'name' =\u003E '{{CUSTOMER_NAME}}',\n  'shipping' =\u003E [\n    'address' =\u003E [\n      'city' =\u003E 'Brothers',\n      'country' =\u003E 'US',\n      'line1' =\u003E '27 Fredrick Ave',\n      'postal_code' =\u003E '97712',\n      'state' =\u003E 'CA',\n    ],\n    'name' =\u003E '{{CUSTOMER_NAME}}',\n  ],\n  'address' =\u003E [\n    'city' =\u003E 'Brothers',\n    'country' =\u003E 'US',\n    'line1' =\u003E '27 Fredrick Ave',\n    'postal_code' =\u003E '97712',\n    'state' =\u003E 'CA',\n  ],\n]\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"java","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.apiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = Customer.create\u0028params\u0029;","services":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeClient client = new StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029;\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = client.customers\u0028\u0029.create\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"node","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nconst stripe = require\u0028'stripe'\u0029\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\nconst customer = await stripe.customers.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"go","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nstripe.Key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nparams := \u0026stripe.CustomerParams{\n  Email: stripe.String\u0028\"{{CUSTOMER_EMAIL}}\"\u0029,\n  Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  Shipping: \u0026stripe.CustomerShippingParams{\n    Address: \u0026stripe.AddressParams{\n      City: stripe.String\u0028\"Brothers\"\u0029,\n      Country: stripe.String\u0028\"US\"\u0029,\n      Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n      PostalCode: stripe.String\u0028\"97712\"\u0029,\n      State: stripe.String\u0028\"CA\"\u0029,\n    },\n    Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  },\n  Address: \u0026stripe.AddressParams{\n    City: stripe.String\u0028\"Brothers\"\u0029,\n    Country: stripe.String\u0028\"US\"\u0029,\n    Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n    PostalCode: stripe.String\u0028\"97712\"\u0029,\n    State: stripe.String\u0028\"CA\"\u0029,\n  },\n};\nresult, err := customer.New\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"dotnet","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeConfiguration.ApiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nvar options = new CustomerCreateOptions\n{\n    Email = \"{{CUSTOMER_EMAIL}}\",\n    Name = \"{{CUSTOMER_NAME}}\",\n    Shipping = new ShippingOptions\n    {\n        Address = new AddressOptions\n        {\n            City = \"Brothers\",\n            Country = \"US\",\n            Line1 = \"27 Fredrick Ave\",\n            PostalCode = \"97712\",\n            State = \"CA\",\n        },\n        Name = \"{{CUSTOMER_NAME}}\",\n    },\n    Address = new AddressOptions\n    {\n        City = \"Brothers\",\n        Country = \"US\",\n        Line1 = \"27 Fredrick Ave\",\n        PostalCode = \"97712\",\n        State = \"CA\",\n    },\n};\nvar service = new CustomerService\u0028\u0029;\nservice.Create\u0028options\u0029;"},"codegenError":null,"overriddenCodeBlock":null}],"codeTabGroupID":"codetab_3157f82c4e796fd1f0929952cd21468b2db77735","httpPath":"\u002Fv1\u002Fcustomers","httpVerb":"post","v2ApiVersion":"2024-05-23.preview-v2"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you want to render the Payment Element without first creating a subscription, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment-deferred?type=subscription"},"children":["Collect payment details before creating an Intent"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Let your new customer choose a plan and then create the subscription—in this guide, they choose between Basic and Premium."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the frontend, pass the selected price ID and the ID of the customer record to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"prices.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["fetch\u0028'\u002Fcreate-subscription', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application\u002Fjson',\n  },\n  body: JSON.stringify\u0028{\n    priceId: priceId,\n    customerId: customerId,\n  }\u0029,\n}\u0029\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, create the subscription with status ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"incomplete"},"children":[]}," using ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_behavior=default_incomplete"},"children":[]},". Then return the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"client_secret"},"children":[]}," from the subscription’s first ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-intents"},"children":["payment intent"]}," to the frontend to complete payment."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject#subscription_object-payment_settings-save_default_payment_method"},"children":["save_default_payment_method"]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"on_subscription"},"children":[]}," to save the payment method as the default for a subscription when a payment succeeds. Saving a default payment method increases the success rate of future subscription payments."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-subscription-default-incomplete.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcreate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse\u0028request.body.read\u0029\n  customer_id = cookies[:customer]\n  price_id = data['priceId']\n\n  # Create the subscription. Note we're expanding the Subscription's\n  # latest invoice and that invoice's payment_intent\n  # so we can pass it to the front end to confirm the payment\n  subscription = Stripe::Subscription.create\u0028\n    customer: customer_id,\n    items: [{\n      price: price_id,\n    }],\n    payment_behavior: 'default_incomplete',\n    payment_settings: {save_default_payment_method: 'on_subscription'},\n    expand: ['latest_invoice.payment_intent']\n  \u0029\n\n  { subscriptionId: subscription.id, clientSecret: subscription.latest_invoice.payment_intent.client_secret }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcreate-subscription', methods=['POST']\u0029\ndef create_subscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    customer_id = data['customerId']\n    price_id = data['priceId']\n\n    try:\n        # Create the subscription. Note we're expanding the Subscription's\n        # latest invoice and that invoice's payment_intent\n        # so we can pass it to the front end to confirm the payment\n        subscription = stripe.Subscription.create\u0028\n            customer=customer_id,\n            items=[{\n                'price': price_id,\n            }],\n            payment_behavior='default_incomplete',\n            payment_settings={'save_default_payment_method': 'on_subscription'},\n            expand=['latest_invoice.payment_intent'],\n        \u0029\n        return jsonify\u0028subscriptionId=subscription.id, clientSecret=subscription.latest_invoice.payment_intent.client_secret\u0029\n\n    except Exception as e:\n        return jsonify\u0028error={'message': e.user_message}\u0029, 400\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n    \u002F\u002F Get the request body and decode it as JSON.\n    \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n    \u0024json = json_decode\u0028\u0024body\u0029;\n\n    \u002F\u002F Get the customer ID from the cookie and the price ID from the JSON data.\n    \u0024customer_id = \u0024_COOKIE['customer'];\n    \u0024price_id = \u0024json-\u003EpriceId;\n\n    \u002F\u002F Create the subscription with the customer ID, price ID, and necessary options.\n    \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Ecreate\u0028[\n        'customer' =\u003E \u0024customer_id,\n        'items' =\u003E [[\n            'price' =\u003E \u0024price_id,\n        ]],\n        'payment_behavior' =\u003E 'default_incomplete',\n        'payment_settings' =\u003E ['save_default_payment_method' =\u003E 'on_subscription'],\n        'expand' =\u003E ['latest_invoice.payment_intent'],\n    ]\u0029;\n\n    \u002F\u002F Return the subscription ID and client secret as a JSON response.\n    header\u0028'Content-Type: application\u002Fjson'\u0029;\n    echo json_encode\u0028[\n        'subscriptionId' =\u003E \u0024subscription-\u003Eid,\n        'clientSecret' =\u003E \u0024subscription-\u003Elatest_invoice-\u003Epayment_intent-\u003Eclient_secret,\n    ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fcreate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    String customerId = request.cookie\u0028\"customer\"\u0029;\n    CreateSubscriptionRequest postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      CreateSubscriptionRequest.class\n    \u0029;\n    String priceId = postBody.getPriceId\u0028\u0029;\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    SubscriptionCreateParams.PaymentSettings paymentSettings =\n      SubscriptionCreateParams.PaymentSettings\n        .builder\u0028\u0029\n        .setSaveDefaultPaymentMethod\u0028SaveDefaultPaymentMethod.ON_SUBSCRIPTION\u0029\n        .build\u0028\u0029;\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    SubscriptionCreateParams subCreateParams = SubscriptionCreateParams\n      .builder\u0028\u0029\n      .setCustomer\u0028customerId\u0029\n      .addItem\u0028\n        SubscriptionCreateParams\n          .Item.builder\u0028\u0029\n          .setPrice\u0028priceId\u0029\n          .build\u0028\u0029\n      \u0029\n      .setPaymentSettings\u0028paymentSettings\u0029\n      .setPaymentBehavior\u0028SubscriptionCreateParams.PaymentBehavior.DEFAULT_INCOMPLETE\u0029\n      .addAllExpand\u0028Arrays.asList\u0028\"latest_invoice.payment_intent\"\u0029\u0029\n      .build\u0028\u0029;\n\n    Subscription subscription = Subscription.create\u0028subCreateParams\u0029;\n\n    Map\u003CString, Object\u003E responseData = new HashMap\u003C\u003E\u0028\u0029;\n    responseData.put\u0028\"subscriptionId\", subscription.getId\u0028\u0029\u0029;\n    responseData.put\u0028\"clientSecret\", subscription.getLatestInvoiceObject\u0028\u0029.getPaymentIntentObject\u0028\u0029.getClientSecret\u0028\u0029\u0029;\n    return StripeObject.PRETTY_PRINT_GSON.toJson\u0028responseData\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcreate-subscription', async \u0028req, res\u0029 =\u003E {\n  const customerId = req.cookies['customer'];\n  const priceId = req.body.priceId;\n\n  try {\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    const subscription = await stripe.subscriptions.create\u0028{\n      customer: customerId,\n      items: [{\n        price: priceId,\n      }],\n      payment_behavior: 'default_incomplete',\n      payment_settings: { save_default_payment_method: 'on_subscription' },\n      expand: ['latest_invoice.payment_intent'],\n    }\u0029;\n\n    res.send\u0028{\n      subscriptionId: subscription.id,\n      clientSecret: subscription.latest_invoice.payment_intent.client_secret,\n    }\u0029;\n  } catch \u0028error\u0029 {\n    return res.status\u0028400\u0029.send\u0028{ error: { message: error.message } }\u0029;\n  }\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCreateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n    if r.Method \u0021= \"POST\" {\n        http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n        return\n    }\n\n    var req struct {\n        PriceID string \u0060json:\"priceId\"\u0060\n    }\n\n    if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n        return\n    }\n\n    cookie, _ := r.Cookie\u0028\"customer\"\u0029\n    customerID := cookie.Value\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    paymentSettings := \u0026stripe.SubscriptionPaymentSettingsParams{\n\t\t    SaveDefaultPaymentMethod: stripe.String\u0028\"on_subscription\"\u0029,\n  \t}\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    subscriptionParams := \u0026stripe.SubscriptionParams{\n        Customer: stripe.String\u0028customerID\u0029,\n        Items: []*stripe.SubscriptionItemsParams{\n            {\n                Price: stripe.String\u0028req.PriceID\u0029,\n            },\n        },\n        PaymentSettings: paymentSettings,\n        PaymentBehavior: stripe.String\u0028\"default_incomplete\"\u0029,\n    }\n    subscriptionParams.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029\n    s, err := subscription.New\u0028subscriptionParams\u0029\n\n    if err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"subscription.New: %v\", err\u0029\n        return\n    }\n\n    writeJSON\u0028w, struct {\n        SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n        ClientSecret string \u0060json:\"clientSecret\"\u0060\n    }{\n        SubscriptionID: s.ID,\n        ClientSecret: s.LatestInvoice.PaymentIntent.ClientSecret,\n    }, nil\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"create-subscription\"\u0029]\npublic ActionResult\u003CSubscriptionCreateResponse\u003E CreateSubscription\u0028[FromBody] CreateSubscriptionRequest req\u0029\n{\n    var customerId = HttpContext.Request.Cookies[\"customer\"];\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    var paymentSettings = new SubscriptionPaymentSettingsOptions {\n        SaveDefaultPaymentMethod = \"on_subscription\",\n    };\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    var subscriptionOptions = new SubscriptionCreateOptions\n    {\n        Customer = customerId,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Price = req.PriceId,\n            },\n        },\n        PaymentSettings = paymentSettings,\n        PaymentBehavior = \"default_incomplete\",\n    };\n    subscriptionOptions.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029;\n    var subscriptionService = new SubscriptionService\u0028\u0029;\n    try\n    {\n        Subscription subscription = subscriptionService.Create\u0028subscriptionOptions\u0029;\n\n        return new SubscriptionCreateResponse\n        {\n          SubscriptionId = subscription.Id,\n          ClientSecret = subscription.LatestInvoice.PaymentIntent.ClientSecret,\n        };\n    }\n    catch \u0028StripeException e\u0029\n    {\n        Console.WriteLine\u0028\u0024\"Failed to create subscription.{e}\"\u0029;\n        return BadRequest\u0028\u0029;\n    }\n}\n"]}]}}],"codeTabGroupID":"codetab_460d8430c5a0d180ec8c0f560dc384e170c5d04f"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re using a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"multi-currency-price"},"children":["multi-currency Price"]},", use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fcreate#create_subscription-currency"},"children":["currency"]}," parameter to tell the Subscription which of the Price’s currencies to use. \u0028If you omit the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"currency"},"children":[]}," parameter, then the Subscription uses the Price’s default currency.\u0029"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["At this point the Subscription is ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"inactive"},"children":[]}," and awaiting payment. Here’s an example response. The minimum fields to store are highlighted, but store whatever your application frequently accesses."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fsub-response-inactive.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":2,"end":2},{"start":16,"end":16},{"start":18,"end":18}],"add":[],"remove":[]}},"children":["{",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"id\": \"sub_JgRjFjhKbtD2qz\","},"children":["\n  \"id\": \"sub_JgRjFjhKbtD2qz\","]},"\n  \"object\": \"subscription\",\n  \"application_fee_percent\": null,\n  \"automatic_tax\": {\n    \"enabled\": false\n  },\n  \"billing\": \"charge_automatically\",\n  \"billing_cycle_anchor\": 1623873347,\n  \"billing_thresholds\": null,\n  \"cancel_at\": null,\n  \"cancel_at_period_end\": false,\n  \"canceled_at\": null,\n  \"collection_method\": \"charge_automatically\",\n  \"created\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"current_period_end\": 1626465347,"},"children":["\n  \"current_period_end\": 1626465347,"]},"\n  \"current_period_start\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"customer\": \"cus_CMqDWO2xODTZqt\","},"children":["\n  \"customer\": \"cus_CMqDWO2xODTZqt\","]},"\n  \"days_until_due\": null,\n  \"default_payment_method\": null,\n  \"default_source\": null,\n  \"default_tax_rates\": [\n\n  ],\n  \"discount\": null,\n  \"ended_at\": null,\n  \"invoice_customer_balance_settings\": {\n    \"consume_applied_balance_on_void\": true\n  },\n  \"items\": {\n    \"object\": \"list\",\n    \"data\": [\n      {\n        \"id\": \"si_JgRjmS4Ur1khEx\",\n        \"object\": \"subscription_item\",\n        \"billing_thresholds\": null,\n        \"created\": 1623873347,\n        \"metadata\": {\n        },\n        \"plan\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"plan\",\n          \"active\": true,\n          \"aggregate_usage\": null,\n          \"amount\": 2000,\n          \"amount_decimal\": \"2000\",\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"interval\": \"month\",\n          \"interval_count\": 1,\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"tiers\": null,\n          \"tiers_mode\": null,\n          \"transform_usage\": null,\n          \"trial_period_days\": null,\n          \"usage_type\": \"licensed\"\n        },\n        \"price\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"price\",\n          \"active\": true,\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"livemode\": false,\n          \"lookup_key\": null,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"recurring\": {\n            \"aggregate_usage\": null,\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"tiers_mode\": null,\n          \"transform_quantity\": null,\n          \"type\": \"recurring\",\n          \"unit_amount\": 2000,\n          \"unit_amount_decimal\": \"2000\"\n        },\n        \"quantity\": 1,\n        \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n        \"tax_rates\": [\n\n        ]\n      }\n    ],\n    \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"\u002Fv1\u002Fsubscription_items?subscription=sub_JgRjFjhKbtD2qz\"\n  },\n  \"latest_invoice\": {\n    \"id\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n    \"object\": \"invoice\",\n    \"account_country\": \"US\",\n    \"account_name\": \"Angelina's Store\",\n    \"account_tax_ids\": null,\n    \"amount_due\": 2000,\n    \"amount_paid\": 0,\n    \"amount_remaining\": 2000,\n    \"application_fee\": null,\n    \"attempt_count\": 0,\n    \"attempted\": false,\n    \"auto_advance\": false,\n    \"automatic_tax\": {\n      \"enabled\": false,\n      \"status\": null\n    },\n    \"billing\": \"charge_automatically\",\n    \"billing_reason\": \"subscription_update\",\n    \"charge\": null,\n    \"closed\": true,\n    \"collection_method\": \"charge_automatically\",\n    \"created\": 1623873347,\n    \"currency\": \"usd\",\n    \"custom_fields\": null,\n    \"customer\": \"cus_CMqDWO2xODTZqt\",\n    \"customer_address\": null,\n    \"customer_email\": \"angelina@stripe.com\",\n    \"customer_name\": null,\n    \"customer_phone\": null,\n    \"customer_shipping\": {\n      \"address\": {\n        \"city\": \"\",\n        \"country\": \"US\",\n        \"line1\": \"Berry\",\n        \"line2\": \"\",\n        \"postal_code\": \"\",\n        \"state\": \"\"\n      },\n      \"name\": \"\",\n      \"phone\": null\n    },\n    \"customer_tax_exempt\": \"none\",\n    \"customer_tax_ids\": [\n\n    ],\n    \"date\": 1623873347,\n    \"default_payment_method\": null,\n    \"default_source\": null,\n    \"default_tax_rates\": [\n\n    ],\n    \"description\": null,\n    \"discount\": null,\n    \"discounts\": [\n\n    ],\n    \"due_date\": null,\n    \"ending_balance\": 0,\n    \"finalized_at\": 1623873347,\n    \"footer\": null,\n    \"forgiven\": false,\n    \"hosted_invoice_url\": \"https:\u002F\u002Finvoice.stripe.com\u002Fi\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\",\n    \"invoice_pdf\": \"https:\u002F\u002Fpay.stripe.com\u002Finvoice\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\u002Fpdf\",\n    \"last_finalization_error\": null,\n    \"lines\": {\n      \"object\": \"list\",\n      \"data\": [\n        {\n          \"id\": \"sub_JgRjFjhKbtD2qz\",\n          \"object\": \"line_item\",\n          \"amount\": 2000,\n          \"currency\": \"usd\",\n          \"description\": \"1 × Gold Special \u0028at \u002420.00 \u002F month\u0029\",\n          \"discount_amounts\": [\n\n          ],\n          \"discountable\": true,\n          \"discounts\": [\n\n          ],\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"period\": {\n            \"end\": 1626465347,\n            \"start\": 1623873347\n          },\n          \"plan\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"plan\",\n            \"active\": true,\n            \"aggregate_usage\": null,\n            \"amount\": 2000,\n            \"amount_decimal\": \"2000\",\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"livemode\": false,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"tiers\": null,\n            \"tiers_mode\": null,\n            \"transform_usage\": null,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"price\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"price\",\n            \"active\": true,\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"livemode\": false,\n            \"lookup_key\": null,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"recurring\": {\n              \"aggregate_usage\": null,\n              \"interval\": \"month\",\n              \"interval_count\": 1,\n              \"trial_period_days\": null,\n              \"usage_type\": \"licensed\"\n            },\n            \"tiers_mode\": null,\n            \"transform_quantity\": null,\n            \"type\": \"recurring\",\n            \"unit_amount\": 2000,\n            \"unit_amount_decimal\": \"2000\"\n          },\n          \"proration\": false,\n          \"quantity\": 1,\n          \"subscription\": null,\n          \"subscription_item\": \"si_JgRjmS4Ur1khEx\",\n          \"tax_amounts\": [\n\n          ],\n          \"tax_rates\": [\n\n          ],\n          \"type\": \"subscription\",\n          \"unique_id\": \"il_1J34pzGPZ1iASj5zH4yl5GQR\",\n          \"unique_line_item_id\": \"sli_14b5dfGPZ1iASj5z614c4a47\"\n        }\n      ],\n      \"has_more\": false,\n      \"total_count\": 1,\n      \"url\": \"\u002Fv1\u002Finvoices\u002Fin_1J34pzGPZ1iASj5zB87qdBNZ\u002Flines\"\n    },\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"next_payment_attempt\": null,\n    \"number\": \"C008FC2-0354\",\n    \"on_behalf_of\": null,\n    \"paid\": false,\n    \"payment_intent\": {\n      \"id\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6\",\n      \"object\": \"payment_intent\",\n      \"allowed_source_types\": [\n        \"card\"\n      ],\n      \"amount\": 2000,\n      \"amount_capturable\": 0,\n      \"amount_received\": 0,\n      \"application\": null,\n      \"application_fee_amount\": null,\n      \"canceled_at\": null,\n      \"cancellation_reason\": null,\n      \"capture_method\": \"automatic\",\n      \"charges\": {\n        \"object\": \"list\",\n        \"data\": [\n\n        ],\n        \"has_more\": false,\n        \"total_count\": 0,\n        \"url\": \"\u002Fv1\u002Fcharges?payment_intent=pi_1J34pzGPZ1iASj5zI2nOAaE6\"\n      },\n      \"client_secret\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6_secret_l7FN6ldFfXiFmJEumenJ2y2wu\",\n      \"confirmation_method\": \"automatic\",\n      \"created\": 1623873347,\n      \"currency\": \"usd\",\n      \"customer\": \"cus_CMqDWO2xODTZqt\",\n      \"description\": \"Subscription creation\",\n      \"invoice\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n      \"last_payment_error\": null,\n      \"livemode\": false,\n      \"metadata\": {\n      },\n      \"next_action\": null,\n      \"next_source_action\": null,\n      \"on_behalf_of\": null,\n      \"payment_method\": null,\n      \"payment_method_options\": {\n        \"card\": {\n          \"installments\": null,\n          \"network\": null,\n          \"request_three_d_secure\": \"automatic\"\n        }\n      },\n      \"payment_method_types\": [\n        \"card\"\n      ],\n      \"receipt_email\": null,\n      \"review\": null,\n      \"setup_future_usage\": \"off_session\",\n      \"shipping\": null,\n      \"source\": \"card_1By6iQGPZ1iASj5z7ijKBnXJ\",\n      \"statement_descriptor\": null,\n      \"statement_descriptor_suffix\": null,\n      \"status\": \"requires_confirmation\",\n      \"transfer_data\": null,\n      \"transfer_group\": null\n    },\n    \"payment_settings\": {\n      \"payment_method_options\": null,\n      \"payment_method_types\": null,\n      \"save_default_payment_method\": \"on_subscription\"\n    },\n    \"period_end\": 1623873347,\n    \"period_start\": 1623873347,\n    \"post_payment_credit_notes_amount\": 0,\n    \"pre_payment_credit_notes_amount\": 0,\n    \"receipt_number\": null,\n    \"starting_balance\": 0,\n    \"statement_descriptor\": null,\n    \"status\": \"open\",\n    \"status_transitions\": {\n      \"finalized_at\": 1623873347,\n      \"marked_uncollectible_at\": null,\n      \"paid_at\": null,\n      \"voided_at\": null\n    },\n    \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n    \"subtotal\": 2000,\n    \"tax\": null,\n    \"tax_percent\": null,\n    \"total\": 2000,\n    \"total_discount_amounts\": [\n\n    ],\n    \"total_tax_amounts\": [\n\n    ],\n    \"transfer_data\": null,\n    \"webhooks_delivered_at\": 1623873347\n  },\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"next_pending_invoice_item_invoice\": null,\n  \"pause_collection\": null,\n  \"pending_invoice_item_interval\": null,\n  \"pending_setup_intent\": null,\n  \"pending_update\": null,\n  \"plan\": {\n    \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n    \"object\": \"plan\",\n    \"active\": true,\n    \"aggregate_usage\": null,\n    \"amount\": 2000,\n    \"amount_decimal\": \"2000\",\n    \"billing_scheme\": \"per_unit\",\n    \"created\": 1623864151,\n    \"currency\": \"usd\",\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"nickname\": null,\n    \"product\": \"prod_JgPF5xnq7qBun3\",\n    \"tiers\": null,\n    \"tiers_mode\": null,\n    \"transform_usage\": null,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"quantity\": 1,\n  \"schedule\": null,\n  \"start\": 1623873347,\n  \"start_date\": 1623873347,\n  \"status\": \"incomplete\",\n  \"tax_percent\": null,\n  \"transfer_data\": null,\n  \"trial_end\": null,\n  \"trial_start\": null\n}\n"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"collect-payment","beta":false,"badges":["Client"],"collapsable":true,"numbered":true,"optional":false,"title":"Collect payment information","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Felements"},"children":["Stripe Elements"]}," to collect payment details and activate the subscription. You can customize Elements to match the look-and-feel of your application."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re building an integration with Stripe Elements, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Flink"},"children":["Link"]}," enables you to create frictionless payments for your customers. They can save, change, and manage all their payment details in Link without any impact to your integration. Meanwhile, as Stripe adds support for more payment methods to Link, your integration can automatically accept them, without requiring you to make changes to your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Fpayment_methods"},"children":["Payment methods settings"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-element"},"children":["Payment Element"]}," securely collects all necessary payment details for a wide variety of payments methods. The payment methods currently supported by both the Payment Element and Subscriptions are credit cards, Link, SEPA Direct Debit, and BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"set-up-stripe-elements"},"children":["Set up Stripe Elements"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Payment Element is automatically available as a feature of Stripe.js. Include the Stripe.js script on your checkout page by adding it to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"head"},"children":[]}," of your HTML file. Always load Stripe.js directly from js.stripe.com to remain PCI compliant. Don’t include the script in a bundle or host a copy of it yourself."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"subscribe.html","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003Chead\u003E\n  \u003Ctitle\u003ECheckout\u003C\u002Ftitle\u003E\n  \u003Cscript src=\"https:\u002F\u002Fjs.stripe.com\u002Fv3\u002F\"\u003E\u003C\u002Fscript\u003E\n\u003C\u002Fhead\u003E\n\u003Cbody\u003E\n  \u003C\u0021-- content here --\u003E\n\u003C\u002Fbody\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create an instance of Stripe with the following JavaScript on your checkout page:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"subscribe.js","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Set your publishable key: remember to change this to your live publishable key in production\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nconst stripe = Stripe\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"'\u0029;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"add-the-payment-element-to-your-page"},"children":["Add the Payment Element to your page"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Payment Element needs a place to live on your payment page. Create an empty DOM node \u0028container\u0029 with a unique ID in your payment form."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"html","filename":"subscribe.html","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u003Cform id=\"payment-form\"\u003E\n  \u003Cdiv id=\"payment-element\"\u003E\n    \u003C\u0021-- Elements will create form elements here --\u003E\n  \u003C\u002Fdiv\u003E\n  \u003Cbutton id=\"submit\"\u003ESubscribe\u003C\u002Fbutton\u003E\n  \u003Cdiv id=\"error-message\"\u003E\n    \u003C\u0021-- Display error message to your customers here --\u003E\n  \u003C\u002Fdiv\u003E\n\u003C\u002Fform\u003E\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When the form above has loaded, create an instance of the Payment Element and mount it to the container DOM node. In the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"#create-subscription"},"children":["create the subscription"]}," step, you passed the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"client_secret"},"children":[]}," value to the frontend. Pass this value as an option when creating an instance of Elements."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"subscribe.js","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const options = {\n  clientSecret: '{{CLIENT_SECRET}}',\n  \u002F\u002F Fully customizable with appearance API.\n  appearance: {\u002F*...*\u002F},\n};\n\n\u002F\u002F Set up Stripe.js and Elements to use in checkout form, passing the client secret obtained in step 5\nconst elements = stripe.elements\u0028options\u0029;\n\n\u002F\u002F Create and mount the Payment Element\nconst paymentElement = elements.create\u0028'payment'\u0029;\npaymentElement.mount\u0028'#payment-element'\u0029;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Payment Element renders a dynamic form that allows your customer to select a payment method. The form automatically collects all necessary payments details for the payment method that they select."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":4,"anchored":true,"id":"optional-payment-element-configurations"},"children":["Optional Payment Element configurations"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Customize the Payment Element to match the design of your site by passing the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fjs\u002Felements_object\u002Fcreate#stripe_elements-options-appearance"},"children":["appearance object"]}," into ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"options"},"children":[]}," when creating an instance of Elements."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Configure the Apple Pay interface to return a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapple-pay\u002Fmerchant-tokens?pay-element=web-pe"},"children":["merchant token"]}," to support recurring, auto reload, and deferred payments."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"complete-payment"},"children":["Complete payment"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripe.confirmPayment"},"children":[]}," to complete the payment using details from the Payment Element and activate the subscription. This creates a PaymentMethod and confirms the incomplete Subscription’s first PaymentIntent, causing a charge to be made. If ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["Strong Customer Authentication"]}," \u0028SCA\u0029 is required for the payment, the Payment Element handles the authentication process before confirming the PaymentIntent."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Provide a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents\u002Fcreate#create_payment_intent-return_url"},"children":["return_url"]}," to this function to indicate where Stripe redirects the user after they complete the payment. Your user might first be redirected to an intermediate site, like a bank authorization page, before being redirected to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]},". Card payments immediately redirect to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]}," when a payment is successful."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"subscribe.js","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":6,"end":12}],"add":[],"remove":[]}},"children":["const form = document.getElementById\u0028'payment-form'\u0029;\n\nform.addEventListener\u0028'submit', async \u0028event\u0029 =\u003E {\n  event.preventDefault\u0028\u0029;\n",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  const {error} = await stripe.confirmPayment\u0028{\n    \u002F\u002F\u0060Elements\u0060 instance that was used to create the Payment Element\n    elements,\n    confirmParams: {\n      return_url: \"https:\u002F\u002Fexample.com\u002Forder\u002F123\u002Fcomplete\",\n    }\n  }\u0029;"},"children":["\n  const {error} = await stripe.confirmPayment\u0028{\n    \u002F\u002F\u0060Elements\u0060 instance that was used to create the Payment Element\n    elements,\n    confirmParams: {\n      return_url: \"https:\u002F\u002Fexample.com\u002Forder\u002F123\u002Fcomplete\",\n    }\n  }\u0029;"]},"\n\n  if \u0028error\u0029 {\n    \u002F\u002F This point will only be reached if there is an immediate error when\n    \u002F\u002F confirming the payment. Show error to your customer \u0028for example, payment\n    \u002F\u002F details incomplete\u0029\n    const messageContainer = document.querySelector\u0028'#error-message'\u0029;\n    messageContainer.textContent = error.message;\n  } else {\n    \u002F\u002F Your customer will be redirected to your \u0060return_url\u0060. For some payment\n    \u002F\u002F methods like iDEAL, your customer will be redirected to an intermediate\n    \u002F\u002F site first to authorize the payment, then redirected to the \u0060return_url\u0060.\n  }\n}\u0029;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"payments\u002Fpartials\u002Freturn-url.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When your customer submits a payment, Stripe redirects them to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]}," and includes the following URL query parameters. The return page can use them to get the status of the PaymentIntent so it can display the payment status to the customer."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you specify the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]},", you can also append your own query parameters for use on the return page."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Parameter"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Description"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_intent"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The unique identifier for the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentIntent"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_intent_client_secret"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents\u002Fobject#payment_intent_object-client_secret"},"children":["client secret"]}," of the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentIntent"},"children":[]}," object."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When the customer is redirected back to your site, you can use the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_intent_client_secret"},"children":[]}," to query for the PaymentIntent and display the transaction status to your customer."]}]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"caution"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you have tooling that tracks the customer’s browser session, you might need to add the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripe.com"},"children":[]}," domain to the referrer exclude list. Redirects cause some tools to create new sessions, which prevents you from tracking the complete session."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use one of the query parameters to retrieve the PaymentIntent. Inspect the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpaymentintents\u002Flifecycle"},"children":["status of the PaymentIntent"]}," to decide what to show your customers. You can also append your own query parameters when providing the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"return_url"},"children":[]},", which persist through the redirect process."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"status.js","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F Initialize Stripe.js using your publishable key\nconst stripe = Stripe\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"'\u0029;\n\n\u002F\u002F Retrieve the \"payment_intent_client_secret\" query parameter appended to\n\u002F\u002F your return_url by Stripe.js\nconst clientSecret = new URLSearchParams\u0028window.location.search\u0029.get\u0028\n  'payment_intent_client_secret'\n\u0029;\n\n\u002F\u002F Retrieve the PaymentIntent\nstripe.retrievePaymentIntent\u0028clientSecret\u0029.then\u0028\u0028{paymentIntent}\u0029 =\u003E {\n  const message = document.querySelector\u0028'#message'\u0029\n\n  \u002F\u002F Inspect the PaymentIntent \u0060status\u0060 to indicate the status of the payment\n  \u002F\u002F to your customer.\n  \u002F\u002F\n  \u002F\u002F Some payment methods will [immediately succeed or fail][0] upon\n  \u002F\u002F confirmation, while others will first enter a \u0060processing\u0060 state.\n  \u002F\u002F\n  \u002F\u002F [0]: https:\u002F\u002Fstripe.com\u002Fdocs\u002Fpayments\u002Fpayment-methods#payment-notification\n  switch \u0028paymentIntent.status\u0029 {\n    case 'succeeded':\n      message.innerText = 'Success\u0021 Payment received.';\n      break;\n\n    case 'processing':\n      message.innerText = \"Payment processing. We'll update you when payment is received.\";\n      break;\n\n    case 'requires_payment_method':\n      message.innerText = 'Payment failed. Please try another payment method.';\n      \u002F\u002F Redirect your user back to your payment page to attempt collecting\n      \u002F\u002F payment again\n      break;\n\n    default:\n      message.innerText = 'Something went wrong.';\n      break;\n  }\n}\u0029;\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"webhooks","beta":false,"badges":["Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Listen for webhooks","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To complete the integration, you need to process ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"webhook"},"children":["webhooks"]}," sent by Stripe. These are events triggered whenever state inside of Stripe changes, such as subscriptions creating new invoices. In your application, set up an HTTP handler to accept a POST request containing the webhook event, and verify the signature of the event:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fwebhook' do\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = ENV['STRIPE_WEBHOOK_SECRET']\n  payload = request.body.read\n  if \u0021webhook_secret.empty?\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    sig_header = request.env['HTTP_STRIPE_SIGNATURE']\n    event = nil\n\n    begin\n      event = Stripe::Webhook.construct_event\u0028\n        payload, sig_header, webhook_secret\n      \u0029\n    rescue JSON::ParserError =\u003E e\n      # Invalid payload\n      status 400\n      return\n    rescue Stripe::SignatureVerificationError =\u003E e\n      # Invalid signature\n      puts '⚠️  Webhook signature verification failed.'\n      status 400\n      return\n    end\n  else\n    data = JSON.parse\u0028payload, symbolize_names: true\u0029\n    event = Stripe::Event.construct_from\u0028data\u0029\n  end\n  # Get the type of webhook event sent - used to check the status of PaymentIntents.\n  event_type = event['type']\n  data = event['data']\n  data_object = data['object']\n\n  if event_type == 'invoice.paid'\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    # puts data_object\n  end\n\n  if event_type == 'invoice.payment_failed'\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    # puts data_object\n  end\n\n  if event_type == 'customer.subscription.deleted'\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    # puts data_object\n  end\n\n  content_type 'application\u002Fjson'\n  { status: 'success' }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fwebhook', methods=['POST']\u0029\ndef webhook_received\u0028\u0029:\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = os.getenv\u0028'STRIPE_WEBHOOK_SECRET'\u0029\n  request_data = json.loads\u0028request.data\u0029\n\n  if webhook_secret:\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    signature = request.headers.get\u0028'stripe-signature'\u0029\n    try:\n      event = stripe.Webhook.construct_event\u0028\n        payload=request.data, sig_header=signature, secret=webhook_secret\u0029\n      data = event['data']\n    except Exception as e:\n      return e\n    # Get the type of webhook event sent - used to check the status of PaymentIntents.\n    event_type = event['type']\n  else:\n    data = request_data['data']\n    event_type = request_data['type']\n\n  data_object = data['object']\n\n  if event_type == 'invoice.paid':\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    print\u0028data\u0029\n\n  if event_type == 'invoice.payment_failed':\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    print\u0028data\u0029\n\n  if event_type == 'customer.subscription.deleted':\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    print\u0028data\u0029\n\n  return jsonify\u0028{'status': 'success'}\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"webhook.php","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u0024event = null;\n\u0024payload = @file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n\u0024sig_header = \u0024_SERVER['HTTP_STRIPE_SIGNATURE'];\n\u0024webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},";\ntry {\n  \u0024event = \\Stripe\\Webhook::constructEvent\u0028\n    \u0024payload, \u0024sig_header, \u0024webhook_secret\n  \u0029;\n} catch\u0028\\UnexpectedValueException \u0024e\u0029 {\n  \u002F\u002F Invalid payload\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n} catch\u0028\\Stripe\\Exception\\SignatureVerificationException \u0024e\u0029 {\n  \u002F\u002F Invalid signature\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n}\n\n\u002F\u002F Handle the event\n\u002F\u002F Review important events for Billing webhooks\n\u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n\u002F\u002F Remove comment to see the various objects sent for this sample\nswitch \u0028\u0024event-\u003Etype\u0029 {\n  case 'invoice.paid':\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    break;\n  case 'invoice.payment_failed':\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    break;\n  case 'customer.subscription.deleted':\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user\n    \u002F\u002F cancels it.\n    break;\n  \u002F\u002F ... handle other event types\n  default:\n    \u002F\u002F Unhandled event type\n}\n\nhttp_response_code\u0028200\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fwebhook\",\n  \u0028request, response\u0029 -\u003E {\n    String payload = request.body\u0028\u0029;\n    String sigHeader = request.headers\u0028\"Stripe-Signature\"\u0029;\n    String endpointSecret = dotenv.get\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029;\n    Event event = null;\n\n    try {\n      event = Webhook.constructEvent\u0028payload, sigHeader, endpointSecret\u0029;\n    } catch \u0028SignatureVerificationException e\u0029 {\n      \u002F\u002F Invalid signature\n      response.status\u0028400\u0029;\n      return \"\";\n    }\n\n    \u002F\u002F Deserialize the nested object inside the event\n    EventDataObjectDeserializer dataObjectDeserializer = event.getDataObjectDeserializer\u0028\u0029;\n    StripeObject stripeObject = null;\n    if \u0028dataObjectDeserializer.getObject\u0028\u0029.isPresent\u0028\u0029\u0029 {\n      stripeObject = dataObjectDeserializer.getObject\u0028\u0029.get\u0028\u0029;\n    } else {\n      \u002F\u002F Deserialization failed, probably due to an API version mismatch.\n      \u002F\u002F Refer to the Javadoc documentation on \u0060EventDataObjectDeserializer\u0060 for\n      \u002F\u002F instructions on how to handle this case, or return an error here.\n    }\n\n    switch \u0028event.getType\u0028\u0029\u0029 {\n      case \"invoice.paid\":\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n        \u002F\u002F limits.\n        break;\n      case \"invoice.payment_failed\":\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case \"customer.subscription.deleted\":\n        \u002F\u002F handle subscription canceled automatically based\n        \u002F\u002F upon your subscription settings. Or if the user\n        \u002F\u002F cancels it.\n        break;\n      default:\n      \u002F\u002F Unhandled event type\n    }\n\n    response.status\u0028200\u0029;\n    return \"\";\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028\n  '\u002Fwebhook',\n  bodyParser.raw\u0028{ type: 'application\u002Fjson' }\u0029,\n  async \u0028req, res\u0029 =\u003E {\n    \u002F\u002F Retrieve the event by verifying the signature using the raw body and secret.\n    let event;\n\n    try {\n      event = stripe.webhooks.constructEvent\u0028\n        req.body,\n        req.headers['stripe-signature'],\n        process.env.STRIPE_WEBHOOK_SECRET\n      \u0029;\n    } catch \u0028err\u0029 {\n      console.log\u0028err\u0029;\n      console.log\u0028\u0060⚠️  Webhook signature verification failed.\u0060\u0029;\n      console.log\u0028\n        \u0060⚠️  Check the env file and enter the correct webhook secret.\u0060\n      \u0029;\n      return res.sendStatus\u0028400\u0029;\n    }\n    \u002F\u002F Extract the object from the event.\n    const dataObject = event.data.object;\n\n    \u002F\u002F Handle the event\n    \u002F\u002F Review important events for Billing webhooks\n    \u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n    \u002F\u002F Remove comment to see the various objects sent for this sample\n    switch \u0028event.type\u0029 {\n      case 'invoice.paid':\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate limits.\n        break;\n      case 'invoice.payment_failed':\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F  an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case 'customer.subscription.deleted':\n        if \u0028event.request \u0021= null\u0029 {\n          \u002F\u002F handle a subscription canceled by your request\n          \u002F\u002F from above.\n        } else {\n          \u002F\u002F handle subscription canceled automatically based\n          \u002F\u002F upon your subscription settings.\n        }\n        break;\n      default:\n      \u002F\u002F Unexpected event type\n    }\n    res.sendStatus\u0028200\u0029;\n  }\n\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleWebhook\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  b, err := ioutil.ReadAll\u0028r.Body\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"ioutil.ReadAll: %v\", err\u0029\n    return\n  }\n\n  event, err := webhook.ConstructEvent\u0028b, r.Header.Get\u0028\"Stripe-Signature\"\u0029, os.Getenv\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"webhook.ConstructEvent: %v\", err\u0029\n    return\n  }\n\n  if event.Type == \"invoice.paid\" {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    return\n  }\n\n  if event.Type == \"invoice.payment_failed\" {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    return\n  }\n\n  if event.Type == \"customer.subscription.deleted\" {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it. {\n    return\n  }\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"webhook\"\u0029]\npublic async Task\u003CIActionResult\u003E Webhook\u0028\u0029\n{\n  var json = await new StreamReader\u0028HttpContext.Request.Body\u0029.ReadToEndAsync\u0028\u0029;\n  Event stripeEvent;\n  try\n  {\n    stripeEvent = EventUtility.ConstructEvent\u0028\n      json,\n      Request.Headers[\"Stripe-Signature\"],\n      this.options.Value.WebhookSecret\n    \u0029;\n    Console.WriteLine\u0028\u0024\"Webhook notification with type: {stripeEvent.Type} found for {stripeEvent.Id}\"\u0029;\n  }\n  catch \u0028Exception e\u0029\n  {\n    Console.WriteLine\u0028\u0024\"Something failed {e}\"\u0029;\n    return BadRequest\u0028\u0029;\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.paid\"\u0029\n  {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.payment_failed\"\u0029\n  {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n  }\n\n  if \u0028stripeEvent.Type == \"customer.subscription.deleted\"\u0029\n  {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it.\n  }\n  return Ok\u0028\u0029;\n}\n"]}]}}],"codeTabGroupID":"codetab_d0d51fe4f505be929e294a6308ddd11b44d311bb"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["During development, use the Stripe CLI to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["observe webhooks and forward them to your application"]},". Run the following in a new terminal while your development app is running:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"bash","title":"curl"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["  stripe listen --forward-to localhost:4242\u002Fwebhook\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For production, set up a webhook endpoint URL in the Dashboard, or use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fwebhook_endpoints"},"children":["Webhook Endpoints API"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You’ll listen to a couple of events to complete the remaining steps in this guide. See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-events"},"children":["Subscription events"]}," for more details about subscription-specific webhooks."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"provision-access","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Provision access to your service","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Now that the subscription is active, give your user access to your service.  To do this, listen to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.created"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]},", and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," events.  These events pass a subscription object which contains a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"status"},"children":[]}," field indicating whether the subscription is active, past due, or canceled.  See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-lifecycle"},"children":["the subscription lifecycle"]}," for a complete list of statuses."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your webhook handler:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Verify the subscription status.  If it’s ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"active"},"children":[]}," then your user has paid for your product."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Check the product the customer subscribed to and grant access to your service. Checking the product instead of the price gives you more flexibility if you need to change the pricing or billing interval."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Store the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"product.id"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.status"},"children":[]}," in your database along with the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.id"},"children":[]}," you already saved.  Check this record when determining which features to enable for the user in your application."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The state of a subscription might change at any point during its lifetime, even if your application does not directly make any calls to Stripe.  For example, a renewal might fail due to an expired credit card, which puts the subscription into a past due state.  Or, if you implement the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]},", a user might cancel their subscription without directly visiting your application.  Implementing your handler correctly keeps your application state in sync with Stripe."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"cancel-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Cancel the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["It’s common to allow customers to cancel their subscriptions. This example adds a cancellation option to the account settings page."]},{"\u0024\u0024mdtype":"Tag","name":"Image","attributes":{"src":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-subscriptions-guide-account-settings.6559626ba4b434826a67abfea165e097.png","alt":"Sample subscription cancelation interface.","width":60},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Account settings with the ability to cancel the subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"script.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["function cancelSubscription\u0028subscriptionId\u0029 {\n  return fetch\u0028'\u002Fcancel-subscription', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      subscriptionId: subscriptionId,\n    }\u0029,\n  }\u0029\n    .then\u0028response =\u003E {\n      return response.json\u0028\u0029;\n    }\u0029\n    .then\u0028cancelSubscriptionResponse =\u003E {\n      \u002F\u002F Display to the user that the subscription has been canceled.\n    }\u0029;\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcancel-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcancel-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  deleted_subscription = Stripe::Subscription.cancel\u0028data['subscriptionId']\u0029\n\n  deleted_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcancel-subscription', methods=['POST']\u0029\ndef cancelSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n         # Cancel the subscription by deleting it\n        deletedSubscription = stripe.Subscription.delete\u0028data['subscriptionId']\u0029\n        return jsonify\u0028deletedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\n    \u0024json-\u003EsubscriptionId\n  \u0029;\n  \u0024subscription-\u003Edelete\u0028\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'subscription' =\u003E \u0024subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n      \"\u002Fcancel-subscription\",\n      \u0028request, response\u0029 -\u003E {\n        response.type\u0028\"application\u002Fjson\"\u0029;\n        \u002F\u002F Set the default payment method on the customer\n        CancelPostBody postBody = gson.fromJson\u0028\n          request.body\u0028\u0029,\n          CancelPostBody.class\n        \u0029;\n\n        Subscription subscription = Subscription.retrieve\u0028\n          postBody.getSubscriptionId\u0028\u0029\n        \u0029;\n\n        Subscription deletedSubscription = subscription.cancel\u0028\u0029;\n        return deletedSubscription.toJson\u0028\u0029;\n      }\n    \u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcancel-subscription', async \u0028req, res\u0029 =\u003E {\n  \u002F\u002F Delete the subscription\n  const deletedSubscription = await stripe.subscriptions.del\u0028\n    req.body.subscriptionId\n  \u0029;\n  res.send\u0028deletedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCancelSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n  s, err := subscription.Cancel\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Cancel: %v\", err\u0029\n    return\n  }\n  writeJSON\u0028w, s\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"CancelSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class CancelSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"cancel-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E CancelSubscription\u0028[FromBody] CancelSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Cancel\u0028req.Subscription, null\u0029;\n    return subscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_23c7478f8e9b8a0cd6a2af01f0a0c4f9e497345a"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your application receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," event."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After the subscription is canceled, update your database to remove the Stripe subscription ID you previously stored, and limit access to your service."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When a subscription is canceled, it can’t be reactivated. Instead, collect updated billing information from your customer, update their default payment method, and create a new subscription with their existing customer record."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"test","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Test your integration","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Ftesting-scenarios.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"test-payment-methods"},"children":["Test payment methods"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the following table to test different payment methods and scenarios."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Payment method"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Scenario"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["How to test"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"900123456"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},". The confirmed PaymentIntent initially transitions to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},", then transitions to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment fails with an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"account_closed"},"children":[]}," error code."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"111111113"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment succeeds and does not require authentication."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4242 4242 4242 4242"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment requires ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["authentication"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0025 0000 3155"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card is declined with a decline code like ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"insufficient_funds"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0000 0000 9995"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with SEPA Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT321904300235473204"},"children":[]},". The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment intent status transition from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT861904300235473202"},"children":[]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"monitor-events"},"children":["Monitor events"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["subscription webhooks"]},". You can view events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fevents"},"children":["Dashboard"]},"\u0029 or with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For more details, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Ftesting"},"children":["testing your Billing integration"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"change-price","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Let customers change their plans","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To let your customers change their subscription, collect the price ID of the option they want to change to. Then send the new price ID from the frontend to a backend endpoint. This example also passes the subscription ID, but you can retrieve it from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"script.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["function updateSubscription\u0028priceId, subscriptionId\u0029 {\n  return fetch\u0028'\u002Fupdate-subscription', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      subscriptionId: subscriptionId,\n      newPriceId: priceId,\n    }\u0029,\n  }\u0029\n    .then\u0028response =\u003E {\n      return response.json\u0028\u0029;\n    }\u0029\n    .then\u0028response =\u003E {\n      return response;\n    }\u0029;\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call, passing the subscription ID and the new price ID. The subscription is now Premium, at 15 USD per month, instead of Basic at 5 USD per month."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fupdate-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fupdate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  updated_subscription =\n    Stripe::Subscription.update\u0028\n      data['subscriptionId'],\n      cancel_at_period_end: false,\n      items: [\n        { id: subscription.items.data[0].id, price: 'price_H1NlVtpo6ubk0m' }\n      ]\n    \u0029\n\n  updated_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fupdate-subscription', methods=['POST']\u0029\ndef updateSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        updatedSubscription = stripe.Subscription.modify\u0028\n            data['subscriptionId'],\n            cancel_at_period_end=False,\n            items=[{\n                'id': subscription['items']['data'][0].id,\n                'price': 'price_H1NlVtpo6ubk0m',\n            }]\n        \u0029\n        return jsonify\u0028updatedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024updated_subscription = \u0024stripe-\u003Esubscriptions-\u003Eupdate\u0028\u0024json-\u003EsubscriptionId, [\n    'items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'price' =\u003E 'price_H1NlVtpo6ubk0m',\n      ],\n    ],\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'updatedSubscription' =\u003E \u0024updated_subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fupdate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    UpdatePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpdatePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    SubscriptionUpdateParams params = SubscriptionUpdateParams\n      .builder\u0028\u0029\n      .addItem\u0028\n        SubscriptionUpdateParams\n          .Item.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setPrice\u0028\"price_H1NlVtpo6ubk0m\"\u0029\n          .build\u0028\u0029\n      \u0029\n      .setCancelAtPeriodEnd\u0028false\u0029\n      .build\u0028\u0029;\n\n    subscription.update\u0028params\u0029;\n    return subscription.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fupdate-subscription', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n  const updatedSubscription = await stripe.subscriptions.update\u0028\n    req.body.subscriptionId,\n    {\n      cancel_at_period_end: false,\n      items: [\n        {\n          id: subscription.items.data[0].id,\n          price: \"price_H1NlVtpo6ubk0m\",\n        },\n      ],\n    }\n  \u0029;\n\n  res.send\u0028updatedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleUpdateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n\n  params := \u0026stripe.SubscriptionParams{\n    CancelAtPeriodEnd: stripe.Bool\u0028false\u0029,\n    Items: []*stripe.SubscriptionItemsParams{{\n      ID:    stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Price: stripe.String\u0028\"price_H1NlVtpo6ubk0m\"\u0029,\n    }},\n  }\n\n  updatedSubscription, err := subscription.Update\u0028req.SubscriptionID, params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Update: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, updatedSubscription\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"UpdateSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class UpdateSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"update-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E UpdateSubscription\u0028[FromBody] UpdateSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var options = new SubscriptionUpdateOptions\n    {\n        CancelAtPeriodEnd = false,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Price = \"price_H1NlVtpo6ubk0m\",\n            }\n        }\n    };\n    var updatedSubscription = service.Update\u0028req.Subscription, options\u0029;\n    return updatedSubscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_7ab4e8df4b9fa3ff59eefcc835c1d41fe07265f6"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your application receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]}," event."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"preview-invoice","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Preview a price change","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When your customer changes their subscription, there’s often an adjustment to the amount they owe, known as a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["proration"]},". You can use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fupcoming"},"children":["upcoming invoice endpoint"]}," to display the adjusted amount to your customers."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the frontend, pass the upcoming invoice details to a backend endpoint."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"script.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["function retrieveUpcomingInvoice\u0028\n  customerId,\n  subscriptionId,\n  newPriceId,\n  trialEndDate\n\u0029 {\n  return fetch\u0028'\u002Fretrieve-upcoming-invoice', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      customerId: customerId,\n      subscriptionId: subscriptionId,\n      newPriceId: newPriceId,\n    }\u0029,\n  }\u0029\n    .then\u0028response =\u003E {\n      return response.json\u0028\u0029;\n    }\u0029\n    .then\u0028\u0028invoice\u0029 =\u003E {\n      return invoice;\n    }\u0029;\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-upcoming-invoice.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-upcoming-invoice' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  invoice =\n    Stripe::Invoice.upcoming\u0028\n      customer: data['customerId'],\n      subscription: data['subscriptionId'],\n      subscription_items: [\n        { id: subscription.items.data[0].id, deleted: true },\n        { price: ENV[data['newPriceId']], deleted: false }\n      ]\n    \u0029\n\n  invoice.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-upcoming-invoice', methods=['POST']\u0029\ndef retrieveUpcomingInvoice\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        # Retrieve the subscription\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        # Retrieve the invoice\n        invoice = stripe.Invoice.upcoming\u0028\n            customer=data['customerId'],\n            subscription=data['subscriptionId'],\n            subscription_items=[\n                {\n                    'id': subscription['items']['data'][0].id,\n                    'deleted': True,\n                },\n                {\n                    'price': 'price_H1NlVtpo6ubk0m',\n                    'deleted': False,\n                }\n            ],\n        \u0029\n        return jsonify\u0028invoice\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024invoice = \u0024stripe-\u003Einvoices-\u003Eupcoming\u0028[\n    'customer' =\u003E \u0024json-\u003EcustomerId,\n    'subscription_prorate' =\u003E true,\n    'subscription' =\u003E \u0024json-\u003EsubscriptionId,\n    'subscription_items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'deleted' =\u003E true\n      ],\n      [\n        'price' =\u003E \u0024json-\u003EnewPriceId,\n        'deleted' =\u003E false\n      ],\n    ]\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'invoice' =\u003E \u0024invoice,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-upcoming-invoice\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    UpcomingInvoicePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpcomingInvoicePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    InvoiceUpcomingParams invoiceParams = InvoiceUpcomingParams\n      .builder\u0028\u0029\n      .setCustomer\u0028postBody.getCustomerId\u0028\u0029\u0029\n      .setSubscription\u0028postBody.getSubscriptionId\u0028\u0029\u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setDeleted\u0028true\u0029\n          .build\u0028\u0029\n      \u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setPrice\u0028dotenv.get\u0028postBody.getNewPriceId\u0028\u0029.toUpperCase\u0028\u0029\u0029\u0029\n          .build\u0028\u0029\n      \u0029\n      .build\u0028\u0029;\n\n    Invoice invoice = Invoice.upcoming\u0028invoiceParams\u0029;\n\n    return invoice.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-upcoming-invoice', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n\n  const invoice = await stripe.invoices.retrieveUpcoming\u0028{\n    subscription_prorate: true,\n    customer: req.body.customerId,\n    subscription: req.body.subscriptionId,\n    subscription_items: [\n      {\n        id: subscription.items.data[0].id,\n        deleted: true,\n      },\n      {\n        \u002F\u002F This price ID is the price you want to change the subscription to.\n        price: 'price_H1NlVtpo6ubk0m',\n        deleted: false,\n      },\n    ],\n  }\u0029;\n  res.send\u0028invoice\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveUpcomingInvoice\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    CustomerID     string \u0060json:\"customerId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n  params := \u0026stripe.InvoiceParams{\n    Customer:     stripe.String\u0028req.CustomerID\u0029,\n    Subscription: stripe.String\u0028req.SubscriptionID\u0029,\n    SubscriptionItems: []*stripe.SubscriptionItemsParams{{\n      ID:      stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Deleted: stripe.Bool\u0028true\u0029,\n    }, {\n      Price:   stripe.String\u0028os.Getenv\u0028req.NewPriceID\u0029\u0029,\n      Deleted: stripe.Bool\u0028false\u0029,\n    }},\n  }\n  in, err := invoice.GetNext\u0028params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"invoice.GetNext: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, in\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveUpcomingInvoiceRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveUpcomingInvoiceRequest\n{\n    [JsonProperty\u0028\"customerId\"\u0029]\n    public string Customer { get; set; }\n\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-upcoming-invoice\"\u0029]\npublic ActionResult\u003CInvoice\u003E RetrieveUpcomingInvoice\u0028[FromBody] RetrieveUpcomingInvoiceRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var invoiceService = new InvoiceService\u0028\u0029;\n    var options = new UpcomingInvoiceOptions\n    {\n        Customer = req.Customer,\n        Subscription = req.Subscription,\n        SubscriptionItems = new List\u003CInvoiceSubscriptionItemOptions\u003E\n        {\n            new InvoiceSubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Deleted = true,\n            },\n            new InvoiceSubscriptionItemOptions\n            {\n                \u002F\u002F TODO: This should be Price, but isn't in Stripe.net yet.\n                Plan = Environment.GetEnvironmentVariable\u0028req.NewPrice\u0029,\n                Deleted = false,\n            },\n        }\n    };\n    Invoice upcoming = invoiceService.Upcoming\u0028options\u0029;\n    return upcoming;\n}\n"]}]}}],"codeTabGroupID":"codetab_7f975c16372b724ce83f59a6b53ed89c36ec9861"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"display-payment-method","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Display the customer payment method","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Displaying the brand and last four digits of your customer’s card can help them know which card is being charged, or if they need to update their payment method."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the frontend, send the payment method ID to a backend endpoint that retrieves the payment method details."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"script.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["function retrieveCustomerPaymentMethod\u0028paymentMethodId\u0029 {\n  return fetch\u0028'\u002Fretrieve-customer-payment-method', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      paymentMethodId: paymentMethodId,\n    }\u0029,\n  }\u0029\n    .then\u0028\u0028response\u0029 =\u003E {\n      return response.json\u0028\u0029;\n    }\u0029\n    .then\u0028\u0028response\u0029 =\u003E {\n      return response;\n    }\u0029;\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-customer-payment-method.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-customer-payment-method' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  payment_method = Stripe::PaymentMethod.retrieve\u0028data['paymentMethodId']\u0029\n\n  payment_method.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-customer-payment-method', methods=['POST']\u0029\ndef retrieveCustomerPaymentMethod\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        paymentMethod = stripe.PaymentMethod.retrieve\u0028\n            data['paymentMethodId'],\n        \u0029\n        return jsonify\u0028paymentMethod\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024payment_method = \u0024stripe-\u003EpaymentMethods-\u003Eretrieve\u0028\u0024json-\u003EpaymentMethodId\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'paymentMethod' =\u003E \u0024payment_method,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-customer-payment-method\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    PaymentMethodBody paymentMethodBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      PaymentMethodBody.class\n    \u0029;\n\n    PaymentMethod paymentMethod = PaymentMethod.retrieve\u0028\n      paymentMethodBody.getPaymentMethodId\u0028\u0029\n    \u0029;\n    return paymentMethod.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-customer-payment-method', async \u0028req, res\u0029 =\u003E {\n  const paymentMethod = await stripe.paymentMethods.retrieve\u0028\n    req.body.paymentMethodId\n  \u0029;\n\n  res.send\u0028paymentMethod\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveCustomerPaymentMethod\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    PaymentMethodID string \u0060json:\"paymentMethodId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  pm, err := paymentmethod.Get\u0028req.PaymentMethodID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"paymentmethod.Get: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, pm\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveCustomerPaymentMethodRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveCustomerPaymentMethodRequest\n{\n    [JsonProperty\u0028\"paymentMethodId\"\u0029]\n    public string PaymentMethod { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-customer-payment-method\"\u0029]\npublic ActionResult\u003CPaymentMethod\u003E RetrieveCustomerPaymentMethod\u0028[FromBody] RetrieveCustomerPaymentMethodRequest req\u0029\n{\n    var service = new PaymentMethodService\u0028\u0029;\n    var paymentMethod = service.Get\u0028req.PaymentMethod\u0029;\n    return paymentMethod;\n}\n"]}]}}],"codeTabGroupID":"codetab_9ced3cdc5383753ed362275de5f5b21df92e9a57"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Example response:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"pm_1GcbHY2eZvKYlo2CoqlVxo42\",\n  \"object\": \"payment_method\",\n  \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\": null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\": null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n    \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\": null,\n      \"cvc_check\": \"pass\"\n    },\n    \"country\": \"US\",\n    \"exp_month\": 8,\n    \"exp_year\": 2021,\n    \"fingerprint\": \"Xt5EWLLDS7FJjR1c\",\n    \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\": \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n    \"wallet\": null\n  },\n  \"created\": 1588010536,\n  \"customer\": \"cus_HAxB7dVQxhoKLh\",\n  \"livemode\": false,\n  \"metadata\": {},\n  \"type\": \"card\"\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["We recommend that you save the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"last4"},"children":[]}," in your database, for example, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," as ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripeCustomerPaymentMethodId"},"children":[]}," in your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"users"},"children":[]}," collection or table. You can optionally store ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_month"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_year"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fingerprint"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"billing_details"},"children":[]}," as needed. This is to limit the number of calls you make to Stripe, for performance efficiency and to avoid possible rate limiting."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Felements\u002Fdisclosure-cookies.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"disclose-cookies","beta":false,"collapsable":false,"numbered":false,"optional":false,"title":"Disclose Stripe to your customers","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe collects information on customer interactions with Elements to provide services to you, prevent fraud, and improve its services. This includes using cookies and IP addresses to identify which Elements a customer saw during a single checkout session. You’re responsible for disclosing and obtaining all rights and consents necessary for Stripe to use data in these ways. For more information, visit our ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.com\u002Flegal\u002Fprivacy-center#as-a-business-user-what-notice-do-i-provide-to-my-end-customers-about-stripe"},"children":["privacy center"]},"."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Page","attributes":{"id":"subscription-elements-ios","prefs":{"platform":"ios"},"title":"iOS"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscription-mobile.md","variables":{"platform":"ios"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCallout","attributes":{"image":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-collect-payment-details-mobile.b11cdc8fa8952d753238df4df3375fa6.png","imageAlt":"Fixed-price subscription page with Stripe Checkout","isHorizontal":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityRating","attributes":{"rating":3,"color":"purple"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Customize with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api"},"children":["Appearance API"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use this guide to learn how to sell fixed-price ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"subscriptions"},"children":["subscriptions"]},". You’ll use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment?platform=ios"},"children":["Mobile Payment Element"]}," to create a custom payment form that you embed in your app."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re selling digital products or services that are consumed within your app \u0028for example, subscriptions, in-game currencies, game levels, access to premium content, or unlocking a full version\u0029, you must use Apple’s in-app purchase APIs. This rule has some exceptions, including one-to-one personal services and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Fchanges-to-mobile-app-store-rules"},"children":["apps based in specific regions"]},". See the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fapp-store\u002Freview\u002Fguidelines\u002F#payments"},"children":["App Store review guidelines"]}," for more information."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"build","level":2,"anchored":true,"toc":"Build your subscription "},"children":["Build your subscription "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This guide shows you how to:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Model your business by building a product catalog."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create a registration process to add customers."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create subscriptions and collect payment information."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Test and monitor the status of payments and subscriptions."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Let customers change their plan or cancel the subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":2,"anchored":true,"toc":"How to model it on Stripe","id":"how-to-model-it-on-stripe"},"children":["How to model it on Stripe"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscriptions"]}," simplify your billing by automatically creating ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"invoices"},"children":["Invoices"]}," and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntents"]}," for you.  To create and activate a subscription, you need to first create a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products"},"children":["Product"]}," to model what is being sold, and a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["Price"]}," which determines the interval and amount to charge. You also need a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}," to store ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"payment-methods"},"children":["PaymentMethods"]}," used to make each recurring payment."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fdiagrams\u002Fbilling-api-objects.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Diagram","attributes":{"type":"entity","description":"A diagram illustrating common billing objects and their relationships","size":"xlarge","elements":[{"id":"subscription","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject"},"children":["Subscription object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"sub_1234"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"open"},"children":[]},"handle":null},{"name":"latest_invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"invoiceId"},{"name":"default_payment_method","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":"paymentMethodId"},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":"customerId"},{"name":"items.data.price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":"priceId"},{"name":"pending_setup_intent","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"seti_1234"},"children":[]},"handle":"setupIntentId"}],"handles":["invoiceId","paymentMethodId","customerId","priceId","setupIntentId"]},"position":{"x":0,"y":0}},{"id":"invoice","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fobject"},"children":["Invoice object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":null},{"name":"currency","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"usd"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"draft"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_method","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods\u002Fobject"},"children":["PaymentMethod object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"card"},"children":[]},"handle":null},{"name":"card[brand]","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"visa"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"customer","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Jenny Rosen"},"children":[]},"handle":null},{"name":"email","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"jennyrosen@example.com"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"price","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"product","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":"productId"},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":["productId"]},"position":{"x":0,"y":0}},{"id":"product","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":null},{"name":"active","value":"true","handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Widget, blue"},"children":[]},"handle":null},{"name":"default_price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_intent","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pi_1234"},"children":[]},"handle":null},{"name":"amount","value":"1000","handle":null},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"pi_invoiceId"},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},"handle":null}],"handles":["pi_invoiceId"]},"position":{"x":0,"y":0}},{"id":"edge-invoiceId-invoice-auto-auto","source":"subscription","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"invoiceId"},{"id":"edge-paymentMethodId-payment_method-auto-auto","source":"subscription","target":"payment_method","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"paymentMethodId"},{"id":"edge-customerId-customer-auto-auto","source":"subscription","target":"customer","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"customerId"},{"id":"edge-priceId-price-auto-auto","source":"subscription","target":"price","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"priceId"},{"id":"edge-productId-product-auto-auto","source":"price","target":"product","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"productId"},{"id":"edge-pi_invoiceId-invoice-auto-auto","source":"payment_intent","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"pi_invoiceId"}],"positioning":"auto"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Collapsable","attributes":{"open":false,"heading":"API object definitions"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fapi-definitions.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{"width":35},"children":["Resource "]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Definition"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer who purchases a subscription. Use the Customer object associated with a subscription to make and track recurring charges and to manage the products that they subscribe to."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Factive-entitlement"},"children":["Entitlement"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s access to a feature included in a service product that they subscribe to. When you create a subscription for a customer’s recurring purchase of a product, an active entitlement is automatically created for each feature associated with that product. When a customer accesses your services, use their active entitlements to enable the features included in their subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Ffeature"},"children":["Feature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a function or ability that your customers can access when they subscribe to a service product. You can include features in a product by creating ProductFeatures."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices"},"children":["Invoice"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A statement of amounts a customer owes that tracks payment statuses from draft through paid or otherwise finalized. Subscriptions automatically generate invoices."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A way to build dynamic payment flows. A PaymentIntent tracks the lifecycle of a customer checkout flow and triggers additional authentication steps when required by regulatory mandates, custom Radar fraud rules, or redirect-based payment methods. Invoices automatically create PaymentIntents."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods"},"children":["PaymentMethod"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A customer’s payment instruments that they use to pay for your products. For example, you can store a credit card on a Customer object and use it to make recurring payments for that customer. Typically used with the Payment Intents or Setup Intents APIs."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Defines the unit price, currency, and billing cycle for a product."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A good or service that your business sells. A service product can include one or more features."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproduct-feature"},"children":["ProductFeature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a single feature’s inclusion in a single product. Each product is associated with a ProductFeature for each feature that it includes, and each feature is associated with a ProductFeature for each product that includes it."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s scheduled recurring purchase of a product. Use a subscription to collect payments and provide repeated delivery of or continuous access to a product."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Here’s an example of how products, features, and entitlements work together. Imagine that you want to set up a subscription service that offers two tiers: a standard product with basic functionality, and an advanced product that adds extended functionality."]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two features: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two products: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the standard product, you create one ProductFeature that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the advanced product, you create two ProductFeatures: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]}," and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["A customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]},", subscribes to the standard product. When you create the subscription, Stripe automatically creates an Entitlement that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Another customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]},", subscribes to the advanced product. When you create the Subscription, Stripe automatically creates two Entitlements: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},", and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can determine which features to provision for a customer by ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements#entitlements"},"children":["retrieving their active entitlements or listening to the Active Entitlement Summary webhook"]},". You don’t have to retrieve their subscriptions, products, and features."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"install-setup","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Set up Stripe","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Fios-install-stripe-sdk-and-setup-key.md","variables":{"moduleName":"StripePaymentSheet","includeInstallInstructions":["spm","cocoapods","carthage","manual-framework"],"includeLanguages":false,"multipleModulesHackNeeded":false}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Fios-install-sdk.md","variables":{"moduleName":"StripePaymentSheet","minimumiOSVersion":"13","requiredFrameworksLink":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios\u002Ftree\u002Fmaster\u002FStripePaymentSheet\u002FREADME.md#manual-linking","includeInstallInstructions":["spm","cocoapods","carthage","manual-framework"]}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios"},"children":["Stripe iOS SDK"]}," is open source, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-ios\u002Findex.html"},"children":["fully documented"]},", and compatible with apps supporting iOS ","13"," or above."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"install-spm","title":"Swift Package Manager","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"install-spm","title":"Swift Package Manager"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the SDK, follow these steps:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["In Xcode, select ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["File"]}," \u003E ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Add Packages…"]}," and enter ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios-spm"},"children":[]}," as the repository URL."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Select the latest version number from our ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios\u002Freleases"},"children":["releases page"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Add the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["StripePaymentSheet"]}," product to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fswift_packages\u002Fadding_package_dependencies_to_your_app"},"children":["target of your app"]},"."]}]}]}},{"id":"install-cocoapods","title":"CocoaPods","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"install-cocoapods","title":"CocoaPods"},"children":[{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["If you haven’t already, install the latest version of ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fguides.cocoapods.org\u002Fusing\u002Fgetting-started.html"},"children":["CocoaPods"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["If you don’t have an existing ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fguides.cocoapods.org\u002Fsyntax\u002Fpodfile.html"},"children":["Podfile"]},", run the following command to create one:",{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["pod init\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Add this line to your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Podfile"},"children":[]},":",{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"podfile","filename":"Podfile","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["pod '","StripePaymentSheet","'\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Run the following command:",{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["pod install\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Don’t forget to use the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":".xcworkspace"},"children":[]}," file to open your project in Xcode, instead of the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":".xcodeproj"},"children":[]}," file, from here on out."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["In the future, to update to the latest version of the SDK, run:",{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["pod update ","StripePaymentSheet","\n"]}]}]}]}},{"id":"install-carthage","title":"Carthage","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"install-carthage","title":"Carthage"},"children":[{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["If you haven’t already, install the latest version of ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002FCarthage\u002FCarthage#installing-carthage"},"children":["Carthage"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Add this line to your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Cartfile"},"children":[]},":",{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"cartfile","filename":"Cartfile","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["github \"stripe\u002Fstripe-ios\"\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Follow the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002FCarthage\u002FCarthage#if-youre-building-for-ios-tvos-or-watchos"},"children":["Carthage installation instructions"]},". Make sure to embed all of the required frameworks listed ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios\u002Ftree\u002Fmaster\u002FStripePaymentSheet\u002FREADME.md#manual-linking"},"children":["here"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["In the future, to update to the latest version of the SDK, run the following command:",{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["carthage update stripe-ios --platform ios\n"]}]}]}]}},{"id":"install-manual-framework","title":"Manual Framework","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"install-manual-framework","title":"Manual Framework"},"children":[{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Head to our ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios\u002Freleases\u002Flatest"},"children":["GitHub releases page"]}," and download and unzip ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Stripe.xcframework.zip"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Drag ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["StripePaymentSheet",".xcframework"]}," to the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Embedded Binaries"]}," section of the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["General"]}," settings in your Xcode project. Make sure to select ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy items if needed"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Repeat step 2 for all required frameworks listed ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios\u002Ftree\u002Fmaster\u002FStripePaymentSheet\u002FREADME.md#manual-linking"},"children":["here"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["In the future, to update to the latest version of our SDK, repeat steps 1–3."]}]}]}}]},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For details on the latest SDK release and past versions, see the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios\u002Freleases"},"children":["Releases"]}," page on GitHub. To receive notifications when a new release is published, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fhelp.github.com\u002Fen\u002Farticles\u002Fwatching-and-unwatching-releases-for-a-repository#watching-releases-for-a-repository"},"children":["watch releases for the repository"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Configure the SDK with your Stripe ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fapikeys"},"children":["publishable key"]}," on app start. This enables your app to make requests to the Stripe API."]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang-ios","items":[{"id":"swift","title":"Swift","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"swift","title":"Swift"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"AppDelegate.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[{"start":2,"end":2},{"start":8,"end":8}],"remove":[]}},"children":["import UIKit",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"add","value":"\nimport StripePaymentSheet"},"children":["\nimport ","StripePaymentSheet"]},"\n\n@main\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    func application\u0028_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\u0029 -\u003E Bool {",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"add","value":"\n        StripeAPI.defaultPublishableKey = \"[object Object]\""},"children":["\n        StripeAPI.defaultPublishableKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"\""]},"\n        \u002F\u002F do any other necessary launch configuration\n        return true\n    }\n}\n"]}]}},{"id":"objc","title":"Objective-C","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"objc","title":"Objective-C"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"objc","filename":"AppDelegate.m","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[{"start":2,"end":2},{"start":6,"end":6}],"remove":[]}},"children":["#import \"AppDelegate.h\"",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"add","value":"\n@import StripeCore;"},"children":["\n@import StripeCore;"]},"\n\n@implementation AppDelegate\n- \u0028BOOL\u0029application:\u0028UIApplication *\u0029application didFinishLaunchingWithOptions:\u0028NSDictionary *\u0029launchOptions {",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"add","value":"\n    [StripeAPI setDefaultPublishableKey:@\"[object Object]\"];"},"children":["\n    [StripeAPI setDefaultPublishableKey:@\"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"\"];"]},"\n    \u002F\u002F do any other necessary launch configuration\n    return YES;\n}\n@end\n"]}]}}],"codeTabGroupID":"codetab_da39a3ee5e6b4b0d3255bfef95601890afd80709"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#obtain-api-keys"},"children":["test mode"]}," keys while you test and develop, and your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["live mode"]}," keys when you publish your app."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["And then install the Stripe CLI. The CLI provides webhook testing and you can run it to make API calls to Stripe.  This guide shows how to use the CLI to set up a pricing model in a later section."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fstripe-cli-install.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"StripeCliInstall","attributes":{"sectionMap":{"mac":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install Homebrew to run this command: https:\u002F\u002Fbrew.sh\u002F\nbrew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060mac-os\u0060 tar.gz file of your cpu architecture type from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Tar the downloaded file\ntar -xvf stripe_[X.X.X]_mac-os_[ARCH_TYPE].tar.gz\n\n# Optionally, install the binary in a location where you can execute it globally \u0028for example, \u0060\u002Fusr\u002Flocal\u002Fbin\u0060\u0029.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_bfcad54629d52f79a55410a10b6600ac8d2a665d"},"children":[]}],"linux":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["brew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"apt","title":"apt","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"apt","title":"apt"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"mistake"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On April 5th, 2024, we changed Stripe CLI’s GPG key to install the Stripe CLI through apt. If you configured the public key before April 5th, you’ll encounter this error:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable InRelease: The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Failed to fetch https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local\u002Fdists\u002Fstable\u002FInRelease  The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Some index files failed to download. They have been ignored, or old ones used instead\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To resolve this error, refresh Stripe’s GPG key by following step 1."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add Stripe CLI's GPG key to the apt sources keyring:\ncurl -s https:\u002F\u002Fpackages.stripe.dev\u002Fapi\u002Fsecurity\u002Fkeypair\u002Fstripe-cli-gpg\u002Fpublic | gpg --dearmor | sudo tee \u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg\n\n# 2. Add CLI's apt repository to the apt sources list:\necho \"deb [signed-by=\u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg] https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable main\" | sudo tee -a \u002Fetc\u002Fapt\u002Fsources.list.d\u002Fstripe.list\n\n# 3. Update the package list\nsudo apt update\n\n# 4. Install the CLI\nsudo apt install stripe\n\n# 5. Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"yum","title":"yum","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"yum","title":"yum"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add CLI's yum repository to the yum sources list:\necho -e \"[Stripe]\\nname=stripe\\nbaseurl=https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-rpm-local\u002F\\nenabled=1\\ngpgcheck=0\" \u003E\u003E \u002Fetc\u002Fyum.repos.d\u002Fstripe.repo\n\n# 2. Install the CLI\nsudo yum install stripe\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Download the latest \u0060linux\u0060 tar.gz file from \u003Chttps:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\u003E\n\n# Unzip the file:\ntar -xvf stripe_X.X.X_linux_x86_64.tar.gz\n\n# Move \u0060.\u002Fstripe\u0060 to your execution path.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_58aa30da375f22c90c6974cc89fd9531c6978ce2"},"children":[]}],"windows":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060windows\u0060 zip file from\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Unzip the \u0060stripe_X.X.X_windows_x86_64.zip\u0060 file\n\n# 3. Run the unzipped \u0060.exe\u0060 file\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"scoop","title":"scoop","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"scoop","title":"scoop"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# See https:\u002F\u002Fscoop.sh\n\nscoop bucket add stripe https:\u002F\u002Fgithub.com\u002Fstripe\u002Fscoop-stripe-cli.git\n\nscoop install stripe\n"]}]}}],"codeTabGroupID":"codetab_02b0729429bd0e3865a8b5213471b8d84fb75449"},"children":[]}]}},"children":["For additional install options, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["Get started with the Stripe CLI"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-pricing-model","beta":false,"badges":["Stripe CLI or Dashboard"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the pricing model","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcreate-business-model.md","variables":{"payment_currency":"usd","stripe_cli_install_link":"#install-setup"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create your ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products-subs"},"children":["products"]}," and their ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["prices"]}," in the Dashboard or with the Stripe CLI."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. \u0028If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.\u0029"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In this example, each product bills at monthly intervals. The price for the Basic product is 5 ","USD",". The price for the Premium product is 15 ","USD","."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"dashboard","title":"Dashboard","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Dashboard"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fproducts\u002Fcreate"},"children":["Add a product"]}," page and create two products. Add one price for each product, each with a monthly recurring billing period:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Premium product: Premium service with extra features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 15 ","USD"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Basic product: Basic service with minimum features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 5 ","USD"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_G0FvDp6vZvdwRZ"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you’re ready, use the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy to live mode"]}," button at the top right of the page to clone your product from ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["test mode to live mode"]},"."]}]}},{"id":"stripe-cli","title":"Stripe CLI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Stripe CLI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you haven’t already, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["install the Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next create the product objects:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium product\nstripe products create \\\n  --name=\"Billing Guide: Premium Service\" \\\n  --description=\"Premium service with extra features\"\n\n# Basic product\nstripe products create \\\n  --name=\"Billing Guide: Basic Service\" \\\n  --description=\"Basic service with minimum features\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the product ID for each product. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"prod_H94k5odtwJXMtQ\",\n  \"object\": \"product\",\n  \"active\": true,\n  \"attributes\": [\n\n  ],\n  \"created\": 1587577341,\n  \"description\": \"Premium service with extra features\",\n  \"images\": [\n\n  ],\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": \"Billing Guide: Premium Service\",\n  \"statement_descriptor\": null,\n  \"type\": \"service\",\n  \"unit_label\": null,\n  \"updated\": 1587577341\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the product IDs to create a price for each product. The ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"unit_amount"},"children":[]}," number is in cents, so ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"1500"},"children":[]}," = 15 ","USD",", for example."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium price\n  stripe prices create \\\n    -d product=prod_H94k5odtwJXMtQ \\\n    -d unit_amount=1500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n\n# Basic price\n  stripe prices create \\\n    -d product=prod_HGd6W1VUqqXGvr \\\n    -d unit_amount=500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the price ID for each price so you can use them in subsequent steps. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"price_HGd7M3DV3IMXkC\",\n  \"object\": \"price\",\n  \"product\": \"prod_HGd6W1VUqqXGvr\",\n  \"type\": \"recurring\",\n  \"currency\": \"","usd","\",\n  \"recurring\": {\n    \"aggregate_usage\": null,\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"active\": true,\n  \"billing_scheme\": \"per_unit\",\n  \"created\": 1589319695,\n  \"livemode\": false,\n  \"lookup_key\": null,\n  \"metadata\": {\n  },\n  \"nickname\": null,\n  \"unit_amount\": 1500,\n  \"unit_amount_decimal\": \"1500\",\n  \"tiers\": null,\n  \"tiers_mode\": null,\n  \"transform_quantity\": null\n}\n"]}]}}]},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-customer","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the customer","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe needs a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"customers"},"children":["customer"]}," for each subscription.  In your application frontend, collect any necessary information from your users and pass it to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you need to collect address details, the Address Element enables you to collect a shipping or billing address for your customers. For more information on the Address Element, visit the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Faddress-element"},"children":["Address Element"]}," page."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"RegisterView.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["struct RegisterView: View {\n    @State var email = \"\"\n    var body: some View {\n        VStack {\n            TextField\u0028text: \u0024email\u0029 {\n                Text\u0028\"Email\"\u0029\n            }\n            Button {\n                Task {\n                    var request = URLRequest\u0028url: URL\u0028string: \"http:\u002F\u002Flocalhost:4242\u002Fcreate-customer\"\u0029\u0021\u0029\n                    request.httpMethod = \"POST\"\n                    request.setValue\u0028\"application\u002Fjson\", forHTTPHeaderField: \"Content-Type\"\u0029\n                    request.httpBody = try\u0021 JSONEncoder\u0028\u0029.encode\u0028[\"email\": email]\u0029\n                    let \u0028data, _\u0029 = try\u0021 await URLSession.shared.data\u0028for: request\u0029\n                    let responseJSON = try\u0021 JSONSerialization.jsonObject\u0028with: data\u0029\n                    \u002F\u002F Return the customer ID here\n                    print\u0028responseJSON[\"customer\"]\u0029\n                }\n            } label: {\n                Text\u0028\"Submit\"\u0029\n            }\n        }\n    }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the server, create the Stripe customer object."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-customer.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodegenSnippet","attributes":{"generatedCodeBlocks":[{"lang":"curl","generatedCode":{"resources":"curl https:\u002F\u002Fapi.stripe.com\u002Fv1\u002Fcustomers \\\n  -u \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024:\" \\\n  -d email={{CUSTOMER_EMAIL}} \\\n  -d name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"cli","generatedCode":{"resources":"stripe customers create  \\\n  --email={{CUSTOMER_EMAIL}} \\\n  --name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"ruby","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.api_key = '\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\n\nStripe::Customer.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"python","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nimport stripe\nstripe.api_key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nstripe.Customer.create\u0028\n  email=\"{{CUSTOMER_EMAIL}}\",\n  name=\"{{CUSTOMER_NAME}}\",\n  shipping={\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  address={\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n\u0029","services":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nclient = StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029\n\nclient.customers.create\u0028{\n  \"email\": \"{{CUSTOMER_EMAIL}}\",\n  \"name\": \"{{CUSTOMER_NAME}}\",\n  \"shipping\": {\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  \"address\": {\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"php","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n\u0024stripe = new \\Stripe\\StripeClient\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\n\u0024stripe-\u003Ecustomers-\u003Ecreate\u0028[\n  'email' =\u003E '{{CUSTOMER_EMAIL}}',\n  'name' =\u003E '{{CUSTOMER_NAME}}',\n  'shipping' =\u003E [\n    'address' =\u003E [\n      'city' =\u003E 'Brothers',\n      'country' =\u003E 'US',\n      'line1' =\u003E '27 Fredrick Ave',\n      'postal_code' =\u003E '97712',\n      'state' =\u003E 'CA',\n    ],\n    'name' =\u003E '{{CUSTOMER_NAME}}',\n  ],\n  'address' =\u003E [\n    'city' =\u003E 'Brothers',\n    'country' =\u003E 'US',\n    'line1' =\u003E '27 Fredrick Ave',\n    'postal_code' =\u003E '97712',\n    'state' =\u003E 'CA',\n  ],\n]\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"java","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.apiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = Customer.create\u0028params\u0029;","services":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeClient client = new StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029;\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = client.customers\u0028\u0029.create\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"node","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nconst stripe = require\u0028'stripe'\u0029\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\nconst customer = await stripe.customers.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"go","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nstripe.Key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nparams := \u0026stripe.CustomerParams{\n  Email: stripe.String\u0028\"{{CUSTOMER_EMAIL}}\"\u0029,\n  Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  Shipping: \u0026stripe.CustomerShippingParams{\n    Address: \u0026stripe.AddressParams{\n      City: stripe.String\u0028\"Brothers\"\u0029,\n      Country: stripe.String\u0028\"US\"\u0029,\n      Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n      PostalCode: stripe.String\u0028\"97712\"\u0029,\n      State: stripe.String\u0028\"CA\"\u0029,\n    },\n    Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  },\n  Address: \u0026stripe.AddressParams{\n    City: stripe.String\u0028\"Brothers\"\u0029,\n    Country: stripe.String\u0028\"US\"\u0029,\n    Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n    PostalCode: stripe.String\u0028\"97712\"\u0029,\n    State: stripe.String\u0028\"CA\"\u0029,\n  },\n};\nresult, err := customer.New\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"dotnet","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeConfiguration.ApiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nvar options = new CustomerCreateOptions\n{\n    Email = \"{{CUSTOMER_EMAIL}}\",\n    Name = \"{{CUSTOMER_NAME}}\",\n    Shipping = new ShippingOptions\n    {\n        Address = new AddressOptions\n        {\n            City = \"Brothers\",\n            Country = \"US\",\n            Line1 = \"27 Fredrick Ave\",\n            PostalCode = \"97712\",\n            State = \"CA\",\n        },\n        Name = \"{{CUSTOMER_NAME}}\",\n    },\n    Address = new AddressOptions\n    {\n        City = \"Brothers\",\n        Country = \"US\",\n        Line1 = \"27 Fredrick Ave\",\n        PostalCode = \"97712\",\n        State = \"CA\",\n    },\n};\nvar service = new CustomerService\u0028\u0029;\nservice.Create\u0028options\u0029;"},"codegenError":null,"overriddenCodeBlock":null}],"codeTabGroupID":"codetab_3157f82c4e796fd1f0929952cd21468b2db77735","httpPath":"\u002Fv1\u002Fcustomers","httpVerb":"post","v2ApiVersion":"2024-05-23.preview-v2"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you want to render the Payment Element without first creating a subscription, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment-deferred?type=subscription"},"children":["Collect payment details before creating an Intent"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Let your new customer choose a plan and then create the subscription—in this guide, they choose between Basic and Premium."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your app, pass the selected price ID and the ID of the customer record to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"PricesView.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["func createSubscription\u0028priceId: String, customerId: String\u0029 async -\u003E SubscriptionsResponse {\n    var request = URLRequest\u0028url: URL\u0028string: \"http:\u002F\u002Flocalhost:4242\u002Fcreate-subscription\"\u0029\u0021\u0029\n    request.httpMethod = \"POST\"\n    request.setValue\u0028\"application\u002Fjson\", forHTTPHeaderField: \"Content-Type\"\u0029\n    request.httpBody = try\u0021 JSONEncoder\u0028\u0029.encode\u0028[\"customerId\": customerId, \"priceId\": priceId]\u0029\n    let \u0028responseData, _\u0029 = try\u0021 await URLSession.shared.data\u0028for: request\u0029\n    \u002F\u002F SubscriptionsResponse is a Decodable struct conforming to the expected response from your backend.\n    \u002F\u002F It should include the client_secret, as discussed below.\n    let subscriptionsResponse = try\u0021 JSONDecoder\u0028\u0029.decode\u0028SubscriptionsResponse.self, from: responseData\u0029\n    return subscriptionsResponse\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, create the subscription with status ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"incomplete"},"children":[]}," using ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_behavior=default_incomplete"},"children":[]},". Then return the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"client_secret"},"children":[]}," from the subscription’s first ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-intents"},"children":["payment intent"]}," to the frontend to complete payment."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject#subscription_object-payment_settings-save_default_payment_method"},"children":["save_default_payment_method"]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"on_subscription"},"children":[]}," to save the payment method as the default for a subscription when a payment succeeds. Saving a default payment method increases the success rate of future subscription payments."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-subscription-default-incomplete.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcreate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse\u0028request.body.read\u0029\n  customer_id = cookies[:customer]\n  price_id = data['priceId']\n\n  # Create the subscription. Note we're expanding the Subscription's\n  # latest invoice and that invoice's payment_intent\n  # so we can pass it to the front end to confirm the payment\n  subscription = Stripe::Subscription.create\u0028\n    customer: customer_id,\n    items: [{\n      price: price_id,\n    }],\n    payment_behavior: 'default_incomplete',\n    payment_settings: {save_default_payment_method: 'on_subscription'},\n    expand: ['latest_invoice.payment_intent']\n  \u0029\n\n  { subscriptionId: subscription.id, clientSecret: subscription.latest_invoice.payment_intent.client_secret }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcreate-subscription', methods=['POST']\u0029\ndef create_subscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    customer_id = data['customerId']\n    price_id = data['priceId']\n\n    try:\n        # Create the subscription. Note we're expanding the Subscription's\n        # latest invoice and that invoice's payment_intent\n        # so we can pass it to the front end to confirm the payment\n        subscription = stripe.Subscription.create\u0028\n            customer=customer_id,\n            items=[{\n                'price': price_id,\n            }],\n            payment_behavior='default_incomplete',\n            payment_settings={'save_default_payment_method': 'on_subscription'},\n            expand=['latest_invoice.payment_intent'],\n        \u0029\n        return jsonify\u0028subscriptionId=subscription.id, clientSecret=subscription.latest_invoice.payment_intent.client_secret\u0029\n\n    except Exception as e:\n        return jsonify\u0028error={'message': e.user_message}\u0029, 400\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n    \u002F\u002F Get the request body and decode it as JSON.\n    \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n    \u0024json = json_decode\u0028\u0024body\u0029;\n\n    \u002F\u002F Get the customer ID from the cookie and the price ID from the JSON data.\n    \u0024customer_id = \u0024_COOKIE['customer'];\n    \u0024price_id = \u0024json-\u003EpriceId;\n\n    \u002F\u002F Create the subscription with the customer ID, price ID, and necessary options.\n    \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Ecreate\u0028[\n        'customer' =\u003E \u0024customer_id,\n        'items' =\u003E [[\n            'price' =\u003E \u0024price_id,\n        ]],\n        'payment_behavior' =\u003E 'default_incomplete',\n        'payment_settings' =\u003E ['save_default_payment_method' =\u003E 'on_subscription'],\n        'expand' =\u003E ['latest_invoice.payment_intent'],\n    ]\u0029;\n\n    \u002F\u002F Return the subscription ID and client secret as a JSON response.\n    header\u0028'Content-Type: application\u002Fjson'\u0029;\n    echo json_encode\u0028[\n        'subscriptionId' =\u003E \u0024subscription-\u003Eid,\n        'clientSecret' =\u003E \u0024subscription-\u003Elatest_invoice-\u003Epayment_intent-\u003Eclient_secret,\n    ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fcreate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    String customerId = request.cookie\u0028\"customer\"\u0029;\n    CreateSubscriptionRequest postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      CreateSubscriptionRequest.class\n    \u0029;\n    String priceId = postBody.getPriceId\u0028\u0029;\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    SubscriptionCreateParams.PaymentSettings paymentSettings =\n      SubscriptionCreateParams.PaymentSettings\n        .builder\u0028\u0029\n        .setSaveDefaultPaymentMethod\u0028SaveDefaultPaymentMethod.ON_SUBSCRIPTION\u0029\n        .build\u0028\u0029;\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    SubscriptionCreateParams subCreateParams = SubscriptionCreateParams\n      .builder\u0028\u0029\n      .setCustomer\u0028customerId\u0029\n      .addItem\u0028\n        SubscriptionCreateParams\n          .Item.builder\u0028\u0029\n          .setPrice\u0028priceId\u0029\n          .build\u0028\u0029\n      \u0029\n      .setPaymentSettings\u0028paymentSettings\u0029\n      .setPaymentBehavior\u0028SubscriptionCreateParams.PaymentBehavior.DEFAULT_INCOMPLETE\u0029\n      .addAllExpand\u0028Arrays.asList\u0028\"latest_invoice.payment_intent\"\u0029\u0029\n      .build\u0028\u0029;\n\n    Subscription subscription = Subscription.create\u0028subCreateParams\u0029;\n\n    Map\u003CString, Object\u003E responseData = new HashMap\u003C\u003E\u0028\u0029;\n    responseData.put\u0028\"subscriptionId\", subscription.getId\u0028\u0029\u0029;\n    responseData.put\u0028\"clientSecret\", subscription.getLatestInvoiceObject\u0028\u0029.getPaymentIntentObject\u0028\u0029.getClientSecret\u0028\u0029\u0029;\n    return StripeObject.PRETTY_PRINT_GSON.toJson\u0028responseData\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcreate-subscription', async \u0028req, res\u0029 =\u003E {\n  const customerId = req.cookies['customer'];\n  const priceId = req.body.priceId;\n\n  try {\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    const subscription = await stripe.subscriptions.create\u0028{\n      customer: customerId,\n      items: [{\n        price: priceId,\n      }],\n      payment_behavior: 'default_incomplete',\n      payment_settings: { save_default_payment_method: 'on_subscription' },\n      expand: ['latest_invoice.payment_intent'],\n    }\u0029;\n\n    res.send\u0028{\n      subscriptionId: subscription.id,\n      clientSecret: subscription.latest_invoice.payment_intent.client_secret,\n    }\u0029;\n  } catch \u0028error\u0029 {\n    return res.status\u0028400\u0029.send\u0028{ error: { message: error.message } }\u0029;\n  }\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCreateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n    if r.Method \u0021= \"POST\" {\n        http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n        return\n    }\n\n    var req struct {\n        PriceID string \u0060json:\"priceId\"\u0060\n    }\n\n    if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n        return\n    }\n\n    cookie, _ := r.Cookie\u0028\"customer\"\u0029\n    customerID := cookie.Value\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    paymentSettings := \u0026stripe.SubscriptionPaymentSettingsParams{\n\t\t    SaveDefaultPaymentMethod: stripe.String\u0028\"on_subscription\"\u0029,\n  \t}\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    subscriptionParams := \u0026stripe.SubscriptionParams{\n        Customer: stripe.String\u0028customerID\u0029,\n        Items: []*stripe.SubscriptionItemsParams{\n            {\n                Price: stripe.String\u0028req.PriceID\u0029,\n            },\n        },\n        PaymentSettings: paymentSettings,\n        PaymentBehavior: stripe.String\u0028\"default_incomplete\"\u0029,\n    }\n    subscriptionParams.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029\n    s, err := subscription.New\u0028subscriptionParams\u0029\n\n    if err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"subscription.New: %v\", err\u0029\n        return\n    }\n\n    writeJSON\u0028w, struct {\n        SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n        ClientSecret string \u0060json:\"clientSecret\"\u0060\n    }{\n        SubscriptionID: s.ID,\n        ClientSecret: s.LatestInvoice.PaymentIntent.ClientSecret,\n    }, nil\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"create-subscription\"\u0029]\npublic ActionResult\u003CSubscriptionCreateResponse\u003E CreateSubscription\u0028[FromBody] CreateSubscriptionRequest req\u0029\n{\n    var customerId = HttpContext.Request.Cookies[\"customer\"];\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    var paymentSettings = new SubscriptionPaymentSettingsOptions {\n        SaveDefaultPaymentMethod = \"on_subscription\",\n    };\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    var subscriptionOptions = new SubscriptionCreateOptions\n    {\n        Customer = customerId,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Price = req.PriceId,\n            },\n        },\n        PaymentSettings = paymentSettings,\n        PaymentBehavior = \"default_incomplete\",\n    };\n    subscriptionOptions.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029;\n    var subscriptionService = new SubscriptionService\u0028\u0029;\n    try\n    {\n        Subscription subscription = subscriptionService.Create\u0028subscriptionOptions\u0029;\n\n        return new SubscriptionCreateResponse\n        {\n          SubscriptionId = subscription.Id,\n          ClientSecret = subscription.LatestInvoice.PaymentIntent.ClientSecret,\n        };\n    }\n    catch \u0028StripeException e\u0029\n    {\n        Console.WriteLine\u0028\u0024\"Failed to create subscription.{e}\"\u0029;\n        return BadRequest\u0028\u0029;\n    }\n}\n"]}]}}],"codeTabGroupID":"codetab_460d8430c5a0d180ec8c0f560dc384e170c5d04f"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re using a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"multi-currency-price"},"children":["multi-currency Price"]},", use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fcreate#create_subscription-currency"},"children":["currency"]}," parameter to tell the Subscription which of the Price’s currencies to use. \u0028If you omit the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"currency"},"children":[]}," parameter, then the Subscription uses the Price’s default currency.\u0029"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["At this point the Subscription is ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"inactive"},"children":[]}," and awaiting payment. Here’s an example response. The minimum fields to store are highlighted, but store whatever your application frequently accesses."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fsub-response-inactive.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":2,"end":2},{"start":16,"end":16},{"start":18,"end":18}],"add":[],"remove":[]}},"children":["{",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"id\": \"sub_JgRjFjhKbtD2qz\","},"children":["\n  \"id\": \"sub_JgRjFjhKbtD2qz\","]},"\n  \"object\": \"subscription\",\n  \"application_fee_percent\": null,\n  \"automatic_tax\": {\n    \"enabled\": false\n  },\n  \"billing\": \"charge_automatically\",\n  \"billing_cycle_anchor\": 1623873347,\n  \"billing_thresholds\": null,\n  \"cancel_at\": null,\n  \"cancel_at_period_end\": false,\n  \"canceled_at\": null,\n  \"collection_method\": \"charge_automatically\",\n  \"created\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"current_period_end\": 1626465347,"},"children":["\n  \"current_period_end\": 1626465347,"]},"\n  \"current_period_start\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"customer\": \"cus_CMqDWO2xODTZqt\","},"children":["\n  \"customer\": \"cus_CMqDWO2xODTZqt\","]},"\n  \"days_until_due\": null,\n  \"default_payment_method\": null,\n  \"default_source\": null,\n  \"default_tax_rates\": [\n\n  ],\n  \"discount\": null,\n  \"ended_at\": null,\n  \"invoice_customer_balance_settings\": {\n    \"consume_applied_balance_on_void\": true\n  },\n  \"items\": {\n    \"object\": \"list\",\n    \"data\": [\n      {\n        \"id\": \"si_JgRjmS4Ur1khEx\",\n        \"object\": \"subscription_item\",\n        \"billing_thresholds\": null,\n        \"created\": 1623873347,\n        \"metadata\": {\n        },\n        \"plan\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"plan\",\n          \"active\": true,\n          \"aggregate_usage\": null,\n          \"amount\": 2000,\n          \"amount_decimal\": \"2000\",\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"interval\": \"month\",\n          \"interval_count\": 1,\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"tiers\": null,\n          \"tiers_mode\": null,\n          \"transform_usage\": null,\n          \"trial_period_days\": null,\n          \"usage_type\": \"licensed\"\n        },\n        \"price\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"price\",\n          \"active\": true,\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"livemode\": false,\n          \"lookup_key\": null,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"recurring\": {\n            \"aggregate_usage\": null,\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"tiers_mode\": null,\n          \"transform_quantity\": null,\n          \"type\": \"recurring\",\n          \"unit_amount\": 2000,\n          \"unit_amount_decimal\": \"2000\"\n        },\n        \"quantity\": 1,\n        \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n        \"tax_rates\": [\n\n        ]\n      }\n    ],\n    \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"\u002Fv1\u002Fsubscription_items?subscription=sub_JgRjFjhKbtD2qz\"\n  },\n  \"latest_invoice\": {\n    \"id\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n    \"object\": \"invoice\",\n    \"account_country\": \"US\",\n    \"account_name\": \"Angelina's Store\",\n    \"account_tax_ids\": null,\n    \"amount_due\": 2000,\n    \"amount_paid\": 0,\n    \"amount_remaining\": 2000,\n    \"application_fee\": null,\n    \"attempt_count\": 0,\n    \"attempted\": false,\n    \"auto_advance\": false,\n    \"automatic_tax\": {\n      \"enabled\": false,\n      \"status\": null\n    },\n    \"billing\": \"charge_automatically\",\n    \"billing_reason\": \"subscription_update\",\n    \"charge\": null,\n    \"closed\": true,\n    \"collection_method\": \"charge_automatically\",\n    \"created\": 1623873347,\n    \"currency\": \"usd\",\n    \"custom_fields\": null,\n    \"customer\": \"cus_CMqDWO2xODTZqt\",\n    \"customer_address\": null,\n    \"customer_email\": \"angelina@stripe.com\",\n    \"customer_name\": null,\n    \"customer_phone\": null,\n    \"customer_shipping\": {\n      \"address\": {\n        \"city\": \"\",\n        \"country\": \"US\",\n        \"line1\": \"Berry\",\n        \"line2\": \"\",\n        \"postal_code\": \"\",\n        \"state\": \"\"\n      },\n      \"name\": \"\",\n      \"phone\": null\n    },\n    \"customer_tax_exempt\": \"none\",\n    \"customer_tax_ids\": [\n\n    ],\n    \"date\": 1623873347,\n    \"default_payment_method\": null,\n    \"default_source\": null,\n    \"default_tax_rates\": [\n\n    ],\n    \"description\": null,\n    \"discount\": null,\n    \"discounts\": [\n\n    ],\n    \"due_date\": null,\n    \"ending_balance\": 0,\n    \"finalized_at\": 1623873347,\n    \"footer\": null,\n    \"forgiven\": false,\n    \"hosted_invoice_url\": \"https:\u002F\u002Finvoice.stripe.com\u002Fi\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\",\n    \"invoice_pdf\": \"https:\u002F\u002Fpay.stripe.com\u002Finvoice\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\u002Fpdf\",\n    \"last_finalization_error\": null,\n    \"lines\": {\n      \"object\": \"list\",\n      \"data\": [\n        {\n          \"id\": \"sub_JgRjFjhKbtD2qz\",\n          \"object\": \"line_item\",\n          \"amount\": 2000,\n          \"currency\": \"usd\",\n          \"description\": \"1 × Gold Special \u0028at \u002420.00 \u002F month\u0029\",\n          \"discount_amounts\": [\n\n          ],\n          \"discountable\": true,\n          \"discounts\": [\n\n          ],\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"period\": {\n            \"end\": 1626465347,\n            \"start\": 1623873347\n          },\n          \"plan\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"plan\",\n            \"active\": true,\n            \"aggregate_usage\": null,\n            \"amount\": 2000,\n            \"amount_decimal\": \"2000\",\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"livemode\": false,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"tiers\": null,\n            \"tiers_mode\": null,\n            \"transform_usage\": null,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"price\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"price\",\n            \"active\": true,\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"livemode\": false,\n            \"lookup_key\": null,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"recurring\": {\n              \"aggregate_usage\": null,\n              \"interval\": \"month\",\n              \"interval_count\": 1,\n              \"trial_period_days\": null,\n              \"usage_type\": \"licensed\"\n            },\n            \"tiers_mode\": null,\n            \"transform_quantity\": null,\n            \"type\": \"recurring\",\n            \"unit_amount\": 2000,\n            \"unit_amount_decimal\": \"2000\"\n          },\n          \"proration\": false,\n          \"quantity\": 1,\n          \"subscription\": null,\n          \"subscription_item\": \"si_JgRjmS4Ur1khEx\",\n          \"tax_amounts\": [\n\n          ],\n          \"tax_rates\": [\n\n          ],\n          \"type\": \"subscription\",\n          \"unique_id\": \"il_1J34pzGPZ1iASj5zH4yl5GQR\",\n          \"unique_line_item_id\": \"sli_14b5dfGPZ1iASj5z614c4a47\"\n        }\n      ],\n      \"has_more\": false,\n      \"total_count\": 1,\n      \"url\": \"\u002Fv1\u002Finvoices\u002Fin_1J34pzGPZ1iASj5zB87qdBNZ\u002Flines\"\n    },\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"next_payment_attempt\": null,\n    \"number\": \"C008FC2-0354\",\n    \"on_behalf_of\": null,\n    \"paid\": false,\n    \"payment_intent\": {\n      \"id\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6\",\n      \"object\": \"payment_intent\",\n      \"allowed_source_types\": [\n        \"card\"\n      ],\n      \"amount\": 2000,\n      \"amount_capturable\": 0,\n      \"amount_received\": 0,\n      \"application\": null,\n      \"application_fee_amount\": null,\n      \"canceled_at\": null,\n      \"cancellation_reason\": null,\n      \"capture_method\": \"automatic\",\n      \"charges\": {\n        \"object\": \"list\",\n        \"data\": [\n\n        ],\n        \"has_more\": false,\n        \"total_count\": 0,\n        \"url\": \"\u002Fv1\u002Fcharges?payment_intent=pi_1J34pzGPZ1iASj5zI2nOAaE6\"\n      },\n      \"client_secret\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6_secret_l7FN6ldFfXiFmJEumenJ2y2wu\",\n      \"confirmation_method\": \"automatic\",\n      \"created\": 1623873347,\n      \"currency\": \"usd\",\n      \"customer\": \"cus_CMqDWO2xODTZqt\",\n      \"description\": \"Subscription creation\",\n      \"invoice\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n      \"last_payment_error\": null,\n      \"livemode\": false,\n      \"metadata\": {\n      },\n      \"next_action\": null,\n      \"next_source_action\": null,\n      \"on_behalf_of\": null,\n      \"payment_method\": null,\n      \"payment_method_options\": {\n        \"card\": {\n          \"installments\": null,\n          \"network\": null,\n          \"request_three_d_secure\": \"automatic\"\n        }\n      },\n      \"payment_method_types\": [\n        \"card\"\n      ],\n      \"receipt_email\": null,\n      \"review\": null,\n      \"setup_future_usage\": \"off_session\",\n      \"shipping\": null,\n      \"source\": \"card_1By6iQGPZ1iASj5z7ijKBnXJ\",\n      \"statement_descriptor\": null,\n      \"statement_descriptor_suffix\": null,\n      \"status\": \"requires_confirmation\",\n      \"transfer_data\": null,\n      \"transfer_group\": null\n    },\n    \"payment_settings\": {\n      \"payment_method_options\": null,\n      \"payment_method_types\": null,\n      \"save_default_payment_method\": \"on_subscription\"\n    },\n    \"period_end\": 1623873347,\n    \"period_start\": 1623873347,\n    \"post_payment_credit_notes_amount\": 0,\n    \"pre_payment_credit_notes_amount\": 0,\n    \"receipt_number\": null,\n    \"starting_balance\": 0,\n    \"statement_descriptor\": null,\n    \"status\": \"open\",\n    \"status_transitions\": {\n      \"finalized_at\": 1623873347,\n      \"marked_uncollectible_at\": null,\n      \"paid_at\": null,\n      \"voided_at\": null\n    },\n    \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n    \"subtotal\": 2000,\n    \"tax\": null,\n    \"tax_percent\": null,\n    \"total\": 2000,\n    \"total_discount_amounts\": [\n\n    ],\n    \"total_tax_amounts\": [\n\n    ],\n    \"transfer_data\": null,\n    \"webhooks_delivered_at\": 1623873347\n  },\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"next_pending_invoice_item_invoice\": null,\n  \"pause_collection\": null,\n  \"pending_invoice_item_interval\": null,\n  \"pending_setup_intent\": null,\n  \"pending_update\": null,\n  \"plan\": {\n    \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n    \"object\": \"plan\",\n    \"active\": true,\n    \"aggregate_usage\": null,\n    \"amount\": 2000,\n    \"amount_decimal\": \"2000\",\n    \"billing_scheme\": \"per_unit\",\n    \"created\": 1623864151,\n    \"currency\": \"usd\",\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"nickname\": null,\n    \"product\": \"prod_JgPF5xnq7qBun3\",\n    \"tiers\": null,\n    \"tiers_mode\": null,\n    \"transform_usage\": null,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"quantity\": 1,\n  \"schedule\": null,\n  \"start\": 1623873347,\n  \"start_date\": 1623873347,\n  \"status\": \"incomplete\",\n  \"tax_percent\": null,\n  \"transfer_data\": null,\n  \"trial_end\": null,\n  \"trial_start\": null\n}\n"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"collect-payment","beta":false,"badges":["Client"],"collapsable":true,"numbered":true,"optional":false,"title":"Collect payment information","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Felements"},"children":["Stripe Elements"]}," to collect payment details and activate the subscription. You can customize Elements to match the look-and-feel of your application."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment?platform=ios"},"children":["Mobile Payment Element"]}," securely collects all necessary payment details for a wide variety of payments methods. You can visit this ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#product-support"},"children":["page"]}," to learn what payment methods are supported by both Mobile Payment Element and Subscriptions."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"add-the-payment-element-to-your-app"},"children":["Add the Payment Element to your app"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Initialize and present the Mobile Payment Element using the PaymentSheet class."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"SubscribeView.swift","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["struct SubscribeView: View {\n    let paymentSheet: PaymentSheet\n    @State var isPaymentSheetPresented = false\n    init\u0028clientSecret: String\u0029 {\n        var config = PaymentSheet.Configuration\u0028\u0029\n        \u002F\u002F Set \u0060allowsDelayedPaymentMethods\u0060 to true if your business handles\n        \u002F\u002F delayed notification payment methods like US bank accounts.\n        config.allowsDelayedPaymentMethods = true\n        config.primaryButtonLabel = \"Subscribe for \u002415\u002Fmonth\"\n        self.paymentSheet = PaymentSheet\u0028paymentIntentClientSecret: clientSecret, configuration: config\u0029\n    }\n    var body: some View {\n        Button {\n            isPaymentSheetPresented = true\n        } label: {\n            Text\u0028\"Subscribe\"\u0029\n        }.paymentSheet\u0028isPresented: \u0024isPaymentSheetPresented, paymentSheet: paymentSheet\u0029 { result in\n            switch result {\n            case .completed:\n                \u002F\u002F Handle completion\n            case .canceled:\n                break\n            case .failed\u0028let error\u0029:\n                \u002F\u002F Handle error\n            }\n        }\n    }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Mobile Payment Element renders a sheet that allows your customer to select a payment method. The form automatically collects all necessary payments details for the payment method that they select."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Setting ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"allowsDelayedPaymentMethods"},"children":[]}," to true allows ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods#payment-notification"},"children":["delayed notification"]}," payment methods like US bank accounts. For these payment methods, the final payment status isn’t known when the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet"},"children":[]}," completes, and instead succeeds or fails later. If you support these types of payment methods, inform the customer their order is confirmed and only fulfill their order \u0028for example, ship their product\u0029 when the payment is successful."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can customize the Payment Element to match the design of your app by using the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api?platform=ios"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"appearance"},"children":[]}," property"]}," your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet.Configuration"},"children":[]}," object."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"confirm-payment-ios","level":3,"anchored":true},"children":["Confirm payment "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Mobile Payment Element creates a PaymentMethod and confirms the incomplete Subscription’s first PaymentIntent, causing a charge to be made. If ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["Strong Customer Authentication"]}," \u0028SCA\u0029 is required for the payment, the Payment Element handles the authentication process before confirming the PaymentIntent."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"ios-set-up-return-url","beta":false,"badges":["Client-side"],"collapsable":true,"numbered":true,"optional":false,"title":"Set up a return URL","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Fios-return-url.md","variables":{"paymentSheet":true,"noteAboutAdditionalParameters":false}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The customer may go out of your app to authenticate, for example, in Safari or their banking app. To allow them to automatically return to your app after authenticating, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fxcode\u002Fdefining-a-custom-url-scheme-for-your-app"},"children":["configure a custom URL scheme"]}," or ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fxcode\u002Fallowing-apps-and-websites-to-link-to-your-content"},"children":["universal link"]}," and set up your app delegate to forward the URL to the SDK."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"scene-delegate","title":"SceneDelegate","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"SceneDelegate"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang-ios","items":[{"id":"swift","title":"Swift","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"swift","title":"Swift"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"SceneDelegate.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F This method handles opening custom URL schemes \u0028for example, \"your-app:\u002F\u002Fstripe-redirect\"\u0029\nfunc scene\u0028_ scene: UIScene, openURLContexts URLContexts: Set\u003CUIOpenURLContext\u003E\u0029 {\n    guard let url = URLContexts.first?.url else {\n        return\n    }\n    let stripeHandled = StripeAPI.handleURLCallback\u0028with: url\u0029\n    if \u0028\u0021stripeHandled\u0029 {\n        \u002F\u002F This was not a Stripe url – handle the URL normally as you would\n    }\n}\n\n"]}]}}],"codeTabGroupID":"codetab_15641d9fd456e671d8e96977cac2e11903b911bd"},"children":[]}]}},{"id":"app-delegate","title":"AppDelegate","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"AppDelegate"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang-ios","items":[{"id":"swift","title":"Swift","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"swift","title":"Swift"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"AppDelegate.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\u002F\u002F This method handles opening custom URL schemes \u0028for example, \"your-app:\u002F\u002Fstripe-redirect\"\u0029\nfunc application\u0028_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey: Any] = [:]\u0029 -\u003E Bool {\n    let stripeHandled = StripeAPI.handleURLCallback\u0028with: url\u0029\n    if \u0028stripeHandled\u0029 {\n        return true\n    } else {\n        \u002F\u002F This was not a Stripe url – handle the URL normally as you would\n    }\n    return false\n}\n"]}]}}],"codeTabGroupID":"codetab_b88200f6fb8f740ea5ac3e67cbc190c2910c9c1c"},"children":[]}]}},{"id":"swift-ui","title":"SwiftUI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"SwiftUI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang-ios","items":[{"id":"swift","title":"Swift","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"swift","title":"Swift"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"App.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":6,"end":11}],"add":[],"remove":[]}},"children":["\n@main\nstruct MyApp: App {\n  var body: some Scene {\n    WindowGroup {\n      Text\u0028\"Hello, world\u0021\"\u0029",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n        .onOpenURL { incomingURL in\n          let stripeHandled = StripeAPI.handleURLCallback\u0028with: incomingURL\u0029\n          if \u0028\u0021stripeHandled\u0029 {\n            \u002F\u002F This was not a Stripe url – handle the URL normally as you would\n          }\n        }"},"children":["\n        .onOpenURL { incomingURL in\n          let stripeHandled = StripeAPI.handleURLCallback\u0028with: incomingURL\u0029\n          if \u0028\u0021stripeHandled\u0029 {\n            \u002F\u002F This was not a Stripe url – handle the URL normally as you would\n          }\n        }"]},"\n    }\n  }\n}\n"]}]}}],"codeTabGroupID":"codetab_d91d3f8ffa19bb3abba489846a3fdfd791cf89a0"},"children":[]}]}}]},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Additionally, set the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-ios\u002Fstripe-paymentsheet\u002FClasses\u002FPaymentSheet\u002FConfiguration.html#\u002Fs:6Stripe12PaymentSheetC13ConfigurationV9returnURLSSSgvp"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"returnURL"},"children":[]}]}," on your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-ios\u002Fstripe-paymentsheet\u002FClasses\u002FPaymentSheet\u002FConfiguration.html"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet.Configuration"},"children":[]}]}," object to the URL for your app."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["var configuration = PaymentSheet.Configuration\u0028\u0029\nconfiguration.returnURL = \"your-app:\u002F\u002Fstripe-redirect\"\n"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"ios-apple-pay","beta":false,"collapsable":true,"numbered":false,"optional":true,"title":"Enable Apple Pay","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Fpayment-sheet-apple-pay.md","variables":{"recurringOnly":true}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"register-for-an-apple-merchant-id"},"children":["Register for an Apple Merchant ID"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"apple-pay\u002Fpartials\u002Fsdk-step-1.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Obtain an Apple Merchant ID by ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Faccount\u002Fresources\u002Fidentifiers\u002Fadd\u002Fmerchant"},"children":["registering for a new identifier"]}," on the Apple Developer website."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Fill out the form with a description and identifier. Your description is for your own records and you can modify it in the future. Stripe recommends using the name of your app as the identifier \u0028for example, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"merchant.com.{{YOUR_APP_NAME}}"},"children":[]},"\u0029."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"create-a-new-apple-pay-certificate"},"children":["Create a new Apple Pay certificate"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"apple-pay\u002Fpartials\u002Fsdk-step-2.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create a certificate for your app to encrypt payment data."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Fios_certificates"},"children":["iOS Certificate Settings"]}," in the Dashboard, click ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Add new application"]},", and follow the guide."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Download a Certificate Signing Request \u0028CSR\u0029 file to get a secure certificate from Apple that allows you to use Apple Pay."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["One CSR file must be used to issue exactly one certificate. If you switch your Apple Merchant ID, you must go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Fios_certificates"},"children":["iOS Certificate Settings"]}," in the Dashboard to obtain a new CSR and certificate."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"integrate-with-xcode"},"children":["Integrate with Xcode"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"apple-pay\u002Fpartials\u002Fsdk-step-3.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Add the Apple Pay capability to your app. In Xcode, open your project settings, click the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Signing \u0026 Capabilities"]}," tab, and add the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Apple Pay"]}," capability. You might be prompted to log in to your developer account at this point. Select the merchant ID you created earlier, and your app is ready to accept Apple Pay."]},{"\u0024\u0024mdtype":"Tag","name":"Image","attributes":{"src":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Fxcode.a701d4c1922d19985e9c614a6f105bf1.png","ignoreAltTextRequirement":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Enable the Apple Pay capability in Xcode"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"add-apple-pay"},"children":["Add Apple Pay"]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"add-apple-pay-recurring","title":"Recurring payments","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"add-apple-pay-recurring","title":"Recurring payments"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To add Apple Pay to PaymentSheet, set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-ios\u002Fstripe-paymentsheet\u002FClasses\u002FPaymentSheet\u002FConfiguration.html#\u002Fs:6Stripe12PaymentSheetC13ConfigurationV8applePayAC05ApplefD0VSgvp"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"applePay"},"children":[]}]}," after initializing ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet.Configuration"},"children":[]}," with your Apple merchant ID and the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Faccount"},"children":["country code of your business"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In accordance with ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdesign\u002Fhuman-interface-guidelines\u002Ftechnologies\u002Fapple-pay\u002Fsubscriptions-and-donations"},"children":["Apple’s guidelines"]}," for recurring payments, you must also set additional attributes on the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PKPaymentRequest"},"children":[]},". Add a handler in ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-ios\u002Fstripe-paymentsheet\u002FClasses\u002FPaymentSheet\u002FApplePayConfiguration\u002FHandlers.html#\u002Fs:18StripePaymentSheet0bC0C21ApplePayConfigurationV8HandlersV21paymentRequestHandlerSo09PKPaymentI0CAJcSgvp"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"ApplePayConfiguration.paymentRequestHandlers"},"children":[]}]}," to configure the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fpasskit\u002Fpkpaymentrequest\u002F1619231-paymentsummaryitems"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PKPaymentRequest.paymentSummaryItems"},"children":[]}]}," with the amount you intend to charge \u0028for example, “\u00249.95 a month”\u0029."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can also adopt ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fapple-pay\u002Fmerchant-tokens\u002F"},"children":["merchant tokens"]}," by setting the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurringPaymentRequest"},"children":[]}," or ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"automaticReloadPaymentRequest"},"children":[]}," properties on the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PKPaymentRequest"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To learn more about how to use recurring payments with Apple Pay, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fpasskit\u002Fpkpaymentrequest"},"children":["Apple’s PassKit documentation"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"swift","title":"iOS \u0028Swift\u0029"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["let customHandlers = PaymentSheet.ApplePayConfiguration.Handlers\u0028\n    paymentRequestHandler: { request in\n        \u002F\u002F PKRecurringPaymentSummaryItem is available on iOS 15 or later\n        if #available\u0028iOS 15.0, *\u0029 {\n            let billing = PKRecurringPaymentSummaryItem\u0028label: \"My Subscription\", amount: NSDecimalNumber\u0028string: \"59.99\"\u0029\u0029\n\n            \u002F\u002F Payment starts today\n            billing.startDate = Date\u0028\u0029\n\n            \u002F\u002F Payment ends in one year\n            billing.endDate = Date\u0028\u0029.addingTimeInterval\u002860 * 60 * 24 * 365\u0029\n\n            \u002F\u002F Pay once a month.\n            billing.intervalUnit = .month\n            billing.intervalCount = 1\n\n            \u002F\u002F recurringPaymentRequest is only available on iOS 16 or later\n            if #available\u0028iOS 16.0, *\u0029 {\n                request.recurringPaymentRequest = PKRecurringPaymentRequest\u0028paymentDescription: \"Recurring\",\n                                                                            regularBilling: billing,\n                                                                            managementURL: URL\u0028string: \"https:\u002F\u002Fmy-backend.example.com\u002Fcustomer-portal\"\u0029\u0021\u0029\n                request.recurringPaymentRequest?.billingAgreement = \"You'll be billed \u002459.99 every month for the next 12 months. To cancel at any time, go to Account and click 'Cancel Membership.'\"\n            }\n            request.paymentSummaryItems = [billing]\n        } else {\n            \u002F\u002F On older iOS versions, set alternative summary items.\n            request.paymentSummaryItems = [PKPaymentSummaryItem\u0028label: \"Monthly plan starting July 1, 2022\", amount: NSDecimalNumber\u0028string: \"59.99\"\u0029, type: .final\u0029]\n        }\n        return request\n    }\n\u0029\nvar configuration = PaymentSheet.Configuration\u0028\u0029\nconfiguration.applePay = .init\u0028merchantId: \"merchant.com.your_app_name\",\n                                merchantCountryCode: \"US\",\n                                customHandlers: customHandlers\u0029\n"]}]}]}}]},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"order-tracking"},"children":["Order tracking"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To add ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdesign\u002Fhuman-interface-guidelines\u002Ftechnologies\u002Fwallet\u002Fdesigning-order-tracking"},"children":["order tracking"]}," information in iOS 16 or later, configure an ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-ios\u002Fstripe-paymentsheet\u002FClasses\u002FPaymentSheet\u002FApplePayConfiguration\u002FHandlers.html#\u002Fs:18StripePaymentSheet0bC0C21ApplePayConfigurationV8HandlersV26authorizationResultHandlerySo022PKPaymentAuthorizationI0C_yAJXEtcSgvp"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"authorizationResultHandler"},"children":[]}]}," in your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet.ApplePayConfiguration.Handlers"},"children":[]},". Stripe calls your implementation after the payment is complete, but before iOS dismisses the Apple Pay sheet."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"authorizationResultHandler"},"children":[]}," implementation, fetch the order details from your server for the completed order. Add the details to the provided ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fpasskit\u002Fpkpaymentauthorizationresult"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PKPaymentAuthorizationResult"},"children":[]}]}," and call the provided completion handler."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To learn more about order tracking, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fwalletorders"},"children":["Apple’s Wallet Orders documentation"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"swift","title":"iOS \u0028Swift\u0029"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["let customHandlers = PaymentSheet.ApplePayConfiguration.Handlers\u0028\n    authorizationResultHandler: { result, completion in\n        \u002F\u002F Fetch the order details from your service\n        MyAPIClient.shared.fetchOrderDetails\u0028orderID: orderID\u0029 { myOrderDetails\n            result.orderDetails = PKPaymentOrderDetails\u0028\n                orderTypeIdentifier: myOrderDetails.orderTypeIdentifier, \u002F\u002F \"com.myapp.order\"\n                orderIdentifier: myOrderDetails.orderIdentifier, \u002F\u002F \"ABC123-AAAA-1111\"\n                webServiceURL: myOrderDetails.webServiceURL, \u002F\u002F \"https:\u002F\u002Fmy-backend.example.com\u002Fapple-order-tracking-backend\"\n                authenticationToken: myOrderDetails.authenticationToken\u0029 \u002F\u002F \"abc123\"\n            \u002F\u002F Call the completion block on the main queue with your modified PKPaymentAuthorizationResult\n            completion\u0028result\u0029\n        }\n    }\n\u0029\nvar configuration = PaymentSheet.Configuration\u0028\u0029\nconfiguration.applePay = .init\u0028merchantId: \"merchant.com.your_app_name\",\n                               merchantCountryCode: \"US\",\n                               customHandlers: customHandlers\u0029\n"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"webhooks","beta":false,"badges":["Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Listen for webhooks","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To complete the integration, you need to process ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"webhook"},"children":["webhooks"]}," sent by Stripe. These are events triggered whenever state inside of Stripe changes, such as subscriptions creating new invoices. In your application, set up an HTTP handler to accept a POST request containing the webhook event, and verify the signature of the event:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fwebhooks.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fwebhook' do\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = ENV['STRIPE_WEBHOOK_SECRET']\n  payload = request.body.read\n  if \u0021webhook_secret.empty?\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    sig_header = request.env['HTTP_STRIPE_SIGNATURE']\n    event = nil\n\n    begin\n      event = Stripe::Webhook.construct_event\u0028\n        payload, sig_header, webhook_secret\n      \u0029\n    rescue JSON::ParserError =\u003E e\n      # Invalid payload\n      status 400\n      return\n    rescue Stripe::SignatureVerificationError =\u003E e\n      # Invalid signature\n      puts '⚠️  Webhook signature verification failed.'\n      status 400\n      return\n    end\n  else\n    data = JSON.parse\u0028payload, symbolize_names: true\u0029\n    event = Stripe::Event.construct_from\u0028data\u0029\n  end\n  # Get the type of webhook event sent - used to check the status of PaymentIntents.\n  event_type = event['type']\n  data = event['data']\n  data_object = data['object']\n\n  if event_type == 'invoice.paid'\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    # puts data_object\n  end\n\n  if event_type == 'invoice.payment_failed'\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    # puts data_object\n  end\n\n  if event_type == 'customer.subscription.deleted'\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    # puts data_object\n  end\n\n  content_type 'application\u002Fjson'\n  { status: 'success' }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fwebhook', methods=['POST']\u0029\ndef webhook_received\u0028\u0029:\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = os.getenv\u0028'STRIPE_WEBHOOK_SECRET'\u0029\n  request_data = json.loads\u0028request.data\u0029\n\n  if webhook_secret:\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    signature = request.headers.get\u0028'stripe-signature'\u0029\n    try:\n      event = stripe.Webhook.construct_event\u0028\n        payload=request.data, sig_header=signature, secret=webhook_secret\u0029\n      data = event['data']\n    except Exception as e:\n      return e\n    # Get the type of webhook event sent - used to check the status of PaymentIntents.\n    event_type = event['type']\n  else:\n    data = request_data['data']\n    event_type = request_data['type']\n\n  data_object = data['object']\n\n  if event_type == 'invoice.paid':\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    print\u0028data\u0029\n\n  if event_type == 'invoice.payment_failed':\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    print\u0028data\u0029\n\n  if event_type == 'customer.subscription.deleted':\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    print\u0028data\u0029\n\n  return jsonify\u0028{'status': 'success'}\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"webhook.php","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u0024event = null;\n\u0024payload = @file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n\u0024sig_header = \u0024_SERVER['HTTP_STRIPE_SIGNATURE'];\n\u0024webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},";\ntry {\n  \u0024event = \\Stripe\\Webhook::constructEvent\u0028\n    \u0024payload, \u0024sig_header, \u0024webhook_secret\n  \u0029;\n} catch\u0028\\UnexpectedValueException \u0024e\u0029 {\n  \u002F\u002F Invalid payload\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n} catch\u0028\\Stripe\\Exception\\SignatureVerificationException \u0024e\u0029 {\n  \u002F\u002F Invalid signature\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n}\n\n\u002F\u002F Handle the event\n\u002F\u002F Review important events for Billing webhooks\n\u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n\u002F\u002F Remove comment to see the various objects sent for this sample\nswitch \u0028\u0024event-\u003Etype\u0029 {\n  case 'invoice.paid':\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    break;\n  case 'invoice.payment_failed':\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    break;\n  case 'customer.subscription.deleted':\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user\n    \u002F\u002F cancels it.\n    break;\n  \u002F\u002F ... handle other event types\n  default:\n    \u002F\u002F Unhandled event type\n}\n\nhttp_response_code\u0028200\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fwebhook\",\n  \u0028request, response\u0029 -\u003E {\n    String payload = request.body\u0028\u0029;\n    String sigHeader = request.headers\u0028\"Stripe-Signature\"\u0029;\n    String endpointSecret = dotenv.get\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029;\n    Event event = null;\n\n    try {\n      event = Webhook.constructEvent\u0028payload, sigHeader, endpointSecret\u0029;\n    } catch \u0028SignatureVerificationException e\u0029 {\n      \u002F\u002F Invalid signature\n      response.status\u0028400\u0029;\n      return \"\";\n    }\n\n    \u002F\u002F Deserialize the nested object inside the event\n    EventDataObjectDeserializer dataObjectDeserializer = event.getDataObjectDeserializer\u0028\u0029;\n    StripeObject stripeObject = null;\n    if \u0028dataObjectDeserializer.getObject\u0028\u0029.isPresent\u0028\u0029\u0029 {\n      stripeObject = dataObjectDeserializer.getObject\u0028\u0029.get\u0028\u0029;\n    } else {\n      \u002F\u002F Deserialization failed, probably due to an API version mismatch.\n      \u002F\u002F Refer to the Javadoc documentation on \u0060EventDataObjectDeserializer\u0060 for\n      \u002F\u002F instructions on how to handle this case, or return an error here.\n    }\n\n    switch \u0028event.getType\u0028\u0029\u0029 {\n      case \"invoice.paid\":\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n        \u002F\u002F limits.\n        break;\n      case \"invoice.payment_failed\":\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case \"customer.subscription.deleted\":\n        \u002F\u002F handle subscription canceled automatically based\n        \u002F\u002F upon your subscription settings. Or if the user\n        \u002F\u002F cancels it.\n        break;\n      default:\n      \u002F\u002F Unhandled event type\n    }\n\n    response.status\u0028200\u0029;\n    return \"\";\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028\n  '\u002Fwebhook',\n  bodyParser.raw\u0028{ type: 'application\u002Fjson' }\u0029,\n  async \u0028req, res\u0029 =\u003E {\n    \u002F\u002F Retrieve the event by verifying the signature using the raw body and secret.\n    let event;\n\n    try {\n      event = stripe.webhooks.constructEvent\u0028\n        req.body,\n        req.headers['stripe-signature'],\n        process.env.STRIPE_WEBHOOK_SECRET\n      \u0029;\n    } catch \u0028err\u0029 {\n      console.log\u0028err\u0029;\n      console.log\u0028\u0060⚠️  Webhook signature verification failed.\u0060\u0029;\n      console.log\u0028\n        \u0060⚠️  Check the env file and enter the correct webhook secret.\u0060\n      \u0029;\n      return res.sendStatus\u0028400\u0029;\n    }\n    \u002F\u002F Extract the object from the event.\n    const dataObject = event.data.object;\n\n    \u002F\u002F Handle the event\n    \u002F\u002F Review important events for Billing webhooks\n    \u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n    \u002F\u002F Remove comment to see the various objects sent for this sample\n    switch \u0028event.type\u0029 {\n      case 'invoice.paid':\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate limits.\n        break;\n      case 'invoice.payment_failed':\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F  an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case 'customer.subscription.deleted':\n        if \u0028event.request \u0021= null\u0029 {\n          \u002F\u002F handle a subscription canceled by your request\n          \u002F\u002F from above.\n        } else {\n          \u002F\u002F handle subscription canceled automatically based\n          \u002F\u002F upon your subscription settings.\n        }\n        break;\n      default:\n      \u002F\u002F Unexpected event type\n    }\n    res.sendStatus\u0028200\u0029;\n  }\n\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleWebhook\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  b, err := ioutil.ReadAll\u0028r.Body\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"ioutil.ReadAll: %v\", err\u0029\n    return\n  }\n\n  event, err := webhook.ConstructEvent\u0028b, r.Header.Get\u0028\"Stripe-Signature\"\u0029, os.Getenv\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"webhook.ConstructEvent: %v\", err\u0029\n    return\n  }\n\n  if event.Type == \"invoice.paid\" {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    return\n  }\n\n  if event.Type == \"invoice.payment_failed\" {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    return\n  }\n\n  if event.Type == \"customer.subscription.deleted\" {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it. {\n    return\n  }\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"webhook\"\u0029]\npublic async Task\u003CIActionResult\u003E Webhook\u0028\u0029\n{\n  var json = await new StreamReader\u0028HttpContext.Request.Body\u0029.ReadToEndAsync\u0028\u0029;\n  Event stripeEvent;\n  try\n  {\n    stripeEvent = EventUtility.ConstructEvent\u0028\n      json,\n      Request.Headers[\"Stripe-Signature\"],\n      this.options.Value.WebhookSecret\n    \u0029;\n    Console.WriteLine\u0028\u0024\"Webhook notification with type: {stripeEvent.Type} found for {stripeEvent.Id}\"\u0029;\n  }\n  catch \u0028Exception e\u0029\n  {\n    Console.WriteLine\u0028\u0024\"Something failed {e}\"\u0029;\n    return BadRequest\u0028\u0029;\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.paid\"\u0029\n  {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.payment_failed\"\u0029\n  {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n  }\n\n  if \u0028stripeEvent.Type == \"customer.subscription.deleted\"\u0029\n  {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it.\n  }\n  return Ok\u0028\u0029;\n}\n"]}]}}],"codeTabGroupID":"codetab_d0d51fe4f505be929e294a6308ddd11b44d311bb"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["During development, use the Stripe CLI to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["observe webhooks and forward them to your application"]},". Run the following in a new terminal while your development app is running:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"bash","title":"curl"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["  stripe listen --forward-to localhost:4242\u002Fwebhook\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For production, set up a webhook endpoint URL in the Dashboard, or use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fwebhook_endpoints"},"children":["Webhook Endpoints API"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You’ll listen to a couple of events to complete the remaining steps in this guide. See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-events"},"children":["Subscription events"]}," for more details about subscription-specific webhooks."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"provision-access","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Provision access to your service","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Now that the subscription is active, give your user access to your service.  To do this, listen to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.created"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]},", and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," events.  These events pass a subscription object which contains a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"status"},"children":[]}," field indicating whether the subscription is active, past due, or canceled.  See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-lifecycle"},"children":["the subscription lifecycle"]}," for a complete list of statuses."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your webhook handler:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Verify the subscription status.  If it’s ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"active"},"children":[]}," then your user has paid for your product."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Check the product the customer subscribed to and grant access to your service. Checking the product instead of the price gives you more flexibility if you need to change the pricing or billing interval."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Store the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"product.id"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.status"},"children":[]}," in your database along with the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.id"},"children":[]}," you already saved.  Check this record when determining which features to enable for the user in your application."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The state of a subscription might change at any point during its lifetime, even if your application does not directly make any calls to Stripe.  For example, a renewal might fail due to an expired credit card, which puts the subscription into a past due state.  Or, if you implement the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]},", a user might cancel their subscription without directly visiting your application.  Implementing your handler correctly keeps your application state in sync with Stripe."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"cancel-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Cancel the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["It’s common to allow customers to cancel their subscriptions. This example adds a cancellation option to the account settings page."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The example collects the subscription ID on the frontend, but your application can get this information from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"Image","attributes":{"src":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-subscriptions-guide-account-settings.6559626ba4b434826a67abfea165e097.png","alt":"Sample subscription cancelation interface.","width":60},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Account settings with the ability to cancel the subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"SubscriptionView.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["func cancelSubscription\u0028\u0029 {\n    var request = URLRequest\u0028url: URL\u0028string: \"http:\u002F\u002Flocalhost:4242\u002Fcancel-subscription\"\u0029\u0021\u0029\n    request.httpMethod = \"POST\"\n    request.setValue\u0028\"application\u002Fjson\", forHTTPHeaderField: \"Content-Type\"\u0029\n    request.httpBody = try\u0021 JSONEncoder\u0028\u0029.encode\u0028[\"subscriptionId\": subscription.id]\u0029\n    let \u0028subscriptionResponse, _\u0029 = try\u0021 await URLSession.shared.data\u0028for: request\u0029\n    \u002F\u002F Update the state to show the subscription has been cancelled\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your app to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcancel-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcancel-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  deleted_subscription = Stripe::Subscription.cancel\u0028data['subscriptionId']\u0029\n\n  deleted_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcancel-subscription', methods=['POST']\u0029\ndef cancelSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n         # Cancel the subscription by deleting it\n        deletedSubscription = stripe.Subscription.delete\u0028data['subscriptionId']\u0029\n        return jsonify\u0028deletedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\n    \u0024json-\u003EsubscriptionId\n  \u0029;\n  \u0024subscription-\u003Edelete\u0028\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'subscription' =\u003E \u0024subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n      \"\u002Fcancel-subscription\",\n      \u0028request, response\u0029 -\u003E {\n        response.type\u0028\"application\u002Fjson\"\u0029;\n        \u002F\u002F Set the default payment method on the customer\n        CancelPostBody postBody = gson.fromJson\u0028\n          request.body\u0028\u0029,\n          CancelPostBody.class\n        \u0029;\n\n        Subscription subscription = Subscription.retrieve\u0028\n          postBody.getSubscriptionId\u0028\u0029\n        \u0029;\n\n        Subscription deletedSubscription = subscription.cancel\u0028\u0029;\n        return deletedSubscription.toJson\u0028\u0029;\n      }\n    \u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcancel-subscription', async \u0028req, res\u0029 =\u003E {\n  \u002F\u002F Delete the subscription\n  const deletedSubscription = await stripe.subscriptions.del\u0028\n    req.body.subscriptionId\n  \u0029;\n  res.send\u0028deletedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCancelSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n  s, err := subscription.Cancel\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Cancel: %v\", err\u0029\n    return\n  }\n  writeJSON\u0028w, s\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"CancelSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class CancelSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"cancel-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E CancelSubscription\u0028[FromBody] CancelSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Cancel\u0028req.Subscription, null\u0029;\n    return subscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_23c7478f8e9b8a0cd6a2af01f0a0c4f9e497345a"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your backend receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," event."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After the subscription is canceled, update your database to remove the Stripe subscription ID you previously stored, and limit access to your service."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When a subscription is canceled, it can’t be reactivated. Instead, collect updated billing information from your customer, update their default payment method, and create a new subscription with their existing customer record."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"test","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Test your integration","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Ftesting-scenarios.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"test-payment-methods"},"children":["Test payment methods"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the following table to test different payment methods and scenarios."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Payment method"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Scenario"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["How to test"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"900123456"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},". The confirmed PaymentIntent initially transitions to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},", then transitions to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment fails with an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"account_closed"},"children":[]}," error code."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"111111113"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment succeeds and does not require authentication."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4242 4242 4242 4242"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment requires ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["authentication"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0025 0000 3155"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card is declined with a decline code like ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"insufficient_funds"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0000 0000 9995"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with SEPA Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT321904300235473204"},"children":[]},". The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment intent status transition from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT861904300235473202"},"children":[]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"monitor-events"},"children":["Monitor events"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["subscription webhooks"]},". You can view events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fevents"},"children":["Dashboard"]},"\u0029 or with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For more details, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Ftesting"},"children":["testing your Billing integration"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"change-price","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Let customers change their plans","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To let your customers change their subscription, collect the price ID of the option they want to change to. Then send the new price ID from the app to a backend endpoint. This example also passes the subscription ID, but you can retrieve it from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"UpdateSubscription.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["func updateSubscription\u0028priceId: String, subscriptionId: String\u0029 async -\u003E SubscriptionsResponse {\n    var request = URLRequest\u0028url: URL\u0028string: \"http:\u002F\u002Flocalhost:4242\u002Fupdate-subscription\"\u0029\u0021\u0029\n    request.httpMethod = \"POST\"\n    request.setValue\u0028\"application\u002Fjson\", forHTTPHeaderField: \"Content-Type\"\u0029\n    request.httpBody = try\u0021 JSONEncoder\u0028\u0029.encode\u0028[\"subscriptionId\": subscriptionId, \"priceId\": priceId]\u0029\n    let \u0028responseData, _\u0029 = try\u0021 await URLSession.shared.data\u0028for: request\u0029\n    \u002F\u002F SubscriptionsResponse is a Decodable struct conforming to the expected response from your backend\n    let subscriptionsResponse = try\u0021 JSONDecoder\u0028\u0029.decode\u0028SubscriptionsResponse.self, from: responseData\u0029\n    return subscriptionsResponse\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call, passing the subscription ID and the new price ID. The subscription is now Premium, at 15 USD per month, instead of Basic at 5 USD per month."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fupdate-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fupdate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  updated_subscription =\n    Stripe::Subscription.update\u0028\n      data['subscriptionId'],\n      cancel_at_period_end: false,\n      items: [\n        { id: subscription.items.data[0].id, price: 'price_H1NlVtpo6ubk0m' }\n      ]\n    \u0029\n\n  updated_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fupdate-subscription', methods=['POST']\u0029\ndef updateSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        updatedSubscription = stripe.Subscription.modify\u0028\n            data['subscriptionId'],\n            cancel_at_period_end=False,\n            items=[{\n                'id': subscription['items']['data'][0].id,\n                'price': 'price_H1NlVtpo6ubk0m',\n            }]\n        \u0029\n        return jsonify\u0028updatedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024updated_subscription = \u0024stripe-\u003Esubscriptions-\u003Eupdate\u0028\u0024json-\u003EsubscriptionId, [\n    'items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'price' =\u003E 'price_H1NlVtpo6ubk0m',\n      ],\n    ],\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'updatedSubscription' =\u003E \u0024updated_subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fupdate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    UpdatePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpdatePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    SubscriptionUpdateParams params = SubscriptionUpdateParams\n      .builder\u0028\u0029\n      .addItem\u0028\n        SubscriptionUpdateParams\n          .Item.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setPrice\u0028\"price_H1NlVtpo6ubk0m\"\u0029\n          .build\u0028\u0029\n      \u0029\n      .setCancelAtPeriodEnd\u0028false\u0029\n      .build\u0028\u0029;\n\n    subscription.update\u0028params\u0029;\n    return subscription.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fupdate-subscription', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n  const updatedSubscription = await stripe.subscriptions.update\u0028\n    req.body.subscriptionId,\n    {\n      cancel_at_period_end: false,\n      items: [\n        {\n          id: subscription.items.data[0].id,\n          price: \"price_H1NlVtpo6ubk0m\",\n        },\n      ],\n    }\n  \u0029;\n\n  res.send\u0028updatedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleUpdateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n\n  params := \u0026stripe.SubscriptionParams{\n    CancelAtPeriodEnd: stripe.Bool\u0028false\u0029,\n    Items: []*stripe.SubscriptionItemsParams{{\n      ID:    stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Price: stripe.String\u0028\"price_H1NlVtpo6ubk0m\"\u0029,\n    }},\n  }\n\n  updatedSubscription, err := subscription.Update\u0028req.SubscriptionID, params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Update: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, updatedSubscription\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"UpdateSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class UpdateSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"update-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E UpdateSubscription\u0028[FromBody] UpdateSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var options = new SubscriptionUpdateOptions\n    {\n        CancelAtPeriodEnd = false,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Price = \"price_H1NlVtpo6ubk0m\",\n            }\n        }\n    };\n    var updatedSubscription = service.Update\u0028req.Subscription, options\u0029;\n    return updatedSubscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_7ab4e8df4b9fa3ff59eefcc835c1d41fe07265f6"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your application receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]}," event."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"preview-invoice","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Preview a price change","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When your customer changes their subscription, there’s often an adjustment to the amount they owe, known as a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["proration"]},". You can use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fupcoming"},"children":["upcoming invoice endpoint"]}," to display the adjusted amount to your customers."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["From the app, pass the upcoming invoice details to a back-end endpoint."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"RetrieveUpcomingInvoice.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["func retrieveUpcomingInvoice\u0028customerId: String, subscriptionId: String, newPriceId: String\u0029 async -\u003E InvoiceResponse {\n    var request = URLRequest\u0028url: URL\u0028string: \"http:\u002F\u002Flocalhost:4242\u002Fretrieve-upcoming-invoice\"\u0029\u0021\u0029\n    request.httpMethod = \"POST\"\n    request.setValue\u0028\"application\u002Fjson\", forHTTPHeaderField: \"Content-Type\"\u0029\n    request.httpBody = try\u0021 JSONEncoder\u0028\u0029.encode\u0028[\"subscriptionId\": subscriptionId, \"customerId\": customerId, \"newPriceId\": newPriceId]\u0029\n    let \u0028responseData, _\u0029 = try\u0021 await URLSession.shared.data\u0028for: request\u0029\n    \u002F\u002F Invoice is a Decodable struct conforming to the expected response from your backend\n    let invoiceResponse = try\u0021 JSONDecoder\u0028\u0029.decode\u0028InvoiceResponse.self, from: responseData\u0029\n    return invoiceResponse.invoice\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-upcoming-invoice.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-upcoming-invoice' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  invoice =\n    Stripe::Invoice.upcoming\u0028\n      customer: data['customerId'],\n      subscription: data['subscriptionId'],\n      subscription_items: [\n        { id: subscription.items.data[0].id, deleted: true },\n        { price: ENV[data['newPriceId']], deleted: false }\n      ]\n    \u0029\n\n  invoice.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-upcoming-invoice', methods=['POST']\u0029\ndef retrieveUpcomingInvoice\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        # Retrieve the subscription\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        # Retrieve the invoice\n        invoice = stripe.Invoice.upcoming\u0028\n            customer=data['customerId'],\n            subscription=data['subscriptionId'],\n            subscription_items=[\n                {\n                    'id': subscription['items']['data'][0].id,\n                    'deleted': True,\n                },\n                {\n                    'price': 'price_H1NlVtpo6ubk0m',\n                    'deleted': False,\n                }\n            ],\n        \u0029\n        return jsonify\u0028invoice\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024invoice = \u0024stripe-\u003Einvoices-\u003Eupcoming\u0028[\n    'customer' =\u003E \u0024json-\u003EcustomerId,\n    'subscription_prorate' =\u003E true,\n    'subscription' =\u003E \u0024json-\u003EsubscriptionId,\n    'subscription_items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'deleted' =\u003E true\n      ],\n      [\n        'price' =\u003E \u0024json-\u003EnewPriceId,\n        'deleted' =\u003E false\n      ],\n    ]\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'invoice' =\u003E \u0024invoice,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-upcoming-invoice\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    UpcomingInvoicePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpcomingInvoicePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    InvoiceUpcomingParams invoiceParams = InvoiceUpcomingParams\n      .builder\u0028\u0029\n      .setCustomer\u0028postBody.getCustomerId\u0028\u0029\u0029\n      .setSubscription\u0028postBody.getSubscriptionId\u0028\u0029\u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setDeleted\u0028true\u0029\n          .build\u0028\u0029\n      \u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setPrice\u0028dotenv.get\u0028postBody.getNewPriceId\u0028\u0029.toUpperCase\u0028\u0029\u0029\u0029\n          .build\u0028\u0029\n      \u0029\n      .build\u0028\u0029;\n\n    Invoice invoice = Invoice.upcoming\u0028invoiceParams\u0029;\n\n    return invoice.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-upcoming-invoice', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n\n  const invoice = await stripe.invoices.retrieveUpcoming\u0028{\n    subscription_prorate: true,\n    customer: req.body.customerId,\n    subscription: req.body.subscriptionId,\n    subscription_items: [\n      {\n        id: subscription.items.data[0].id,\n        deleted: true,\n      },\n      {\n        \u002F\u002F This price ID is the price you want to change the subscription to.\n        price: 'price_H1NlVtpo6ubk0m',\n        deleted: false,\n      },\n    ],\n  }\u0029;\n  res.send\u0028invoice\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveUpcomingInvoice\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    CustomerID     string \u0060json:\"customerId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n  params := \u0026stripe.InvoiceParams{\n    Customer:     stripe.String\u0028req.CustomerID\u0029,\n    Subscription: stripe.String\u0028req.SubscriptionID\u0029,\n    SubscriptionItems: []*stripe.SubscriptionItemsParams{{\n      ID:      stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Deleted: stripe.Bool\u0028true\u0029,\n    }, {\n      Price:   stripe.String\u0028os.Getenv\u0028req.NewPriceID\u0029\u0029,\n      Deleted: stripe.Bool\u0028false\u0029,\n    }},\n  }\n  in, err := invoice.GetNext\u0028params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"invoice.GetNext: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, in\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveUpcomingInvoiceRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveUpcomingInvoiceRequest\n{\n    [JsonProperty\u0028\"customerId\"\u0029]\n    public string Customer { get; set; }\n\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-upcoming-invoice\"\u0029]\npublic ActionResult\u003CInvoice\u003E RetrieveUpcomingInvoice\u0028[FromBody] RetrieveUpcomingInvoiceRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var invoiceService = new InvoiceService\u0028\u0029;\n    var options = new UpcomingInvoiceOptions\n    {\n        Customer = req.Customer,\n        Subscription = req.Subscription,\n        SubscriptionItems = new List\u003CInvoiceSubscriptionItemOptions\u003E\n        {\n            new InvoiceSubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Deleted = true,\n            },\n            new InvoiceSubscriptionItemOptions\n            {\n                \u002F\u002F TODO: This should be Price, but isn't in Stripe.net yet.\n                Plan = Environment.GetEnvironmentVariable\u0028req.NewPrice\u0029,\n                Deleted = false,\n            },\n        }\n    };\n    Invoice upcoming = invoiceService.Upcoming\u0028options\u0029;\n    return upcoming;\n}\n"]}]}}],"codeTabGroupID":"codetab_7f975c16372b724ce83f59a6b53ed89c36ec9861"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"display-payment-method","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Display the customer payment method","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Displaying the brand and last four digits of your customer’s card can help them know which card is being charged, or if they need to update their payment method."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the front end, send the payment method ID to a back-end endpoint that retrieves the payment method details."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"swift","filename":"RetrieveCustomerPaymentMethod.swift","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["func retrieveCustomerPaymentMethod\u0028paymentMethodId: String\u0029 async -\u003E PaymentMethodResponse {\n    var request = URLRequest\u0028url: URL\u0028string: \"http:\u002F\u002Flocalhost:4242\u002Fretrieve-customer-payment-method\"\u0029\u0021\u0029\n    request.httpMethod = \"POST\"\n    request.setValue\u0028\"application\u002Fjson\", forHTTPHeaderField: \"Content-Type\"\u0029\n    request.httpBody = try\u0021 JSONEncoder\u0028\u0029.encode\u0028[\"paymentMethodId\": paymentMethodId]\u0029\n    let \u0028responseData, _\u0029 = try\u0021 await URLSession.shared.data\u0028for: request\u0029\n    \u002F\u002F PaymentMethodResponse is a Decodable struct conforming to the expected response from your backend\n    let paymentMethodResponse = try\u0021 JSONDecoder\u0028\u0029.decode\u0028PaymentMethodResponse.self, from: responseData\u0029\n    return paymentMethodResponse.invoice\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the back end, define the endpoint for your app to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-customer-payment-method.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-customer-payment-method' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  payment_method = Stripe::PaymentMethod.retrieve\u0028data['paymentMethodId']\u0029\n\n  payment_method.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-customer-payment-method', methods=['POST']\u0029\ndef retrieveCustomerPaymentMethod\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        paymentMethod = stripe.PaymentMethod.retrieve\u0028\n            data['paymentMethodId'],\n        \u0029\n        return jsonify\u0028paymentMethod\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024payment_method = \u0024stripe-\u003EpaymentMethods-\u003Eretrieve\u0028\u0024json-\u003EpaymentMethodId\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'paymentMethod' =\u003E \u0024payment_method,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-customer-payment-method\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    PaymentMethodBody paymentMethodBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      PaymentMethodBody.class\n    \u0029;\n\n    PaymentMethod paymentMethod = PaymentMethod.retrieve\u0028\n      paymentMethodBody.getPaymentMethodId\u0028\u0029\n    \u0029;\n    return paymentMethod.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-customer-payment-method', async \u0028req, res\u0029 =\u003E {\n  const paymentMethod = await stripe.paymentMethods.retrieve\u0028\n    req.body.paymentMethodId\n  \u0029;\n\n  res.send\u0028paymentMethod\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveCustomerPaymentMethod\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    PaymentMethodID string \u0060json:\"paymentMethodId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  pm, err := paymentmethod.Get\u0028req.PaymentMethodID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"paymentmethod.Get: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, pm\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveCustomerPaymentMethodRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveCustomerPaymentMethodRequest\n{\n    [JsonProperty\u0028\"paymentMethodId\"\u0029]\n    public string PaymentMethod { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-customer-payment-method\"\u0029]\npublic ActionResult\u003CPaymentMethod\u003E RetrieveCustomerPaymentMethod\u0028[FromBody] RetrieveCustomerPaymentMethodRequest req\u0029\n{\n    var service = new PaymentMethodService\u0028\u0029;\n    var paymentMethod = service.Get\u0028req.PaymentMethod\u0029;\n    return paymentMethod;\n}\n"]}]}}],"codeTabGroupID":"codetab_9ced3cdc5383753ed362275de5f5b21df92e9a57"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Example response:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"pm_1GcbHY2eZvKYlo2CoqlVxo42\",\n  \"object\": \"payment_method\",\n  \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\": null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\": null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n    \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\": null,\n      \"cvc_check\": \"pass\"\n    },\n    \"country\": \"US\",\n    \"exp_month\": 8,\n    \"exp_year\": 2021,\n    \"fingerprint\": \"Xt5EWLLDS7FJjR1c\",\n    \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\": \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n    \"wallet\": null\n  },\n  \"created\": 1588010536,\n  \"customer\": \"cus_HAxB7dVQxhoKLh\",\n  \"livemode\": false,\n  \"metadata\": {},\n  \"type\": \"card\"\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["We recommend that you save the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"last4"},"children":[]}," in your database, for example, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," as ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripeCustomerPaymentMethodId"},"children":[]}," in your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"users"},"children":[]}," collection or table. You can optionally store ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_month"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_year"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fingerprint"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"billing_details"},"children":[]}," as needed. This is to limit the number of calls you make to Stripe—for both performance efficiency and to avoid possible rate limiting."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Felements\u002Fdisclosure-cookies.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"disclose-cookies","beta":false,"collapsable":false,"numbered":false,"optional":false,"title":"Disclose Stripe to your customers","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe collects information on customer interactions with Elements to provide services to you, prevent fraud, and improve its services. This includes using cookies and IP addresses to identify which Elements a customer saw during a single checkout session. You’re responsible for disclosing and obtaining all rights and consents necessary for Stripe to use data in these ways. For more information, visit our ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.com\u002Flegal\u002Fprivacy-center#as-a-business-user-what-notice-do-i-provide-to-my-end-customers-about-stripe"},"children":["privacy center"]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Page","attributes":{"id":"subscription-elements-android","prefs":{"platform":"android"},"title":"Android"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscription-mobile.md","variables":{"platform":"android"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCallout","attributes":{"image":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-collect-payment-details-mobile.b11cdc8fa8952d753238df4df3375fa6.png","imageAlt":"Fixed-price subscription page with Stripe Checkout","isHorizontal":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityRating","attributes":{"rating":3,"color":"purple"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Customize with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api"},"children":["Appearance API"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use this guide to learn how to sell fixed-price ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"subscriptions"},"children":["subscriptions"]},". You’ll use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment?platform=ios"},"children":["Mobile Payment Element"]}," to create a custom payment form that you embed in your app."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re selling digital products or services that are consumed within your app \u0028for example, subscriptions, in-game currencies, game levels, access to premium content, or unlocking a full version\u0029, you must use Apple’s in-app purchase APIs. This rule has some exceptions, including one-to-one personal services and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Fchanges-to-mobile-app-store-rules"},"children":["apps based in specific regions"]},". See the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fapp-store\u002Freview\u002Fguidelines\u002F#payments"},"children":["App Store review guidelines"]}," for more information."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"build","level":2,"anchored":true,"toc":"Build your subscription "},"children":["Build your subscription "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This guide shows you how to:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Model your business by building a product catalog."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create a registration process to add customers."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create subscriptions and collect payment information."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Test and monitor the status of payments and subscriptions."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Let customers change their plan or cancel the subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":2,"anchored":true,"toc":"How to model it on Stripe","id":"how-to-model-it-on-stripe"},"children":["How to model it on Stripe"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscriptions"]}," simplify your billing by automatically creating ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"invoices"},"children":["Invoices"]}," and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntents"]}," for you.  To create and activate a subscription, you need to first create a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products"},"children":["Product"]}," to model what is being sold, and a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["Price"]}," which determines the interval and amount to charge. You also need a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}," to store ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"payment-methods"},"children":["PaymentMethods"]}," used to make each recurring payment."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fdiagrams\u002Fbilling-api-objects.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Diagram","attributes":{"type":"entity","description":"A diagram illustrating common billing objects and their relationships","size":"xlarge","elements":[{"id":"subscription","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject"},"children":["Subscription object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"sub_1234"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"open"},"children":[]},"handle":null},{"name":"latest_invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"invoiceId"},{"name":"default_payment_method","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":"paymentMethodId"},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":"customerId"},{"name":"items.data.price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":"priceId"},{"name":"pending_setup_intent","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"seti_1234"},"children":[]},"handle":"setupIntentId"}],"handles":["invoiceId","paymentMethodId","customerId","priceId","setupIntentId"]},"position":{"x":0,"y":0}},{"id":"invoice","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fobject"},"children":["Invoice object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":null},{"name":"currency","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"usd"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"draft"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_method","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods\u002Fobject"},"children":["PaymentMethod object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"card"},"children":[]},"handle":null},{"name":"card[brand]","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"visa"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"customer","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Jenny Rosen"},"children":[]},"handle":null},{"name":"email","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"jennyrosen@example.com"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"price","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"product","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":"productId"},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":["productId"]},"position":{"x":0,"y":0}},{"id":"product","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":null},{"name":"active","value":"true","handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Widget, blue"},"children":[]},"handle":null},{"name":"default_price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_intent","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pi_1234"},"children":[]},"handle":null},{"name":"amount","value":"1000","handle":null},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"pi_invoiceId"},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},"handle":null}],"handles":["pi_invoiceId"]},"position":{"x":0,"y":0}},{"id":"edge-invoiceId-invoice-auto-auto","source":"subscription","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"invoiceId"},{"id":"edge-paymentMethodId-payment_method-auto-auto","source":"subscription","target":"payment_method","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"paymentMethodId"},{"id":"edge-customerId-customer-auto-auto","source":"subscription","target":"customer","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"customerId"},{"id":"edge-priceId-price-auto-auto","source":"subscription","target":"price","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"priceId"},{"id":"edge-productId-product-auto-auto","source":"price","target":"product","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"productId"},{"id":"edge-pi_invoiceId-invoice-auto-auto","source":"payment_intent","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"pi_invoiceId"}],"positioning":"auto"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Collapsable","attributes":{"open":false,"heading":"API object definitions"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fapi-definitions.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{"width":35},"children":["Resource "]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Definition"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer who purchases a subscription. Use the Customer object associated with a subscription to make and track recurring charges and to manage the products that they subscribe to."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Factive-entitlement"},"children":["Entitlement"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s access to a feature included in a service product that they subscribe to. When you create a subscription for a customer’s recurring purchase of a product, an active entitlement is automatically created for each feature associated with that product. When a customer accesses your services, use their active entitlements to enable the features included in their subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Ffeature"},"children":["Feature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a function or ability that your customers can access when they subscribe to a service product. You can include features in a product by creating ProductFeatures."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices"},"children":["Invoice"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A statement of amounts a customer owes that tracks payment statuses from draft through paid or otherwise finalized. Subscriptions automatically generate invoices."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A way to build dynamic payment flows. A PaymentIntent tracks the lifecycle of a customer checkout flow and triggers additional authentication steps when required by regulatory mandates, custom Radar fraud rules, or redirect-based payment methods. Invoices automatically create PaymentIntents."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods"},"children":["PaymentMethod"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A customer’s payment instruments that they use to pay for your products. For example, you can store a credit card on a Customer object and use it to make recurring payments for that customer. Typically used with the Payment Intents or Setup Intents APIs."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Defines the unit price, currency, and billing cycle for a product."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A good or service that your business sells. A service product can include one or more features."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproduct-feature"},"children":["ProductFeature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a single feature’s inclusion in a single product. Each product is associated with a ProductFeature for each feature that it includes, and each feature is associated with a ProductFeature for each product that includes it."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s scheduled recurring purchase of a product. Use a subscription to collect payments and provide repeated delivery of or continuous access to a product."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Here’s an example of how products, features, and entitlements work together. Imagine that you want to set up a subscription service that offers two tiers: a standard product with basic functionality, and an advanced product that adds extended functionality."]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two features: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two products: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the standard product, you create one ProductFeature that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the advanced product, you create two ProductFeatures: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]}," and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["A customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]},", subscribes to the standard product. When you create the subscription, Stripe automatically creates an Entitlement that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Another customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]},", subscribes to the advanced product. When you create the Subscription, Stripe automatically creates two Entitlements: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},", and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can determine which features to provision for a customer by ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements#entitlements"},"children":["retrieving their active entitlements or listening to the Active Entitlement Summary webhook"]},". You don’t have to retrieve their subscriptions, products, and features."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"install-setup","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Set up Stripe","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Fandroid-install-sdk.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-android"},"children":["Stripe Android SDK"]}," is open source and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-android\u002F"},"children":["fully documented"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the SDK, add ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripe-android"},"children":[]}," to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"dependencies"},"children":[]}," block of your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.android.com\u002Fstudio\u002Fbuild\u002Fdependencies"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"app\u002Fbuild.gradle"},"children":[]}]}," file:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"groovy","title":"Groovy","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"groovy","title":"Groovy"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"groovy","filename":"build.gradle","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["apply plugin: 'com.android.application'\n\nandroid { ... }\n\ndependencies {\n  \u002F\u002F ...\n","\n  \u002F\u002F Stripe Android SDK\n  implementation 'com.stripe:stripe-android:","20.46.0","'","\n}\n"]}]}},{"id":"kotlin","title":"Kotlin","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"kotlin","title":"Kotlin"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"build.gradle.kts","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["plugins {\n    id\u0028\"com.android.application\"\u0029\n}\n\nandroid { ... }\n\ndependencies {\n  \u002F\u002F ...\n","\n  \u002F\u002F Stripe Android SDK\n  implementation\u0028\"com.stripe:stripe-android:","20.46.0","\"\u0029","\n}\n"]}]}}],"codeTabGroupID":"codetab_87365a1707c45a4438a6bb001d2c3776fcc2474c"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For details on the latest SDK release and past versions, see the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-android\u002Freleases"},"children":["Releases"]}," page on GitHub. To receive notifications when a new release is published, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdocs.github.com\u002Fen\u002Fgithub\u002Fmanaging-subscriptions-and-notifications-on-github\u002Fconfiguring-notifications#configuring-your-watch-settings-for-an-individual-repository"},"children":["watch releases for the repository"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Configure the SDK with your Stripe ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys"},"children":["publishable key"]}," so that it can make requests to the Stripe API, such as in your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Application"},"children":[]}," subclass:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang-android","items":[{"id":"kotlin","title":"Kotlin","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"kotlin","title":"Kotlin"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import com.stripe.android.PaymentConfiguration\n\nclass MyApp : Application\u0028\u0029 {\n    override fun onCreate\u0028\u0029 {\n        super.onCreate\u0028\u0029\n        PaymentConfiguration.init\u0028\n            applicationContext,\n            \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"\"\n        \u0029\n    }\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import com.stripe.android.PaymentConfiguration;\n\npublic class MyApp extends Application {\n    @Override\n    public void onCreate\u0028\u0029 {\n        super.onCreate\u0028\u0029;\n        PaymentConfiguration.init\u0028\n            getApplicationContext\u0028\u0029,\n            \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"\"\n        \u0029;\n    }\n}\n"]}]}}],"codeTabGroupID":"codetab_c8b57ed12e0458cb88997ea042d18a5a1e56934c"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#obtain-api-keys"},"children":["test mode"]}," keys while you test and develop, and your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["live mode"]}," keys when you publish your app."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["And then install the Stripe CLI. The CLI provides webhook testing and you can run it to make API calls to Stripe.  This guide shows how to use the CLI to set up a pricing model in a later section."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fstripe-cli-install.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"StripeCliInstall","attributes":{"sectionMap":{"mac":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install Homebrew to run this command: https:\u002F\u002Fbrew.sh\u002F\nbrew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060mac-os\u0060 tar.gz file of your cpu architecture type from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Tar the downloaded file\ntar -xvf stripe_[X.X.X]_mac-os_[ARCH_TYPE].tar.gz\n\n# Optionally, install the binary in a location where you can execute it globally \u0028for example, \u0060\u002Fusr\u002Flocal\u002Fbin\u0060\u0029.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_bfcad54629d52f79a55410a10b6600ac8d2a665d"},"children":[]}],"linux":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["brew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"apt","title":"apt","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"apt","title":"apt"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"mistake"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On April 5th, 2024, we changed Stripe CLI’s GPG key to install the Stripe CLI through apt. If you configured the public key before April 5th, you’ll encounter this error:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable InRelease: The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Failed to fetch https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local\u002Fdists\u002Fstable\u002FInRelease  The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Some index files failed to download. They have been ignored, or old ones used instead\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To resolve this error, refresh Stripe’s GPG key by following step 1."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add Stripe CLI's GPG key to the apt sources keyring:\ncurl -s https:\u002F\u002Fpackages.stripe.dev\u002Fapi\u002Fsecurity\u002Fkeypair\u002Fstripe-cli-gpg\u002Fpublic | gpg --dearmor | sudo tee \u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg\n\n# 2. Add CLI's apt repository to the apt sources list:\necho \"deb [signed-by=\u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg] https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable main\" | sudo tee -a \u002Fetc\u002Fapt\u002Fsources.list.d\u002Fstripe.list\n\n# 3. Update the package list\nsudo apt update\n\n# 4. Install the CLI\nsudo apt install stripe\n\n# 5. Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"yum","title":"yum","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"yum","title":"yum"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add CLI's yum repository to the yum sources list:\necho -e \"[Stripe]\\nname=stripe\\nbaseurl=https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-rpm-local\u002F\\nenabled=1\\ngpgcheck=0\" \u003E\u003E \u002Fetc\u002Fyum.repos.d\u002Fstripe.repo\n\n# 2. Install the CLI\nsudo yum install stripe\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Download the latest \u0060linux\u0060 tar.gz file from \u003Chttps:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\u003E\n\n# Unzip the file:\ntar -xvf stripe_X.X.X_linux_x86_64.tar.gz\n\n# Move \u0060.\u002Fstripe\u0060 to your execution path.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_58aa30da375f22c90c6974cc89fd9531c6978ce2"},"children":[]}],"windows":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060windows\u0060 zip file from\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Unzip the \u0060stripe_X.X.X_windows_x86_64.zip\u0060 file\n\n# 3. Run the unzipped \u0060.exe\u0060 file\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"scoop","title":"scoop","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"scoop","title":"scoop"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# See https:\u002F\u002Fscoop.sh\n\nscoop bucket add stripe https:\u002F\u002Fgithub.com\u002Fstripe\u002Fscoop-stripe-cli.git\n\nscoop install stripe\n"]}]}}],"codeTabGroupID":"codetab_02b0729429bd0e3865a8b5213471b8d84fb75449"},"children":[]}]}},"children":["For additional install options, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["Get started with the Stripe CLI"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-pricing-model","beta":false,"badges":["Stripe CLI or Dashboard"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the pricing model","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcreate-business-model.md","variables":{"payment_currency":"usd","stripe_cli_install_link":"#install-setup"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create your ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products-subs"},"children":["products"]}," and their ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["prices"]}," in the Dashboard or with the Stripe CLI."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. \u0028If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.\u0029"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In this example, each product bills at monthly intervals. The price for the Basic product is 5 ","USD",". The price for the Premium product is 15 ","USD","."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"dashboard","title":"Dashboard","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Dashboard"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fproducts\u002Fcreate"},"children":["Add a product"]}," page and create two products. Add one price for each product, each with a monthly recurring billing period:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Premium product: Premium service with extra features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 15 ","USD"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Basic product: Basic service with minimum features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 5 ","USD"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_G0FvDp6vZvdwRZ"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you’re ready, use the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy to live mode"]}," button at the top right of the page to clone your product from ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["test mode to live mode"]},"."]}]}},{"id":"stripe-cli","title":"Stripe CLI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Stripe CLI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you haven’t already, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["install the Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next create the product objects:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium product\nstripe products create \\\n  --name=\"Billing Guide: Premium Service\" \\\n  --description=\"Premium service with extra features\"\n\n# Basic product\nstripe products create \\\n  --name=\"Billing Guide: Basic Service\" \\\n  --description=\"Basic service with minimum features\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the product ID for each product. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"prod_H94k5odtwJXMtQ\",\n  \"object\": \"product\",\n  \"active\": true,\n  \"attributes\": [\n\n  ],\n  \"created\": 1587577341,\n  \"description\": \"Premium service with extra features\",\n  \"images\": [\n\n  ],\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": \"Billing Guide: Premium Service\",\n  \"statement_descriptor\": null,\n  \"type\": \"service\",\n  \"unit_label\": null,\n  \"updated\": 1587577341\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the product IDs to create a price for each product. The ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"unit_amount"},"children":[]}," number is in cents, so ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"1500"},"children":[]}," = 15 ","USD",", for example."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium price\n  stripe prices create \\\n    -d product=prod_H94k5odtwJXMtQ \\\n    -d unit_amount=1500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n\n# Basic price\n  stripe prices create \\\n    -d product=prod_HGd6W1VUqqXGvr \\\n    -d unit_amount=500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the price ID for each price so you can use them in subsequent steps. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"price_HGd7M3DV3IMXkC\",\n  \"object\": \"price\",\n  \"product\": \"prod_HGd6W1VUqqXGvr\",\n  \"type\": \"recurring\",\n  \"currency\": \"","usd","\",\n  \"recurring\": {\n    \"aggregate_usage\": null,\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"active\": true,\n  \"billing_scheme\": \"per_unit\",\n  \"created\": 1589319695,\n  \"livemode\": false,\n  \"lookup_key\": null,\n  \"metadata\": {\n  },\n  \"nickname\": null,\n  \"unit_amount\": 1500,\n  \"unit_amount_decimal\": \"1500\",\n  \"tiers\": null,\n  \"tiers_mode\": null,\n  \"transform_quantity\": null\n}\n"]}]}}]},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-customer","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the customer","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe needs a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"customers"},"children":["customer"]}," for each subscription.  In your application frontend, collect any necessary information from your users and pass it to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You might want to use a Network library to send network requests to your backend. This document uses ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fsquare.github.io\u002Fokhttp\u002F"},"children":["okhttp"]},", but you can use any library that work best in your project."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"groovy","filename":"build.gradle","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["dependencies {\n  ...\n  implementation \"com.squareup.okhttp3:okhttp:4.12.0\"\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you need to collect address details, the Address Element enables you to collect a shipping or billing address for your customers. For more information on the Address Element, visit the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Faddress-element"},"children":["Address Element"]}," page."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"RegisterView.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import androidx.compose.foundation.layout.Column\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.OutlinedTextField\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.launch\nimport okhttp3.MediaType.Companion.toMediaType\nimport okhttp3.OkHttpClient\nimport okhttp3.Request\nimport okhttp3.RequestBody.Companion.toRequestBody\nimport org.json.JSONObject\n\n@Composable\nfun RegisterView\u0028\u0029 {\n    var email by remember { mutableStateOf\u0028\"\"\u0029 }\n    Column {\n        OutlinedTextField\u0028value = email,\n            label = { Text\u0028text = \"Email\"\u0029 },\n            onValueChange = { email = it }\u0029\n        Button\u0028onClick = {\n            val body = JSONObject\u0028\u0029.put\u0028\"email\", email\u0029.toString\u0028\u0029\n                .toRequestBody\u0028\"application\u002Fjson\".toMediaType\u0028\u0029\u0029\n            val request =\n                Request.Builder\u0028\u0029.url\u0028\"http:\u002F\u002F10.0.2.2:4567\u002Fcreate-customer\"\u0029.post\u0028body\u0029.build\u0028\u0029\n            CoroutineScope\u0028Dispatchers.IO\u0029.launch {\n                OkHttpClient\u0028\u0029.newCall\u0028request\u0029.execute\u0028\u0029.use { response -\u003E\n                    if \u0028response.isSuccessful\u0029 {\n                        println\u0028JSONObject\u0028response.body\u0021\u0021.string\u0028\u0029\u0029.get\u0028\"customer\"\u0029\u0029\n                    }\n                }\n            }\n        }\u0029 {\n            Text\u0028text = \"Submit\"\u0029\n        }\n    }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the server, create the Stripe customer object."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-customer.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodegenSnippet","attributes":{"generatedCodeBlocks":[{"lang":"curl","generatedCode":{"resources":"curl https:\u002F\u002Fapi.stripe.com\u002Fv1\u002Fcustomers \\\n  -u \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024:\" \\\n  -d email={{CUSTOMER_EMAIL}} \\\n  -d name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"cli","generatedCode":{"resources":"stripe customers create  \\\n  --email={{CUSTOMER_EMAIL}} \\\n  --name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"ruby","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.api_key = '\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\n\nStripe::Customer.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"python","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nimport stripe\nstripe.api_key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nstripe.Customer.create\u0028\n  email=\"{{CUSTOMER_EMAIL}}\",\n  name=\"{{CUSTOMER_NAME}}\",\n  shipping={\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  address={\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n\u0029","services":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nclient = StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029\n\nclient.customers.create\u0028{\n  \"email\": \"{{CUSTOMER_EMAIL}}\",\n  \"name\": \"{{CUSTOMER_NAME}}\",\n  \"shipping\": {\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  \"address\": {\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"php","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n\u0024stripe = new \\Stripe\\StripeClient\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\n\u0024stripe-\u003Ecustomers-\u003Ecreate\u0028[\n  'email' =\u003E '{{CUSTOMER_EMAIL}}',\n  'name' =\u003E '{{CUSTOMER_NAME}}',\n  'shipping' =\u003E [\n    'address' =\u003E [\n      'city' =\u003E 'Brothers',\n      'country' =\u003E 'US',\n      'line1' =\u003E '27 Fredrick Ave',\n      'postal_code' =\u003E '97712',\n      'state' =\u003E 'CA',\n    ],\n    'name' =\u003E '{{CUSTOMER_NAME}}',\n  ],\n  'address' =\u003E [\n    'city' =\u003E 'Brothers',\n    'country' =\u003E 'US',\n    'line1' =\u003E '27 Fredrick Ave',\n    'postal_code' =\u003E '97712',\n    'state' =\u003E 'CA',\n  ],\n]\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"java","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.apiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = Customer.create\u0028params\u0029;","services":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeClient client = new StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029;\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = client.customers\u0028\u0029.create\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"node","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nconst stripe = require\u0028'stripe'\u0029\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\nconst customer = await stripe.customers.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"go","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nstripe.Key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nparams := \u0026stripe.CustomerParams{\n  Email: stripe.String\u0028\"{{CUSTOMER_EMAIL}}\"\u0029,\n  Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  Shipping: \u0026stripe.CustomerShippingParams{\n    Address: \u0026stripe.AddressParams{\n      City: stripe.String\u0028\"Brothers\"\u0029,\n      Country: stripe.String\u0028\"US\"\u0029,\n      Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n      PostalCode: stripe.String\u0028\"97712\"\u0029,\n      State: stripe.String\u0028\"CA\"\u0029,\n    },\n    Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  },\n  Address: \u0026stripe.AddressParams{\n    City: stripe.String\u0028\"Brothers\"\u0029,\n    Country: stripe.String\u0028\"US\"\u0029,\n    Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n    PostalCode: stripe.String\u0028\"97712\"\u0029,\n    State: stripe.String\u0028\"CA\"\u0029,\n  },\n};\nresult, err := customer.New\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"dotnet","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeConfiguration.ApiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nvar options = new CustomerCreateOptions\n{\n    Email = \"{{CUSTOMER_EMAIL}}\",\n    Name = \"{{CUSTOMER_NAME}}\",\n    Shipping = new ShippingOptions\n    {\n        Address = new AddressOptions\n        {\n            City = \"Brothers\",\n            Country = \"US\",\n            Line1 = \"27 Fredrick Ave\",\n            PostalCode = \"97712\",\n            State = \"CA\",\n        },\n        Name = \"{{CUSTOMER_NAME}}\",\n    },\n    Address = new AddressOptions\n    {\n        City = \"Brothers\",\n        Country = \"US\",\n        Line1 = \"27 Fredrick Ave\",\n        PostalCode = \"97712\",\n        State = \"CA\",\n    },\n};\nvar service = new CustomerService\u0028\u0029;\nservice.Create\u0028options\u0029;"},"codegenError":null,"overriddenCodeBlock":null}],"codeTabGroupID":"codetab_3157f82c4e796fd1f0929952cd21468b2db77735","httpPath":"\u002Fv1\u002Fcustomers","httpVerb":"post","v2ApiVersion":"2024-05-23.preview-v2"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you want to render the Payment Element without first creating a subscription, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment-deferred?type=subscription"},"children":["Collect payment details before creating an Intent"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Let your new customer choose a plan and then create the subscription—in this guide, they choose between Basic and Premium."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your app, pass the selected price ID and the ID of the customer record to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"PricesView.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import okhttp3.MediaType.Companion.toMediaType\nimport okhttp3.OkHttpClient\nimport okhttp3.Request\nimport okhttp3.RequestBody.Companion.toRequestBody\nimport org.json.JSONObject\n\nfun createSubscription\u0028priceId: String, customerId: String\u0029: SubscriptionResponse? {\n    val body = JSONObject\u0028\u0029\n        .put\u0028\"priceId\", priceId\u0029\n        .put\u0028\"customerId\", customerId\u0029.toString\u0028\u0029\n        .toRequestBody\u0028\"application\u002Fjson\".toMediaType\u0028\u0029\u0029\n    val request =\n        Request.Builder\u0028\u0029.url\u0028\"http:\u002F\u002F10.0.2.2:4567\u002Fcreate-subscription\"\u0029.post\u0028body\u0029.build\u0028\u0029\n    OkHttpClient\u0028\u0029.newCall\u0028request\u0029.execute\u0028\u0029.use { response -\u003E\n        if \u0028response.isSuccessful\u0029 {\n            \u002F\u002F SubscriptionsResponse is data class conforming to the expected response from your backend.\n            \u002F\u002F It should include the client_secret, as discussed below.\n            return Gson\u0028\u0029.fromJson\u0028response.body\u0021\u0021.string\u0028\u0029, SubscriptionResponse::class.java\u0029\n        }\n    }\n    return null\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, create the subscription with status ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"incomplete"},"children":[]}," using ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_behavior=default_incomplete"},"children":[]},". Then return the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"client_secret"},"children":[]}," from the subscription’s first ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-intents"},"children":["payment intent"]}," to the frontend to complete payment."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject#subscription_object-payment_settings-save_default_payment_method"},"children":["save_default_payment_method"]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"on_subscription"},"children":[]}," to save the payment method as the default for a subscription when a payment succeeds. Saving a default payment method increases the success rate of future subscription payments."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-subscription-default-incomplete.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcreate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse\u0028request.body.read\u0029\n  customer_id = cookies[:customer]\n  price_id = data['priceId']\n\n  # Create the subscription. Note we're expanding the Subscription's\n  # latest invoice and that invoice's payment_intent\n  # so we can pass it to the front end to confirm the payment\n  subscription = Stripe::Subscription.create\u0028\n    customer: customer_id,\n    items: [{\n      price: price_id,\n    }],\n    payment_behavior: 'default_incomplete',\n    payment_settings: {save_default_payment_method: 'on_subscription'},\n    expand: ['latest_invoice.payment_intent']\n  \u0029\n\n  { subscriptionId: subscription.id, clientSecret: subscription.latest_invoice.payment_intent.client_secret }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcreate-subscription', methods=['POST']\u0029\ndef create_subscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    customer_id = data['customerId']\n    price_id = data['priceId']\n\n    try:\n        # Create the subscription. Note we're expanding the Subscription's\n        # latest invoice and that invoice's payment_intent\n        # so we can pass it to the front end to confirm the payment\n        subscription = stripe.Subscription.create\u0028\n            customer=customer_id,\n            items=[{\n                'price': price_id,\n            }],\n            payment_behavior='default_incomplete',\n            payment_settings={'save_default_payment_method': 'on_subscription'},\n            expand=['latest_invoice.payment_intent'],\n        \u0029\n        return jsonify\u0028subscriptionId=subscription.id, clientSecret=subscription.latest_invoice.payment_intent.client_secret\u0029\n\n    except Exception as e:\n        return jsonify\u0028error={'message': e.user_message}\u0029, 400\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n    \u002F\u002F Get the request body and decode it as JSON.\n    \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n    \u0024json = json_decode\u0028\u0024body\u0029;\n\n    \u002F\u002F Get the customer ID from the cookie and the price ID from the JSON data.\n    \u0024customer_id = \u0024_COOKIE['customer'];\n    \u0024price_id = \u0024json-\u003EpriceId;\n\n    \u002F\u002F Create the subscription with the customer ID, price ID, and necessary options.\n    \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Ecreate\u0028[\n        'customer' =\u003E \u0024customer_id,\n        'items' =\u003E [[\n            'price' =\u003E \u0024price_id,\n        ]],\n        'payment_behavior' =\u003E 'default_incomplete',\n        'payment_settings' =\u003E ['save_default_payment_method' =\u003E 'on_subscription'],\n        'expand' =\u003E ['latest_invoice.payment_intent'],\n    ]\u0029;\n\n    \u002F\u002F Return the subscription ID and client secret as a JSON response.\n    header\u0028'Content-Type: application\u002Fjson'\u0029;\n    echo json_encode\u0028[\n        'subscriptionId' =\u003E \u0024subscription-\u003Eid,\n        'clientSecret' =\u003E \u0024subscription-\u003Elatest_invoice-\u003Epayment_intent-\u003Eclient_secret,\n    ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fcreate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    String customerId = request.cookie\u0028\"customer\"\u0029;\n    CreateSubscriptionRequest postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      CreateSubscriptionRequest.class\n    \u0029;\n    String priceId = postBody.getPriceId\u0028\u0029;\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    SubscriptionCreateParams.PaymentSettings paymentSettings =\n      SubscriptionCreateParams.PaymentSettings\n        .builder\u0028\u0029\n        .setSaveDefaultPaymentMethod\u0028SaveDefaultPaymentMethod.ON_SUBSCRIPTION\u0029\n        .build\u0028\u0029;\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    SubscriptionCreateParams subCreateParams = SubscriptionCreateParams\n      .builder\u0028\u0029\n      .setCustomer\u0028customerId\u0029\n      .addItem\u0028\n        SubscriptionCreateParams\n          .Item.builder\u0028\u0029\n          .setPrice\u0028priceId\u0029\n          .build\u0028\u0029\n      \u0029\n      .setPaymentSettings\u0028paymentSettings\u0029\n      .setPaymentBehavior\u0028SubscriptionCreateParams.PaymentBehavior.DEFAULT_INCOMPLETE\u0029\n      .addAllExpand\u0028Arrays.asList\u0028\"latest_invoice.payment_intent\"\u0029\u0029\n      .build\u0028\u0029;\n\n    Subscription subscription = Subscription.create\u0028subCreateParams\u0029;\n\n    Map\u003CString, Object\u003E responseData = new HashMap\u003C\u003E\u0028\u0029;\n    responseData.put\u0028\"subscriptionId\", subscription.getId\u0028\u0029\u0029;\n    responseData.put\u0028\"clientSecret\", subscription.getLatestInvoiceObject\u0028\u0029.getPaymentIntentObject\u0028\u0029.getClientSecret\u0028\u0029\u0029;\n    return StripeObject.PRETTY_PRINT_GSON.toJson\u0028responseData\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcreate-subscription', async \u0028req, res\u0029 =\u003E {\n  const customerId = req.cookies['customer'];\n  const priceId = req.body.priceId;\n\n  try {\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    const subscription = await stripe.subscriptions.create\u0028{\n      customer: customerId,\n      items: [{\n        price: priceId,\n      }],\n      payment_behavior: 'default_incomplete',\n      payment_settings: { save_default_payment_method: 'on_subscription' },\n      expand: ['latest_invoice.payment_intent'],\n    }\u0029;\n\n    res.send\u0028{\n      subscriptionId: subscription.id,\n      clientSecret: subscription.latest_invoice.payment_intent.client_secret,\n    }\u0029;\n  } catch \u0028error\u0029 {\n    return res.status\u0028400\u0029.send\u0028{ error: { message: error.message } }\u0029;\n  }\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCreateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n    if r.Method \u0021= \"POST\" {\n        http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n        return\n    }\n\n    var req struct {\n        PriceID string \u0060json:\"priceId\"\u0060\n    }\n\n    if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n        return\n    }\n\n    cookie, _ := r.Cookie\u0028\"customer\"\u0029\n    customerID := cookie.Value\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    paymentSettings := \u0026stripe.SubscriptionPaymentSettingsParams{\n\t\t    SaveDefaultPaymentMethod: stripe.String\u0028\"on_subscription\"\u0029,\n  \t}\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    subscriptionParams := \u0026stripe.SubscriptionParams{\n        Customer: stripe.String\u0028customerID\u0029,\n        Items: []*stripe.SubscriptionItemsParams{\n            {\n                Price: stripe.String\u0028req.PriceID\u0029,\n            },\n        },\n        PaymentSettings: paymentSettings,\n        PaymentBehavior: stripe.String\u0028\"default_incomplete\"\u0029,\n    }\n    subscriptionParams.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029\n    s, err := subscription.New\u0028subscriptionParams\u0029\n\n    if err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"subscription.New: %v\", err\u0029\n        return\n    }\n\n    writeJSON\u0028w, struct {\n        SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n        ClientSecret string \u0060json:\"clientSecret\"\u0060\n    }{\n        SubscriptionID: s.ID,\n        ClientSecret: s.LatestInvoice.PaymentIntent.ClientSecret,\n    }, nil\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"create-subscription\"\u0029]\npublic ActionResult\u003CSubscriptionCreateResponse\u003E CreateSubscription\u0028[FromBody] CreateSubscriptionRequest req\u0029\n{\n    var customerId = HttpContext.Request.Cookies[\"customer\"];\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    var paymentSettings = new SubscriptionPaymentSettingsOptions {\n        SaveDefaultPaymentMethod = \"on_subscription\",\n    };\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    var subscriptionOptions = new SubscriptionCreateOptions\n    {\n        Customer = customerId,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Price = req.PriceId,\n            },\n        },\n        PaymentSettings = paymentSettings,\n        PaymentBehavior = \"default_incomplete\",\n    };\n    subscriptionOptions.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029;\n    var subscriptionService = new SubscriptionService\u0028\u0029;\n    try\n    {\n        Subscription subscription = subscriptionService.Create\u0028subscriptionOptions\u0029;\n\n        return new SubscriptionCreateResponse\n        {\n          SubscriptionId = subscription.Id,\n          ClientSecret = subscription.LatestInvoice.PaymentIntent.ClientSecret,\n        };\n    }\n    catch \u0028StripeException e\u0029\n    {\n        Console.WriteLine\u0028\u0024\"Failed to create subscription.{e}\"\u0029;\n        return BadRequest\u0028\u0029;\n    }\n}\n"]}]}}],"codeTabGroupID":"codetab_460d8430c5a0d180ec8c0f560dc384e170c5d04f"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re using a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"multi-currency-price"},"children":["multi-currency Price"]},", use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fcreate#create_subscription-currency"},"children":["currency"]}," parameter to tell the Subscription which of the Price’s currencies to use. \u0028If you omit the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"currency"},"children":[]}," parameter, then the Subscription uses the Price’s default currency.\u0029"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["At this point the Subscription is ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"inactive"},"children":[]}," and awaiting payment. Here’s an example response. The minimum fields to store are highlighted, but store whatever your application frequently accesses."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fsub-response-inactive.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":2,"end":2},{"start":16,"end":16},{"start":18,"end":18}],"add":[],"remove":[]}},"children":["{",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"id\": \"sub_JgRjFjhKbtD2qz\","},"children":["\n  \"id\": \"sub_JgRjFjhKbtD2qz\","]},"\n  \"object\": \"subscription\",\n  \"application_fee_percent\": null,\n  \"automatic_tax\": {\n    \"enabled\": false\n  },\n  \"billing\": \"charge_automatically\",\n  \"billing_cycle_anchor\": 1623873347,\n  \"billing_thresholds\": null,\n  \"cancel_at\": null,\n  \"cancel_at_period_end\": false,\n  \"canceled_at\": null,\n  \"collection_method\": \"charge_automatically\",\n  \"created\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"current_period_end\": 1626465347,"},"children":["\n  \"current_period_end\": 1626465347,"]},"\n  \"current_period_start\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"customer\": \"cus_CMqDWO2xODTZqt\","},"children":["\n  \"customer\": \"cus_CMqDWO2xODTZqt\","]},"\n  \"days_until_due\": null,\n  \"default_payment_method\": null,\n  \"default_source\": null,\n  \"default_tax_rates\": [\n\n  ],\n  \"discount\": null,\n  \"ended_at\": null,\n  \"invoice_customer_balance_settings\": {\n    \"consume_applied_balance_on_void\": true\n  },\n  \"items\": {\n    \"object\": \"list\",\n    \"data\": [\n      {\n        \"id\": \"si_JgRjmS4Ur1khEx\",\n        \"object\": \"subscription_item\",\n        \"billing_thresholds\": null,\n        \"created\": 1623873347,\n        \"metadata\": {\n        },\n        \"plan\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"plan\",\n          \"active\": true,\n          \"aggregate_usage\": null,\n          \"amount\": 2000,\n          \"amount_decimal\": \"2000\",\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"interval\": \"month\",\n          \"interval_count\": 1,\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"tiers\": null,\n          \"tiers_mode\": null,\n          \"transform_usage\": null,\n          \"trial_period_days\": null,\n          \"usage_type\": \"licensed\"\n        },\n        \"price\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"price\",\n          \"active\": true,\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"livemode\": false,\n          \"lookup_key\": null,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"recurring\": {\n            \"aggregate_usage\": null,\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"tiers_mode\": null,\n          \"transform_quantity\": null,\n          \"type\": \"recurring\",\n          \"unit_amount\": 2000,\n          \"unit_amount_decimal\": \"2000\"\n        },\n        \"quantity\": 1,\n        \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n        \"tax_rates\": [\n\n        ]\n      }\n    ],\n    \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"\u002Fv1\u002Fsubscription_items?subscription=sub_JgRjFjhKbtD2qz\"\n  },\n  \"latest_invoice\": {\n    \"id\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n    \"object\": \"invoice\",\n    \"account_country\": \"US\",\n    \"account_name\": \"Angelina's Store\",\n    \"account_tax_ids\": null,\n    \"amount_due\": 2000,\n    \"amount_paid\": 0,\n    \"amount_remaining\": 2000,\n    \"application_fee\": null,\n    \"attempt_count\": 0,\n    \"attempted\": false,\n    \"auto_advance\": false,\n    \"automatic_tax\": {\n      \"enabled\": false,\n      \"status\": null\n    },\n    \"billing\": \"charge_automatically\",\n    \"billing_reason\": \"subscription_update\",\n    \"charge\": null,\n    \"closed\": true,\n    \"collection_method\": \"charge_automatically\",\n    \"created\": 1623873347,\n    \"currency\": \"usd\",\n    \"custom_fields\": null,\n    \"customer\": \"cus_CMqDWO2xODTZqt\",\n    \"customer_address\": null,\n    \"customer_email\": \"angelina@stripe.com\",\n    \"customer_name\": null,\n    \"customer_phone\": null,\n    \"customer_shipping\": {\n      \"address\": {\n        \"city\": \"\",\n        \"country\": \"US\",\n        \"line1\": \"Berry\",\n        \"line2\": \"\",\n        \"postal_code\": \"\",\n        \"state\": \"\"\n      },\n      \"name\": \"\",\n      \"phone\": null\n    },\n    \"customer_tax_exempt\": \"none\",\n    \"customer_tax_ids\": [\n\n    ],\n    \"date\": 1623873347,\n    \"default_payment_method\": null,\n    \"default_source\": null,\n    \"default_tax_rates\": [\n\n    ],\n    \"description\": null,\n    \"discount\": null,\n    \"discounts\": [\n\n    ],\n    \"due_date\": null,\n    \"ending_balance\": 0,\n    \"finalized_at\": 1623873347,\n    \"footer\": null,\n    \"forgiven\": false,\n    \"hosted_invoice_url\": \"https:\u002F\u002Finvoice.stripe.com\u002Fi\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\",\n    \"invoice_pdf\": \"https:\u002F\u002Fpay.stripe.com\u002Finvoice\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\u002Fpdf\",\n    \"last_finalization_error\": null,\n    \"lines\": {\n      \"object\": \"list\",\n      \"data\": [\n        {\n          \"id\": \"sub_JgRjFjhKbtD2qz\",\n          \"object\": \"line_item\",\n          \"amount\": 2000,\n          \"currency\": \"usd\",\n          \"description\": \"1 × Gold Special \u0028at \u002420.00 \u002F month\u0029\",\n          \"discount_amounts\": [\n\n          ],\n          \"discountable\": true,\n          \"discounts\": [\n\n          ],\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"period\": {\n            \"end\": 1626465347,\n            \"start\": 1623873347\n          },\n          \"plan\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"plan\",\n            \"active\": true,\n            \"aggregate_usage\": null,\n            \"amount\": 2000,\n            \"amount_decimal\": \"2000\",\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"livemode\": false,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"tiers\": null,\n            \"tiers_mode\": null,\n            \"transform_usage\": null,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"price\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"price\",\n            \"active\": true,\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"livemode\": false,\n            \"lookup_key\": null,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"recurring\": {\n              \"aggregate_usage\": null,\n              \"interval\": \"month\",\n              \"interval_count\": 1,\n              \"trial_period_days\": null,\n              \"usage_type\": \"licensed\"\n            },\n            \"tiers_mode\": null,\n            \"transform_quantity\": null,\n            \"type\": \"recurring\",\n            \"unit_amount\": 2000,\n            \"unit_amount_decimal\": \"2000\"\n          },\n          \"proration\": false,\n          \"quantity\": 1,\n          \"subscription\": null,\n          \"subscription_item\": \"si_JgRjmS4Ur1khEx\",\n          \"tax_amounts\": [\n\n          ],\n          \"tax_rates\": [\n\n          ],\n          \"type\": \"subscription\",\n          \"unique_id\": \"il_1J34pzGPZ1iASj5zH4yl5GQR\",\n          \"unique_line_item_id\": \"sli_14b5dfGPZ1iASj5z614c4a47\"\n        }\n      ],\n      \"has_more\": false,\n      \"total_count\": 1,\n      \"url\": \"\u002Fv1\u002Finvoices\u002Fin_1J34pzGPZ1iASj5zB87qdBNZ\u002Flines\"\n    },\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"next_payment_attempt\": null,\n    \"number\": \"C008FC2-0354\",\n    \"on_behalf_of\": null,\n    \"paid\": false,\n    \"payment_intent\": {\n      \"id\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6\",\n      \"object\": \"payment_intent\",\n      \"allowed_source_types\": [\n        \"card\"\n      ],\n      \"amount\": 2000,\n      \"amount_capturable\": 0,\n      \"amount_received\": 0,\n      \"application\": null,\n      \"application_fee_amount\": null,\n      \"canceled_at\": null,\n      \"cancellation_reason\": null,\n      \"capture_method\": \"automatic\",\n      \"charges\": {\n        \"object\": \"list\",\n        \"data\": [\n\n        ],\n        \"has_more\": false,\n        \"total_count\": 0,\n        \"url\": \"\u002Fv1\u002Fcharges?payment_intent=pi_1J34pzGPZ1iASj5zI2nOAaE6\"\n      },\n      \"client_secret\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6_secret_l7FN6ldFfXiFmJEumenJ2y2wu\",\n      \"confirmation_method\": \"automatic\",\n      \"created\": 1623873347,\n      \"currency\": \"usd\",\n      \"customer\": \"cus_CMqDWO2xODTZqt\",\n      \"description\": \"Subscription creation\",\n      \"invoice\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n      \"last_payment_error\": null,\n      \"livemode\": false,\n      \"metadata\": {\n      },\n      \"next_action\": null,\n      \"next_source_action\": null,\n      \"on_behalf_of\": null,\n      \"payment_method\": null,\n      \"payment_method_options\": {\n        \"card\": {\n          \"installments\": null,\n          \"network\": null,\n          \"request_three_d_secure\": \"automatic\"\n        }\n      },\n      \"payment_method_types\": [\n        \"card\"\n      ],\n      \"receipt_email\": null,\n      \"review\": null,\n      \"setup_future_usage\": \"off_session\",\n      \"shipping\": null,\n      \"source\": \"card_1By6iQGPZ1iASj5z7ijKBnXJ\",\n      \"statement_descriptor\": null,\n      \"statement_descriptor_suffix\": null,\n      \"status\": \"requires_confirmation\",\n      \"transfer_data\": null,\n      \"transfer_group\": null\n    },\n    \"payment_settings\": {\n      \"payment_method_options\": null,\n      \"payment_method_types\": null,\n      \"save_default_payment_method\": \"on_subscription\"\n    },\n    \"period_end\": 1623873347,\n    \"period_start\": 1623873347,\n    \"post_payment_credit_notes_amount\": 0,\n    \"pre_payment_credit_notes_amount\": 0,\n    \"receipt_number\": null,\n    \"starting_balance\": 0,\n    \"statement_descriptor\": null,\n    \"status\": \"open\",\n    \"status_transitions\": {\n      \"finalized_at\": 1623873347,\n      \"marked_uncollectible_at\": null,\n      \"paid_at\": null,\n      \"voided_at\": null\n    },\n    \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n    \"subtotal\": 2000,\n    \"tax\": null,\n    \"tax_percent\": null,\n    \"total\": 2000,\n    \"total_discount_amounts\": [\n\n    ],\n    \"total_tax_amounts\": [\n\n    ],\n    \"transfer_data\": null,\n    \"webhooks_delivered_at\": 1623873347\n  },\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"next_pending_invoice_item_invoice\": null,\n  \"pause_collection\": null,\n  \"pending_invoice_item_interval\": null,\n  \"pending_setup_intent\": null,\n  \"pending_update\": null,\n  \"plan\": {\n    \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n    \"object\": \"plan\",\n    \"active\": true,\n    \"aggregate_usage\": null,\n    \"amount\": 2000,\n    \"amount_decimal\": \"2000\",\n    \"billing_scheme\": \"per_unit\",\n    \"created\": 1623864151,\n    \"currency\": \"usd\",\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"nickname\": null,\n    \"product\": \"prod_JgPF5xnq7qBun3\",\n    \"tiers\": null,\n    \"tiers_mode\": null,\n    \"transform_usage\": null,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"quantity\": 1,\n  \"schedule\": null,\n  \"start\": 1623873347,\n  \"start_date\": 1623873347,\n  \"status\": \"incomplete\",\n  \"tax_percent\": null,\n  \"transfer_data\": null,\n  \"trial_end\": null,\n  \"trial_start\": null\n}\n"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"collect-payment","beta":false,"badges":["Client"],"collapsable":true,"numbered":true,"optional":false,"title":"Collect payment information","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Felements"},"children":["Stripe Elements"]}," to collect payment details and activate the subscription. You can customize Elements to match the look-and-feel of your application."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment?platform=ios"},"children":["Mobile Payment Element"]}," securely collects all necessary payment details for a wide variety of payments methods. You can visit this ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#product-support"},"children":["page"]}," to learn what payment methods are supported by both Mobile Payment Element and Subscriptions."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"add-the-payment-element-to-your-app"},"children":["Add the Payment Element to your app"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Initialize and present the Mobile Payment Element using the PaymentSheet class."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"SubscribeView.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import androidx.compose.material3.Button\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport com.stripe.android.paymentsheet.PaymentSheet\nimport com.stripe.android.paymentsheet.PaymentSheetResult\nimport com.stripe.android.paymentsheet.rememberPaymentSheet\n\n@Composable\nfun SubscribeView\u0028clientSecret: String\u0029 {\n    val paymentSheet = rememberPaymentSheet\u0028::onPaymentSheetResult\u0029\n\n    Button\u0028onClick = {\n        paymentSheet.presentWithPaymentIntent\u0028\n            clientSecret, PaymentSheet.Configuration\u0028\n                primaryButtonLabel = \"Subscribe for \u002415\u002Fmonth\",\n                merchantDisplayName = \"My merchant name\",\n                \u002F\u002F Set \u0060allowsDelayedPaymentMethods\u0060 to true if your business handles\n                \u002F\u002F delayed notification payment methods like US bank accounts.\n                allowsDelayedPaymentMethods = true\n            \u0029\n        \u0029\n    }\u0029 {\n        Text\u0028text = \"Subscribe\"\u0029\n    }\n}\n\nfun onPaymentSheetResult\u0028paymentSheetResult: PaymentSheetResult\u0029 {\n    when \u0028paymentSheetResult\u0029 {\n        is PaymentSheetResult.Canceled -\u003E {\n            print\u0028\"Canceled\"\u0029\n        }\n\n        is PaymentSheetResult.Failed -\u003E {\n            print\u0028\"Error: \u0024{paymentSheetResult.error}\"\u0029\n        }\n\n        is PaymentSheetResult.Completed -\u003E {\n            \u002F\u002F Display for example, an order confirmation screen\n            print\u0028\"Completed\"\u0029\n        }\n    }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Mobile Payment Element renders a sheet that allows your customer to select a payment method. The form automatically collects all necessary payments details for the payment method that they select."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Setting ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"allowsDelayedPaymentMethods"},"children":[]}," to true allows ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods#payment-notification"},"children":["delayed notification"]}," payment methods like US bank accounts. For these payment methods, the final payment status isn’t known when the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet"},"children":[]}," completes, and instead succeeds or fails later. If you support these types of payment methods, inform the customer their order is confirmed and only fulfill their order \u0028for example, ship their product\u0029 when the payment is successful."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can customize the Payment Element to match the design of your app by using the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api?platform=ios"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"appearance"},"children":[]}," property"]}," your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet.Configuration"},"children":[]}," object."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"confirm-payment-ios","level":3,"anchored":true},"children":["Confirm payment "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Mobile Payment Element creates a PaymentMethod and confirms the incomplete Subscription’s first PaymentIntent, causing a charge to be made. If ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["Strong Customer Authentication"]}," \u0028SCA\u0029 is required for the payment, the Payment Element handles the authentication process before confirming the PaymentIntent."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"webhooks","beta":false,"badges":["Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Listen for webhooks","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To complete the integration, you need to process ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"webhook"},"children":["webhooks"]}," sent by Stripe. These are events triggered whenever state inside of Stripe changes, such as subscriptions creating new invoices. In your application, set up an HTTP handler to accept a POST request containing the webhook event, and verify the signature of the event:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fwebhooks.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fwebhook' do\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = ENV['STRIPE_WEBHOOK_SECRET']\n  payload = request.body.read\n  if \u0021webhook_secret.empty?\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    sig_header = request.env['HTTP_STRIPE_SIGNATURE']\n    event = nil\n\n    begin\n      event = Stripe::Webhook.construct_event\u0028\n        payload, sig_header, webhook_secret\n      \u0029\n    rescue JSON::ParserError =\u003E e\n      # Invalid payload\n      status 400\n      return\n    rescue Stripe::SignatureVerificationError =\u003E e\n      # Invalid signature\n      puts '⚠️  Webhook signature verification failed.'\n      status 400\n      return\n    end\n  else\n    data = JSON.parse\u0028payload, symbolize_names: true\u0029\n    event = Stripe::Event.construct_from\u0028data\u0029\n  end\n  # Get the type of webhook event sent - used to check the status of PaymentIntents.\n  event_type = event['type']\n  data = event['data']\n  data_object = data['object']\n\n  if event_type == 'invoice.paid'\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    # puts data_object\n  end\n\n  if event_type == 'invoice.payment_failed'\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    # puts data_object\n  end\n\n  if event_type == 'customer.subscription.deleted'\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    # puts data_object\n  end\n\n  content_type 'application\u002Fjson'\n  { status: 'success' }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fwebhook', methods=['POST']\u0029\ndef webhook_received\u0028\u0029:\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = os.getenv\u0028'STRIPE_WEBHOOK_SECRET'\u0029\n  request_data = json.loads\u0028request.data\u0029\n\n  if webhook_secret:\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    signature = request.headers.get\u0028'stripe-signature'\u0029\n    try:\n      event = stripe.Webhook.construct_event\u0028\n        payload=request.data, sig_header=signature, secret=webhook_secret\u0029\n      data = event['data']\n    except Exception as e:\n      return e\n    # Get the type of webhook event sent - used to check the status of PaymentIntents.\n    event_type = event['type']\n  else:\n    data = request_data['data']\n    event_type = request_data['type']\n\n  data_object = data['object']\n\n  if event_type == 'invoice.paid':\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    print\u0028data\u0029\n\n  if event_type == 'invoice.payment_failed':\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    print\u0028data\u0029\n\n  if event_type == 'customer.subscription.deleted':\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    print\u0028data\u0029\n\n  return jsonify\u0028{'status': 'success'}\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"webhook.php","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u0024event = null;\n\u0024payload = @file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n\u0024sig_header = \u0024_SERVER['HTTP_STRIPE_SIGNATURE'];\n\u0024webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},";\ntry {\n  \u0024event = \\Stripe\\Webhook::constructEvent\u0028\n    \u0024payload, \u0024sig_header, \u0024webhook_secret\n  \u0029;\n} catch\u0028\\UnexpectedValueException \u0024e\u0029 {\n  \u002F\u002F Invalid payload\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n} catch\u0028\\Stripe\\Exception\\SignatureVerificationException \u0024e\u0029 {\n  \u002F\u002F Invalid signature\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n}\n\n\u002F\u002F Handle the event\n\u002F\u002F Review important events for Billing webhooks\n\u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n\u002F\u002F Remove comment to see the various objects sent for this sample\nswitch \u0028\u0024event-\u003Etype\u0029 {\n  case 'invoice.paid':\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    break;\n  case 'invoice.payment_failed':\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    break;\n  case 'customer.subscription.deleted':\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user\n    \u002F\u002F cancels it.\n    break;\n  \u002F\u002F ... handle other event types\n  default:\n    \u002F\u002F Unhandled event type\n}\n\nhttp_response_code\u0028200\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fwebhook\",\n  \u0028request, response\u0029 -\u003E {\n    String payload = request.body\u0028\u0029;\n    String sigHeader = request.headers\u0028\"Stripe-Signature\"\u0029;\n    String endpointSecret = dotenv.get\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029;\n    Event event = null;\n\n    try {\n      event = Webhook.constructEvent\u0028payload, sigHeader, endpointSecret\u0029;\n    } catch \u0028SignatureVerificationException e\u0029 {\n      \u002F\u002F Invalid signature\n      response.status\u0028400\u0029;\n      return \"\";\n    }\n\n    \u002F\u002F Deserialize the nested object inside the event\n    EventDataObjectDeserializer dataObjectDeserializer = event.getDataObjectDeserializer\u0028\u0029;\n    StripeObject stripeObject = null;\n    if \u0028dataObjectDeserializer.getObject\u0028\u0029.isPresent\u0028\u0029\u0029 {\n      stripeObject = dataObjectDeserializer.getObject\u0028\u0029.get\u0028\u0029;\n    } else {\n      \u002F\u002F Deserialization failed, probably due to an API version mismatch.\n      \u002F\u002F Refer to the Javadoc documentation on \u0060EventDataObjectDeserializer\u0060 for\n      \u002F\u002F instructions on how to handle this case, or return an error here.\n    }\n\n    switch \u0028event.getType\u0028\u0029\u0029 {\n      case \"invoice.paid\":\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n        \u002F\u002F limits.\n        break;\n      case \"invoice.payment_failed\":\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case \"customer.subscription.deleted\":\n        \u002F\u002F handle subscription canceled automatically based\n        \u002F\u002F upon your subscription settings. Or if the user\n        \u002F\u002F cancels it.\n        break;\n      default:\n      \u002F\u002F Unhandled event type\n    }\n\n    response.status\u0028200\u0029;\n    return \"\";\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028\n  '\u002Fwebhook',\n  bodyParser.raw\u0028{ type: 'application\u002Fjson' }\u0029,\n  async \u0028req, res\u0029 =\u003E {\n    \u002F\u002F Retrieve the event by verifying the signature using the raw body and secret.\n    let event;\n\n    try {\n      event = stripe.webhooks.constructEvent\u0028\n        req.body,\n        req.headers['stripe-signature'],\n        process.env.STRIPE_WEBHOOK_SECRET\n      \u0029;\n    } catch \u0028err\u0029 {\n      console.log\u0028err\u0029;\n      console.log\u0028\u0060⚠️  Webhook signature verification failed.\u0060\u0029;\n      console.log\u0028\n        \u0060⚠️  Check the env file and enter the correct webhook secret.\u0060\n      \u0029;\n      return res.sendStatus\u0028400\u0029;\n    }\n    \u002F\u002F Extract the object from the event.\n    const dataObject = event.data.object;\n\n    \u002F\u002F Handle the event\n    \u002F\u002F Review important events for Billing webhooks\n    \u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n    \u002F\u002F Remove comment to see the various objects sent for this sample\n    switch \u0028event.type\u0029 {\n      case 'invoice.paid':\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate limits.\n        break;\n      case 'invoice.payment_failed':\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F  an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case 'customer.subscription.deleted':\n        if \u0028event.request \u0021= null\u0029 {\n          \u002F\u002F handle a subscription canceled by your request\n          \u002F\u002F from above.\n        } else {\n          \u002F\u002F handle subscription canceled automatically based\n          \u002F\u002F upon your subscription settings.\n        }\n        break;\n      default:\n      \u002F\u002F Unexpected event type\n    }\n    res.sendStatus\u0028200\u0029;\n  }\n\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleWebhook\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  b, err := ioutil.ReadAll\u0028r.Body\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"ioutil.ReadAll: %v\", err\u0029\n    return\n  }\n\n  event, err := webhook.ConstructEvent\u0028b, r.Header.Get\u0028\"Stripe-Signature\"\u0029, os.Getenv\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"webhook.ConstructEvent: %v\", err\u0029\n    return\n  }\n\n  if event.Type == \"invoice.paid\" {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    return\n  }\n\n  if event.Type == \"invoice.payment_failed\" {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    return\n  }\n\n  if event.Type == \"customer.subscription.deleted\" {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it. {\n    return\n  }\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"webhook\"\u0029]\npublic async Task\u003CIActionResult\u003E Webhook\u0028\u0029\n{\n  var json = await new StreamReader\u0028HttpContext.Request.Body\u0029.ReadToEndAsync\u0028\u0029;\n  Event stripeEvent;\n  try\n  {\n    stripeEvent = EventUtility.ConstructEvent\u0028\n      json,\n      Request.Headers[\"Stripe-Signature\"],\n      this.options.Value.WebhookSecret\n    \u0029;\n    Console.WriteLine\u0028\u0024\"Webhook notification with type: {stripeEvent.Type} found for {stripeEvent.Id}\"\u0029;\n  }\n  catch \u0028Exception e\u0029\n  {\n    Console.WriteLine\u0028\u0024\"Something failed {e}\"\u0029;\n    return BadRequest\u0028\u0029;\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.paid\"\u0029\n  {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.payment_failed\"\u0029\n  {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n  }\n\n  if \u0028stripeEvent.Type == \"customer.subscription.deleted\"\u0029\n  {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it.\n  }\n  return Ok\u0028\u0029;\n}\n"]}]}}],"codeTabGroupID":"codetab_d0d51fe4f505be929e294a6308ddd11b44d311bb"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["During development, use the Stripe CLI to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["observe webhooks and forward them to your application"]},". Run the following in a new terminal while your development app is running:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"bash","title":"curl"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["  stripe listen --forward-to localhost:4242\u002Fwebhook\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For production, set up a webhook endpoint URL in the Dashboard, or use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fwebhook_endpoints"},"children":["Webhook Endpoints API"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You’ll listen to a couple of events to complete the remaining steps in this guide. See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-events"},"children":["Subscription events"]}," for more details about subscription-specific webhooks."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"provision-access","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Provision access to your service","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Now that the subscription is active, give your user access to your service.  To do this, listen to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.created"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]},", and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," events.  These events pass a subscription object which contains a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"status"},"children":[]}," field indicating whether the subscription is active, past due, or canceled.  See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-lifecycle"},"children":["the subscription lifecycle"]}," for a complete list of statuses."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your webhook handler:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Verify the subscription status.  If it’s ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"active"},"children":[]}," then your user has paid for your product."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Check the product the customer subscribed to and grant access to your service. Checking the product instead of the price gives you more flexibility if you need to change the pricing or billing interval."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Store the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"product.id"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.status"},"children":[]}," in your database along with the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.id"},"children":[]}," you already saved.  Check this record when determining which features to enable for the user in your application."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The state of a subscription might change at any point during its lifetime, even if your application does not directly make any calls to Stripe.  For example, a renewal might fail due to an expired credit card, which puts the subscription into a past due state.  Or, if you implement the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]},", a user might cancel their subscription without directly visiting your application.  Implementing your handler correctly keeps your application state in sync with Stripe."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"cancel-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Cancel the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["It’s common to allow customers to cancel their subscriptions. This example adds a cancellation option to the account settings page."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The example collects the subscription ID on the frontend, but your application can get this information from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"Image","attributes":{"src":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-subscriptions-guide-account-settings.6559626ba4b434826a67abfea165e097.png","alt":"Sample subscription cancelation interface.","width":60},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Account settings with the ability to cancel the subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"SubscriptionView.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["fun cancelSubscription\u0028subscriptionId: String\u0029: SubscriptionResponse? {\n    val body = JSONObject\u0028\u0029.put\u0028\"subscriptionId\", subscriptionId\u0029.toString\u0028\u0029\n        .toRequestBody\u0028\"application\u002Fjson\".toMediaType\u0028\u0029\u0029\n    val request =\n        Request.Builder\u0028\u0029.url\u0028\"http:\u002F\u002F10.0.2.2:4567\u002Fcancel-subscription\"\u0029.post\u0028body\u0029.build\u0028\u0029\n    OkHttpClient\u0028\u0029.newCall\u0028request\u0029.execute\u0028\u0029.use { response -\u003E\n        if \u0028response.isSuccessful\u0029 {\n            return Gson\u0028\u0029.fromJson\u0028response.body\u0021\u0021.string\u0028\u0029, SubscriptionResponse::class.java\u0029\n        }\n    }\n    return null\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your app to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcancel-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcancel-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  deleted_subscription = Stripe::Subscription.cancel\u0028data['subscriptionId']\u0029\n\n  deleted_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcancel-subscription', methods=['POST']\u0029\ndef cancelSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n         # Cancel the subscription by deleting it\n        deletedSubscription = stripe.Subscription.delete\u0028data['subscriptionId']\u0029\n        return jsonify\u0028deletedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\n    \u0024json-\u003EsubscriptionId\n  \u0029;\n  \u0024subscription-\u003Edelete\u0028\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'subscription' =\u003E \u0024subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n      \"\u002Fcancel-subscription\",\n      \u0028request, response\u0029 -\u003E {\n        response.type\u0028\"application\u002Fjson\"\u0029;\n        \u002F\u002F Set the default payment method on the customer\n        CancelPostBody postBody = gson.fromJson\u0028\n          request.body\u0028\u0029,\n          CancelPostBody.class\n        \u0029;\n\n        Subscription subscription = Subscription.retrieve\u0028\n          postBody.getSubscriptionId\u0028\u0029\n        \u0029;\n\n        Subscription deletedSubscription = subscription.cancel\u0028\u0029;\n        return deletedSubscription.toJson\u0028\u0029;\n      }\n    \u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcancel-subscription', async \u0028req, res\u0029 =\u003E {\n  \u002F\u002F Delete the subscription\n  const deletedSubscription = await stripe.subscriptions.del\u0028\n    req.body.subscriptionId\n  \u0029;\n  res.send\u0028deletedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCancelSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n  s, err := subscription.Cancel\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Cancel: %v\", err\u0029\n    return\n  }\n  writeJSON\u0028w, s\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"CancelSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class CancelSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"cancel-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E CancelSubscription\u0028[FromBody] CancelSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Cancel\u0028req.Subscription, null\u0029;\n    return subscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_23c7478f8e9b8a0cd6a2af01f0a0c4f9e497345a"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your backend receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," event."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After the subscription is canceled, update your database to remove the Stripe subscription ID you previously stored, and limit access to your service."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When a subscription is canceled, it can’t be reactivated. Instead, collect updated billing information from your customer, update their default payment method, and create a new subscription with their existing customer record."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"test","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Test your integration","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Ftesting-scenarios.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"test-payment-methods"},"children":["Test payment methods"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the following table to test different payment methods and scenarios."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Payment method"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Scenario"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["How to test"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"900123456"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},". The confirmed PaymentIntent initially transitions to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},", then transitions to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment fails with an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"account_closed"},"children":[]}," error code."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"111111113"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment succeeds and does not require authentication."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4242 4242 4242 4242"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment requires ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["authentication"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0025 0000 3155"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card is declined with a decline code like ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"insufficient_funds"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0000 0000 9995"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with SEPA Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT321904300235473204"},"children":[]},". The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment intent status transition from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT861904300235473202"},"children":[]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"monitor-events"},"children":["Monitor events"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["subscription webhooks"]},". You can view events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fevents"},"children":["Dashboard"]},"\u0029 or with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For more details, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Ftesting"},"children":["testing your Billing integration"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"change-price","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Let customers change their plans","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To let your customers change their subscription, collect the price ID of the option they want to change to. Then send the new price ID from the app to a backend endpoint. This example also passes the subscription ID, but you can retrieve it from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"UpdateSubscription.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["fun updateSubscription\u0028subscriptionId: String, priceId: String\u0029: SubscriptionResponse? {\n    val body = JSONObject\u0028\u0029\n        .put\u0028\"priceId\", priceId\u0029\n        .put\u0028\"subscriptionId\", subscriptionId\u0029.toString\u0028\u0029\n        .toRequestBody\u0028\"application\u002Fjson\".toMediaType\u0028\u0029\u0029\n    val request =\n        Request.Builder\u0028\u0029.url\u0028\"http:\u002F\u002F10.0.2.2:4567\u002Fupdate-subscription\"\u0029.post\u0028body\u0029.build\u0028\u0029\n    OkHttpClient\u0028\u0029.newCall\u0028request\u0029.execute\u0028\u0029.use { response -\u003E\n        if \u0028response.isSuccessful\u0029 {\n            \u002F\u002F It should include the client_secret, as discussed below.\n            return Gson\u0028\u0029.fromJson\u0028response.body\u0021\u0021.string\u0028\u0029, SubscriptionResponse::class.java\u0029\n        }\n    }\n    return null\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call, passing the subscription ID and the new price ID. The subscription is now Premium, at 15 USD per month, instead of Basic at 5 USD per month."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fupdate-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fupdate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  updated_subscription =\n    Stripe::Subscription.update\u0028\n      data['subscriptionId'],\n      cancel_at_period_end: false,\n      items: [\n        { id: subscription.items.data[0].id, price: 'price_H1NlVtpo6ubk0m' }\n      ]\n    \u0029\n\n  updated_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fupdate-subscription', methods=['POST']\u0029\ndef updateSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        updatedSubscription = stripe.Subscription.modify\u0028\n            data['subscriptionId'],\n            cancel_at_period_end=False,\n            items=[{\n                'id': subscription['items']['data'][0].id,\n                'price': 'price_H1NlVtpo6ubk0m',\n            }]\n        \u0029\n        return jsonify\u0028updatedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024updated_subscription = \u0024stripe-\u003Esubscriptions-\u003Eupdate\u0028\u0024json-\u003EsubscriptionId, [\n    'items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'price' =\u003E 'price_H1NlVtpo6ubk0m',\n      ],\n    ],\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'updatedSubscription' =\u003E \u0024updated_subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fupdate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    UpdatePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpdatePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    SubscriptionUpdateParams params = SubscriptionUpdateParams\n      .builder\u0028\u0029\n      .addItem\u0028\n        SubscriptionUpdateParams\n          .Item.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setPrice\u0028\"price_H1NlVtpo6ubk0m\"\u0029\n          .build\u0028\u0029\n      \u0029\n      .setCancelAtPeriodEnd\u0028false\u0029\n      .build\u0028\u0029;\n\n    subscription.update\u0028params\u0029;\n    return subscription.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fupdate-subscription', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n  const updatedSubscription = await stripe.subscriptions.update\u0028\n    req.body.subscriptionId,\n    {\n      cancel_at_period_end: false,\n      items: [\n        {\n          id: subscription.items.data[0].id,\n          price: \"price_H1NlVtpo6ubk0m\",\n        },\n      ],\n    }\n  \u0029;\n\n  res.send\u0028updatedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleUpdateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n\n  params := \u0026stripe.SubscriptionParams{\n    CancelAtPeriodEnd: stripe.Bool\u0028false\u0029,\n    Items: []*stripe.SubscriptionItemsParams{{\n      ID:    stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Price: stripe.String\u0028\"price_H1NlVtpo6ubk0m\"\u0029,\n    }},\n  }\n\n  updatedSubscription, err := subscription.Update\u0028req.SubscriptionID, params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Update: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, updatedSubscription\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"UpdateSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class UpdateSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"update-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E UpdateSubscription\u0028[FromBody] UpdateSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var options = new SubscriptionUpdateOptions\n    {\n        CancelAtPeriodEnd = false,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Price = \"price_H1NlVtpo6ubk0m\",\n            }\n        }\n    };\n    var updatedSubscription = service.Update\u0028req.Subscription, options\u0029;\n    return updatedSubscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_7ab4e8df4b9fa3ff59eefcc835c1d41fe07265f6"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your application receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]}," event."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"preview-invoice","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Preview a price change","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When your customer changes their subscription, there’s often an adjustment to the amount they owe, known as a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["proration"]},". You can use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fupcoming"},"children":["upcoming invoice endpoint"]}," to display the adjusted amount to your customers."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["From the app, pass the upcoming invoice details to a back-end endpoint."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"RetrieveUpcomingInvoice.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["fun retrieveUpcomingInvoice\u0028\n    subscriptionId: String,\n    priceId: String,\n    newPriceId: String\n\u0029: InvoiceResponse? {\n    val body = JSONObject\u0028\u0029\n        .put\u0028\"priceId\", priceId\u0029\n        .put\u0028\"subscriptionId\", subscriptionId\u0029\n        .put\u0028\"newPriceId\", newPriceId\u0029.toString\u0028\u0029\n        .toRequestBody\u0028\"application\u002Fjson\".toMediaType\u0028\u0029\u0029\n    val request =\n        Request.Builder\u0028\u0029.url\u0028\"http:\u002F\u002F10.0.2.2:4567\u002Fretrieve-upcoming-invoice\"\u0029.post\u0028body\u0029.build\u0028\u0029\n    OkHttpClient\u0028\u0029.newCall\u0028request\u0029.execute\u0028\u0029.use { response -\u003E\n        if \u0028response.isSuccessful\u0029 {\n            \u002F\u002F InvoiceResponse is a data class conforming to the expected response from your backend\n            return Gson\u0028\u0029.fromJson\u0028response.body\u0021\u0021.string\u0028\u0029, InvoiceResponse::class.java\u0029\n        }\n    }\n    return null\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-upcoming-invoice.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-upcoming-invoice' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  invoice =\n    Stripe::Invoice.upcoming\u0028\n      customer: data['customerId'],\n      subscription: data['subscriptionId'],\n      subscription_items: [\n        { id: subscription.items.data[0].id, deleted: true },\n        { price: ENV[data['newPriceId']], deleted: false }\n      ]\n    \u0029\n\n  invoice.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-upcoming-invoice', methods=['POST']\u0029\ndef retrieveUpcomingInvoice\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        # Retrieve the subscription\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        # Retrieve the invoice\n        invoice = stripe.Invoice.upcoming\u0028\n            customer=data['customerId'],\n            subscription=data['subscriptionId'],\n            subscription_items=[\n                {\n                    'id': subscription['items']['data'][0].id,\n                    'deleted': True,\n                },\n                {\n                    'price': 'price_H1NlVtpo6ubk0m',\n                    'deleted': False,\n                }\n            ],\n        \u0029\n        return jsonify\u0028invoice\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024invoice = \u0024stripe-\u003Einvoices-\u003Eupcoming\u0028[\n    'customer' =\u003E \u0024json-\u003EcustomerId,\n    'subscription_prorate' =\u003E true,\n    'subscription' =\u003E \u0024json-\u003EsubscriptionId,\n    'subscription_items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'deleted' =\u003E true\n      ],\n      [\n        'price' =\u003E \u0024json-\u003EnewPriceId,\n        'deleted' =\u003E false\n      ],\n    ]\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'invoice' =\u003E \u0024invoice,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-upcoming-invoice\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    UpcomingInvoicePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpcomingInvoicePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    InvoiceUpcomingParams invoiceParams = InvoiceUpcomingParams\n      .builder\u0028\u0029\n      .setCustomer\u0028postBody.getCustomerId\u0028\u0029\u0029\n      .setSubscription\u0028postBody.getSubscriptionId\u0028\u0029\u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setDeleted\u0028true\u0029\n          .build\u0028\u0029\n      \u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setPrice\u0028dotenv.get\u0028postBody.getNewPriceId\u0028\u0029.toUpperCase\u0028\u0029\u0029\u0029\n          .build\u0028\u0029\n      \u0029\n      .build\u0028\u0029;\n\n    Invoice invoice = Invoice.upcoming\u0028invoiceParams\u0029;\n\n    return invoice.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-upcoming-invoice', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n\n  const invoice = await stripe.invoices.retrieveUpcoming\u0028{\n    subscription_prorate: true,\n    customer: req.body.customerId,\n    subscription: req.body.subscriptionId,\n    subscription_items: [\n      {\n        id: subscription.items.data[0].id,\n        deleted: true,\n      },\n      {\n        \u002F\u002F This price ID is the price you want to change the subscription to.\n        price: 'price_H1NlVtpo6ubk0m',\n        deleted: false,\n      },\n    ],\n  }\u0029;\n  res.send\u0028invoice\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveUpcomingInvoice\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    CustomerID     string \u0060json:\"customerId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n  params := \u0026stripe.InvoiceParams{\n    Customer:     stripe.String\u0028req.CustomerID\u0029,\n    Subscription: stripe.String\u0028req.SubscriptionID\u0029,\n    SubscriptionItems: []*stripe.SubscriptionItemsParams{{\n      ID:      stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Deleted: stripe.Bool\u0028true\u0029,\n    }, {\n      Price:   stripe.String\u0028os.Getenv\u0028req.NewPriceID\u0029\u0029,\n      Deleted: stripe.Bool\u0028false\u0029,\n    }},\n  }\n  in, err := invoice.GetNext\u0028params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"invoice.GetNext: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, in\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveUpcomingInvoiceRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveUpcomingInvoiceRequest\n{\n    [JsonProperty\u0028\"customerId\"\u0029]\n    public string Customer { get; set; }\n\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-upcoming-invoice\"\u0029]\npublic ActionResult\u003CInvoice\u003E RetrieveUpcomingInvoice\u0028[FromBody] RetrieveUpcomingInvoiceRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var invoiceService = new InvoiceService\u0028\u0029;\n    var options = new UpcomingInvoiceOptions\n    {\n        Customer = req.Customer,\n        Subscription = req.Subscription,\n        SubscriptionItems = new List\u003CInvoiceSubscriptionItemOptions\u003E\n        {\n            new InvoiceSubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Deleted = true,\n            },\n            new InvoiceSubscriptionItemOptions\n            {\n                \u002F\u002F TODO: This should be Price, but isn't in Stripe.net yet.\n                Plan = Environment.GetEnvironmentVariable\u0028req.NewPrice\u0029,\n                Deleted = false,\n            },\n        }\n    };\n    Invoice upcoming = invoiceService.Upcoming\u0028options\u0029;\n    return upcoming;\n}\n"]}]}}],"codeTabGroupID":"codetab_7f975c16372b724ce83f59a6b53ed89c36ec9861"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"display-payment-method","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Display the customer payment method","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Displaying the brand and last four digits of your customer’s card can help them know which card is being charged, or if they need to update their payment method."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the front end, send the payment method ID to a back-end endpoint that retrieves the payment method details."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"kotlin","filename":"RetrieveCustomerPaymentMethod.kt","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["fun retrieveCustomerPaymentMethod\u0028paymentMethodId: String\u0029: PaymentMethodResponse? {\n    val body = JSONObject\u0028\u0029\n        .put\u0028\"paymentMethodId\", paymentMethodId\u0029.toString\u0028\u0029\n        .toRequestBody\u0028\"application\u002Fjson\".toMediaType\u0028\u0029\u0029\n    val request =\n        Request.Builder\u0028\u0029.url\u0028\"http:\u002F\u002F10.0.2.2:4567\u002Fretrieve-customer-payment-method\"\u0029.post\u0028body\u0029\n            .build\u0028\u0029\n    OkHttpClient\u0028\u0029.newCall\u0028request\u0029.execute\u0028\u0029.use { response -\u003E\n        if \u0028response.isSuccessful\u0029 {\n            \u002F\u002F PaymentMethodResponse is a data class conforming to the expected response from your backend\n            return Gson\u0028\u0029.fromJson\u0028response.body\u0021\u0021.string\u0028\u0029, PaymentMethodResponse::class.java\u0029\n        }\n    }\n    return null\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the back end, define the endpoint for your app to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-customer-payment-method.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-customer-payment-method' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  payment_method = Stripe::PaymentMethod.retrieve\u0028data['paymentMethodId']\u0029\n\n  payment_method.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-customer-payment-method', methods=['POST']\u0029\ndef retrieveCustomerPaymentMethod\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        paymentMethod = stripe.PaymentMethod.retrieve\u0028\n            data['paymentMethodId'],\n        \u0029\n        return jsonify\u0028paymentMethod\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024payment_method = \u0024stripe-\u003EpaymentMethods-\u003Eretrieve\u0028\u0024json-\u003EpaymentMethodId\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'paymentMethod' =\u003E \u0024payment_method,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-customer-payment-method\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    PaymentMethodBody paymentMethodBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      PaymentMethodBody.class\n    \u0029;\n\n    PaymentMethod paymentMethod = PaymentMethod.retrieve\u0028\n      paymentMethodBody.getPaymentMethodId\u0028\u0029\n    \u0029;\n    return paymentMethod.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-customer-payment-method', async \u0028req, res\u0029 =\u003E {\n  const paymentMethod = await stripe.paymentMethods.retrieve\u0028\n    req.body.paymentMethodId\n  \u0029;\n\n  res.send\u0028paymentMethod\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveCustomerPaymentMethod\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    PaymentMethodID string \u0060json:\"paymentMethodId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  pm, err := paymentmethod.Get\u0028req.PaymentMethodID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"paymentmethod.Get: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, pm\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveCustomerPaymentMethodRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveCustomerPaymentMethodRequest\n{\n    [JsonProperty\u0028\"paymentMethodId\"\u0029]\n    public string PaymentMethod { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-customer-payment-method\"\u0029]\npublic ActionResult\u003CPaymentMethod\u003E RetrieveCustomerPaymentMethod\u0028[FromBody] RetrieveCustomerPaymentMethodRequest req\u0029\n{\n    var service = new PaymentMethodService\u0028\u0029;\n    var paymentMethod = service.Get\u0028req.PaymentMethod\u0029;\n    return paymentMethod;\n}\n"]}]}}],"codeTabGroupID":"codetab_9ced3cdc5383753ed362275de5f5b21df92e9a57"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Example response:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"pm_1GcbHY2eZvKYlo2CoqlVxo42\",\n  \"object\": \"payment_method\",\n  \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\": null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\": null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n    \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\": null,\n      \"cvc_check\": \"pass\"\n    },\n    \"country\": \"US\",\n    \"exp_month\": 8,\n    \"exp_year\": 2021,\n    \"fingerprint\": \"Xt5EWLLDS7FJjR1c\",\n    \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\": \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n    \"wallet\": null\n  },\n  \"created\": 1588010536,\n  \"customer\": \"cus_HAxB7dVQxhoKLh\",\n  \"livemode\": false,\n  \"metadata\": {},\n  \"type\": \"card\"\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["We recommend that you save the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"last4"},"children":[]}," in your database, for example, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," as ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripeCustomerPaymentMethodId"},"children":[]}," in your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"users"},"children":[]}," collection or table. You can optionally store ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_month"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_year"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fingerprint"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"billing_details"},"children":[]}," as needed. This is to limit the number of calls you make to Stripe—for both performance efficiency and to avoid possible rate limiting."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Felements\u002Fdisclosure-cookies.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"disclose-cookies","beta":false,"collapsable":false,"numbered":false,"optional":false,"title":"Disclose Stripe to your customers","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe collects information on customer interactions with Elements to provide services to you, prevent fraud, and improve its services. This includes using cookies and IP addresses to identify which Elements a customer saw during a single checkout session. You’re responsible for disclosing and obtaining all rights and consents necessary for Stripe to use data in these ways. For more information, visit our ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.com\u002Flegal\u002Fprivacy-center#as-a-business-user-what-notice-do-i-provide-to-my-end-customers-about-stripe"},"children":["privacy center"]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Page","attributes":{"id":"subscription-elements-react-native","prefs":{"platform":"react-native"},"title":"React Native"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscription-mobile.md","variables":{"platform":"react-native"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityCallout","attributes":{"image":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-collect-payment-details-mobile.b11cdc8fa8952d753238df4df3375fa6.png","imageAlt":"Fixed-price subscription page with Stripe Checkout","isHorizontal":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"ComplexityRating","attributes":{"rating":3,"color":"purple"},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Customize with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api"},"children":["Appearance API"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use this guide to learn how to sell fixed-price ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"subscriptions"},"children":["subscriptions"]},". You’ll use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment?platform=ios"},"children":["Mobile Payment Element"]}," to create a custom payment form that you embed in your app."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re selling digital products or services that are consumed within your app \u0028for example, subscriptions, in-game currencies, game levels, access to premium content, or unlocking a full version\u0029, you must use Apple’s in-app purchase APIs. This rule has some exceptions, including one-to-one personal services and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fsupport.stripe.com\u002Fquestions\u002Fchanges-to-mobile-app-store-rules"},"children":["apps based in specific regions"]},". See the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fapp-store\u002Freview\u002Fguidelines\u002F#payments"},"children":["App Store review guidelines"]}," for more information."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"build","level":2,"anchored":true,"toc":"Build your subscription "},"children":["Build your subscription "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This guide shows you how to:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Model your business by building a product catalog."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create a registration process to add customers."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Create subscriptions and collect payment information."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Test and monitor the status of payments and subscriptions."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Let customers change their plan or cancel the subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":2,"anchored":true,"toc":"How to model it on Stripe","id":"how-to-model-it-on-stripe"},"children":["How to model it on Stripe"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscriptions"]}," simplify your billing by automatically creating ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"invoices"},"children":["Invoices"]}," and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntents"]}," for you.  To create and activate a subscription, you need to first create a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products"},"children":["Product"]}," to model what is being sold, and a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["Price"]}," which determines the interval and amount to charge. You also need a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}," to store ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"payment-methods"},"children":["PaymentMethods"]}," used to make each recurring payment."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fdiagrams\u002Fbilling-api-objects.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Diagram","attributes":{"type":"entity","description":"A diagram illustrating common billing objects and their relationships","size":"xlarge","elements":[{"id":"subscription","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject"},"children":["Subscription object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"sub_1234"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"open"},"children":[]},"handle":null},{"name":"latest_invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"invoiceId"},{"name":"default_payment_method","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":"paymentMethodId"},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":"customerId"},{"name":"items.data.price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":"priceId"},{"name":"pending_setup_intent","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"seti_1234"},"children":[]},"handle":"setupIntentId"}],"handles":["invoiceId","paymentMethodId","customerId","priceId","setupIntentId"]},"position":{"x":0,"y":0}},{"id":"invoice","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fobject"},"children":["Invoice object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":null},{"name":"currency","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"usd"},"children":[]},"handle":null},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"draft"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_method","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods\u002Fobject"},"children":["PaymentMethod object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pm_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"card"},"children":[]},"handle":null},{"name":"card[brand]","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"visa"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"customer","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Jenny Rosen"},"children":[]},"handle":null},{"name":"email","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"jennyrosen@example.com"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"price","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"product","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":"productId"},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":["productId"]},"position":{"x":0,"y":0}},{"id":"product","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product object"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"prod_1234"},"children":[]},"handle":null},{"name":"active","value":"true","handle":null},{"name":"name","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Widget, blue"},"children":[]},"handle":null},{"name":"default_price","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_1234"},"children":[]},"handle":null},{"name":"type","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"recurring"},"children":[]},"handle":null}],"handles":[]},"position":{"x":0,"y":0}},{"id":"payment_intent","type":"entity","data":{"header":{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},"rows":[{"name":"id","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pi_1234"},"children":[]},"handle":null},{"name":"amount","value":"1000","handle":null},{"name":"customer","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cus_1234"},"children":[]},"handle":null},{"name":"invoice","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"in_1234"},"children":[]},"handle":"pi_invoiceId"},{"name":"status","value":{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},"handle":null}],"handles":["pi_invoiceId"]},"position":{"x":0,"y":0}},{"id":"edge-invoiceId-invoice-auto-auto","source":"subscription","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"invoiceId"},{"id":"edge-paymentMethodId-payment_method-auto-auto","source":"subscription","target":"payment_method","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"paymentMethodId"},{"id":"edge-customerId-customer-auto-auto","source":"subscription","target":"customer","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"customerId"},{"id":"edge-priceId-price-auto-auto","source":"subscription","target":"price","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"priceId"},{"id":"edge-productId-product-auto-auto","source":"price","target":"product","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"productId"},{"id":"edge-pi_invoiceId-invoice-auto-auto","source":"payment_intent","target":"invoice","label":"","arrowHeadType":"arrowclosed","type":"smoothstep","labelStyle":{"fontFamily":"Menlo"},"labelBgStyle":{"fill":"#F6F8FA","filter":"drop-shadow\u0028-1px 1px 1px rgb\u002860 66 87 \u002F 8%\u0029\u0029"},"sourceHandle":"pi_invoiceId"}],"positioning":"auto"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Collapsable","attributes":{"open":false,"heading":"API object definitions"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fapi-definitions.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{"width":35},"children":["Resource "]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Definition"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcustomers"},"children":["Customer"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer who purchases a subscription. Use the Customer object associated with a subscription to make and track recurring charges and to manage the products that they subscribe to."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Factive-entitlement"},"children":["Entitlement"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s access to a feature included in a service product that they subscribe to. When you create a subscription for a customer’s recurring purchase of a product, an active entitlement is automatically created for each feature associated with that product. When a customer accesses your services, use their active entitlements to enable the features included in their subscription."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fentitlements\u002Ffeature"},"children":["Feature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a function or ability that your customers can access when they subscribe to a service product. You can include features in a product by creating ProductFeatures."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices"},"children":["Invoice"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A statement of amounts a customer owes that tracks payment statuses from draft through paid or otherwise finalized. Subscriptions automatically generate invoices."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_intents"},"children":["PaymentIntent"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A way to build dynamic payment flows. A PaymentIntent tracks the lifecycle of a customer checkout flow and triggers additional authentication steps when required by regulatory mandates, custom Radar fraud rules, or redirect-based payment methods. Invoices automatically create PaymentIntents."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fpayment_methods"},"children":["PaymentMethod"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A customer’s payment instruments that they use to pay for your products. For example, you can store a credit card on a Customer object and use it to make recurring payments for that customer. Typically used with the Payment Intents or Setup Intents APIs."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices"},"children":["Price"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Defines the unit price, currency, and billing cycle for a product."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts"},"children":["Product"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["A good or service that your business sells. A service product can include one or more features."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproduct-feature"},"children":["ProductFeature"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a single feature’s inclusion in a single product. Each product is associated with a ProductFeature for each feature that it includes, and each feature is associated with a ProductFeature for each product that includes it."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions"},"children":["Subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Represents a customer’s scheduled recurring purchase of a product. Use a subscription to collect payments and provide repeated delivery of or continuous access to a product."]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Here’s an example of how products, features, and entitlements work together. Imagine that you want to set up a subscription service that offers two tiers: a standard product with basic functionality, and an advanced product that adds extended functionality."]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two features: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["You create two products: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the standard product, you create one ProductFeature that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"standard_product"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For the advanced product, you create two ProductFeatures: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]}," and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"advanced_product"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["A customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]},", subscribes to the standard product. When you create the subscription, Stripe automatically creates an Entitlement that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"first_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Another customer, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]},", subscribes to the advanced product. When you create the Subscription, Stripe automatically creates two Entitlements: one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"basic_features"},"children":[]},", and one that associates ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"second_customer"},"children":[]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"extended_features"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can determine which features to provision for a customer by ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements#entitlements"},"children":["retrieving their active entitlements or listening to the Active Entitlement Summary webhook"]},". You don’t have to retrieve their subscriptions, products, and features."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"install-setup","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Set up Stripe","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Freact-native-install-sdk.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-react-native"},"children":["React Native SDK"]}," is open source and fully documented. Internally, it uses the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-ios"},"children":["native iOS"]}," and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-android"},"children":["Android"]}," SDKs. To install Stripe’s React Native SDK, run one of the following commands in your project’s directory \u0028depending on which package manager you use\u0029:"]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"install-react-native-yarn","title":"yarn","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"install-react-native-yarn","title":"yarn"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["yarn add @stripe\u002Fstripe-react-native\n"]}]}},{"id":"install-react-native-npm","title":"npm","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"install-react-native-npm","title":"npm"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["npm install @stripe\u002Fstripe-react-native\n"]}]}}]},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next, install some other necessary dependencies:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For iOS, navigate to the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["ios"]}," directory and run ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"pod install"},"children":[]}," to ensure that you also install the required native dependencies."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["For Android, there are no more dependencies to install."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"stripe-initialization"},"children":["Stripe initialization"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To initialize Stripe in your React Native app, either wrap your payment screen with the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"StripeProvider"},"children":[]}," component, or use the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"initStripe"},"children":[]}," initialization method. Only the API ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#obtain-api-keys"},"children":["publishable key"]}," in ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"publishableKey"},"children":[]}," is required. The following example shows how to initialize Stripe using the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"StripeProvider"},"children":[]}," component."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import { StripeProvider } from '@stripe\u002Fstripe-react-native';\n\nfunction App\u0028\u0029 {\n  return \u0028\n    \u003CStripeProvider\n      publishableKey=\"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"publishable","value":"pk_test_TYooMQauvdEDq54NiTphI7jx"},"children":[]},"\"\n      urlScheme=\"your-url-scheme\" \u002F\u002F required for 3D Secure and bank redirects\n      merchantIdentifier=\"merchant.com.{{YOUR_APP_NAME}}\" \u002F\u002F required for Apple Pay\n    \u003E\n      \u002F\u002F Your app code here\n    \u003C\u002FStripeProvider\u003E\n  \u0029;\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use your API keys for ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#obtain-api-keys"},"children":["test mode"]}," while you test and develop, and your ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["live mode"]}," keys when you publish your app."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["And then install the Stripe CLI. The CLI provides webhook testing and you can run it to make API calls to Stripe.  This guide shows how to use the CLI to set up a pricing model in a later section."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fstripe-cli-install.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"StripeCliInstall","attributes":{"sectionMap":{"mac":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Install Homebrew to run this command: https:\u002F\u002Fbrew.sh\u002F\nbrew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060mac-os\u0060 tar.gz file of your cpu architecture type from https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Tar the downloaded file\ntar -xvf stripe_[X.X.X]_mac-os_[ARCH_TYPE].tar.gz\n\n# Optionally, install the binary in a location where you can execute it globally \u0028for example, \u0060\u002Fusr\u002Flocal\u002Fbin\u0060\u0029.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_bfcad54629d52f79a55410a10b6600ac8d2a665d"},"children":[]}],"linux":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"homebrew","title":"homebrew","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"homebrew","title":"homebrew"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["brew install stripe\u002Fstripe-cli\u002Fstripe\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"apt","title":"apt","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"apt","title":"apt"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"mistake"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On April 5th, 2024, we changed Stripe CLI’s GPG key to install the Stripe CLI through apt. If you configured the public key before April 5th, you’ll encounter this error:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable InRelease: The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Failed to fetch https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local\u002Fdists\u002Fstable\u002FInRelease  The following signatures were invalid: EXPKEYSIG DEEBD57F917C83E3 Stripe \u003Csecurity@stripe.com\u003E\nW: Some index files failed to download. They have been ignored, or old ones used instead\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To resolve this error, refresh Stripe’s GPG key by following step 1."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To install the Stripe CLI on Debian and Ubuntu-based distributions:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add Stripe CLI's GPG key to the apt sources keyring:\ncurl -s https:\u002F\u002Fpackages.stripe.dev\u002Fapi\u002Fsecurity\u002Fkeypair\u002Fstripe-cli-gpg\u002Fpublic | gpg --dearmor | sudo tee \u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg\n\n# 2. Add CLI's apt repository to the apt sources list:\necho \"deb [signed-by=\u002Fusr\u002Fshare\u002Fkeyrings\u002Fstripe.gpg] https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-debian-local stable main\" | sudo tee -a \u002Fetc\u002Fapt\u002Fsources.list.d\u002Fstripe.list\n\n# 3. Update the package list\nsudo apt update\n\n# 4. Install the CLI\nsudo apt install stripe\n\n# 5. Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"yum","title":"yum","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"yum","title":"yum"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Add CLI's yum repository to the yum sources list:\necho -e \"[Stripe]\\nname=stripe\\nbaseurl=https:\u002F\u002Fpackages.stripe.dev\u002Fstripe-cli-rpm-local\u002F\\nenabled=1\\ngpgcheck=0\" \u003E\u003E \u002Fetc\u002Fyum.repos.d\u002Fstripe.repo\n\n# 2. Install the CLI\nsudo yum install stripe\n"]}]}},{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Download the latest \u0060linux\u0060 tar.gz file from \u003Chttps:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\u003E\n\n# Unzip the file:\ntar -xvf stripe_X.X.X_linux_x86_64.tar.gz\n\n# Move \u0060.\u002Fstripe\u0060 to your execution path.\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}}],"codeTabGroupID":"codetab_58aa30da375f22c90c6974cc89fd9531c6978ce2"},"children":[]}],"windows":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"none","items":[{"id":"source","title":"Install from source","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"source","title":"Install from source"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# 1. Download the latest \u0060windows\u0060 zip file from\n# https:\u002F\u002Fgithub.com\u002Fstripe\u002Fstripe-cli\u002Freleases\u002Flatest\n\n# 2. Unzip the \u0060stripe_X.X.X_windows_x86_64.zip\u0060 file\n\n# 3. Run the unzipped \u0060.exe\u0060 file\n\n# Connect the CLI to your dashboard\nstripe login\n"]}]}},{"id":"scoop","title":"scoop","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"scoop","title":"scoop"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":false,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# See https:\u002F\u002Fscoop.sh\n\nscoop bucket add stripe https:\u002F\u002Fgithub.com\u002Fstripe\u002Fscoop-stripe-cli.git\n\nscoop install stripe\n"]}]}}],"codeTabGroupID":"codetab_02b0729429bd0e3865a8b5213471b8d84fb75449"},"children":[]}]}},"children":["For additional install options, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["Get started with the Stripe CLI"]},"."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-pricing-model","beta":false,"badges":["Stripe CLI or Dashboard"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the pricing model","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcreate-business-model.md","variables":{"payment_currency":"usd","stripe_cli_install_link":"#install-setup"}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create your ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"products-subs"},"children":["products"]}," and their ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"prices"},"children":["prices"]}," in the Dashboard or with the Stripe CLI."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. \u0028If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.\u0029"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In this example, each product bills at monthly intervals. The price for the Basic product is 5 ","USD",". The price for the Premium product is 15 ","USD","."]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"dashboard","title":"Dashboard","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Dashboard"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fproducts\u002Fcreate"},"children":["Add a product"]}," page and create two products. Add one price for each product, each with a monthly recurring billing period:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Premium product: Premium service with extra features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 15 ","USD"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Basic product: Basic service with minimum features"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":false,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Price: Standard pricing | 5 ","USD"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After you create the prices, record the price IDs so you can use them in other  steps. Price IDs look like this: ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"price_G0FvDp6vZvdwRZ"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you’re ready, use the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Copy to live mode"]}," button at the top right of the page to clone your product from ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys#test-live-modes"},"children":["test mode to live mode"]},"."]}]}},{"id":"stripe-cli","title":"Stripe CLI","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"title":"Stripe CLI"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you haven’t already, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["install the Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Next create the product objects:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium product\nstripe products create \\\n  --name=\"Billing Guide: Premium Service\" \\\n  --description=\"Premium service with extra features\"\n\n# Basic product\nstripe products create \\\n  --name=\"Billing Guide: Basic Service\" \\\n  --description=\"Basic service with minimum features\"\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the product ID for each product. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"prod_H94k5odtwJXMtQ\",\n  \"object\": \"product\",\n  \"active\": true,\n  \"attributes\": [\n\n  ],\n  \"created\": 1587577341,\n  \"description\": \"Premium service with extra features\",\n  \"images\": [\n\n  ],\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": \"Billing Guide: Premium Service\",\n  \"statement_descriptor\": null,\n  \"type\": \"service\",\n  \"unit_label\": null,\n  \"updated\": 1587577341\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the product IDs to create a price for each product. The ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"unit_amount"},"children":[]}," number is in cents, so ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"1500"},"children":[]}," = 15 ","USD",", for example."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["# Premium price\n  stripe prices create \\\n    -d product=prod_H94k5odtwJXMtQ \\\n    -d unit_amount=1500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n\n# Basic price\n  stripe prices create \\\n    -d product=prod_HGd6W1VUqqXGvr \\\n    -d unit_amount=500 \\\n    -d currency=","usd"," \\\n    -d \"recurring[interval]\"=month\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Record the price ID for each price so you can use them in subsequent steps. They look like this:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":2,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"price_HGd7M3DV3IMXkC\",\n  \"object\": \"price\",\n  \"product\": \"prod_HGd6W1VUqqXGvr\",\n  \"type\": \"recurring\",\n  \"currency\": \"","usd","\",\n  \"recurring\": {\n    \"aggregate_usage\": null,\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"active\": true,\n  \"billing_scheme\": \"per_unit\",\n  \"created\": 1589319695,\n  \"livemode\": false,\n  \"lookup_key\": null,\n  \"metadata\": {\n  },\n  \"nickname\": null,\n  \"unit_amount\": 1500,\n  \"unit_amount_decimal\": \"1500\",\n  \"tiers\": null,\n  \"tiers_mode\": null,\n  \"transform_quantity\": null\n}\n"]}]}}]},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-customer","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the customer","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe needs a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"customers"},"children":["customer"]}," for each subscription.  In your application frontend, collect any necessary information from your users and pass it to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you need to collect address details, the Address Element enables you to collect a shipping or billing address for your customers. For more information on the Address Element, visit the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Faddress-element"},"children":["Address Element"]}," page."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"RegisterView.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import React from 'react';\nimport {View, TextInput, StyleSheet, Button, Platform} from 'react-native';\n\nfunction RegisterView\u0028\u0029 {\n  const [email, setEmail] = React.useState\u0028''\u0029;\n\n  const createCustomer = async \u0028\u0029 =\u003E {\n    const apiEndpoint =\n      Platform.OS === 'ios' ? 'http:\u002F\u002Flocalhost:4242' : 'http:\u002F\u002F10.0.2.2:4567';\n    const response = await fetch\u0028\u0060\u0024{apiEndpoint}\u002Fcreate-customer\u0060, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application\u002Fjson',\n      },\n      body: JSON.stringify\u0028{\n        email: email,\n      }\u0029,\n    }\u0029;\n    if \u0028response.status === 200\u0029 {\n      const customer = await response.json\u0028\u0029;\n      console.log\u0028customer\u0029;\n    }\n  };\n\n  return \u0028\n    \u003CView\u003E\n      \u003CTextInput\n        style={styles.input}\n        placeholder=\"Email\"\n        value={email}\n        onChangeText={setEmail}\n      \u002F\u003E\n      \u003CButton\n        title=\"Register\"\n        onPress={async \u0028\u0029 =\u003E {\n          await createCustomer\u0028\u0029;\n        }}\n      \u002F\u003E\n    \u003C\u002FView\u003E\n  \u0029;\n}\n\nconst styles = StyleSheet.create\u0028{\n  input: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10,\n  },\n}\u0029;\n\nexport default RegisterView;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the server, create the Stripe customer object."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-customer.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodegenSnippet","attributes":{"generatedCodeBlocks":[{"lang":"curl","generatedCode":{"resources":"curl https:\u002F\u002Fapi.stripe.com\u002Fv1\u002Fcustomers \\\n  -u \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024:\" \\\n  -d email={{CUSTOMER_EMAIL}} \\\n  -d name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"cli","generatedCode":{"resources":"stripe customers create  \\\n  --email={{CUSTOMER_EMAIL}} \\\n  --name={{CUSTOMER_NAME}} \\\n  -d \"shipping[address][city]\"=Brothers \\\n  -d \"shipping[address][country]\"=US \\\n  -d \"shipping[address][line1]\"=\"27 Fredrick Ave\" \\\n  -d \"shipping[address][postal_code]\"=97712 \\\n  -d \"shipping[address][state]\"=CA \\\n  -d \"shipping[name]\"={{CUSTOMER_NAME}} \\\n  -d \"address[city]\"=Brothers \\\n  -d \"address[country]\"=US \\\n  -d \"address[line1]\"=\"27 Fredrick Ave\" \\\n  -d \"address[postal_code]\"=97712 \\\n  -d \"address[state]\"=CA"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"ruby","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.api_key = '\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\n\nStripe::Customer.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"python","generatedCode":{"resources":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nimport stripe\nstripe.api_key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nstripe.Customer.create\u0028\n  email=\"{{CUSTOMER_EMAIL}}\",\n  name=\"{{CUSTOMER_NAME}}\",\n  shipping={\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  address={\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n\u0029","services":"# Set your secret key. Remember to switch to your live secret key in production.\n# See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nclient = StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029\n\nclient.customers.create\u0028{\n  \"email\": \"{{CUSTOMER_EMAIL}}\",\n  \"name\": \"{{CUSTOMER_NAME}}\",\n  \"shipping\": {\n    \"address\": {\n      \"city\": \"Brothers\",\n      \"country\": \"US\",\n      \"line1\": \"27 Fredrick Ave\",\n      \"postal_code\": \"97712\",\n      \"state\": \"CA\",\n    },\n    \"name\": \"{{CUSTOMER_NAME}}\",\n  },\n  \"address\": {\n    \"city\": \"Brothers\",\n    \"country\": \"US\",\n    \"line1\": \"27 Fredrick Ave\",\n    \"postal_code\": \"97712\",\n    \"state\": \"CA\",\n  },\n}\u0029"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"php","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n\u0024stripe = new \\Stripe\\StripeClient\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\n\u0024stripe-\u003Ecustomers-\u003Ecreate\u0028[\n  'email' =\u003E '{{CUSTOMER_EMAIL}}',\n  'name' =\u003E '{{CUSTOMER_NAME}}',\n  'shipping' =\u003E [\n    'address' =\u003E [\n      'city' =\u003E 'Brothers',\n      'country' =\u003E 'US',\n      'line1' =\u003E '27 Fredrick Ave',\n      'postal_code' =\u003E '97712',\n      'state' =\u003E 'CA',\n    ],\n    'name' =\u003E '{{CUSTOMER_NAME}}',\n  ],\n  'address' =\u003E [\n    'city' =\u003E 'Brothers',\n    'country' =\u003E 'US',\n    'line1' =\u003E '27 Fredrick Ave',\n    'postal_code' =\u003E '97712',\n    'state' =\u003E 'CA',\n  ],\n]\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"java","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripe.apiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = Customer.create\u0028params\u0029;","services":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeClient client = new StripeClient\u0028\"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\u0029;\n\nCustomerCreateParams params =\n  CustomerCreateParams.builder\u0028\u0029\n    .setEmail\u0028\"{{CUSTOMER_EMAIL}}\"\u0029\n    .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n    .setShipping\u0028\n      CustomerCreateParams.Shipping.builder\u0028\u0029\n        .setAddress\u0028\n          CustomerCreateParams.Shipping.Address.builder\u0028\u0029\n            .setCity\u0028\"Brothers\"\u0029\n            .setCountry\u0028\"US\"\u0029\n            .setLine1\u0028\"27 Fredrick Ave\"\u0029\n            .setPostalCode\u0028\"97712\"\u0029\n            .setState\u0028\"CA\"\u0029\n            .build\u0028\u0029\n        \u0029\n        .setName\u0028\"{{CUSTOMER_NAME}}\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .setAddress\u0028\n      CustomerCreateParams.Address.builder\u0028\u0029\n        .setCity\u0028\"Brothers\"\u0029\n        .setCountry\u0028\"US\"\u0029\n        .setLine1\u0028\"27 Fredrick Ave\"\u0029\n        .setPostalCode\u0028\"97712\"\u0029\n        .setState\u0028\"CA\"\u0029\n        .build\u0028\u0029\n    \u0029\n    .build\u0028\u0029;\n\nCustomer customer = client.customers\u0028\u0029.create\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"node","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nconst stripe = require\u0028'stripe'\u0029\u0028'\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024'\u0029;\n\nconst customer = await stripe.customers.create\u0028{\n  email: '{{CUSTOMER_EMAIL}}',\n  name: '{{CUSTOMER_NAME}}',\n  shipping: {\n    address: {\n      city: 'Brothers',\n      country: 'US',\n      line1: '27 Fredrick Ave',\n      postal_code: '97712',\n      state: 'CA',\n    },\n    name: '{{CUSTOMER_NAME}}',\n  },\n  address: {\n    city: 'Brothers',\n    country: 'US',\n    line1: '27 Fredrick Ave',\n    postal_code: '97712',\n    state: 'CA',\n  },\n}\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"go","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nstripe.Key = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\"\n\nparams := \u0026stripe.CustomerParams{\n  Email: stripe.String\u0028\"{{CUSTOMER_EMAIL}}\"\u0029,\n  Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  Shipping: \u0026stripe.CustomerShippingParams{\n    Address: \u0026stripe.AddressParams{\n      City: stripe.String\u0028\"Brothers\"\u0029,\n      Country: stripe.String\u0028\"US\"\u0029,\n      Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n      PostalCode: stripe.String\u0028\"97712\"\u0029,\n      State: stripe.String\u0028\"CA\"\u0029,\n    },\n    Name: stripe.String\u0028\"{{CUSTOMER_NAME}}\"\u0029,\n  },\n  Address: \u0026stripe.AddressParams{\n    City: stripe.String\u0028\"Brothers\"\u0029,\n    Country: stripe.String\u0028\"US\"\u0029,\n    Line1: stripe.String\u0028\"27 Fredrick Ave\"\u0029,\n    PostalCode: stripe.String\u0028\"97712\"\u0029,\n    State: stripe.String\u0028\"CA\"\u0029,\n  },\n};\nresult, err := customer.New\u0028params\u0029;"},"codegenError":null,"overriddenCodeBlock":null},{"lang":"dotnet","generatedCode":{"resources":"\u002F\u002F Set your secret key. Remember to switch to your live secret key in production.\n\u002F\u002F See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\nStripeConfiguration.ApiKey = \"\u0024\u0024TEST_KEY_REPLACE_ME\u0024\u0024\";\n\nvar options = new CustomerCreateOptions\n{\n    Email = \"{{CUSTOMER_EMAIL}}\",\n    Name = \"{{CUSTOMER_NAME}}\",\n    Shipping = new ShippingOptions\n    {\n        Address = new AddressOptions\n        {\n            City = \"Brothers\",\n            Country = \"US\",\n            Line1 = \"27 Fredrick Ave\",\n            PostalCode = \"97712\",\n            State = \"CA\",\n        },\n        Name = \"{{CUSTOMER_NAME}}\",\n    },\n    Address = new AddressOptions\n    {\n        City = \"Brothers\",\n        Country = \"US\",\n        Line1 = \"27 Fredrick Ave\",\n        PostalCode = \"97712\",\n        State = \"CA\",\n    },\n};\nvar service = new CustomerService\u0028\u0029;\nservice.Create\u0028options\u0029;"},"codegenError":null,"overriddenCodeBlock":null}],"codeTabGroupID":"codetab_3157f82c4e796fd1f0929952cd21468b2db77735","httpPath":"\u002Fv1\u002Fcustomers","httpVerb":"post","v2ApiVersion":"2024-05-23.preview-v2"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"create-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Create the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you want to render the Payment Element without first creating a subscription, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment-deferred?type=subscription"},"children":["Collect payment details before creating an Intent"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Let your new customer choose a plan and then create the subscription—in this guide, they choose between Basic and Premium."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your app, pass the selected price ID and the ID of the customer record to the backend."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"PricesView.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const createSubscription = async \u0028priceId, customerId\u0029 =\u003E {\n  const apiEndpoint =\n    Platform.OS === 'ios' ? 'http:\u002F\u002Flocalhost:4242' : 'http:\u002F\u002F10.0.2.2:4567';\n  const response = await fetch\u0028\u0060\u0024{apiEndpoint}\u002Fcreate-subscription\u0060, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      priceId: priceId,\n      customerId: customerId,\n    }\u0029,\n  }\u0029;\n  if \u0028response.status === 200\u0029 {\n    const subscription = await response.json\u0028\u0029;\n    return subscription;\n  }\n};\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, create the subscription with status ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"incomplete"},"children":[]}," using ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"payment_behavior=default_incomplete"},"children":[]},". Then return the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"client_secret"},"children":[]}," from the subscription’s first ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-intents"},"children":["payment intent"]}," to the frontend to complete payment."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fobject#subscription_object-payment_settings-save_default_payment_method"},"children":["save_default_payment_method"]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"on_subscription"},"children":[]}," to save the payment method as the default for a subscription when a payment succeeds. Saving a default payment method increases the success rate of future subscription payments."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcreate-subscription-default-incomplete.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcreate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse\u0028request.body.read\u0029\n  customer_id = cookies[:customer]\n  price_id = data['priceId']\n\n  # Create the subscription. Note we're expanding the Subscription's\n  # latest invoice and that invoice's payment_intent\n  # so we can pass it to the front end to confirm the payment\n  subscription = Stripe::Subscription.create\u0028\n    customer: customer_id,\n    items: [{\n      price: price_id,\n    }],\n    payment_behavior: 'default_incomplete',\n    payment_settings: {save_default_payment_method: 'on_subscription'},\n    expand: ['latest_invoice.payment_intent']\n  \u0029\n\n  { subscriptionId: subscription.id, clientSecret: subscription.latest_invoice.payment_intent.client_secret }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcreate-subscription', methods=['POST']\u0029\ndef create_subscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    customer_id = data['customerId']\n    price_id = data['priceId']\n\n    try:\n        # Create the subscription. Note we're expanding the Subscription's\n        # latest invoice and that invoice's payment_intent\n        # so we can pass it to the front end to confirm the payment\n        subscription = stripe.Subscription.create\u0028\n            customer=customer_id,\n            items=[{\n                'price': price_id,\n            }],\n            payment_behavior='default_incomplete',\n            payment_settings={'save_default_payment_method': 'on_subscription'},\n            expand=['latest_invoice.payment_intent'],\n        \u0029\n        return jsonify\u0028subscriptionId=subscription.id, clientSecret=subscription.latest_invoice.payment_intent.client_secret\u0029\n\n    except Exception as e:\n        return jsonify\u0028error={'message': e.user_message}\u0029, 400\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n    \u002F\u002F Get the request body and decode it as JSON.\n    \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n    \u0024json = json_decode\u0028\u0024body\u0029;\n\n    \u002F\u002F Get the customer ID from the cookie and the price ID from the JSON data.\n    \u0024customer_id = \u0024_COOKIE['customer'];\n    \u0024price_id = \u0024json-\u003EpriceId;\n\n    \u002F\u002F Create the subscription with the customer ID, price ID, and necessary options.\n    \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Ecreate\u0028[\n        'customer' =\u003E \u0024customer_id,\n        'items' =\u003E [[\n            'price' =\u003E \u0024price_id,\n        ]],\n        'payment_behavior' =\u003E 'default_incomplete',\n        'payment_settings' =\u003E ['save_default_payment_method' =\u003E 'on_subscription'],\n        'expand' =\u003E ['latest_invoice.payment_intent'],\n    ]\u0029;\n\n    \u002F\u002F Return the subscription ID and client secret as a JSON response.\n    header\u0028'Content-Type: application\u002Fjson'\u0029;\n    echo json_encode\u0028[\n        'subscriptionId' =\u003E \u0024subscription-\u003Eid,\n        'clientSecret' =\u003E \u0024subscription-\u003Elatest_invoice-\u003Epayment_intent-\u003Eclient_secret,\n    ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fcreate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    String customerId = request.cookie\u0028\"customer\"\u0029;\n    CreateSubscriptionRequest postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      CreateSubscriptionRequest.class\n    \u0029;\n    String priceId = postBody.getPriceId\u0028\u0029;\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    SubscriptionCreateParams.PaymentSettings paymentSettings =\n      SubscriptionCreateParams.PaymentSettings\n        .builder\u0028\u0029\n        .setSaveDefaultPaymentMethod\u0028SaveDefaultPaymentMethod.ON_SUBSCRIPTION\u0029\n        .build\u0028\u0029;\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    SubscriptionCreateParams subCreateParams = SubscriptionCreateParams\n      .builder\u0028\u0029\n      .setCustomer\u0028customerId\u0029\n      .addItem\u0028\n        SubscriptionCreateParams\n          .Item.builder\u0028\u0029\n          .setPrice\u0028priceId\u0029\n          .build\u0028\u0029\n      \u0029\n      .setPaymentSettings\u0028paymentSettings\u0029\n      .setPaymentBehavior\u0028SubscriptionCreateParams.PaymentBehavior.DEFAULT_INCOMPLETE\u0029\n      .addAllExpand\u0028Arrays.asList\u0028\"latest_invoice.payment_intent\"\u0029\u0029\n      .build\u0028\u0029;\n\n    Subscription subscription = Subscription.create\u0028subCreateParams\u0029;\n\n    Map\u003CString, Object\u003E responseData = new HashMap\u003C\u003E\u0028\u0029;\n    responseData.put\u0028\"subscriptionId\", subscription.getId\u0028\u0029\u0029;\n    responseData.put\u0028\"clientSecret\", subscription.getLatestInvoiceObject\u0028\u0029.getPaymentIntentObject\u0028\u0029.getClientSecret\u0028\u0029\u0029;\n    return StripeObject.PRETTY_PRINT_GSON.toJson\u0028responseData\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcreate-subscription', async \u0028req, res\u0029 =\u003E {\n  const customerId = req.cookies['customer'];\n  const priceId = req.body.priceId;\n\n  try {\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    const subscription = await stripe.subscriptions.create\u0028{\n      customer: customerId,\n      items: [{\n        price: priceId,\n      }],\n      payment_behavior: 'default_incomplete',\n      payment_settings: { save_default_payment_method: 'on_subscription' },\n      expand: ['latest_invoice.payment_intent'],\n    }\u0029;\n\n    res.send\u0028{\n      subscriptionId: subscription.id,\n      clientSecret: subscription.latest_invoice.payment_intent.client_secret,\n    }\u0029;\n  } catch \u0028error\u0029 {\n    return res.status\u0028400\u0029.send\u0028{ error: { message: error.message } }\u0029;\n  }\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCreateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n    if r.Method \u0021= \"POST\" {\n        http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n        return\n    }\n\n    var req struct {\n        PriceID string \u0060json:\"priceId\"\u0060\n    }\n\n    if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n        return\n    }\n\n    cookie, _ := r.Cookie\u0028\"customer\"\u0029\n    customerID := cookie.Value\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    paymentSettings := \u0026stripe.SubscriptionPaymentSettingsParams{\n\t\t    SaveDefaultPaymentMethod: stripe.String\u0028\"on_subscription\"\u0029,\n  \t}\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    subscriptionParams := \u0026stripe.SubscriptionParams{\n        Customer: stripe.String\u0028customerID\u0029,\n        Items: []*stripe.SubscriptionItemsParams{\n            {\n                Price: stripe.String\u0028req.PriceID\u0029,\n            },\n        },\n        PaymentSettings: paymentSettings,\n        PaymentBehavior: stripe.String\u0028\"default_incomplete\"\u0029,\n    }\n    subscriptionParams.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029\n    s, err := subscription.New\u0028subscriptionParams\u0029\n\n    if err \u0021= nil {\n        writeJSON\u0028w, nil, err\u0029\n        log.Printf\u0028\"subscription.New: %v\", err\u0029\n        return\n    }\n\n    writeJSON\u0028w, struct {\n        SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n        ClientSecret string \u0060json:\"clientSecret\"\u0060\n    }{\n        SubscriptionID: s.ID,\n        ClientSecret: s.LatestInvoice.PaymentIntent.ClientSecret,\n    }, nil\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"create-subscription\"\u0029]\npublic ActionResult\u003CSubscriptionCreateResponse\u003E CreateSubscription\u0028[FromBody] CreateSubscriptionRequest req\u0029\n{\n    var customerId = HttpContext.Request.Cookies[\"customer\"];\n\n    \u002F\u002F Automatically save the payment method to the subscription\n    \u002F\u002F when the first payment is successful.\n    var paymentSettings = new SubscriptionPaymentSettingsOptions {\n        SaveDefaultPaymentMethod = \"on_subscription\",\n    };\n\n    \u002F\u002F Create the subscription. Note we're expanding the Subscription's\n    \u002F\u002F latest invoice and that invoice's payment_intent\n    \u002F\u002F so we can pass it to the front end to confirm the payment\n    var subscriptionOptions = new SubscriptionCreateOptions\n    {\n        Customer = customerId,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Price = req.PriceId,\n            },\n        },\n        PaymentSettings = paymentSettings,\n        PaymentBehavior = \"default_incomplete\",\n    };\n    subscriptionOptions.AddExpand\u0028\"latest_invoice.payment_intent\"\u0029;\n    var subscriptionService = new SubscriptionService\u0028\u0029;\n    try\n    {\n        Subscription subscription = subscriptionService.Create\u0028subscriptionOptions\u0029;\n\n        return new SubscriptionCreateResponse\n        {\n          SubscriptionId = subscription.Id,\n          ClientSecret = subscription.LatestInvoice.PaymentIntent.ClientSecret,\n        };\n    }\n    catch \u0028StripeException e\u0029\n    {\n        Console.WriteLine\u0028\u0024\"Failed to create subscription.{e}\"\u0029;\n        return BadRequest\u0028\u0029;\n    }\n}\n"]}]}}],"codeTabGroupID":"codetab_460d8430c5a0d180ec8c0f560dc384e170c5d04f"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re using a ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"multi-currency-price"},"children":["multi-currency Price"]},", use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fsubscriptions\u002Fcreate#create_subscription-currency"},"children":["currency"]}," parameter to tell the Subscription which of the Price’s currencies to use. \u0028If you omit the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"currency"},"children":[]}," parameter, then the Subscription uses the Price’s default currency.\u0029"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["At this point the Subscription is ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"inactive"},"children":[]}," and awaiting payment. Here’s an example response. The minimum fields to store are highlighted, but store whatever your application frequently accesses."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fsub-response-inactive.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[{"start":2,"end":2},{"start":16,"end":16},{"start":18,"end":18}],"add":[],"remove":[]}},"children":["{",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"id\": \"sub_JgRjFjhKbtD2qz\","},"children":["\n  \"id\": \"sub_JgRjFjhKbtD2qz\","]},"\n  \"object\": \"subscription\",\n  \"application_fee_percent\": null,\n  \"automatic_tax\": {\n    \"enabled\": false\n  },\n  \"billing\": \"charge_automatically\",\n  \"billing_cycle_anchor\": 1623873347,\n  \"billing_thresholds\": null,\n  \"cancel_at\": null,\n  \"cancel_at_period_end\": false,\n  \"canceled_at\": null,\n  \"collection_method\": \"charge_automatically\",\n  \"created\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"current_period_end\": 1626465347,"},"children":["\n  \"current_period_end\": 1626465347,"]},"\n  \"current_period_start\": 1623873347,",{"\u0024\u0024mdtype":"Tag","name":"highlight","attributes":{"type":"default","value":"\n  \"customer\": \"cus_CMqDWO2xODTZqt\","},"children":["\n  \"customer\": \"cus_CMqDWO2xODTZqt\","]},"\n  \"days_until_due\": null,\n  \"default_payment_method\": null,\n  \"default_source\": null,\n  \"default_tax_rates\": [\n\n  ],\n  \"discount\": null,\n  \"ended_at\": null,\n  \"invoice_customer_balance_settings\": {\n    \"consume_applied_balance_on_void\": true\n  },\n  \"items\": {\n    \"object\": \"list\",\n    \"data\": [\n      {\n        \"id\": \"si_JgRjmS4Ur1khEx\",\n        \"object\": \"subscription_item\",\n        \"billing_thresholds\": null,\n        \"created\": 1623873347,\n        \"metadata\": {\n        },\n        \"plan\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"plan\",\n          \"active\": true,\n          \"aggregate_usage\": null,\n          \"amount\": 2000,\n          \"amount_decimal\": \"2000\",\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"interval\": \"month\",\n          \"interval_count\": 1,\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"tiers\": null,\n          \"tiers_mode\": null,\n          \"transform_usage\": null,\n          \"trial_period_days\": null,\n          \"usage_type\": \"licensed\"\n        },\n        \"price\": {\n          \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n          \"object\": \"price\",\n          \"active\": true,\n          \"billing_scheme\": \"per_unit\",\n          \"created\": 1623864151,\n          \"currency\": \"usd\",\n          \"livemode\": false,\n          \"lookup_key\": null,\n          \"metadata\": {\n          },\n          \"nickname\": null,\n          \"product\": \"prod_JgPF5xnq7qBun3\",\n          \"recurring\": {\n            \"aggregate_usage\": null,\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"tiers_mode\": null,\n          \"transform_quantity\": null,\n          \"type\": \"recurring\",\n          \"unit_amount\": 2000,\n          \"unit_amount_decimal\": \"2000\"\n        },\n        \"quantity\": 1,\n        \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n        \"tax_rates\": [\n\n        ]\n      }\n    ],\n    \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"\u002Fv1\u002Fsubscription_items?subscription=sub_JgRjFjhKbtD2qz\"\n  },\n  \"latest_invoice\": {\n    \"id\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n    \"object\": \"invoice\",\n    \"account_country\": \"US\",\n    \"account_name\": \"Angelina's Store\",\n    \"account_tax_ids\": null,\n    \"amount_due\": 2000,\n    \"amount_paid\": 0,\n    \"amount_remaining\": 2000,\n    \"application_fee\": null,\n    \"attempt_count\": 0,\n    \"attempted\": false,\n    \"auto_advance\": false,\n    \"automatic_tax\": {\n      \"enabled\": false,\n      \"status\": null\n    },\n    \"billing\": \"charge_automatically\",\n    \"billing_reason\": \"subscription_update\",\n    \"charge\": null,\n    \"closed\": true,\n    \"collection_method\": \"charge_automatically\",\n    \"created\": 1623873347,\n    \"currency\": \"usd\",\n    \"custom_fields\": null,\n    \"customer\": \"cus_CMqDWO2xODTZqt\",\n    \"customer_address\": null,\n    \"customer_email\": \"angelina@stripe.com\",\n    \"customer_name\": null,\n    \"customer_phone\": null,\n    \"customer_shipping\": {\n      \"address\": {\n        \"city\": \"\",\n        \"country\": \"US\",\n        \"line1\": \"Berry\",\n        \"line2\": \"\",\n        \"postal_code\": \"\",\n        \"state\": \"\"\n      },\n      \"name\": \"\",\n      \"phone\": null\n    },\n    \"customer_tax_exempt\": \"none\",\n    \"customer_tax_ids\": [\n\n    ],\n    \"date\": 1623873347,\n    \"default_payment_method\": null,\n    \"default_source\": null,\n    \"default_tax_rates\": [\n\n    ],\n    \"description\": null,\n    \"discount\": null,\n    \"discounts\": [\n\n    ],\n    \"due_date\": null,\n    \"ending_balance\": 0,\n    \"finalized_at\": 1623873347,\n    \"footer\": null,\n    \"forgiven\": false,\n    \"hosted_invoice_url\": \"https:\u002F\u002Finvoice.stripe.com\u002Fi\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\",\n    \"invoice_pdf\": \"https:\u002F\u002Fpay.stripe.com\u002Finvoice\u002Facct_1By64KGPZ1iASj5z\u002Finvst_JgRjzIOILGeq2MKC9T0KtyXnD5udsLp\u002Fpdf\",\n    \"last_finalization_error\": null,\n    \"lines\": {\n      \"object\": \"list\",\n      \"data\": [\n        {\n          \"id\": \"sub_JgRjFjhKbtD2qz\",\n          \"object\": \"line_item\",\n          \"amount\": 2000,\n          \"currency\": \"usd\",\n          \"description\": \"1 × Gold Special \u0028at \u002420.00 \u002F month\u0029\",\n          \"discount_amounts\": [\n\n          ],\n          \"discountable\": true,\n          \"discounts\": [\n\n          ],\n          \"livemode\": false,\n          \"metadata\": {\n          },\n          \"period\": {\n            \"end\": 1626465347,\n            \"start\": 1623873347\n          },\n          \"plan\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"plan\",\n            \"active\": true,\n            \"aggregate_usage\": null,\n            \"amount\": 2000,\n            \"amount_decimal\": \"2000\",\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"interval\": \"month\",\n            \"interval_count\": 1,\n            \"livemode\": false,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"tiers\": null,\n            \"tiers_mode\": null,\n            \"transform_usage\": null,\n            \"trial_period_days\": null,\n            \"usage_type\": \"licensed\"\n          },\n          \"price\": {\n            \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n            \"object\": \"price\",\n            \"active\": true,\n            \"billing_scheme\": \"per_unit\",\n            \"created\": 1623864151,\n            \"currency\": \"usd\",\n            \"livemode\": false,\n            \"lookup_key\": null,\n            \"metadata\": {\n            },\n            \"nickname\": null,\n            \"product\": \"prod_JgPF5xnq7qBun3\",\n            \"recurring\": {\n              \"aggregate_usage\": null,\n              \"interval\": \"month\",\n              \"interval_count\": 1,\n              \"trial_period_days\": null,\n              \"usage_type\": \"licensed\"\n            },\n            \"tiers_mode\": null,\n            \"transform_quantity\": null,\n            \"type\": \"recurring\",\n            \"unit_amount\": 2000,\n            \"unit_amount_decimal\": \"2000\"\n          },\n          \"proration\": false,\n          \"quantity\": 1,\n          \"subscription\": null,\n          \"subscription_item\": \"si_JgRjmS4Ur1khEx\",\n          \"tax_amounts\": [\n\n          ],\n          \"tax_rates\": [\n\n          ],\n          \"type\": \"subscription\",\n          \"unique_id\": \"il_1J34pzGPZ1iASj5zH4yl5GQR\",\n          \"unique_line_item_id\": \"sli_14b5dfGPZ1iASj5z614c4a47\"\n        }\n      ],\n      \"has_more\": false,\n      \"total_count\": 1,\n      \"url\": \"\u002Fv1\u002Finvoices\u002Fin_1J34pzGPZ1iASj5zB87qdBNZ\u002Flines\"\n    },\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"next_payment_attempt\": null,\n    \"number\": \"C008FC2-0354\",\n    \"on_behalf_of\": null,\n    \"paid\": false,\n    \"payment_intent\": {\n      \"id\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6\",\n      \"object\": \"payment_intent\",\n      \"allowed_source_types\": [\n        \"card\"\n      ],\n      \"amount\": 2000,\n      \"amount_capturable\": 0,\n      \"amount_received\": 0,\n      \"application\": null,\n      \"application_fee_amount\": null,\n      \"canceled_at\": null,\n      \"cancellation_reason\": null,\n      \"capture_method\": \"automatic\",\n      \"charges\": {\n        \"object\": \"list\",\n        \"data\": [\n\n        ],\n        \"has_more\": false,\n        \"total_count\": 0,\n        \"url\": \"\u002Fv1\u002Fcharges?payment_intent=pi_1J34pzGPZ1iASj5zI2nOAaE6\"\n      },\n      \"client_secret\": \"pi_1J34pzGPZ1iASj5zI2nOAaE6_secret_l7FN6ldFfXiFmJEumenJ2y2wu\",\n      \"confirmation_method\": \"automatic\",\n      \"created\": 1623873347,\n      \"currency\": \"usd\",\n      \"customer\": \"cus_CMqDWO2xODTZqt\",\n      \"description\": \"Subscription creation\",\n      \"invoice\": \"in_1J34pzGPZ1iASj5zB87qdBNZ\",\n      \"last_payment_error\": null,\n      \"livemode\": false,\n      \"metadata\": {\n      },\n      \"next_action\": null,\n      \"next_source_action\": null,\n      \"on_behalf_of\": null,\n      \"payment_method\": null,\n      \"payment_method_options\": {\n        \"card\": {\n          \"installments\": null,\n          \"network\": null,\n          \"request_three_d_secure\": \"automatic\"\n        }\n      },\n      \"payment_method_types\": [\n        \"card\"\n      ],\n      \"receipt_email\": null,\n      \"review\": null,\n      \"setup_future_usage\": \"off_session\",\n      \"shipping\": null,\n      \"source\": \"card_1By6iQGPZ1iASj5z7ijKBnXJ\",\n      \"statement_descriptor\": null,\n      \"statement_descriptor_suffix\": null,\n      \"status\": \"requires_confirmation\",\n      \"transfer_data\": null,\n      \"transfer_group\": null\n    },\n    \"payment_settings\": {\n      \"payment_method_options\": null,\n      \"payment_method_types\": null,\n      \"save_default_payment_method\": \"on_subscription\"\n    },\n    \"period_end\": 1623873347,\n    \"period_start\": 1623873347,\n    \"post_payment_credit_notes_amount\": 0,\n    \"pre_payment_credit_notes_amount\": 0,\n    \"receipt_number\": null,\n    \"starting_balance\": 0,\n    \"statement_descriptor\": null,\n    \"status\": \"open\",\n    \"status_transitions\": {\n      \"finalized_at\": 1623873347,\n      \"marked_uncollectible_at\": null,\n      \"paid_at\": null,\n      \"voided_at\": null\n    },\n    \"subscription\": \"sub_JgRjFjhKbtD2qz\",\n    \"subtotal\": 2000,\n    \"tax\": null,\n    \"tax_percent\": null,\n    \"total\": 2000,\n    \"total_discount_amounts\": [\n\n    ],\n    \"total_tax_amounts\": [\n\n    ],\n    \"transfer_data\": null,\n    \"webhooks_delivered_at\": 1623873347\n  },\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"next_pending_invoice_item_invoice\": null,\n  \"pause_collection\": null,\n  \"pending_invoice_item_interval\": null,\n  \"pending_setup_intent\": null,\n  \"pending_update\": null,\n  \"plan\": {\n    \"id\": \"price_1J32RfGPZ1iASj5zHHp57z7C\",\n    \"object\": \"plan\",\n    \"active\": true,\n    \"aggregate_usage\": null,\n    \"amount\": 2000,\n    \"amount_decimal\": \"2000\",\n    \"billing_scheme\": \"per_unit\",\n    \"created\": 1623864151,\n    \"currency\": \"usd\",\n    \"interval\": \"month\",\n    \"interval_count\": 1,\n    \"livemode\": false,\n    \"metadata\": {\n    },\n    \"nickname\": null,\n    \"product\": \"prod_JgPF5xnq7qBun3\",\n    \"tiers\": null,\n    \"tiers_mode\": null,\n    \"transform_usage\": null,\n    \"trial_period_days\": null,\n    \"usage_type\": \"licensed\"\n  },\n  \"quantity\": 1,\n  \"schedule\": null,\n  \"start\": 1623873347,\n  \"start_date\": 1623873347,\n  \"status\": \"incomplete\",\n  \"tax_percent\": null,\n  \"transfer_data\": null,\n  \"trial_end\": null,\n  \"trial_start\": null\n}\n"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"collect-payment","beta":false,"badges":["Client"],"collapsable":true,"numbered":true,"optional":false,"title":"Collect payment information","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Felements"},"children":["Stripe Elements"]}," to collect payment details and activate the subscription. You can customize Elements to match the look-and-feel of your application."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Faccept-a-payment?platform=ios"},"children":["Mobile Payment Element"]}," securely collects all necessary payment details for a wide variety of payments methods. You can visit this ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#product-support"},"children":["page"]}," to learn what payment methods are supported by both Mobile Payment Element and Subscriptions."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"add-the-payment-element-to-your-app"},"children":["Add the Payment Element to your app"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Initialize and present the Mobile Payment Element using the PaymentSheet class."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"SubscribeView.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import React from 'react';\nimport {useStripe, PaymentSheetError} from '@stripe\u002Fstripe-react-native';\nimport {View, Button} from 'react-native';\n\nfunction SubscribeView\u0028{clientSecret}\u0029 {\n  const {initPaymentSheet, presentPaymentSheet} = useStripe\u0028\u0029;\n\n  React.useEffect\u0028\u0028\u0029 =\u003E {\n    const initializePaymentSheet = async \u0028\u0029 =\u003E {\n      const {error} = await initPaymentSheet\u0028{\n        paymentIntentClientSecret: clientSecret,\n        returnURL: 'stripe-example:\u002F\u002Fpayment-sheet',\n        \u002F\u002F Set \u0060allowsDelayedPaymentMethods\u0060 to true if your business handles\n        \u002F\u002F delayed notification payment methods like US bank accounts.\n        allowsDelayedPaymentMethods: true,\n      }\u0029;\n      if \u0028error\u0029 {\n        \u002F\u002F Handle error\n      }\n    };\n\n    initializePaymentSheet\u0028\u0029;\n  }, [clientSecret, initPaymentSheet]\u0029;\n\n  return \u0028\n    \u003CView\u003E\n      \u003CButton\n        title=\"Subscribe\"\n        onPress={async \u0028\u0029 =\u003E {\n          const {error} = await presentPaymentSheet\u0028\u0029;\n          if \u0028error\u0029 {\n            if \u0028error.code === PaymentSheetError.Failed\u0029 {\n              \u002F\u002F Handle failed\n            } else if \u0028error.code === PaymentSheetError.Canceled\u0029 {\n              \u002F\u002F Handle canceled\n            }\n          } else {\n            \u002F\u002F Payment succeeded\n          }\n        }}\n      \u002F\u003E\n    \u003C\u002FView\u003E\n  \u0029;\n}\n\nexport default SubscribeView;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Mobile Payment Element renders a sheet that allows your customer to select a payment method. The form automatically collects all necessary payments details for the payment method that they select."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Setting ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"allowsDelayedPaymentMethods"},"children":[]}," to true allows ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fpayments\u002Fpayment-methods#payment-notification"},"children":["delayed notification"]}," payment methods like US bank accounts. For these payment methods, the final payment status isn’t known when the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet"},"children":[]}," completes, and instead succeeds or fails later. If you support these types of payment methods, inform the customer their order is confirmed and only fulfill their order \u0028for example, ship their product\u0029 when the payment is successful."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can customize the Payment Element to match the design of your app by using the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Felements\u002Fappearance-api?platform=ios"},"children":[{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"appearance"},"children":[]}," property"]}," your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentSheet.Configuration"},"children":[]}," object."]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"id":"confirm-payment-ios","level":3,"anchored":true},"children":["Confirm payment "]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The Mobile Payment Element creates a PaymentMethod and confirms the incomplete Subscription’s first PaymentIntent, causing a charge to be made. If ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["Strong Customer Authentication"]}," \u0028SCA\u0029 is required for the payment, the Payment Element handles the authentication process before confirming the PaymentIntent."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"react-native-set-up-return-url","beta":false,"badges":["Client-side"],"collapsable":true,"numbered":true,"optional":false,"title":"Set up a return URL \u0028iOS only\u0029","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Freact-native-return-url.md","variables":{"paymentSheet":true}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When a customer exits your app, for example to authenticate in Safari or their banking app, provide a way for them to automatically return to your app afterward. Many payment method types ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["require"]}," a return URL, so if you fail to provide it, we can’t present those payment methods to your user, even if you’ve enabled them."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To provide a return URL, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Freactnative.dev\u002Fdocs\u002Flinking"},"children":["configure a custom URL scheme or universal link"]}," and set up your root component to forward the URL to the Stripe SDK."]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re using Expo, ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdocs.expo.io\u002Fguides\u002Flinking\u002F#in-a-standalone-app"},"children":["set your scheme"]}," in the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"app.json"},"children":[]}," file."]}]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"jsx","filename":"App.tsx","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["import React, { useEffect, useCallback } from 'react';\nimport { Linking } from 'react-native';\nimport { useStripe } from '@stripe\u002Fstripe-react-native';\n\nexport default function MyApp\u0028\u0029 {\n  const { handleURLCallback } = useStripe\u0028\u0029;\n\n  const handleDeepLink = useCallback\u0028\n    async \u0028url: string | null\u0029 =\u003E {\n      if \u0028url\u0029 {\n        const stripeHandled = await handleURLCallback\u0028url\u0029;\n        if \u0028stripeHandled\u0029 {\n          \u002F\u002F This was a Stripe URL - you can return or add extra handling here as you see fit\n        } else {\n          \u002F\u002F This was NOT a Stripe URL – handle as you normally would\n        }\n      }\n    },\n    [handleURLCallback]\n  \u0029;\n\n  useEffect\u0028\u0028\u0029 =\u003E {\n    const getUrlAsync = async \u0028\u0029 =\u003E {\n      const initialUrl = await Linking.getInitialURL\u0028\u0029;\n      handleDeepLink\u0028initialUrl\u0029;\n    };\n\n    getUrlAsync\u0028\u0029;\n\n    const deepLinkListener = Linking.addEventListener\u0028\n      'url',\n      \u0028event: { url: string }\u0029 =\u003E {\n        handleDeepLink\u0028event.url\u0029;\n      }\n    \u0029;\n\n    return \u0028\u0029 =\u003E deepLinkListener.remove\u0028\u0029;\n  }, [handleDeepLink]\u0029;\n\n  return \u0028\n    \u003CView\u003E\n      \u003CAwesomeAppComponent \u002F\u003E\n    \u003C\u002FView\u003E\n  \u0029;\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Additionally, set the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"returnURL"},"children":[]}," when you call the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"initPaymentSheet"},"children":[]}," method:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["await initPaymentSheet\u0028{\n  ...\n  returnURL: 'your-app:\u002F\u002Fstripe-redirect',\n  ...\n}\u0029;\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For more information on native URL schemes, refer to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.android.com\u002Ftraining\u002Fapp-links\u002Fdeep-linking"},"children":["Android"]}," and ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fxcode\u002Fallowing_apps_and_websites_to_link_to_your_content\u002Fdefining_a_custom_url_scheme_for_your_app"},"children":["iOS"]}," docs."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"react-native-apple-pay","beta":false,"collapsable":true,"numbered":false,"optional":true,"title":"Enable Apple Pay","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fmobile\u002Fpayment-sheet-react-native-apple-pay.md","variables":{"recurringOnly":true}},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"register-for-an-apple-merchant-id"},"children":["Register for an Apple Merchant ID"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"apple-pay\u002Fpartials\u002Fsdk-step-1.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Obtain an Apple Merchant ID by ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Faccount\u002Fresources\u002Fidentifiers\u002Fadd\u002Fmerchant"},"children":["registering for a new identifier"]}," on the Apple Developer website."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Fill out the form with a description and identifier. Your description is for your own records and you can modify it in the future. Stripe recommends using the name of your app as the identifier \u0028for example, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"merchant.com.{{YOUR_APP_NAME}}"},"children":[]},"\u0029."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"create-a-new-apple-pay-certificate"},"children":["Create a new Apple Pay certificate"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"apple-pay\u002Fpartials\u002Fsdk-step-2.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Create a certificate for your app to encrypt payment data."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Fios_certificates"},"children":["iOS Certificate Settings"]}," in the Dashboard, click ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Add new application"]},", and follow the guide."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Download a Certificate Signing Request \u0028CSR\u0029 file to get a secure certificate from Apple that allows you to use Apple Pay."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["One CSR file must be used to issue exactly one certificate. If you switch your Apple Merchant ID, you must go to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Fios_certificates"},"children":["iOS Certificate Settings"]}," in the Dashboard to obtain a new CSR and certificate."]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"integrate-with-xcode"},"children":["Integrate with Xcode"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"apple-pay\u002Fpartials\u002Fsdk-step-3.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Add the Apple Pay capability to your app. In Xcode, open your project settings, click the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Signing \u0026 Capabilities"]}," tab, and add the ",{"\u0024\u0024mdtype":"Tag","name":"strong","attributes":{},"children":["Apple Pay"]}," capability. You might be prompted to log in to your developer account at this point. Select the merchant ID you created earlier, and your app is ready to accept Apple Pay."]},{"\u0024\u0024mdtype":"Tag","name":"Image","attributes":{"src":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Fxcode.a701d4c1922d19985e9c614a6f105bf1.png","ignoreAltTextRequirement":true},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Enable the Apple Pay capability in Xcode"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"add-apple-pay"},"children":["Add Apple Pay"]},{"\u0024\u0024mdtype":"Tag","name":"TabGroup","attributes":{"selector":"tabs","items":[{"id":"add-apple-pay-recurring","title":"Recurring payments","content":{"\u0024\u0024mdtype":"Tag","name":"Tab","attributes":{"id":"add-apple-pay-recurring","title":"Recurring payments"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When you call ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"initPaymentSheet"},"children":[]},", pass in an ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-react-native\u002Fapi-reference\u002Fmodules\u002FPaymentSheet.html#ApplePayParams"},"children":["ApplePayParams"]}," with ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"merchantCountryCode"},"children":[]}," set to the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Fsettings\u002Faccount"},"children":["country code of your business"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In accordance with ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdesign\u002Fhuman-interface-guidelines\u002Ftechnologies\u002Fapple-pay\u002Fsubscriptions-and-donations"},"children":["Apple’s guidelines"]}," for recurring payments, you must also set a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"cardItems"},"children":[]}," that includes a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.dev\u002Fstripe-react-native\u002Fapi-reference\u002Fmodules\u002FApplePay.html#RecurringCartSummaryItem"},"children":["RecurringCartSummaryItem"]}," with the amount you intend to charge \u0028for example, “\u002459.95 a month”\u0029."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You can also adopt ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fapple-pay\u002Fmerchant-tokens\u002F"},"children":["merchant tokens"]}," by setting the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"request"},"children":[]}," with its ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"type"},"children":[]}," set to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"PaymentRequestType.Recurring"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To learn more about how to use recurring payments with Apple Pay, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fpasskit\u002Fpkpaymentrequest"},"children":["Apple’s PassKit documentation"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"apple-pay-react-native","title":"iOS \u0028React Native\u0029"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const initializePaymentSheet = async \u0028\u0029 =\u003E {\n  const recurringSummaryItem = {\n    label: 'My Subscription',\n    amount: '59.99',\n    paymentType: 'Recurring',\n    intervalCount: 1,\n    intervalUnit: 'month',\n    \u002F\u002F Payment starts today\n    startDate: new Date\u0028\u0029.getTime\u0028\u0029 \u002F 1000,\n\n    \u002F\u002F Payment ends in one year\n    endDate: new Date\u0028\u0029.getTime\u0028\u0029 \u002F 1000 \u002B 60 * 60 * 24 * 365,\n  };\n\n  const {error} = await initPaymentSheet\u0028{\n    \u002F\u002F ...\n    applePay: {\n      merchantCountryCode: 'US',\n      cartItems: [recurringSummaryItem],\n      request: {\n        type: PaymentRequestType.Recurring,\n        description: 'Recurring',\n        managementUrl: 'https:\u002F\u002Fmy-backend.example.com\u002Fcustomer-portal',\n        billing: recurringSummaryItem,\n        billingAgreement:\n          \"You'll be billed \u002459.99 every month for the next 12 months. To cancel at any time, go to Account and click 'Cancel Membership.'\",\n      },\n    },\n  }\u0029;\n};\n"]}]}]}}]},"children":[]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"order-tracking"},"children":["Order tracking"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To add ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdesign\u002Fhuman-interface-guidelines\u002Ftechnologies\u002Fwallet\u002Fdesigning-order-tracking"},"children":["order tracking"]}," information in iOS 16 or later, configure a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"setOrderTracking"},"children":[]}," callback function. Stripe calls your implementation after the payment is complete, but before iOS dismisses the Apple Pay sheet."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your implementation of ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"setOrderTracking"},"children":[]}," callback function, fetch the order details from your server for the completed order, and pass the details to the provided ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"completion"},"children":[]}," function."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To learn more about order tracking, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fwalletorders"},"children":["Apple’s Wallet Orders documentation"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"order-tracking-react-native","title":"iOS \u0028React Native\u0029"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["await initPaymentSheet\u0028{\n  \u002F\u002F ...\n  applePay: {\n    \u002F\u002F ...\n    setOrderTracking: async complete =\u003E {\n      const apiEndpoint =\n        Platform.OS === 'ios'\n          ? 'http:\u002F\u002Flocalhost:4242'\n          : 'http:\u002F\u002F10.0.2.2:4567';\n      const response = await fetch\u0028\n        \u0060\u0024{apiEndpoint}\u002Fretrieve-order?orderId=\u0024{orderId}\u0060,\n        {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application\u002Fjson',\n          },\n        },\n      \u0029;\n      if \u0028response.status === 200\u0029 {\n        const orderDetails = await response.json\u0028\u0029;\n        \u002F\u002F orderDetails should include orderIdentifier, orderTypeIdentifier,\n        \u002F\u002F authenticationToken and webServiceUrl\n        complete\u0028orderDetails\u0029;\n      }\n    },\n  },\n}\u0029;\n"]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"webhooks","beta":false,"badges":["Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Listen for webhooks","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To complete the integration, you need to process ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"webhook"},"children":["webhooks"]}," sent by Stripe. These are events triggered whenever state inside of Stripe changes, such as subscriptions creating new invoices. In your application, set up an HTTP handler to accept a POST request containing the webhook event, and verify the signature of the event:"]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fwebhooks.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fwebhook' do\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = ENV['STRIPE_WEBHOOK_SECRET']\n  payload = request.body.read\n  if \u0021webhook_secret.empty?\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    sig_header = request.env['HTTP_STRIPE_SIGNATURE']\n    event = nil\n\n    begin\n      event = Stripe::Webhook.construct_event\u0028\n        payload, sig_header, webhook_secret\n      \u0029\n    rescue JSON::ParserError =\u003E e\n      # Invalid payload\n      status 400\n      return\n    rescue Stripe::SignatureVerificationError =\u003E e\n      # Invalid signature\n      puts '⚠️  Webhook signature verification failed.'\n      status 400\n      return\n    end\n  else\n    data = JSON.parse\u0028payload, symbolize_names: true\u0029\n    event = Stripe::Event.construct_from\u0028data\u0029\n  end\n  # Get the type of webhook event sent - used to check the status of PaymentIntents.\n  event_type = event['type']\n  data = event['data']\n  data_object = data['object']\n\n  if event_type == 'invoice.paid'\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    # puts data_object\n  end\n\n  if event_type == 'invoice.payment_failed'\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    # puts data_object\n  end\n\n  if event_type == 'customer.subscription.deleted'\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    # puts data_object\n  end\n\n  content_type 'application\u002Fjson'\n  { status: 'success' }.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fwebhook', methods=['POST']\u0029\ndef webhook_received\u0028\u0029:\n  # You can use webhooks to receive information about asynchronous payment events.\n  # For more about our webhook events check out https:\u002F\u002Fstripe.com\u002Fdocs\u002Fwebhooks.\n  webhook_secret = os.getenv\u0028'STRIPE_WEBHOOK_SECRET'\u0029\n  request_data = json.loads\u0028request.data\u0029\n\n  if webhook_secret:\n    # Retrieve the event by verifying the signature using the raw body and secret if webhook signing is configured.\n    signature = request.headers.get\u0028'stripe-signature'\u0029\n    try:\n      event = stripe.Webhook.construct_event\u0028\n        payload=request.data, sig_header=signature, secret=webhook_secret\u0029\n      data = event['data']\n    except Exception as e:\n      return e\n    # Get the type of webhook event sent - used to check the status of PaymentIntents.\n    event_type = event['type']\n  else:\n    data = request_data['data']\n    event_type = request_data['type']\n\n  data_object = data['object']\n\n  if event_type == 'invoice.paid':\n    # Used to provision services after the trial has ended.\n    # The status of the invoice will show up as paid. Store the status in your\n    # database to reference when a user accesses your service to avoid hitting rate\n    # limits.\n    print\u0028data\u0029\n\n  if event_type == 'invoice.payment_failed':\n    # If the payment fails or the customer does not have a valid payment method,\n    # an invoice.payment_failed event is sent, the subscription becomes past_due.\n    # Use this webhook to notify your user that their payment has\n    # failed and to retrieve new card details.\n    print\u0028data\u0029\n\n  if event_type == 'customer.subscription.deleted':\n    # handle subscription canceled automatically based\n    # upon your subscription settings. Or if the user cancels it.\n    print\u0028data\u0029\n\n  return jsonify\u0028{'status': 'success'}\u0029\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"webhook.php","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\\Stripe\\Stripe::setApiKey\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\n\u0024event = null;\n\u0024payload = @file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n\u0024sig_header = \u0024_SERVER['HTTP_STRIPE_SIGNATURE'];\n\u0024webhook_secret = ",{"\u0024\u0024mdtype":"Tag","name":"CodeTooltip","attributes":{"content":"Example: whsec_c7681Dm","value":["'{{STRIPE_WEBHOOK_SECRET}}'"]},"children":[]},";\ntry {\n  \u0024event = \\Stripe\\Webhook::constructEvent\u0028\n    \u0024payload, \u0024sig_header, \u0024webhook_secret\n  \u0029;\n} catch\u0028\\UnexpectedValueException \u0024e\u0029 {\n  \u002F\u002F Invalid payload\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n} catch\u0028\\Stripe\\Exception\\SignatureVerificationException \u0024e\u0029 {\n  \u002F\u002F Invalid signature\n  http_response_code\u0028400\u0029;\n  exit\u0028\u0029;\n}\n\n\u002F\u002F Handle the event\n\u002F\u002F Review important events for Billing webhooks\n\u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n\u002F\u002F Remove comment to see the various objects sent for this sample\nswitch \u0028\u0024event-\u003Etype\u0029 {\n  case 'invoice.paid':\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    break;\n  case 'invoice.payment_failed':\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    break;\n  case 'customer.subscription.deleted':\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user\n    \u002F\u002F cancels it.\n    break;\n  \u002F\u002F ... handle other event types\n  default:\n    \u002F\u002F Unhandled event type\n}\n\nhttp_response_code\u0028200\u0029;\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fwebhook\",\n  \u0028request, response\u0029 -\u003E {\n    String payload = request.body\u0028\u0029;\n    String sigHeader = request.headers\u0028\"Stripe-Signature\"\u0029;\n    String endpointSecret = dotenv.get\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029;\n    Event event = null;\n\n    try {\n      event = Webhook.constructEvent\u0028payload, sigHeader, endpointSecret\u0029;\n    } catch \u0028SignatureVerificationException e\u0029 {\n      \u002F\u002F Invalid signature\n      response.status\u0028400\u0029;\n      return \"\";\n    }\n\n    \u002F\u002F Deserialize the nested object inside the event\n    EventDataObjectDeserializer dataObjectDeserializer = event.getDataObjectDeserializer\u0028\u0029;\n    StripeObject stripeObject = null;\n    if \u0028dataObjectDeserializer.getObject\u0028\u0029.isPresent\u0028\u0029\u0029 {\n      stripeObject = dataObjectDeserializer.getObject\u0028\u0029.get\u0028\u0029;\n    } else {\n      \u002F\u002F Deserialization failed, probably due to an API version mismatch.\n      \u002F\u002F Refer to the Javadoc documentation on \u0060EventDataObjectDeserializer\u0060 for\n      \u002F\u002F instructions on how to handle this case, or return an error here.\n    }\n\n    switch \u0028event.getType\u0028\u0029\u0029 {\n      case \"invoice.paid\":\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n        \u002F\u002F limits.\n        break;\n      case \"invoice.payment_failed\":\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case \"customer.subscription.deleted\":\n        \u002F\u002F handle subscription canceled automatically based\n        \u002F\u002F upon your subscription settings. Or if the user\n        \u002F\u002F cancels it.\n        break;\n      default:\n      \u002F\u002F Unhandled event type\n    }\n\n    response.status\u0028200\u0029;\n    return \"\";\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028\n  '\u002Fwebhook',\n  bodyParser.raw\u0028{ type: 'application\u002Fjson' }\u0029,\n  async \u0028req, res\u0029 =\u003E {\n    \u002F\u002F Retrieve the event by verifying the signature using the raw body and secret.\n    let event;\n\n    try {\n      event = stripe.webhooks.constructEvent\u0028\n        req.body,\n        req.headers['stripe-signature'],\n        process.env.STRIPE_WEBHOOK_SECRET\n      \u0029;\n    } catch \u0028err\u0029 {\n      console.log\u0028err\u0029;\n      console.log\u0028\u0060⚠️  Webhook signature verification failed.\u0060\u0029;\n      console.log\u0028\n        \u0060⚠️  Check the env file and enter the correct webhook secret.\u0060\n      \u0029;\n      return res.sendStatus\u0028400\u0029;\n    }\n    \u002F\u002F Extract the object from the event.\n    const dataObject = event.data.object;\n\n    \u002F\u002F Handle the event\n    \u002F\u002F Review important events for Billing webhooks\n    \u002F\u002F https:\u002F\u002Fstripe.com\u002Fdocs\u002Fbilling\u002Fwebhooks\n    \u002F\u002F Remove comment to see the various objects sent for this sample\n    switch \u0028event.type\u0029 {\n      case 'invoice.paid':\n        \u002F\u002F Used to provision services after the trial has ended.\n        \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n        \u002F\u002F database to reference when a user accesses your service to avoid hitting rate limits.\n        break;\n      case 'invoice.payment_failed':\n        \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n        \u002F\u002F  an invoice.payment_failed event is sent, the subscription becomes past_due.\n        \u002F\u002F Use this webhook to notify your user that their payment has\n        \u002F\u002F failed and to retrieve new card details.\n        break;\n      case 'customer.subscription.deleted':\n        if \u0028event.request \u0021= null\u0029 {\n          \u002F\u002F handle a subscription canceled by your request\n          \u002F\u002F from above.\n        } else {\n          \u002F\u002F handle subscription canceled automatically based\n          \u002F\u002F upon your subscription settings.\n        }\n        break;\n      default:\n      \u002F\u002F Unexpected event type\n    }\n    res.sendStatus\u0028200\u0029;\n  }\n\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleWebhook\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  b, err := ioutil.ReadAll\u0028r.Body\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"ioutil.ReadAll: %v\", err\u0029\n    return\n  }\n\n  event, err := webhook.ConstructEvent\u0028b, r.Header.Get\u0028\"Stripe-Signature\"\u0029, os.Getenv\u0028\"STRIPE_WEBHOOK_SECRET\"\u0029\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusBadRequest\u0029\n    log.Printf\u0028\"webhook.ConstructEvent: %v\", err\u0029\n    return\n  }\n\n  if event.Type == \"invoice.paid\" {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n    return\n  }\n\n  if event.Type == \"invoice.payment_failed\" {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n    return\n  }\n\n  if event.Type == \"customer.subscription.deleted\" {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it. {\n    return\n  }\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"webhook\"\u0029]\npublic async Task\u003CIActionResult\u003E Webhook\u0028\u0029\n{\n  var json = await new StreamReader\u0028HttpContext.Request.Body\u0029.ReadToEndAsync\u0028\u0029;\n  Event stripeEvent;\n  try\n  {\n    stripeEvent = EventUtility.ConstructEvent\u0028\n      json,\n      Request.Headers[\"Stripe-Signature\"],\n      this.options.Value.WebhookSecret\n    \u0029;\n    Console.WriteLine\u0028\u0024\"Webhook notification with type: {stripeEvent.Type} found for {stripeEvent.Id}\"\u0029;\n  }\n  catch \u0028Exception e\u0029\n  {\n    Console.WriteLine\u0028\u0024\"Something failed {e}\"\u0029;\n    return BadRequest\u0028\u0029;\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.paid\"\u0029\n  {\n    \u002F\u002F Used to provision services after the trial has ended.\n    \u002F\u002F The status of the invoice will show up as paid. Store the status in your\n    \u002F\u002F database to reference when a user accesses your service to avoid hitting rate\n    \u002F\u002F limits.\n  }\n\n  if \u0028stripeEvent.Type == \"invoice.payment_failed\"\u0029\n  {\n    \u002F\u002F If the payment fails or the customer does not have a valid payment method,\n    \u002F\u002F an invoice.payment_failed event is sent, the subscription becomes past_due.\n    \u002F\u002F Use this webhook to notify your user that their payment has\n    \u002F\u002F failed and to retrieve new card details.\n  }\n\n  if \u0028stripeEvent.Type == \"customer.subscription.deleted\"\u0029\n  {\n    \u002F\u002F handle subscription canceled automatically based\n    \u002F\u002F upon your subscription settings. Or if the user cancels it.\n  }\n  return Ok\u0028\u0029;\n}\n"]}]}}],"codeTabGroupID":"codetab_d0d51fe4f505be929e294a6308ddd11b44d311bb"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["During development, use the Stripe CLI to ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["observe webhooks and forward them to your application"]},". Run the following in a new terminal while your development app is running:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"bash","title":"curl"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"bash","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["  stripe listen --forward-to localhost:4242\u002Fwebhook\n"]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For production, set up a webhook endpoint URL in the Dashboard, or use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fwebhook_endpoints"},"children":["Webhook Endpoints API"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["You’ll listen to a couple of events to complete the remaining steps in this guide. See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-events"},"children":["Subscription events"]}," for more details about subscription-specific webhooks."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"provision-access","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Provision access to your service","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Now that the subscription is active, give your user access to your service.  To do this, listen to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.created"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]},", and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," events.  These events pass a subscription object which contains a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"status"},"children":[]}," field indicating whether the subscription is active, past due, or canceled.  See ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-lifecycle"},"children":["the subscription lifecycle"]}," for a complete list of statuses."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["In your webhook handler:"]},{"\u0024\u0024mdtype":"Tag","name":"List","attributes":{"ordered":true,"columns":1},"children":[{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Verify the subscription status.  If it’s ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"active"},"children":[]}," then your user has paid for your product."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Check the product the customer subscribed to and grant access to your service. Checking the product instead of the price gives you more flexibility if you need to change the pricing or billing interval."]},{"\u0024\u0024mdtype":"Tag","name":"ListItem","attributes":{},"children":["Store the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"product.id"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"subscription.status"},"children":[]}," in your database along with the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.id"},"children":[]}," you already saved.  Check this record when determining which features to enable for the user in your application."]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The state of a subscription might change at any point during its lifetime, even if your application does not directly make any calls to Stripe.  For example, a renewal might fail due to an expired credit card, which puts the subscription into a past due state.  Or, if you implement the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fcustomer-management"},"children":["customer portal"]},", a user might cancel their subscription without directly visiting your application.  Implementing your handler correctly keeps your application state in sync with Stripe."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"cancel-subscription","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":false,"title":"Cancel the subscription","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["It’s common to allow customers to cancel their subscriptions. This example adds a cancellation option to the account settings page."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["The example collects the subscription ID on the frontend, but your application can get this information from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"Image","attributes":{"src":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-subscriptions-guide-account-settings.6559626ba4b434826a67abfea165e097.png","alt":"Sample subscription cancelation interface.","width":60},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Account settings with the ability to cancel the subscription"]}]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"SubscriptionView.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const cancelSubscription = async subscriptionId =\u003E {\n  const apiEndpoint =\n    Platform.OS === 'ios' ? 'http:\u002F\u002Flocalhost:4242' : 'http:\u002F\u002F10.0.2.2:4567';\n  const response = await fetch\u0028\u0060\u0024{apiEndpoint}\u002Fcancel-subscription\u0060, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      subscriptionId: subscriptionId,\n    }\u0029,\n  }\u0029;\n  if \u0028response.status === 200\u0029 {\n    const subscription = await response.json\u0028\u0029;\n    return subscription;\n  }\n};\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your app to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fcancel-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fcancel-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  deleted_subscription = Stripe::Subscription.cancel\u0028data['subscriptionId']\u0029\n\n  deleted_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fcancel-subscription', methods=['POST']\u0029\ndef cancelSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n         # Cancel the subscription by deleting it\n        deletedSubscription = stripe.Subscription.delete\u0028data['subscriptionId']\u0029\n        return jsonify\u0028deletedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\n    \u0024json-\u003EsubscriptionId\n  \u0029;\n  \u0024subscription-\u003Edelete\u0028\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'subscription' =\u003E \u0024subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n      \"\u002Fcancel-subscription\",\n      \u0028request, response\u0029 -\u003E {\n        response.type\u0028\"application\u002Fjson\"\u0029;\n        \u002F\u002F Set the default payment method on the customer\n        CancelPostBody postBody = gson.fromJson\u0028\n          request.body\u0028\u0029,\n          CancelPostBody.class\n        \u0029;\n\n        Subscription subscription = Subscription.retrieve\u0028\n          postBody.getSubscriptionId\u0028\u0029\n        \u0029;\n\n        Subscription deletedSubscription = subscription.cancel\u0028\u0029;\n        return deletedSubscription.toJson\u0028\u0029;\n      }\n    \u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fcancel-subscription', async \u0028req, res\u0029 =\u003E {\n  \u002F\u002F Delete the subscription\n  const deletedSubscription = await stripe.subscriptions.del\u0028\n    req.body.subscriptionId\n  \u0029;\n  res.send\u0028deletedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleCancelSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n  s, err := subscription.Cancel\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Cancel: %v\", err\u0029\n    return\n  }\n  writeJSON\u0028w, s\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"CancelSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class CancelSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"cancel-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E CancelSubscription\u0028[FromBody] CancelSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Cancel\u0028req.Subscription, null\u0029;\n    return subscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_23c7478f8e9b8a0cd6a2af01f0a0c4f9e497345a"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your backend receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.deleted"},"children":[]}," event."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["After the subscription is canceled, update your database to remove the Stripe subscription ID you previously stored, and limit access to your service."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When a subscription is canceled, it can’t be reactivated. Instead, collect updated billing information from your customer, update their default payment method, and create a new subscription with their existing customer record."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"test","beta":false,"collapsable":true,"numbered":true,"optional":false,"title":"Test your integration","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Ftesting-scenarios.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"test-payment-methods"},"children":["Test payment methods"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use the following table to test different payment methods and scenarios."]},{"\u0024\u0024mdtype":"Tag","name":"Table","attributes":{"type":"striped","fixed":false,"sortable":false,"filterable":false,"wrap":true,"displayRowHeaders":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"thead","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Payment method"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["Scenario"]},{"\u0024\u0024mdtype":"Tag","name":"TableHeaderCell","attributes":{},"children":["How to test"]}]}]},{"\u0024\u0024mdtype":"Tag","name":"tbody","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with BECS Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"900123456"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},". The confirmed PaymentIntent initially transitions to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]},", then transitions to the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["BECS Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment fails with an ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"account_closed"},"children":[]}," error code."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"111111113"},"children":[]}," and BSB ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"000-000"},"children":[]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment succeeds and does not require authentication."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4242 4242 4242 4242"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card payment requires ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"sca"},"children":["authentication"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0025 0000 3155"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Credit card"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["The card is declined with a decline code like ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"insufficient_funds"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the credit card form using the credit card number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"4000 0000 0000 9995"},"children":[]}," with any expiration, CVC, and postal code."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer successfully pays with SEPA Direct Debit."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT321904300235473204"},"children":[]},". The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later."]}]},{"\u0024\u0024mdtype":"Tag","name":"TableRow","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["SEPA Direct Debit"]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Your customer’s payment intent status transition from ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"processing"},"children":[]}," to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},"."]},{"\u0024\u0024mdtype":"Tag","name":"TableCell","attributes":{},"children":["Fill out the form using the account number ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"AT861904300235473202"},"children":[]},"."]}]}]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Heading","attributes":{"level":3,"anchored":true,"id":"monitor-events"},"children":["Monitor events"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Set up webhooks to listen to subscription change events like upgrades and cancellations. Read the guide to learn more about ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["subscription webhooks"]},". You can view events in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fdashboard.stripe.com\u002Ftest\u002Fevents"},"children":["Dashboard"]},"\u0029 or with the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fwebhooks#test-webhook"},"children":["Stripe CLI"]},"."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["For more details, see ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Ftesting"},"children":["testing your Billing integration"]},"."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"change-price","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Let customers change their plans","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["To let your customers change their subscription, collect the price ID of the option they want to change to. Then send the new price ID from the app to a backend endpoint. This example also passes the subscription ID, but you can retrieve it from your database for your logged in user."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"UpdateSubscription.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const updateSubscription = async \u0028subscriptionId, priceId\u0029 =\u003E {\n  const apiEndpoint =\n    Platform.OS === 'ios' ? 'http:\u002F\u002Flocalhost:4242' : 'http:\u002F\u002F10.0.2.2:4567';\n  const response = await fetch\u0028\u0060\u0024{apiEndpoint}\u002Fupdate-subscription\u0060, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      subscriptionId: subscriptionId,\n      priceId: priceId,\n    }\u0029,\n  }\u0029;\n  if \u0028response.status === 200\u0029 {\n    const subscription = await response.json\u0028\u0029;\n    return subscription;\n  }\n};\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call, passing the subscription ID and the new price ID. The subscription is now Premium, at 15 USD per month, instead of Basic at 5 USD per month."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fupdate-subscription.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fupdate-subscription' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  updated_subscription =\n    Stripe::Subscription.update\u0028\n      data['subscriptionId'],\n      cancel_at_period_end: false,\n      items: [\n        { id: subscription.items.data[0].id, price: 'price_H1NlVtpo6ubk0m' }\n      ]\n    \u0029\n\n  updated_subscription.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fupdate-subscription', methods=['POST']\u0029\ndef updateSubscription\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        updatedSubscription = stripe.Subscription.modify\u0028\n            data['subscriptionId'],\n            cancel_at_period_end=False,\n            items=[{\n                'id': subscription['items']['data'][0].id,\n                'price': 'price_H1NlVtpo6ubk0m',\n            }]\n        \u0029\n        return jsonify\u0028updatedSubscription\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024updated_subscription = \u0024stripe-\u003Esubscriptions-\u003Eupdate\u0028\u0024json-\u003EsubscriptionId, [\n    'items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'price' =\u003E 'price_H1NlVtpo6ubk0m',\n      ],\n    ],\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'updatedSubscription' =\u003E \u0024updated_subscription,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fupdate-subscription\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    UpdatePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpdatePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    SubscriptionUpdateParams params = SubscriptionUpdateParams\n      .builder\u0028\u0029\n      .addItem\u0028\n        SubscriptionUpdateParams\n          .Item.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setPrice\u0028\"price_H1NlVtpo6ubk0m\"\u0029\n          .build\u0028\u0029\n      \u0029\n      .setCancelAtPeriodEnd\u0028false\u0029\n      .build\u0028\u0029;\n\n    subscription.update\u0028params\u0029;\n    return subscription.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fupdate-subscription', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n  const updatedSubscription = await stripe.subscriptions.update\u0028\n    req.body.subscriptionId,\n    {\n      cancel_at_period_end: false,\n      items: [\n        {\n          id: subscription.items.data[0].id,\n          price: \"price_H1NlVtpo6ubk0m\",\n        },\n      ],\n    }\n  \u0029;\n\n  res.send\u0028updatedSubscription\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleUpdateSubscription\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n\n  params := \u0026stripe.SubscriptionParams{\n    CancelAtPeriodEnd: stripe.Bool\u0028false\u0029,\n    Items: []*stripe.SubscriptionItemsParams{{\n      ID:    stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Price: stripe.String\u0028\"price_H1NlVtpo6ubk0m\"\u0029,\n    }},\n  }\n\n  updatedSubscription, err := subscription.Update\u0028req.SubscriptionID, params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Update: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, updatedSubscription\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"UpdateSubscriptionRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class UpdateSubscriptionRequest\n{\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"update-subscription\"\u0029]\npublic ActionResult\u003CSubscription\u003E UpdateSubscription\u0028[FromBody] UpdateSubscriptionRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var options = new SubscriptionUpdateOptions\n    {\n        CancelAtPeriodEnd = false,\n        Items = new List\u003CSubscriptionItemOptions\u003E\n        {\n            new SubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Price = \"price_H1NlVtpo6ubk0m\",\n            }\n        }\n    };\n    var updatedSubscription = service.Update\u0028req.Subscription, options\u0029;\n    return updatedSubscription;\n}\n"]}]}}],"codeTabGroupID":"codetab_7ab4e8df4b9fa3ff59eefcc835c1d41fe07265f6"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Your application receives a ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"customer.subscription.updated"},"children":[]}," event."]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"preview-invoice","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Preview a price change","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When your customer changes their subscription, there’s often an adjustment to the amount they owe, known as a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations"},"children":["proration"]},". You can use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Finvoices\u002Fupcoming"},"children":["upcoming invoice endpoint"]}," to display the adjusted amount to your customers."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["From the app, pass the upcoming invoice details to a back-end endpoint."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"RetrieveUpcomingInvoice.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const retrieveUpcomingInvoice = async \u0028subscriptionId, priceId, newPriceId\u0029 =\u003E {\n  const apiEndpoint =\n    Platform.OS === 'ios' ? 'http:\u002F\u002Flocalhost:4242' : 'http:\u002F\u002F10.0.2.2:4567';\n  const response = await fetch\u0028\u0060\u0024{apiEndpoint}\u002Fretrieve-upcoming-invoice\u0060, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application\u002Fjson',\n    },\n    body: JSON.stringify\u0028{\n      subscriptionId: subscriptionId,\n      priceId: priceId,\n      newPriceId: newPriceId,\n    }\u0029,\n  }\u0029;\n  if \u0028response.status === 200\u0029 {\n    const invoice = await response.json\u0028\u0029;\n    return invoice;\n  }\n};\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the backend, define the endpoint for your frontend to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-upcoming-invoice.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-upcoming-invoice' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  subscription = Stripe::Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n  invoice =\n    Stripe::Invoice.upcoming\u0028\n      customer: data['customerId'],\n      subscription: data['subscriptionId'],\n      subscription_items: [\n        { id: subscription.items.data[0].id, deleted: true },\n        { price: ENV[data['newPriceId']], deleted: false }\n      ]\n    \u0029\n\n  invoice.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-upcoming-invoice', methods=['POST']\u0029\ndef retrieveUpcomingInvoice\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        # Retrieve the subscription\n        subscription = stripe.Subscription.retrieve\u0028data['subscriptionId']\u0029\n\n        # Retrieve the invoice\n        invoice = stripe.Invoice.upcoming\u0028\n            customer=data['customerId'],\n            subscription=data['subscriptionId'],\n            subscription_items=[\n                {\n                    'id': subscription['items']['data'][0].id,\n                    'deleted': True,\n                },\n                {\n                    'price': 'price_H1NlVtpo6ubk0m',\n                    'deleted': False,\n                }\n            ],\n        \u0029\n        return jsonify\u0028invoice\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024subscription = \u0024stripe-\u003Esubscriptions-\u003Eretrieve\u0028\u0024json-\u003EsubscriptionId\u0029;\n\n  \u0024invoice = \u0024stripe-\u003Einvoices-\u003Eupcoming\u0028[\n    'customer' =\u003E \u0024json-\u003EcustomerId,\n    'subscription_prorate' =\u003E true,\n    'subscription' =\u003E \u0024json-\u003EsubscriptionId,\n    'subscription_items' =\u003E [\n      [\n        'id' =\u003E \u0024subscription-\u003Eitems-\u003Edata[0]-\u003Eid,\n        'deleted' =\u003E true\n      ],\n      [\n        'price' =\u003E \u0024json-\u003EnewPriceId,\n        'deleted' =\u003E false\n      ],\n    ]\n  ]\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'invoice' =\u003E \u0024invoice,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-upcoming-invoice\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    UpcomingInvoicePostBody postBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      UpcomingInvoicePostBody.class\n    \u0029;\n\n    Subscription subscription = Subscription.retrieve\u0028\n      postBody.getSubscriptionId\u0028\u0029\n    \u0029;\n\n    InvoiceUpcomingParams invoiceParams = InvoiceUpcomingParams\n      .builder\u0028\u0029\n      .setCustomer\u0028postBody.getCustomerId\u0028\u0029\u0029\n      .setSubscription\u0028postBody.getSubscriptionId\u0028\u0029\u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setId\u0028subscription.getItems\u0028\u0029.getData\u0028\u0029.get\u00280\u0029.getId\u0028\u0029\u0029\n          .setDeleted\u0028true\u0029\n          .build\u0028\u0029\n      \u0029\n      .addSubscriptionItem\u0028\n        InvoiceUpcomingParams\n          .SubscriptionItem.builder\u0028\u0029\n          .setPrice\u0028dotenv.get\u0028postBody.getNewPriceId\u0028\u0029.toUpperCase\u0028\u0029\u0029\u0029\n          .build\u0028\u0029\n      \u0029\n      .build\u0028\u0029;\n\n    Invoice invoice = Invoice.upcoming\u0028invoiceParams\u0029;\n\n    return invoice.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-upcoming-invoice', async \u0028req, res\u0029 =\u003E {\n  const subscription = await stripe.subscriptions.retrieve\u0028\n    req.body.subscriptionId\n  \u0029;\n\n  const invoice = await stripe.invoices.retrieveUpcoming\u0028{\n    subscription_prorate: true,\n    customer: req.body.customerId,\n    subscription: req.body.subscriptionId,\n    subscription_items: [\n      {\n        id: subscription.items.data[0].id,\n        deleted: true,\n      },\n      {\n        \u002F\u002F This price ID is the price you want to change the subscription to.\n        price: 'price_H1NlVtpo6ubk0m',\n        deleted: false,\n      },\n    ],\n  }\u0029;\n  res.send\u0028invoice\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveUpcomingInvoice\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    SubscriptionID string \u0060json:\"subscriptionId\"\u0060\n    CustomerID     string \u0060json:\"customerId\"\u0060\n    NewPriceID     string \u0060json:\"newPriceId\"\u0060\n  }\n\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  s, err := subscription.Get\u0028req.SubscriptionID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"subscription.Get: %v\", err\u0029\n    return\n  }\n  params := \u0026stripe.InvoiceParams{\n    Customer:     stripe.String\u0028req.CustomerID\u0029,\n    Subscription: stripe.String\u0028req.SubscriptionID\u0029,\n    SubscriptionItems: []*stripe.SubscriptionItemsParams{{\n      ID:      stripe.String\u0028s.Items.Data[0].ID\u0029,\n      Deleted: stripe.Bool\u0028true\u0029,\n    }, {\n      Price:   stripe.String\u0028os.Getenv\u0028req.NewPriceID\u0029\u0029,\n      Deleted: stripe.Bool\u0028false\u0029,\n    }},\n  }\n  in, err := invoice.GetNext\u0028params\u0029\n\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"invoice.GetNext: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, in\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveUpcomingInvoiceRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveUpcomingInvoiceRequest\n{\n    [JsonProperty\u0028\"customerId\"\u0029]\n    public string Customer { get; set; }\n\n    [JsonProperty\u0028\"subscriptionId\"\u0029]\n    public string Subscription { get; set; }\n\n    [JsonProperty\u0028\"newPriceId\"\u0029]\n    public string NewPrice { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-upcoming-invoice\"\u0029]\npublic ActionResult\u003CInvoice\u003E RetrieveUpcomingInvoice\u0028[FromBody] RetrieveUpcomingInvoiceRequest req\u0029\n{\n    var service = new SubscriptionService\u0028\u0029;\n    var subscription = service.Get\u0028req.Subscription\u0029;\n\n    var invoiceService = new InvoiceService\u0028\u0029;\n    var options = new UpcomingInvoiceOptions\n    {\n        Customer = req.Customer,\n        Subscription = req.Subscription,\n        SubscriptionItems = new List\u003CInvoiceSubscriptionItemOptions\u003E\n        {\n            new InvoiceSubscriptionItemOptions\n            {\n                Id = subscription.Items.Data[0].Id,\n                Deleted = true,\n            },\n            new InvoiceSubscriptionItemOptions\n            {\n                \u002F\u002F TODO: This should be Price, but isn't in Stripe.net yet.\n                Plan = Environment.GetEnvironmentVariable\u0028req.NewPrice\u0029,\n                Deleted = false,\n            },\n        }\n    };\n    Invoice upcoming = invoiceService.Upcoming\u0028options\u0029;\n    return upcoming;\n}\n"]}]}}],"codeTabGroupID":"codetab_7f975c16372b724ce83f59a6b53ed89c36ec9861"},"children":[]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"display-payment-method","beta":false,"badges":["Client and Server"],"collapsable":true,"numbered":true,"optional":true,"title":"Display the customer payment method","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Displaying the brand and last four digits of your customer’s card can help them know which card is being charged, or if they need to update their payment method."]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the front end, send the payment method ID to a back-end endpoint that retrieves the payment method details."]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"RetrieveCustomerPaymentMethod.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["const retrieveCustomerPaymentMethod = async paymentMethodId =\u003E {\n  const apiEndpoint =\n    Platform.OS === 'ios' ? 'http:\u002F\u002Flocalhost:4242' : 'http:\u002F\u002F10.0.2.2:4567';\n  const response = await fetch\u0028\n    \u0060\u0024{apiEndpoint}\u002Fretrieve-customer-payment-method\u0060,\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application\u002Fjson',\n      },\n      body: JSON.stringify\u0028{\n        paymentMethodId: paymentMethodId,\n      }\u0029,\n    },\n  \u0029;\n  if \u0028response.status === 200\u0029 {\n    const paymentMethod = await response.json\u0028\u0029;\n    return paymentMethod;\n  }\n};\n"]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["On the back end, define the endpoint for your app to call."]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Fbilling\u002Fsubscriptions\u002Fcode-examples-subs-ie\u002Fretrieve-customer-payment-method.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeTabGroup","attributes":{"pref":"lang","items":[{"id":"ruby","title":"Ruby","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"ruby","title":"Ruby"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"ruby","filename":"server.rb","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\npost '\u002Fretrieve-customer-payment-method' do\n  content_type 'application\u002Fjson'\n  data = JSON.parse request.body.read\n\n  payment_method = Stripe::PaymentMethod.retrieve\u0028data['paymentMethodId']\u0029\n\n  payment_method.to_json\nend\n"]}]}},{"id":"python","title":"Python","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"python","title":"Python"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"python","filename":"server.py","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","#"," Set your secret key."," Remember to switch to your live secret key in production.\n","","#"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","stripe.api_key = '",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'","\n\n@app.route\u0028'\u002Fretrieve-customer-payment-method', methods=['POST']\u0029\ndef retrieveCustomerPaymentMethod\u0028\u0029:\n    data = json.loads\u0028request.data\u0029\n    try:\n        paymentMethod = stripe.PaymentMethod.retrieve\u0028\n            data['paymentMethodId'],\n        \u0029\n        return jsonify\u0028paymentMethod\u0029\n    except Exception as e:\n        return jsonify\u0028error=str\u0028e\u0029\u0029, 403\n"]}]}},{"id":"php","title":"PHP","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"php","title":"PHP"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"php","filename":"index.php","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","\u0024stripe = new \\Stripe\\StripeClient\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","constructPhpClient":true,"value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\nif \u0028\u0024_SERVER['REQUEST_METHOD'] === 'POST'\u0029 {\n  \u0024body = file_get_contents\u0028'php:\u002F\u002Finput'\u0029;\n  \u0024json = json_decode\u0028\u0024body\u0029;\n\n  \u0024payment_method = \u0024stripe-\u003EpaymentMethods-\u003Eretrieve\u0028\u0024json-\u003EpaymentMethodId\u0029;\n\n  header\u0028'Content-Type: application\u002Fjson'\u0029;\n  echo json_encode\u0028[\n    'paymentMethod' =\u003E \u0024payment_method,\n  ]\u0029;\n}\n"]}]}},{"id":"java","title":"Java","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"java","title":"Java"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"java","filename":"Server.java","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","Stripe.apiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\npost\u0028\n  \"\u002Fretrieve-customer-payment-method\",\n  \u0028request, response\u0029 -\u003E {\n    response.type\u0028\"application\u002Fjson\"\u0029;\n    \u002F\u002F Set the default payment method on the customer\n    PaymentMethodBody paymentMethodBody = gson.fromJson\u0028\n      request.body\u0028\u0029,\n      PaymentMethodBody.class\n    \u0029;\n\n    PaymentMethod paymentMethod = PaymentMethod.retrieve\u0028\n      paymentMethodBody.getPaymentMethodId\u0028\u0029\n    \u0029;\n    return paymentMethod.toJson\u0028\u0029;\n  }\n\u0029;\n"]}]}},{"id":"node","title":"Node","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"node","title":"Node"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"javascript","filename":"server.js","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","const stripe = require\u0028'stripe'\u0029\u0028'",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"'\u0029;","\n\napp.post\u0028'\u002Fretrieve-customer-payment-method', async \u0028req, res\u0029 =\u003E {\n  const paymentMethod = await stripe.paymentMethods.retrieve\u0028\n    req.body.paymentMethodId\n  \u0029;\n\n  res.send\u0028paymentMethod\u0029;\n}\u0029;\n"]}]}},{"id":"go","title":"Go","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"go","title":"Go"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"go","filename":"server.go","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","stripe.Key = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\"","\n\nfunc handleRetrieveCustomerPaymentMethod\u0028w http.ResponseWriter, r *http.Request\u0029 {\n  if r.Method \u0021= \"POST\" {\n    http.Error\u0028w, http.StatusText\u0028http.StatusMethodNotAllowed\u0029, http.StatusMethodNotAllowed\u0029\n    return\n  }\n  var req struct {\n    PaymentMethodID string \u0060json:\"paymentMethodId\"\u0060\n  }\n  if err := json.NewDecoder\u0028r.Body\u0029.Decode\u0028\u0026req\u0029; err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"json.NewDecoder.Decode: %v\", err\u0029\n    return\n  }\n\n  pm, err := paymentmethod.Get\u0028req.PaymentMethodID, nil\u0029\n  if err \u0021= nil {\n    http.Error\u0028w, err.Error\u0028\u0029, http.StatusInternalServerError\u0029\n    log.Printf\u0028\"paymentmethod.Get: %v\", err\u0029\n    return\n  }\n\n  writeJSON\u0028w, pm\u0029\n}\n"]}]}},{"id":"dotnet","title":".NET","content":{"\u0024\u0024mdtype":"Tag","name":"CodeTab","attributes":{"id":"dotnet","title":".NET"},"children":[{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"RetrieveCustomerPaymentMethodRequest.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["using Newtonsoft.Json;\n\npublic class RetrieveCustomerPaymentMethodRequest\n{\n    [JsonProperty\u0028\"paymentMethodId\"\u0029]\n    public string PaymentMethod { get; set; }\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"dotnet","filename":"BillingController.cs","numbered":true,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["\n","","\u002F\u002F"," Set your secret key."," Remember to switch to your live secret key in production.\n","","\u002F\u002F"," See your keys here: https:\u002F\u002Fdashboard.stripe.com\u002Fapikeys\n","","StripeConfiguration.ApiKey = \"",{"\u0024\u0024mdtype":"Tag","name":"KeyToken","attributes":{"type":"secret","value":"sk_test_4eC39HqLyjWDarjtT1zdp7dc"},"children":[]},"\";","\n\n[HttpPost\u0028\"retrieve-customer-payment-method\"\u0029]\npublic ActionResult\u003CPaymentMethod\u003E RetrieveCustomerPaymentMethod\u0028[FromBody] RetrieveCustomerPaymentMethodRequest req\u0029\n{\n    var service = new PaymentMethodService\u0028\u0029;\n    var paymentMethod = service.Get\u0028req.PaymentMethod\u0029;\n    return paymentMethod;\n}\n"]}]}}],"codeTabGroupID":"codetab_9ced3cdc5383753ed362275de5f5b21df92e9a57"},"children":[]}]},{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Example response:"]},{"\u0024\u0024mdtype":"Tag","name":"CodeBlock","attributes":{"language":"json","numbered":true,"maxLines":10,"downloadOnly":false,"showIntellisenseTooltips":true,"highlights":{"default":[],"add":[],"remove":[]}},"children":["{\n  \"id\": \"pm_1GcbHY2eZvKYlo2CoqlVxo42\",\n  \"object\": \"payment_method\",\n  \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\": null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\": null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n    \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\": null,\n      \"cvc_check\": \"pass\"\n    },\n    \"country\": \"US\",\n    \"exp_month\": 8,\n    \"exp_year\": 2021,\n    \"fingerprint\": \"Xt5EWLLDS7FJjR1c\",\n    \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\": \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n    \"wallet\": null\n  },\n  \"created\": 1588010536,\n  \"customer\": \"cus_HAxB7dVQxhoKLh\",\n  \"livemode\": false,\n  \"metadata\": {},\n  \"type\": \"card\"\n}\n"]},{"\u0024\u0024mdtype":"Tag","name":"Callout","attributes":{"type":"note"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["We recommend that you save the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," and ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"last4"},"children":[]}," in your database, for example, ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"paymentMethod.id"},"children":[]}," as ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"stripeCustomerPaymentMethodId"},"children":[]}," in your ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"users"},"children":[]}," collection or table. You can optionally store ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_month"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"exp_year"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"fingerprint"},"children":[]},", ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"billing_details"},"children":[]}," as needed. This is to limit the number of calls you make to Stripe—for both performance efficiency and to avoid possible rate limiting."]}]}]},{"\u0024\u0024mdtype":"Tag","name":"Partial","attributes":{"file":"partials\u002Felements\u002Fdisclosure-cookies.md"},"children":[{"\u0024\u0024mdtype":"Tag","name":"Section","attributes":{"id":"disclose-cookies","beta":false,"collapsable":false,"numbered":false,"optional":false,"title":"Disclose Stripe to your customers","toc":false},"children":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Stripe collects information on customer interactions with Elements to provide services to you, prevent fraud, and improve its services. This includes using cookies and IP addresses to identify which Elements a customer saw during a single checkout session. You’re responsible for disclosing and obtaining all rights and consents necessary for Stripe to use data in these ways. For more information, visit our ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"https:\u002F\u002Fstripe.com\u002Flegal\u002Fprivacy-center#as-a-business-user-what-notice-do-i-provide-to-my-end-customers-about-stripe"},"children":["privacy center"]},"."]}]}]}]}]}]},"shell_features":{"csat":true,"footer":true,"toc":true,"header":true},"breadcrumbs":[{"href":"\u002Fbilling","text":"Billing"},{"href":"\u002Fsubscriptions","text":"Subscriptions"},{"href":"\u002Fbilling\u002Fsubscriptions\u002Fintegration","text":"Build your integration"},{"href":"\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscriptions","text":"Build a subscriptions integration"}],"images":{"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002Ffixed-price-subscriptions-guide-account-settings.6559626ba4b434826a67abfea165e097.png":{"width":1440,"height":916,"lazy":true}},"format":"markdoc","intl":{"country":"US","locale":"en-US","translated":true,"availableLocales":[{"code":"de-DE","name":"Deutsch","generated":false},{"code":"en-GB","name":"English \u0028United Kingdom\u0029","generated":false},{"code":"en-US","name":"English \u0028United States\u0029","generated":false},{"code":"fr-FR","name":"Français \u0028France\u0029","generated":false},{"code":"ja-JP","name":"日本語","generated":false}],"translationPercent":1,"translationBanner":false},"metadata":{"subtitle":"Create and manage subscriptions to accept recurring payments.","title":"Build a subscriptions integration"},"openGraphImageUrl":"https:\u002F\u002Fd37ugbyn3rpeym.cloudfront.net\u002Fdocs\u002Fog-image\u002Fbilling.subscriptions.build-subscriptions.ogimage.png","pages":[{"title":"Stripe-hosted page","prefs":{"platform":"web","ui":"stripe-hosted"},"sections":[{"id":"build","title":"What you’ll build "},{"id":"set-up-stripe","title":"Set up Stripe"},{"id":"create-pricing-model","title":"Create the pricing model"},{"id":"create-session","title":"Create a Checkout Session"},{"id":"provision-and-monitor","title":"Provision and monitor subscriptions"},{"id":"configure-portal","title":"Configure the customer portal"},{"id":"create-portal-session","title":"Create a portal Session"},{"id":"send-to-portal","title":"Send customers to the customer portal"},{"id":"test","title":"Test your integration"},{"id":"see-also","title":"See also","titleDescriptor":{"id":"docsApp.components.seealso.defaultHeading","defaultMessage":"See also"}}]},{"title":"Embedded form","prefs":{"platform":"web","ui":"embedded-form"},"sections":[{"id":"set-up-server","title":"Set up the server"},{"id":"build-page","title":"Build your subscription page"},{"id":"return-page","title":"Show a return page"},{"id":"provision-access","title":"Provision access"},{"id":"test-embedded-page","title":"Test your integration"}]},{"title":"Custom flow","prefs":{"platform":"web","ui":"elements"},"sections":[{"id":"build","title":"What you’ll build "},{"id":"how-to-model-it-on-stripe","title":"How to model it on Stripe"},{"id":"install-setup","title":"Set up Stripe"},{"id":"create-pricing-model","title":"Create the pricing model"},{"id":"create-customer","title":"Create the customer"},{"id":"create-subscription","title":"Create the subscription"},{"id":"collect-payment","title":"Collect payment information"},{"id":"webhooks","title":"Listen for webhooks"},{"id":"provision-access","title":"Provision access to your service"},{"id":"cancel-subscription","title":"Cancel the subscription"},{"id":"test","title":"Test your integration"},{"id":"disclose-cookies","title":"Disclose Stripe to your customers"}]},{"title":"iOS","prefs":{"platform":"ios"},"sections":[{"id":"build","title":"Build your subscription "},{"id":"how-to-model-it-on-stripe","title":"How to model it on Stripe"},{"id":"install-setup","title":"Set up Stripe"},{"id":"create-pricing-model","title":"Create the pricing model"},{"id":"create-customer","title":"Create the customer"},{"id":"create-subscription","title":"Create the subscription"},{"id":"collect-payment","title":"Collect payment information"},{"id":"ios-set-up-return-url","title":"Set up a return URL"},{"id":"webhooks","title":"Listen for webhooks"},{"id":"provision-access","title":"Provision access to your service"},{"id":"cancel-subscription","title":"Cancel the subscription"},{"id":"test","title":"Test your integration"},{"id":"disclose-cookies","title":"Disclose Stripe to your customers"}]},{"title":"Android","prefs":{"platform":"android"},"sections":[{"id":"build","title":"Build your subscription "},{"id":"how-to-model-it-on-stripe","title":"How to model it on Stripe"},{"id":"install-setup","title":"Set up Stripe"},{"id":"create-pricing-model","title":"Create the pricing model"},{"id":"create-customer","title":"Create the customer"},{"id":"create-subscription","title":"Create the subscription"},{"id":"collect-payment","title":"Collect payment information"},{"id":"webhooks","title":"Listen for webhooks"},{"id":"provision-access","title":"Provision access to your service"},{"id":"cancel-subscription","title":"Cancel the subscription"},{"id":"test","title":"Test your integration"},{"id":"disclose-cookies","title":"Disclose Stripe to your customers"}]},{"title":"React Native","prefs":{"platform":"react-native"},"sections":[{"id":"build","title":"Build your subscription "},{"id":"how-to-model-it-on-stripe","title":"How to model it on Stripe"},{"id":"install-setup","title":"Set up Stripe"},{"id":"create-pricing-model","title":"Create the pricing model"},{"id":"create-customer","title":"Create the customer"},{"id":"create-subscription","title":"Create the subscription"},{"id":"collect-payment","title":"Collect payment information"},{"id":"react-native-set-up-return-url","title":"Set up a return URL \u0028iOS only\u0029"},{"id":"webhooks","title":"Listen for webhooks"},{"id":"provision-access","title":"Provision access to your service"},{"id":"cancel-subscription","title":"Cancel the subscription"},{"id":"test","title":"Test your integration"},{"id":"disclose-cookies","title":"Disclose Stripe to your customers"}]}],"pagePrefs":["platform","ui"],"path":"\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscriptions","relatedDocs":null,"integrationBuilder":"\u002Fbilling\u002Fquickstart","stripeProducts":["billing","checkout","elements"],"previews":{"\u002Fpayments\u002Fcheckout":{"type":"page","title":"Stripe Checkout","subtitle":"Build a low-code payment form and embed it on your site or host it on Stripe."},"\u002Fcustomer-management":{"type":"page","title":"Customer self-service with a customer portal","subtitle":"Allow your customers to manage their own accounts and subscriptions."},"\u002Fno-code\u002Fsubscriptions":{"type":"page","title":"Create subscriptions","subtitle":"Set up recurring payments by offering subscriptions to your service."},"\u002Fpayment-links":{"type":"page","title":"Payment Links","subtitle":"Sell online without building a digital storefront."},"\u002Fbilling\u002Fsubscriptions\u002Fdesigning-integration":{"type":"page","title":"Designing an integration","subtitle":"Learn what choices you need to make to integrate subscriptions into your business."},"\u002Fpayments\u002Fcheckout\u002Ftaxes":{"type":"page","title":"Collect taxes in Checkout","subtitle":"Learn how to collect taxes for one-time payments in Stripe Checkout."},"\u002Fbilling\u002Fsubscriptions\u002Fcoupons#using-coupons-in-checkout":{"type":"section","title":"Flexible coupons and promotion codes","sectionText":"Apply coupons to Checkout","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Apply coupons to subscriptions in a Checkout Session by setting the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"discounts"},"children":[]}," parameter in the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fcheckout\u002Fsessions\u002Fcreate#create_checkout_session-discounts"},"children":["API"]},". To create a session with an applied discount, pass the coupon ID in the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"coupon"},"children":[]}," parameter of the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"discounts"},"children":[]}," array. This coupon overrides any coupon on the customer."]}]},"\u002Fbilling\u002Fsubscriptions\u002Ftrials":{"type":"page","title":"Using trial periods on subscriptions","subtitle":"Delay payments on active subscriptions using trial periods."},"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#low-code":{"type":"section","title":"Payment method integration options","sectionText":"Low-code integrations","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["If you’re looking for more control over your payments integration, Stripe offers several unique low-code offerings:"]}]},"\u002Finvoicing\u002Fhosted-invoice-page":{"type":"page","title":"Hosted Invoice Page","subtitle":"Use the Hosted Invoice Page to securely collect payment from your customers."},"\u002Fpayments\u002Fsave-and-reuse":{"type":"page","title":"Set up future payments","subtitle":"Learn how to save payment details and charge your customers later."},"\u002Fproducts-prices\u002Fpricing-models#usage-based-pricing":{"type":"section","title":"Recurring pricing models","sectionText":"Usage-based pricing","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Usage-based pricing is a common pricing model for SaaS businesses that enables you to charge based on a customer’s usage of your product or service. As a business, you provide access to your service and bill your customer based on their usage. To see what an end-to-end integration based on the usage-based pricing model looks like, read the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fusage-based\u002Fpricing-models"},"children":["usage-based pricing models"]}," guide."]}]},"\u002Fproducts-prices\u002Fpricing-models#tiered-pricing":{"type":"section","title":"Recurring pricing models","sectionText":"Tiered pricing","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Prices can represent tiers, allowing the unit cost to change with quantity or usage. Togethere might, for example, want to offer lower rates for customers who use more projects per month. The following examples show two different ways to adjust pricing as usage increases: volume-based pricing and graduated pricing. To demonstrate these approaches to tiered pricing, we’ll use the following tiers:"]}]},"\u002Fbilling\u002Fsubscriptions\u002Fprorations":{"type":"page","title":"Prorations","subtitle":"Manage prorations for modified subscriptions."},"\u002Fbilling\u002Fsubscriptions\u002Fmultiple-products":{"type":"page","title":"Subscriptions with multiple products","subtitle":"Create subscriptions with multiple products, all billed in a single invoice."},"\u002Fbilling\u002Fentitlements":{"type":"page","title":"Entitlements","subtitle":"Determine when you can grant or revoke product feature access to customers."},"\u002Fwebhooks#test-webhook":{"type":"section","title":"Receive Stripe events in your webhook endpoint","sectionText":"Test your handler","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Before you go-live with your webhook endpoint function, we recommend that you test your application integration. You can do so by configuring a local listener to send events to your local machine, and sending test events. You need to use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fstripe-cli"},"children":["CLI"]}," to test."]}]},"\u002Fproducts-prices\u002Fpricing-models":{"type":"page","title":"Recurring pricing models","subtitle":"Learn about common pricing models and how to create them."},"\u002Fpayments\u002Fcheckout\u002Fupsells":{"type":"page","title":"Subscription upsells","subtitle":"Enable customers to upgrade their subscription plan at checkout by using upsells."},"\u002Fbilling\u002Fsubscriptions\u002Fbilling-cycle":{"type":"page","title":"Setting the subscription billing cycle date","subtitle":"Learn how to set the billing date for subscriptions."},"\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscriptions#create-pricing-model":{"type":"section","title":"Build a subscriptions integration","sectionText":"Create the pricing model"},"\u002Fproducts-prices\u002Fmanage-prices#lookup-keys":{"type":"section","title":"Manage products and prices","sectionText":"Lookup keys","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Most businesses display pricing information on their website. If these prices are hard-coded and you want to change them, the process is often manual and requires you to deploy new code. To better manage these scenarios, you can use the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices\u002Fcreate#create_price-lookup_key"},"children":["lookup_key"]}," attribute on the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fprices\u002Fobject#price_object"},"children":["Price object"]},". This key allows you to:"]}]},"\u002Fpayments\u002Fcheckout\u002Fcustom-success-page":{"type":"page","title":"Customize redirect behavior with a Stripe-hosted page","subtitle":"For Stripe-hosted pages, display a confirmation page with your customer's order information."},"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#payment-method-product-support":{"type":"section","title":"Payment method integration options","sectionText":"Payment method support","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Payment methods only support certain currencies, countries, and products. Make sure your chosen payment methods work for your scenario. Depending on your payments flows, some ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"#additional-api-supportability"},"children":["additional API options"]}," might restrict the payment methods you can offer."]}]},"\u002Fbilling\u002Fsubscriptions\u002Foverview#provisioning":{"type":"section","title":"How subscriptions work","sectionText":"Provisioning","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Use ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fentitlements"},"children":["Entitlements"]}," to determine when you can grant or revoke product feature access to your customers."]}]},"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks":{"type":"page","title":"Using webhooks with subscriptions","subtitle":"Learn to use webhooks to receive notifications of subscription activity."},"\u002Fcustomer-management\u002Fintegrate-customer-portal#webhooks":{"type":"section","title":"Integrate the customer portal with the API","sectionText":"Listen to webhooks","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["When subscriptions are upgraded, downgraded, or canceled, you need to make sure that customers receive only the products or services they’re actively subscribed to. Stripe sends notifications of these changes to your integration using ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"webhook"},"children":["webhooks"]},". In the ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"Event"},"children":[]}," object, look at the ID for the subscription or the customer to determine which customer the event applies to."]}]},"\u002Fbilling\u002Ftesting":{"type":"page","title":"Testing Stripe Billing","subtitle":"Learn how to test your Billing integration."},"\u002Fstripe-js\u002Freact":{"type":"page","title":"React Stripe.js reference","subtitle":"Learn about React components for Stripe.js and Stripe Elements."},"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-lifecycle":{"type":"section","title":"How subscriptions work","sectionText":"The subscription lifecycle","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["This is what the recommended subscription flow looks like:"]}]},"\u002Felements\u002Fappearance-api":{"type":"page","title":"Elements Appearance API","subtitle":"Customize the look and feel of Elements to match the design of your site."},"\u002Fcheckout\u002Fcustom-checkout":{"type":"page","title":"Build a checkout page","subtitle":"Learn how to use Elements and Custom Checkout to build a checkout page."},"\u002Fpayments\u002Fpayment-element":{"type":"page","title":"Stripe Payment Element","subtitle":"Accept payment methods from around the globe with a secure, embeddable UI component."},"\u002Felements\u002Faddress-element":{"type":"page","title":"Address Element","subtitle":"Use the Address Element to collect complete billing and shipping addresses."},"\u002Fpayments\u002Fpayment-intents":{"type":"page","title":"The Payment Intents API","subtitle":"Learn how to use the Payment Intents API for Stripe payments."},"\u002Fpayments\u002Felements":{"type":"page","title":"Stripe Web Elements","subtitle":"Create your own checkout flows with prebuilt UI components."},"\u002Fpayments\u002Flink":{"type":"page","title":"Faster checkout with Link","subtitle":"Let your customers check out faster with Link."},"\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscriptions#create-subscription":{"type":"section","title":"Build a subscriptions integration","sectionText":"Create the subscription","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Let your new customer choose a plan and then create the subscription—in this guide, they choose between Basic and Premium."]}]},"\u002Fpayments\u002Fpaymentintents\u002Flifecycle":{"type":"page","title":"How PaymentIntents work","subtitle":"Learn how PaymentIntents work within the payment flow."},"\u002Fbilling\u002Fsubscriptions\u002Foverview#subscription-events":{"type":"section","title":"How subscriptions work","sectionText":"Subscription events","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":[{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi#event_types"},"children":["Events"]}," are triggered every time a subscription is created or changed. We send some events immediately when a subscription is created, while others recur on regular billing intervals. We recommend listening for events with a ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks"},"children":["webhook endpoint"]},"."]}]},"\u002Fstripe-cli":{"type":"page","title":"Get started with the Stripe CLI","subtitle":"Build, test, and manage your Stripe integration directly from the command line."},"\u002Fkeys#test-live-modes":{"type":"section","title":"API keys","sectionText":"Test mode versus live mode","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["All Stripe API requests occur in either ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"test-mode"},"children":["test mode"]}," or ",{"\u0024\u0024mdtype":"Tag","name":"Glossary","attributes":{"term":"live-mode"},"children":["live mode"]},". Use test mode to access test data, and live mode to access actual account data. Each mode has its own set of API keys. Objects in one mode aren’t accessible to the other. For instance, a test-mode ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fapi\u002Fproducts\u002Fobject"},"children":["product object"]}," can’t be part of a live-mode payment."]}]},"\u002Fbilling\u002Fentitlements#entitlements":{"type":"section","title":"Entitlements","sectionText":"Get customers' active entitlements","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["During the lifecycle of a customer’s subscription, from activation, through upgrades, downgrades, and so on, Stripe updates the customer’s entitlements based on your mapped features."]}]},"\u002Fpayments\u002Fpayment-methods\u002Fintegration-options#product-support":{"type":"section","title":"Payment method integration options","sectionText":"Product support","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Refer to the following tables to determine which payment methods are supported by each Stripe product:"]}]},"\u002Fpayments\u002Fpayment-methods#payment-notification":{"type":"section","title":"Payment Methods API","sectionText":"Immediate or delayed notification of payment success","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Some payment methods immediately return payment status when a transaction is attempted \u0028for example, card payments\u0029 but other methods have a delay such as ACH debits. For those that immediately return payment status, the PaymentIntent status either changes to ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," or ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"requires_payment_method"},"children":[]},". A status of ",{"\u0024\u0024mdtype":"Tag","name":"InlineCode","attributes":{"content":"succeeded"},"children":[]}," guarantees that you will receive the funds from your customers."]}]},"\u002Fkeys#obtain-api-keys":{"type":"section","title":"API keys","sectionText":"Secret and publishable keys","excerpt":[{"\u0024\u0024mdtype":"Tag","name":"Paragraph","attributes":{},"children":["Anyone can use your live mode secret API key to make any API call on behalf of your account, such as creating a charge or performing a refund. Keep your keys safe by following the ",{"\u0024\u0024mdtype":"Tag","name":"Link","attributes":{"href":"\u002Fkeys-best-practices"},"children":["secret API keys best practices"]},"."]}]}},"version":"1"},"baseUrl":"https:\u002F\u002Fdocs.stripe.com","baseUrlAssets":"https:\u002F\u002Fb.stripecdn.com\u002Fdocs-statics-srv\u002Fassets\u002F","countries":{"AD":{"name":"Andorra","name_with_article":null},"AE":{"name":"United Arab Emirates","name_with_article":"the United Arab Emirates"},"AF":{"name":"Afghanistan","name_with_article":null},"AG":{"name":"Antigua \u0026 Barbuda","name_with_article":null},"AI":{"name":"Anguilla","name_with_article":null},"AL":{"name":"Albania","name_with_article":null},"AM":{"name":"Armenia","name_with_article":null},"AO":{"name":"Angola","name_with_article":null},"AQ":{"name":"Antarctica","name_with_article":null},"AR":{"name":"Argentina","name_with_article":null},"AS":{"name":"American Samoa","name_with_article":null},"AT":{"name":"Austria","name_with_article":null},"AU":{"name":"Australia","name_with_article":null},"AW":{"name":"Aruba","name_with_article":null},"AX":{"name":"Åland Islands","name_with_article":null},"AZ":{"name":"Azerbaijan","name_with_article":null},"BA":{"name":"Bosnia \u0026 Herzegovina","name_with_article":null},"BB":{"name":"Barbados","name_with_article":null},"BD":{"name":"Bangladesh","name_with_article":null},"BE":{"name":"Belgium","name_with_article":null},"BF":{"name":"Burkina Faso","name_with_article":null},"BG":{"name":"Bulgaria","name_with_article":null},"BH":{"name":"Bahrain","name_with_article":null},"BI":{"name":"Burundi","name_with_article":null},"BJ":{"name":"Benin","name_with_article":null},"BL":{"name":"St. Barthélemy","name_with_article":null},"BM":{"name":"Bermuda","name_with_article":null},"BN":{"name":"Brunei","name_with_article":null},"BO":{"name":"Bolivia","name_with_article":null},"BQ":{"name":"Caribbean Netherlands","name_with_article":null},"BR":{"name":"Brazil","name_with_article":null},"BS":{"name":"Bahamas","name_with_article":null},"BT":{"name":"Bhutan","name_with_article":null},"BV":{"name":"Bouvet Island","name_with_article":null},"BW":{"name":"Botswana","name_with_article":null},"BY":{"name":"Belarus","name_with_article":null},"BZ":{"name":"Belize","name_with_article":null},"CA":{"name":"Canada","name_with_article":null},"CC":{"name":"Cocos \u0028Keeling\u0029 Islands","name_with_article":null},"CD":{"name":"Congo - Kinshasa","name_with_article":null},"CF":{"name":"Central African Republic","name_with_article":null},"CG":{"name":"Congo - Brazzaville","name_with_article":null},"CH":{"name":"Switzerland","name_with_article":null},"CI":{"name":"Côte d’Ivoire","name_with_article":null},"CK":{"name":"Cook Islands","name_with_article":null},"CL":{"name":"Chile","name_with_article":null},"CM":{"name":"Cameroon","name_with_article":null},"CN":{"name":"China","name_with_article":null},"CO":{"name":"Colombia","name_with_article":null},"CR":{"name":"Costa Rica","name_with_article":null},"CU":{"name":"Cuba","name_with_article":null},"CV":{"name":"Cape Verde","name_with_article":null},"CW":{"name":"Curaçao","name_with_article":null},"CX":{"name":"Christmas Island","name_with_article":null},"CY":{"name":"Cyprus","name_with_article":null},"CZ":{"name":"Czech Republic","name_with_article":"the Czech Republic"},"DE":{"name":"Germany","name_with_article":null},"DJ":{"name":"Djibouti","name_with_article":null},"DK":{"name":"Denmark","name_with_article":null},"DM":{"name":"Dominica","name_with_article":null},"DO":{"name":"Dominican Republic","name_with_article":null},"DZ":{"name":"Algeria","name_with_article":null},"EC":{"name":"Ecuador","name_with_article":null},"EE":{"name":"Estonia","name_with_article":null},"EG":{"name":"Egypt","name_with_article":null},"EH":{"name":"Western Sahara","name_with_article":null},"ER":{"name":"Eritrea","name_with_article":null},"ES":{"name":"Spain","name_with_article":null},"ET":{"name":"Ethiopia","name_with_article":null},"FI":{"name":"Finland","name_with_article":null},"FJ":{"name":"Fiji","name_with_article":null},"FK":{"name":"Falkland Islands","name_with_article":null},"FM":{"name":"Micronesia","name_with_article":null},"FO":{"name":"Faroe Islands","name_with_article":null},"FR":{"name":"France","name_with_article":null},"GA":{"name":"Gabon","name_with_article":null},"GB":{"name":"United Kingdom","name_with_article":"the United Kingdom"},"GD":{"name":"Grenada","name_with_article":null},"GE":{"name":"Georgia","name_with_article":null},"GF":{"name":"French Guiana","name_with_article":null},"GG":{"name":"Guernsey","name_with_article":null},"GH":{"name":"Ghana","name_with_article":null},"GI":{"name":"Gibraltar","name_with_article":null},"GL":{"name":"Greenland","name_with_article":null},"GM":{"name":"Gambia","name_with_article":null},"GN":{"name":"Guinea","name_with_article":null},"GP":{"name":"Guadeloupe","name_with_article":null},"GQ":{"name":"Equatorial Guinea","name_with_article":null},"GR":{"name":"Greece","name_with_article":null},"GS":{"name":"South Georgia \u0026 South Sandwich Islands","name_with_article":null},"GT":{"name":"Guatemala","name_with_article":null},"GU":{"name":"Guam","name_with_article":null},"GW":{"name":"Guinea-Bissau","name_with_article":null},"GY":{"name":"Guyana","name_with_article":null},"HK":{"name":"Hong Kong","name_with_article":null},"HM":{"name":"Heard \u0026 McDonald Islands","name_with_article":null},"HN":{"name":"Honduras","name_with_article":null},"HR":{"name":"Croatia","name_with_article":null},"HT":{"name":"Haiti","name_with_article":null},"HU":{"name":"Hungary","name_with_article":null},"ID":{"name":"Indonesia","name_with_article":null},"IE":{"name":"Ireland","name_with_article":null},"IL":{"name":"Israel","name_with_article":null},"IM":{"name":"Isle of Man","name_with_article":null},"IN":{"name":"India","name_with_article":null},"IO":{"name":"British Indian Ocean Territory","name_with_article":null},"IQ":{"name":"Iraq","name_with_article":null},"IR":{"name":"Iran","name_with_article":null},"IS":{"name":"Iceland","name_with_article":null},"IT":{"name":"Italy","name_with_article":null},"JE":{"name":"Jersey","name_with_article":null},"JM":{"name":"Jamaica","name_with_article":null},"JO":{"name":"Jordan","name_with_article":null},"JP":{"name":"Japan","name_with_article":null},"KE":{"name":"Kenya","name_with_article":null},"KG":{"name":"Kyrgyzstan","name_with_article":null},"KH":{"name":"Cambodia","name_with_article":null},"KI":{"name":"Kiribati","name_with_article":null},"KM":{"name":"Comoros","name_with_article":null},"KN":{"name":"St. Kitts \u0026 Nevis","name_with_article":null},"KP":{"name":"North Korea","name_with_article":null},"KR":{"name":"South Korea","name_with_article":null},"KW":{"name":"Kuwait","name_with_article":null},"KY":{"name":"Cayman Islands","name_with_article":null},"KZ":{"name":"Kazakhstan","name_with_article":null},"LA":{"name":"Laos","name_with_article":null},"LB":{"name":"Lebanon","name_with_article":null},"LC":{"name":"St. Lucia","name_with_article":null},"LI":{"name":"Liechtenstein","name_with_article":null},"LK":{"name":"Sri Lanka","name_with_article":null},"LR":{"name":"Liberia","name_with_article":null},"LS":{"name":"Lesotho","name_with_article":null},"LT":{"name":"Lithuania","name_with_article":null},"LU":{"name":"Luxembourg","name_with_article":null},"LV":{"name":"Latvia","name_with_article":null},"LY":{"name":"Libya","name_with_article":null},"MA":{"name":"Morocco","name_with_article":null},"MC":{"name":"Monaco","name_with_article":null},"MD":{"name":"Moldova","name_with_article":null},"ME":{"name":"Montenegro","name_with_article":null},"MF":{"name":"St. Martin","name_with_article":null},"MG":{"name":"Madagascar","name_with_article":null},"MH":{"name":"Marshall Islands","name_with_article":null},"MK":{"name":"North Macedonia","name_with_article":null},"ML":{"name":"Mali","name_with_article":null},"MM":{"name":"Myanmar \u0028Burma\u0029","name_with_article":null},"MN":{"name":"Mongolia","name_with_article":null},"MO":{"name":"Macao SAR China","name_with_article":null},"MP":{"name":"Northern Mariana Islands","name_with_article":null},"MQ":{"name":"Martinique","name_with_article":null},"MR":{"name":"Mauritania","name_with_article":null},"MS":{"name":"Montserrat","name_with_article":null},"MT":{"name":"Malta","name_with_article":null},"MU":{"name":"Mauritius","name_with_article":null},"MV":{"name":"Maldives","name_with_article":null},"MW":{"name":"Malawi","name_with_article":null},"MX":{"name":"Mexico","name_with_article":null},"MY":{"name":"Malaysia","name_with_article":null},"MZ":{"name":"Mozambique","name_with_article":null},"NA":{"name":"Namibia","name_with_article":null},"NC":{"name":"New Caledonia","name_with_article":null},"NE":{"name":"Niger","name_with_article":null},"NF":{"name":"Norfolk Island","name_with_article":null},"NG":{"name":"Nigeria","name_with_article":null},"NI":{"name":"Nicaragua","name_with_article":null},"NL":{"name":"Netherlands","name_with_article":"the Netherlands"},"NO":{"name":"Norway","name_with_article":null},"NP":{"name":"Nepal","name_with_article":null},"NR":{"name":"Nauru","name_with_article":null},"NU":{"name":"Niue","name_with_article":null},"NZ":{"name":"New Zealand","name_with_article":null},"OM":{"name":"Oman","name_with_article":null},"PA":{"name":"Panama","name_with_article":null},"PE":{"name":"Peru","name_with_article":null},"PF":{"name":"French Polynesia","name_with_article":null},"PG":{"name":"Papua New Guinea","name_with_article":null},"PH":{"name":"Philippines","name_with_article":"the Philippines"},"PK":{"name":"Pakistan","name_with_article":null},"PL":{"name":"Poland","name_with_article":null},"PM":{"name":"St. Pierre \u0026 Miquelon","name_with_article":null},"PN":{"name":"Pitcairn Islands","name_with_article":null},"PR":{"name":"Puerto Rico","name_with_article":null},"PS":{"name":"Palestinian Territories","name_with_article":null},"PT":{"name":"Portugal","name_with_article":null},"PW":{"name":"Palau","name_with_article":null},"PY":{"name":"Paraguay","name_with_article":null},"QA":{"name":"Qatar","name_with_article":null},"RE":{"name":"Réunion","name_with_article":null},"RO":{"name":"Romania","name_with_article":null},"RS":{"name":"Serbia","name_with_article":null},"RU":{"name":"Russia","name_with_article":null},"RW":{"name":"Rwanda","name_with_article":null},"SA":{"name":"Saudi Arabia","name_with_article":null},"SB":{"name":"Solomon Islands","name_with_article":null},"SC":{"name":"Seychelles","name_with_article":null},"SD":{"name":"Sudan","name_with_article":null},"SE":{"name":"Sweden","name_with_article":null},"SG":{"name":"Singapore","name_with_article":null},"SH":{"name":"St. Helena","name_with_article":null},"SI":{"name":"Slovenia","name_with_article":null},"SJ":{"name":"Svalbard \u0026 Jan Mayen","name_with_article":null},"SK":{"name":"Slovakia","name_with_article":null},"SL":{"name":"Sierra Leone","name_with_article":null},"SM":{"name":"San Marino","name_with_article":null},"SN":{"name":"Senegal","name_with_article":null},"SO":{"name":"Somalia","name_with_article":null},"SR":{"name":"Suriname","name_with_article":null},"SS":{"name":"South Sudan","name_with_article":null},"ST":{"name":"São Tomé \u0026 Príncipe","name_with_article":null},"SV":{"name":"El Salvador","name_with_article":null},"SX":{"name":"Sint Maarten","name_with_article":null},"SY":{"name":"Syria","name_with_article":null},"SZ":{"name":"Eswatini","name_with_article":null},"TC":{"name":"Turks \u0026 Caicos Islands","name_with_article":null},"TD":{"name":"Chad","name_with_article":null},"TF":{"name":"French Southern Territories","name_with_article":null},"TG":{"name":"Togo","name_with_article":null},"TH":{"name":"Thailand","name_with_article":null},"TJ":{"name":"Tajikistan","name_with_article":null},"TK":{"name":"Tokelau","name_with_article":null},"TL":{"name":"Timor-Leste","name_with_article":null},"TM":{"name":"Turkmenistan","name_with_article":null},"TN":{"name":"Tunisia","name_with_article":null},"TO":{"name":"Tonga","name_with_article":null},"TR":{"name":"Turkey","name_with_article":null},"TT":{"name":"Trinidad \u0026 Tobago","name_with_article":null},"TV":{"name":"Tuvalu","name_with_article":null},"TW":{"name":"Taiwan","name_with_article":null},"TZ":{"name":"Tanzania","name_with_article":null},"UA":{"name":"Ukraine","name_with_article":null},"UG":{"name":"Uganda","name_with_article":null},"UM":{"name":"U.S. Outlying Islands","name_with_article":null},"US":{"name":"United States","name_with_article":"the United States"},"UY":{"name":"Uruguay","name_with_article":null},"UZ":{"name":"Uzbekistan","name_with_article":null},"VA":{"name":"Vatican City","name_with_article":null},"VC":{"name":"St. Vincent \u0026 Grenadines","name_with_article":null},"VE":{"name":"Venezuela","name_with_article":null},"VG":{"name":"British Virgin Islands","name_with_article":null},"VI":{"name":"U.S. Virgin Islands","name_with_article":null},"VN":{"name":"Vietnam","name_with_article":null},"VU":{"name":"Vanuatu","name_with_article":null},"WF":{"name":"Wallis \u0026 Futuna","name_with_article":null},"WS":{"name":"Samoa","name_with_article":null},"YE":{"name":"Yemen","name_with_article":null},"YT":{"name":"Mayotte","name_with_article":null},"ZA":{"name":"South Africa","name_with_article":null},"ZM":{"name":"Zambia","name_with_article":null},"ZW":{"name":"Zimbabwe","name_with_article":null}},"csrfToken":"pMVTTAo-Xd58pgXVvTnGT7F7ciO8oEkl1vlXCB-f6DdN7iY6iNuk_AczrFrzMq79Jw6jirAKbgKGdjifDJmaZTw-AV5tnSG2JvzQCr1_I2C9Itb1d1nWDGvmeGDUVSEvbbTm57foMg==","messages":{},"navigation":{"topics":[{"text":"Get started","href":"\u002Fget-started","hidden":false,"loaded":false,"active":false,"sections":[],"translated":null},{"text":"Payments","href":"\u002Fpayments","hidden":false,"loaded":false,"active":false,"sections":[],"translated":null},{"text":"Finance automation","href":"\u002Ffinance-automation","hidden":false,"loaded":true,"active":false,"sections":["Billing","Tax","Reporting","Data","Startup incorporation"],"translated":null},{"text":"Banking as a service","href":"\u002Ffinancial-services","hidden":false,"loaded":false,"active":false,"sections":[],"translated":null},{"text":"Developer tools","href":"\u002Fdevelopment","hidden":false,"loaded":false,"active":false,"sections":[],"translated":null},{"text":"No-code","href":"\u002Fno-code","hidden":false,"loaded":false,"active":false,"sections":[],"translated":null},{"text":"API Reference","href":"\u002Fapi","hidden":true,"loaded":false,"active":false,"sections":[],"translated":null}],"products":[{"type":"area","text":"","topic":{"text":"Finance automation","href":"\u002Ffinance-automation","translated":null},"sections":["Billing","Tax","Reporting","Data","Startup incorporation"],"translated":null},{"type":"section","text":"Billing","icon":null,"href":"\u002Fbilling","topic":{"text":"Finance automation","href":"\u002Ffinance-automation","translated":null},"children":[{"type":"link","text":"Overview","href":"\u002Fbilling","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"About the Billing APIs","href":"\u002Fbilling\u002Fbilling-apis","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscriptions","href":"\u002Fsubscriptions","description":null,"children":[{"type":"link","text":"Overview","href":"\u002Fbilling\u002Fsubscriptions\u002Foverview","description":"Learn about the lifecycles of Stripe Billing’s subscriptions and invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Quickstart","href":"\u002Fbilling\u002Fquickstart","description":"Quickstart","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Use cases","href":"\u002Fbilling\u002Fsubscriptions\u002Fuse-cases","description":null,"children":[{"type":"link","text":"Integrate a SaaS business","href":"\u002Fsaas","description":"Learn how to build a SaaS business with Billing and other Stripe products","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Integrate a sales-led B2B business","href":"\u002Fbilling\u002Fsubscriptions\u002Fsales-led-billing","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Build your integration","href":"\u002Fbilling\u002Fsubscriptions\u002Fintegration","description":null,"children":[{"type":"link","text":"Design a subscriptions integration","href":"\u002Fbilling\u002Fsubscriptions\u002Fdesigning-integration","description":"Learn what choices you need to make for integrating subscriptions into your business","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Build a subscriptions integration","href":"\u002Fbilling\u002Fsubscriptions\u002Fbuild-subscriptions","description":"Create and manage subscriptions to accept recurring payments","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Integrate with Salesforce","href":"\u002Fbilling\u002Fintegrations\u002Fsalesforce","description":"Leverage Stripe seamlessly through your Salesforce workflows and processes","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscription webhooks","href":"\u002Fbilling\u002Fsubscriptions\u002Fwebhooks","description":"Learn to use webhooks to receive notifications of subscription activity","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscription features","href":"\u002Fbilling\u002Fsubscriptions\u002Ffeatures","description":null,"children":[{"type":"link","text":"Subscription invoices","href":"\u002Fbilling\u002Finvoices\u002Fsubscription","description":"Learn how to manage subscription invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscription schedules","href":"\u002Fbilling\u002Fsubscriptions\u002Fsubscription-schedules","description":"Learn about subscription schedules and how to use them","children":[{"type":"link","text":"Use cases","href":"\u002Fbilling\u002Fsubscriptions\u002Fsubscription-schedules\u002Fuse-cases","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscription metrics","href":"\u002Fbilling\u002Fsubscriptions\u002Fview-metrics","description":"Use the Dashboard to view metrics about your subscriptions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Subscription pricing","translated":null,"xray":{}},{"type":"link","text":"Recurring pricing models","href":"\u002Fproducts-prices\u002Fpricing-models","description":"Understand and build models for recurring prices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Embed a pricing table","href":"\u002Fpayments\u002Fcheckout\u002Fpricing-table","description":"Display a pricing table on your website and take customers directly to Stripe Checkout","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Start subscriptions","translated":null,"xray":{}},{"type":"link","text":"Set quantities","href":"\u002Fbilling\u002Fsubscriptions\u002Fquantities","description":"Vary the cost of a subscription by subscribing a customer to multiple quantities of a product","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Set billing cycles","href":"\u002Fbilling\u002Fsubscriptions\u002Fbilling-cycle","description":"Learn how to set the billing date for subscriptions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Backdate subscriptions","href":"\u002Fbilling\u002Fsubscriptions\u002Fbackdating","description":"Bill customers for time that has already elapsed.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscribe to multiple items","href":"\u002Fbilling\u002Fsubscriptions\u002Fmultiple-products","description":"Create subscriptions with multiple products, all billed in a single invoice.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Set trial periods","href":"\u002Fbilling\u002Fsubscriptions\u002Ftrials","description":"Delay payments on active subscriptions using trial periods.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Apply coupons","href":"\u002Fbilling\u002Fsubscriptions\u002Fcoupons","description":"Add discounts to a subscription using coupons and promotion codes","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Migrate subscriptions to Stripe","href":"\u002Fbilling\u002Fsubscriptions\u002Fmigrate-subscriptions","description":"Import subscriptions from other sources into Stripe","children":[{"type":"link","text":"Migrate subscriptions using a toolkit","href":"\u002Fbilling\u002Fsubscriptions\u002Fimport-subscriptions-toolkit","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Migration toolkit CSV reference","href":"\u002Fbilling\u002Fsubscriptions\u002Ftoolkit-reference","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Migrate subscriptions using Stripe APIs","href":"\u002Fbilling\u002Fsubscriptions\u002Fimport-subscriptions","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Subscription payments","translated":null,"xray":{}},{"type":"link","text":"Subscription payment methods","href":"\u002Fbilling\u002Fsubscriptions\u002Fpayment-methods-setting","description":"Learn how to specify which payment methods are allowed for a subscription.","children":[{"type":"link","text":"ACH Direct Debit","href":"\u002Fbilling\u002Fsubscriptions\u002Fach-debit","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Amazon Pay","href":"\u002Fbilling\u002Fsubscriptions\u002Famazon-pay","description":"Learn how to create and charge for a subscription with Amazon Pay.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Bacs Direct Debit in the UK","href":"\u002Fbilling\u002Fsubscriptions\u002Fbacs-debit","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Bank transfer","href":"\u002Fbilling\u002Fsubscriptions\u002Fbank-transfer","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"BECS Direct Debit in Australia","href":"\u002Fbilling\u002Fsubscriptions\u002Fau-becs-debit","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Cash App Pay","href":"\u002Fbilling\u002Fsubscriptions\u002Fcash-app-pay","description":"Learn how to create and charge for a subscription with Cash App Pay.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"PayPal","href":"\u002Fbilling\u002Fsubscriptions\u002Fpaypal","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"PayPal in Checkout","href":"\u002Fbilling\u002Fsubscriptions\u002Fpaypal-subscription-mode","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revolut Pay","href":"\u002Fbilling\u002Fsubscriptions\u002Frevolut-pay","description":"Learn how to create and charge for a subscription with Revolut Pay.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Pre-authorized debit in Canada","href":"\u002Fbilling\u002Fsubscriptions\u002Facss-debit","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"SEPA Direct Debit in the EU","href":"\u002Fbilling\u002Fsubscriptions\u002Fsepa-debit","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"iDEAL with SEPA Direct Debit","href":"\u002Fbilling\u002Fsubscriptions\u002Fideal","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Bancontact with SEPA Direct Debit","href":"\u002Fbilling\u002Fsubscriptions\u002Fbancontact","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Sofort with SEPA Direct Debit","href":"\u002Fbilling\u002Fsubscriptions\u002Fsofort","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Integrate with third-party payment processing","href":"\u002Fbilling\u002Fsubscriptions\u002Fthird-party-payment-processing","description":"Integrate subscriptions with third-party payment providers","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Collection methods","href":"\u002Fbilling\u002Fcollection-method","description":"Configure your preferred method to collect on invoices and subscriptions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Share a link to update payment details","href":"\u002Fbilling\u002Fsubscriptions\u002Fupdate-payment-method","description":"Give your customers links they can use to update subscription payment details","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Strong Customer Authentication \u0028SCA\u0029","href":"\u002Fbilling\u002Fmigration\u002Fstrong-customer-authentication","description":"Update your integration to support Strong Customer Authentication \u0028SCA\u0029 requirements","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Manage subscriptions","translated":null,"xray":{}},{"type":"link","text":"Modify subscriptions","href":"\u002Fbilling\u002Fsubscriptions\u002Fchange","description":"Learn how to change existing subscriptions.","children":[{"type":"link","text":"Upgrade and downgrade subscriptions","href":"\u002Fbilling\u002Fsubscriptions\u002Fupgrade-downgrade","description":"Upgrading and downgrading plans","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Cancel subscriptions","href":"\u002Fbilling\u002Fsubscriptions\u002Fcancel","description":"Learn how to cancel existing subscriptions.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Pause payment collection","href":"\u002Fbilling\u002Fsubscriptions\u002Fpause-payment","description":"Pause payment collection on subscriptions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Manage prorations","href":"\u002Fbilling\u002Fsubscriptions\u002Fprorations","description":"Handle prorated charges after changes to a subscription","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Manage pending updates","href":"\u002Fbilling\u002Fsubscriptions\u002Fpending-updates","description":"Learn how to handle payment failures when updating a subscription","children":[{"type":"link","text":"Pending updates reference","href":"\u002Fbilling\u002Fsubscriptions\u002Fpending-updates-reference","description":"Learn more about the pending updates feature","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Invoicing","href":"\u002Finvoicing","description":"Create and manage invoices for one-time payments","children":[{"type":"link","text":"Overview","href":"\u002Finvoicing\u002Foverview","description":"Learn how Stripe Invoicing works","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"API quickstart","href":"\u002Finvoicing\u002Fintegration\u002Fquickstart","description":"Learn how to create and send an invoice with code","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Invoicing without code","href":"\u002Finvoicing\u002Fquickstart-guide","description":null,"children":[{"type":"link","text":"Use the Dashboard","href":"\u002Finvoicing\u002Fdashboard","description":"Create and send an invoice without code","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Invoices page","href":"\u002Finvoicing\u002Fdashboard\u002Fmanage-invoices","description":"Learn all about the Invoices page","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Issue credit notes","href":"\u002Finvoicing\u002Fdashboard\u002Fcredit-notes","description":"Adjust or refund finalized invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Build your integration","href":"\u002Finvoicing\u002Fintegration-overview","description":"Learn how to create and send invoices","children":[{"type":"link","text":"Integrate with the API","href":"\u002Finvoicing\u002Fintegration","description":"Create and manage invoices with code","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Invoicing features","href":"\u002Finvoicing\u002Ffeatures","description":"Create and manage invoices for one-time payments","children":[{"type":"link","text":"Status transitions and finalization","href":"\u002Finvoicing\u002Fintegration\u002Fworkflow-transitions","description":"Learn about Invoicing workflow transitions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customize invoices","href":"\u002Finvoicing\u002Fcustomize","description":"Learn how to customize invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Products and prices","href":"\u002Finvoicing\u002Fproducts-prices","description":"Create and use products and prices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Group invoice line items","href":"\u002Finvoicing\u002Fgroup-line-items","description":"Organize line items into groups on an invoice","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Summarize line items","href":"\u002Finvoicing\u002Fline-item-grouping","description":"Summarize line items on an invoice","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Manage bulk invoice line items","href":"\u002Finvoicing\u002Fbulk-update-line-item","description":"Create, update, and delete multiple line items of an invoice at once","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Preview an invoice","href":"\u002Finvoicing\u002Fpreview","description":"Create a preview of an invoice.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Edit invoices","href":"\u002Finvoicing\u002Finvoice-edits","description":"Learn how to edit invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Send customer emails","href":"\u002Finvoicing\u002Fsend-email","description":"Send customer emails with or without code","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Hosted Invoice Page","href":"\u002Finvoicing\u002Fhosted-invoice-page","description":"Use the Hosted Invoice Page","children":[{"type":"link","text":"Scheduled payments","href":"\u002Finvoicing\u002Fhosted-invoice-page\u002Fscheduled-payments","description":"The Hosted Invoice Page and scheduled payments","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Generate credit notes","href":"\u002Finvoicing\u002Fintegration\u002Fprogrammatic-credit-notes","description":"Refund finalized invoices with credit notes","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Global invoicing","href":"\u002Finvoicing\u002Fglobal-invoicing","description":"Best practices for setting up invoices in different regions","children":[{"type":"link","text":"Set up invoices in Europe","href":"\u002Finvoicing\u002Fglobal-config-guide","description":"Learn the best practices for setting up invoices in Europe","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Set up invoices in Japan","href":"\u002Finvoicing\u002Fjapan-config-guide","description":"Learn the best practices for setting up invoices in Japan","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Multi-currency customers","href":"\u002Finvoicing\u002Fmulti-currency-customers","description":"Change the billable currency for any customer","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"India e-Mandates","href":"\u002Finvoicing\u002Findia-emandate-guide","description":"Learn how to integrate India e-Mandates","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customize the IBAN country","href":"\u002Finvoicing\u002Fdashboard\u002Fcustomize-iban-country","description":"Bank transfers and customizing the IBAN country","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Taxes","href":"\u002Finvoicing\u002Ftaxes","description":"Automatically collect sales tax, VAT, and GST","children":[{"type":"link","text":"Account tax IDs","href":"\u002Finvoicing\u002Ftaxes\u002Faccount-tax-ids","description":"Store and render tax ID numbers","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax rates and IDs","href":"\u002Finvoicing\u002Ftaxes\u002Ftax-rates","description":"Assign tax rates to draft invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Manual tax amounts","href":"\u002Finvoicing\u002Ftaxes\u002Fmanual-tax-amounts","description":"Use tax amounts calculated outside of Stripe with Stripe Billing","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Invoice payments","translated":null,"xray":{}},{"type":"link","text":"Create Invoice Payment Plans","href":"\u002Finvoicing\u002Fpayment-plans","description":"Learn how to create Invoice Payment Plans","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Payment methods for invoices","href":"\u002Finvoicing\u002Fpayment-methods","description":"Supported payment methods for invoices","children":[{"type":"link","text":"ACH Direct Debit","href":"\u002Finvoicing\u002Fach-debit","description":"Configure, create, and process invoices to use ACH Direct Debit","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Bank transfer","href":"\u002Finvoicing\u002Fbank-transfer","description":"Pay invoices by transferring funds to a bank account","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Automated collections","href":"\u002Finvoicing\u002Fautomated-collections","description":null,"children":[{"type":"link","text":"Automatic invoice advancement","href":"\u002Finvoicing\u002Fintegration\u002Fautomatic-advancement-collection","description":"Learn about automatic advancement and collection.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Automatic reconciliation","href":"\u002Finvoicing\u002Fautomatic-reconciliation","description":"Understand cash reconciliation","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Automatic collection","href":"\u002Finvoicing\u002Fautomatic-collection","description":"Automatically collect payment from your customers","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Automatic charging","href":"\u002Finvoicing\u002Fautomatic-charging","description":"Stripe's automatic collection and dunning features.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Invoice customers","translated":null,"xray":{}},{"type":"link","text":"Customers","href":"\u002Finvoicing\u002Fcustomer","description":"Customers and Stripe Invoicing","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customer credit balance","href":"\u002Finvoicing\u002Fcustomer\u002Fbalance","description":"Use the customer credit balance","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customer tax IDs","href":"\u002Finvoicing\u002Fcustomer\u002Ftax-ids","description":"Store, validate, and render customer tax ID numbers","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Usage-based Billing","href":"\u002Fbilling\u002Fsubscriptions\u002Fusage-based","description":null,"children":[{"type":"link","text":"Set up usage-based billing","href":"\u002Fbilling\u002Fsubscriptions\u002Fusage-based\u002Fimplementation-guide","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Record usage for billing","href":"\u002Fbilling\u002Fsubscriptions\u002Fusage-based\u002Frecording-usage","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Record usage for billing in bulk","href":"\u002Fbilling\u002Fsubscriptions\u002Fusage-based\u002Frecording-usage-in-bulk","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Usage-based pricing model","href":"\u002Fbilling\u002Fsubscriptions\u002Fusage-based\u002Fpricing-models","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"How subscriptions work","href":"\u002Fbilling\u002Fsubscriptions\u002Foverview","description":"Learn about the lifecycles of Stripe Billing's subscriptions and invoices","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Connect and Billing","href":"\u002Fbilling\u002Fmulti-entity-business","description":null,"children":[{"type":"link","text":"Invoicing and Connect","href":"\u002Finvoicing\u002Fconnect","description":"Create invoices for connected accounts","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax and Billing","href":"\u002Fbilling\u002Ftaxes","description":null,"children":[{"type":"link","text":"Collect taxes","href":"\u002Fbilling\u002Ftaxes\u002Fcollect-taxes","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Migrate to Stripe Tax","href":"\u002Fbilling\u002Ftaxes\u002Fmigration","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax Rates","href":"\u002Fbilling\u002Ftaxes\u002Ftax-rates","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customer tax IDs","href":"\u002Fbilling\u002Fcustomer\u002Ftax-ids","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Quotes","href":"\u002Fquotes","description":"Learn about quotes","children":[{"type":"link","text":"How quotes work","href":"\u002Fquotes\u002Foverview","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Create a quote","href":"\u002Fquotes\u002Fcreate","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Renegotiate a quote","href":"\u002Fquotes\u002Fclone","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue recovery","href":"\u002Fbilling\u002Frevenue-recovery","description":"Learn about automated revenue recovery features for subscriptions","children":[{"type":"link","text":"Automate payment retries","href":"\u002Fbilling\u002Frevenue-recovery\u002Fsmart-retries","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Automate customer emails","href":"\u002Fbilling\u002Frevenue-recovery\u002Fcustomer-emails","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Smarter saved cards","href":"\u002Fbilling\u002Frevenue-recovery\u002Fsmarter-saved-cards","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Recovery analytics","href":"\u002Fbilling\u002Frevenue-recovery\u002Frecovery-analytics","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Automations","href":"\u002Fbilling\u002Fautomations","description":null,"children":[{"type":"link","text":"Automation recipes","href":"\u002Fbilling\u002Fautomation-recipes","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue recognition","href":"\u002Frevenue-recognition\u002Fmethodology\u002Fsubscriptions-and-invoicing","description":"Use Revenue Recognition with subscriptions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customer management","href":"\u002Fcustomer-management","description":"Learn how to enable self-serve customer management","children":[{"type":"link","text":"Customers","href":"\u002Fbilling\u002Fcustomer","description":"Use the Customer resource with Stripe Billing","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Customer credit balance","href":"\u002Fbilling\u002Fcustomer\u002Fbalance","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Customer portal","translated":null,"xray":{}},{"type":"link","text":"Set up the no-code customer portal","href":"\u002Fcustomer-management\u002Factivate-no-code-customer-portal","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Set up the customer portal with the API","href":"\u002Fcustomer-management\u002Fintegrate-customer-portal","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Configure the customer portal","href":"\u002Fcustomer-management\u002Fconfigure-portal","description":"Options to configure your customer portal","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Deep links and flows in the customer portal","href":"\u002Fcustomer-management\u002Fportal-deep-links","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Add a cancellation page to the customer portal","href":"\u002Fcustomer-management\u002Fcancellation-page","description":"Add and configure a page where your customers can cancel their subscription","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Entitlements","href":"\u002Fbilling\u002Fentitlements","description":"Determine when you can grant your customers access to your product's features and when to revoke access.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Test your integration","href":"\u002Fbilling\u002Ftesting","description":"Test your billing integration","children":[{"type":"link","text":"Test clocks","href":"\u002Fbilling\u002Ftesting\u002Ftest-clocks","description":"Testing with test clocks","children":[{"type":"link","text":"Simulate subscriptions","href":"\u002Fbilling\u002Ftesting\u002Ftest-clocks\u002Fsimulate-subscriptions","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"API and advanced usage","href":"\u002Fbilling\u002Ftesting\u002Ftest-clocks\u002Fapi-advanced-usage","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Test your invoicing integration","href":"\u002Finvoicing\u002Fintegration\u002Ftesting","description":"Learn how to test your invoicing integration","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Invoices API updates","href":"\u002Fbilling\u002Fmigration\u002Finvoice-states","description":null,"children":[],"hidden":true,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"description":"Build and scale your recurring business model","active":false,"hidden":false,"translated":null,"showDropdown":true,"xray":{},"expanded":false},{"type":"section","text":"Tax","icon":"tax","href":"\u002Ftax","topic":{"text":"Finance automation","href":"\u002Ffinance-automation","translated":null},"children":[{"type":"link","text":"Overview","href":"\u002Ftax","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Get started","translated":null,"xray":{}},{"type":"link","text":"How Tax works","href":"\u002Ftax\u002Fhow-tax-works","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Set up","href":"\u002Ftax\u002Fset-up","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Navigate the dashboard","href":"\u002Ftax\u002Fdashboard","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Using the Settings API","href":"\u002Ftax\u002Fsettings-api","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Integrate by payment flow","translated":null,"xray":{}},{"type":"link","text":"Payment Links","href":"\u002Ftax\u002Fpaymentlinks","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Checkout","href":"\u002Ftax\u002Fcheckout","description":null,"children":[{"type":"link","text":"Checkout and tax IDs","href":"\u002Ftax\u002Fcheckout\u002Ftax-ids","description":"Checkout and tax IDs","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Invoicing","href":"\u002Ftax\u002Finvoicing","description":null,"children":[{"type":"link","text":"Invoicing and tax IDs","href":"\u002Ftax\u002Finvoicing\u002Ftax-ids","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Subscriptions","href":"\u002Ftax\u002Fsubscriptions","description":null,"children":[{"type":"link","text":"Update existing subscriptions","href":"\u002Ftax\u002Fsubscriptions\u002Fupdate","description":"Update existing subscriptions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Custom payment integration","href":"\u002Ftax\u002Fcustom","description":"Use the API to calculate tax in your custom integration.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Integrate with Stripe Connect","translated":null,"xray":{}},{"type":"link","text":"Overview","href":"\u002Ftax\u002Fconnect","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax for software platforms","href":"\u002Ftax\u002Ftax-for-platforms","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax for marketplaces","href":"\u002Ftax\u002Ftax-for-marketplaces","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Manage your compliance","translated":null,"xray":{}},{"type":"link","text":"Monitor your obligations","href":"\u002Ftax\u002Fmonitoring","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Register","href":"\u002Ftax\u002Fregistering","description":null,"children":[{"type":"link","text":"Using the Registrations API","href":"\u002Ftax\u002Fregistrations-api","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Calculate tax","href":"\u002Ftax\u002Fcalculating","description":null,"children":[{"type":"link","text":"Specify product tax codes and tax behavior","href":"\u002Ftax\u002Fproducts-prices-tax-codes-tax-behavior","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Collect customer addresses","href":"\u002Ftax\u002Fcustomer-locations","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Zero tax amounts and reverse charges","href":"\u002Ftax\u002Fzero-tax","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax overrides","href":"\u002Ftax\u002Ftax-overrides","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Report","href":"\u002Ftax\u002Freports","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"File and Remit","href":"\u002Ftax\u002Ffiling","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Tax Reference","translated":null,"xray":{}},{"type":"link","text":"Product tax codes","href":"\u002Ftax\u002Ftax-codes","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Supported countries","href":"\u002Ftax\u002Fsupported-countries","description":null,"children":[{"type":"link","text":"Asia Pacific","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific","description":null,"children":[{"type":"link","text":"Australia","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Faustralia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Georgia","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fgeorgia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Hong Kong","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fhong-kong","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Indonesia","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Findonesia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Japan","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fjapan","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Malaysia","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fmalaysia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"New Zealand","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fnew-zealand","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Singapore","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fsingapore","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"South Korea","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fsouth-korea","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Thailand","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fthailand","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Vietnam","href":"\u002Ftax\u002Fsupported-countries\u002Fasia-pacific\u002Fvietnam","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Canada","href":"\u002Ftax\u002Fsupported-countries\u002Fcanada","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Europe, Middle East, and Africa","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa","description":null,"children":[{"type":"link","text":"Bahrain","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fbahrain","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Egypt","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fegypt","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Iceland","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Ficeland","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Kazakhstan","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fkazakhstan","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Kenya","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fkenya","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Nigeria","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fnigeria","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Norway","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fnorway","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Oman","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Foman","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Saudi Arabia","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fsaudi-arabia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"South Africa","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fsouth-africa","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Switzerland","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fswitzerland","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Türkiye","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Fturkiye","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"United Arab Emirates","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Funited-arab-emirates","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"United Kingdom","href":"\u002Ftax\u002Fsupported-countries\u002Feurope-middle-east-and-africa\u002Funited-kingdom","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"European Union","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union","description":null,"children":[{"type":"link","text":"Austria","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Faustria","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Belgium","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fbelgium","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Bulgaria","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fbulgaria","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Croatia","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fcroatia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Cyprus","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fcyprus","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Czechia","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fczechia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Denmark","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fdenmark","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Estonia","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Festonia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Finland","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Ffinland","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"France","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Ffrance","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Germany","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fgermany","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Greece","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fgreece","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Hungary","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fhungary","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Ireland","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fireland","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Italy","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fitaly","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Latvia","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Flatvia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Lithuania","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Flithuania","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Luxembourg","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fluxembourg","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Malta","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fmalta","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Netherlands","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fnetherlands","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Poland","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fpoland","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Portugal","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fportugal","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Romania","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fromania","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Slovakia","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fslovakia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Slovenia","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fslovenia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Spain","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fspain","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Sweden","href":"\u002Ftax\u002Fsupported-countries\u002Feuropean-union\u002Fsweden","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Latin America","href":"\u002Ftax\u002Fsupported-countries\u002Flatin-america","description":null,"children":[{"type":"link","text":"Chile","href":"\u002Ftax\u002Fsupported-countries\u002Flatin-america\u002Fchile","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Colombia","href":"\u002Ftax\u002Fsupported-countries\u002Flatin-america\u002Fcolombia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Mexico","href":"\u002Ftax\u002Fsupported-countries\u002Flatin-america\u002Fmexico","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"United States","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states","description":null,"children":[{"type":"link","text":"Alabama","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Falabama","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Alaska","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Falaska","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Arizona","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Farizona","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Arkansas","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Farkansas","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"California","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fcalifornia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Colorado","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fcolorado","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Connecticut","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fconnecticut","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Delaware","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fdelaware","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"District of Columbia","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fdistrict-of-columbia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Florida","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fflorida","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Georgia","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fgeorgia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Hawaii","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fhawaii","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Idaho","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fidaho","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Illinois","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fillinois","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Indiana","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Findiana","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Iowa","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fiowa","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Kansas","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fkansas","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Kentucky","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fkentucky","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Louisiana","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Flouisiana","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Maine","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmaine","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Maryland","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmaryland","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Massachusetts","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmassachusetts","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Michigan","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmichigan","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Minnesota","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fminnesota","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Mississippi","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmississippi","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Missouri","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmissouri","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Montana","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fmontana","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Nebraska","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnebraska","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Nevada","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnevada","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"New Hampshire","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnew-hampshire","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"New Jersey","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnew-jersey","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"New Mexico","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnew-mexico","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"New York","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnew-york","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"North Carolina","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnorth-carolina","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"North Dakota","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fnorth-dakota","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Ohio","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fohio","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Oklahoma","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Foklahoma","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Oregon","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Foregon","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Pennsylvania","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fpennsylvania","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Rhode Island","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Frhode-island","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"South Carolina","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fsouth-carolina","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"South Dakota","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fsouth-dakota","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tennessee","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Ftennessee","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Texas","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Ftexas","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Utah","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Futah","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Vermont","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fvermont","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Virginia","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fvirginia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Washington","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fwashington","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"West Virginia","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fwest-virginia","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Wisconsin","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fwisconsin","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Wyoming","href":"\u002Ftax\u002Fsupported-countries\u002Funited-states\u002Fwyoming","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"FAQ","href":"\u002Ftax\u002Ffaq","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"active":false,"hidden":false,"translated":null,"showDropdown":true,"xray":{},"expanded":false},{"type":"section","text":"Reporting","icon":null,"href":"\u002Fstripe-reports","topic":{"text":"Finance automation","href":"\u002Ffinance-automation","translated":null},"children":[{"type":"link","text":"Overview","href":"\u002Fstripe-reports","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Basic financial reports","href":"\u002Freports","description":"Understand your financial data with Stripe","children":[{"type":"link","text":"Select a report","href":"\u002Freports\u002Fselect-a-report","description":null,"children":[{"type":"link","text":"Balance","href":"\u002Freports\u002Fbalance","description":"Balance report","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Payout reconciliation","href":"\u002Freports\u002Fpayout-reconciliation","description":"Reconcile each payout with the batch of transactions it settles","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Treasury fees","href":"\u002Freports\u002Ftreasury-fees-reporting","description":"Treasury fees reporting","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Filters and settings","href":"\u002Freports\u002Foptions","description":null,"children":[{"type":"link","text":"Scheduled reports","href":"\u002Freports\u002Fscheduled-reports","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Categories and types","href":"\u002Freports\u002Freporting-categories","description":null,"children":[{"type":"link","text":"Balance transaction types","href":"\u002Freports\u002Fbalance-transaction-types","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Connect an accounting tool","href":"\u002Faccounting-integrations","description":null,"children":[{"type":"link","text":"QuickBooks Desktop","href":"\u002Freports\u002Fquickbooks","description":"Export account activity to QuickBooks Desktop","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Reports API","href":"\u002Freports\u002Fapi","description":"Run a report via the API","children":[{"type":"link","text":"Balance report type","href":"\u002Freports\u002Freport-types\u002Fbalance","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Payout reconciliation report type","href":"\u002Freports\u002Freport-types\u002Fpayout-reconciliation","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Tax report type","href":"\u002Freports\u002Freport-types\u002Ftax","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Connect report type","href":"\u002Freports\u002Freport-types\u002Fconnect","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Reports for multiple accounts","href":"\u002Freports\u002Fmultiple-accounts","description":"Download unified reports for multiple accounts","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue recognition","href":"\u002Frevenue-recognition","description":null,"children":[{"type":"link","text":"Get started","href":"\u002Frevenue-recognition\u002Fget-started","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"How revenue recognition works","href":"\u002Frevenue-recognition\u002Fmethodology","description":null,"children":[{"type":"link","text":"Subscriptions and Invoicing","href":"\u002Frevenue-recognition\u002Fmethodology\u002Fsubscriptions-and-invoicing","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"One-time payments","href":"\u002Frevenue-recognition\u002Fmethodology\u002Fone-time-payments","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Refunds and disputes","href":"\u002Frevenue-recognition\u002Fmethodology\u002Frefunds-and-disputes","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Pricing","href":"\u002Frevenue-recognition\u002Fpricing","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Multi-currency","href":"\u002Frevenue-recognition\u002Fmethodology\u002Fmulti-currency","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Connect platforms","href":"\u002Frevenue-recognition\u002Fconnect","description":null,"children":[{"type":"link","text":"Destination charges","href":"\u002Frevenue-recognition\u002Fconnect\u002Fdestination-charges","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Direct charges","href":"\u002Frevenue-recognition\u002Fconnect\u002Fdirect-charges","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Separate charges and transfers","href":"\u002Frevenue-recognition\u002Fconnect\u002Fcharges-transfers","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue contracts","href":"\u002Frevenue-recognition\u002Frevenue-contracts","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Reports and features","href":"\u002Frevenue-recognition\u002Freports","description":null,"children":[{"type":"link","text":"Monthly summary","href":"\u002Frevenue-recognition\u002Freports\u002Fmonthly-summary","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue waterfall","href":"\u002Frevenue-recognition\u002Freports\u002Fwaterfall","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Income statement","href":"\u002Frevenue-recognition\u002Freports\u002Fincome-statement","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Sigma and SDP","href":"\u002Frevenue-recognition\u002Freports\u002Fsigma-and-sdp","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Data reconciliation","href":"\u002Frevenue-recognition\u002Fdata-reconciliation","description":"Data reconciliation with financial reports","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Overrides","href":"\u002Frevenue-recognition\u002Foverrides","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Audit your numbers","href":"\u002Frevenue-recognition\u002Freports\u002Faudit-numbers","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Examples","href":"\u002Frevenue-recognition\u002Fexamples","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue recognition rules","href":"\u002Frevenue-recognition\u002Frules","description":null,"children":[{"type":"link","text":"Create a rule","href":"\u002Frevenue-recognition\u002Frules\u002Fcreate-a-rule","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Examples","href":"\u002Frevenue-recognition\u002Frules\u002Fexamples","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Accounting period control","href":"\u002Frevenue-recognition\u002Faccounting-period-control","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Revenue controls","href":"\u002Frevenue-recognition\u002Frevenue-controls","description":null,"children":[{"type":"link","text":"Examples","href":"\u002Frevenue-recognition\u002Frevenue-controls\u002Fexamples","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Map to your chart of accounts","href":"\u002Frevenue-recognition\u002Fchart-of-accounts","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Import data to Stripe","href":"\u002Frevenue-recognition\u002Fdata-import","description":null,"children":[{"type":"link","text":"Manage imported data","href":"\u002Frevenue-recognition\u002Fdata-import\u002Fmanage-imported-data","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Error handling","href":"\u002Frevenue-recognition\u002Fdata-import\u002Ferror-handling","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Examples","href":"\u002Frevenue-recognition\u002Fdata-import\u002Fexamples","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Stripe Connector for Apple App Store","href":"\u002Frevenue-recognition\u002Fdata-import\u002Fapple-app-store","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Stripe Connector for Google Play","href":"\u002Frevenue-recognition\u002Fdata-import\u002Fgoogle-play","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Export data from Stripe","href":"\u002Frevenue-recognition\u002Fapi","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Reconciliation","href":"\u002Freconciliation","description":"Reconcile your books","children":[{"type":"link","text":"How reconciliation works","href":"\u002Freconciliation\u002Foverview","description":"Understand how reconciliation works in Stripe","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Bank reconciliation","href":"\u002Freconciliation\u002Fbank-reconciliation","description":"Reconcile your Stripe payouts with bank statement","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Transaction reconciliation","href":"\u002Freconciliation\u002Ftransaction-reconciliation","description":"Reconcile your transaction data with Stripe transactions","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"description":"Analyze the Stripe data related to your recurring revenue business.","active":false,"hidden":false,"translated":null,"showDropdown":true,"xray":{},"expanded":false},{"type":"section","text":"Data","icon":null,"href":"\u002Fstripe-data","topic":{"text":"Finance automation","href":"\u002Ffinance-automation","translated":null},"children":[{"type":"link","text":"Overview","href":"\u002Fstripe-data","description":"Overview","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Get started","translated":null,"xray":{}},{"type":"link","text":"Search in the Dashboard","href":"\u002Fdashboard\u002Fsearch","description":"Find the information you need in the Dashboard","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Access data in your Stripe Dashboard with Sigma","href":"\u002Fstripe-data\u002Faccess-data-in-dashboard","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Access data in your data warehouse with Data Pipeline","href":"\u002Fstripe-data\u002Faccess-data-in-warehouse","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Data freshness","href":"\u002Fstripe-data\u002Favailable-data","description":"Available data and data freshness","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Import and manage data","href":"\u002Fstripe-data\u002Fimport-external-data","description":"Automatically import and map external data into Stripe","children":[{"type":"link","text":"Stripe connector for Apple App Store","href":"\u002Fstripe-data\u002Fimport-external-data\u002Fconnectors\u002Fapple-app-store","description":"Automate recurring file imports from Apple App Store to Stripe.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Stripe connector for Google Play Store","href":"\u002Fstripe-data\u002Fimport-external-data\u002Fconnectors\u002Fgoogle-play","description":"Automate recurring file imports from Google Play to Stripe.","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Transform data using Data templates","href":"\u002Fstripe-data\u002Fimport-external-data\u002Fdata-template","description":"Rules to map external data files to stripe objects","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Query data","translated":null,"xray":{}},{"type":"link","text":"Write queries","href":"\u002Fstripe-data\u002Fwrite-queries","description":"Stripe Sigma for Connect platforms","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query transactional data","href":"\u002Fstripe-data\u002Fquery-transactions","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query disputes and fraud data","href":"\u002Fstripe-data\u002Fquery-disputes-and-fraud-data","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query Billing data","href":"\u002Fstripe-data\u002Fquery-billing-data","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query Stripe fees data","href":"\u002Fstripe-data\u002Fquery-stripe-fees-data","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query Connect data","href":"\u002Fstripe-data\u002Fquery-connect-data","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query Issuing data","href":"\u002Fstripe-data\u002Fquery-issuing-data","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Query across multiple accounts","href":"\u002Fstripe-data\u002Fsigma-organizations","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Schedule queries","href":"\u002Fstripe-data\u002Fschedule-queries","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Migrate queries","href":"\u002Fstripe-data\u002Fmigrate-queries","description":null,"children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"description":"Stripe data","active":false,"hidden":false,"translated":null,"showDropdown":true,"xray":{},"expanded":false},{"type":"section","text":"Startup incorporation","icon":"atlas","href":"\u002Fatlas","topic":{"text":"Finance automation","href":"\u002Ffinance-automation","translated":null},"children":[{"type":"link","text":"Overview","href":"\u002Fatlas","description":"Stripe Atlas overview","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"How Atlas works","href":"\u002Fatlas\u002Fhow-atlas-works","description":"Learn how Stripe Atlas works","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Form your company","translated":null,"xray":{}},{"type":"link","text":"Company types","href":"\u002Fatlas\u002Fcompany-types","description":"Form a C Corporation or an LLC","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"How to start your business","href":"\u002Fatlas\u002Fsignup","description":"How to start your business","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Section 83\u0028b\u0029 elections","href":"\u002Fatlas\u002F83b-election","description":"Learn about 83\u0028b\u0029 elections","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Non-US Section 83\u0028b\u0029 elections","href":"\u002Fatlas\u002F83b-elections-non-us-founders","description":"Learn about 83\u0028b\u0029 elections for non-us founders","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"heading","text":"Post-formation resources","translated":null,"xray":{}},{"type":"link","text":"Business bank accounts","href":"\u002Fatlas\u002Fpayments-business-bank","description":"Accept payments and open a business bank account","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Business taxes","href":"\u002Fatlas\u002Fbusiness-taxes","description":"Business bank accounts","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}},{"type":"link","text":"Partner benefits","href":"\u002Fatlas\u002Fpartner-benefits","description":"Learn about the Stripe Atlas community and more","children":[],"hidden":false,"active":false,"expanded":false,"selected":false,"translated":true,"xray":{}}],"description":"Turn your idea into a startup","active":false,"hidden":false,"translated":null,"showDropdown":true,"xray":{},"expanded":false}],"open":true},"prefs":{"connect-account-creation-pattern":"typeless","architecture-style":"resources","ui":"stripe-hosted"},"analyticsId":"de238b40-ce47-47a5-8bee-1b02d3aecdbc","routeMap":{"accept_session_handoff":"\u002Fhandoff","begin_streaming_ask_summary":"\u002F_endpoint\u002Fbegin-streaming-ask-summary","get_sources_from_diorama":"\u002F_endpoint\u002Fget-sources-from-diorama","get_streaming_ask_summary_state":"\u002F_endpoint\u002Fget-streaming-ask-summary-state","record_completed_ask_summary":"\u002F_endpoint\u002Frecord-completed-ask-summary","create_account_session":"\u002F_endpoint\u002Fcreate-account-session","create_cart_session":"\u002F_endpoint\u002Fcreate-cart-session","create_checkout_session":"\u002F_endpoint\u002Fcreate-checkout-session","create_feature_and_attach_to_product":"\u002F_endpoint\u002Fcreate-feature-and-attach-to-product","create_financial_connections_session":"\u002F_endpoint\u002Fcreate-financial-connections-session","create_kyc_api_application":"\u002F_endpoint\u002Fcreate-kyc-api-application","create_payment_intent":"\u002F_endpoint\u002Fcreate-payment-intent","create_payment_link":"\u002F_endpoint\u002Fcreate-payment-link","create_product_and_price":"\u002F_endpoint\u002Fcreate-product-and-price","create_setup_intent":"\u002F_endpoint\u002Fcreate-setup-intent","email_signup":"\u002F_endpoint\u002Femail-signup","fetch_account_merchants":"\u002F_endpoint\u002Ffetch-account-merchants","generate_editor_preview":"\u002F_endpoint\u002Fgenerate-editor-preview","generate_example_snippet":"\u002F_endpoint\u002Fgenerate-example-snippet","get_all_videos":"\u002F_endpoint\u002Fget-all-videos","get_alternative_currency_settlement_fees":"\u002F_endpoint\u002Fget-alternative-currency-settlement-fees","get_api_reference_search_index":"\u002F_endpoint\u002Fget-api-reference-search-index","get_connect_payout_currencies":"\u002F_endpoint\u002Fget-connect-payout-currencies","get_entitlement_features_for_product":"\u002F_endpoint\u002Fget-entitlement-features-for-product","get_file":"\u002F_endpoint\u002Fget-file","get_financial_connections_institutions":"\u002F_endpoint\u002Fget-financial-connections-institutions","get_hcaptcha_sitekey":"\u002F_endpoint\u002Fget-hcaptcha-sitekey","get_intellisense_patterns":"\u002F_endpoint\u002Fget-intellisense-patterns","get_kyc_api_application":"\u002F_endpoint\u002Fget-kyc-api-application","get_manifest_builder_errors":"\u002F_endpoint\u002Fget-manifest-builder-errors","get_navigation":"\u002F_endpoint\u002Fget-navigation","get_non_local_payouts":"\u002F_endpoint\u002Fget-non-local-payouts","get_platform_countries":"\u002F_endpoint\u002Fget-platform-countries","get_prices":"\u002F_endpoint\u002Fget-prices","get_requirement_selections_for_platform_country":"\u002F_endpoint\u002Fget-requirement-selections-for-platform-country","get_requirements_for_selections":"\u002F_endpoint\u002Fget-requirements-for-selections","handoff_healthcheck":"\u002Fhandoff-healthcheck","load_x_ray":"\u002F_endpoint\u002Fload-x-ray","publish_commit":"\u002F_endpoint\u002Fpublish-commit","render_api_section_groups":"\u002F_endpoint\u002Frender-api-section-groups","render_saved_draft":"\u002F_endpoint\u002Frender-saved-draft","report_code_snippet":"\u002F_endpoint\u002Freport-code-snippet","save_account_settings":"\u002F_endpoint\u002Fsave-account-settings","save_prefs":"\u002F_endpoint\u002Fsave-prefs","send_ask_feedback":"\u002F_endpoint\u002Fsend-ask-feedback","send_csat_feedback":"\u002F_endpoint\u002Fsend-csat-feedback","serve_api_changelog_rss_feed":"\u002Fchangelog\u002Fapi\u002Ffeed.xml","serve_api_reference_worker_script":"\u002FfuseWorker.js","serve_apple_developer_domain_association":"\u002F.well-known\u002Fapple-developer-merchantid-domain-association","serve_favicon":"\u002Ffavicon.ico","serve_legacy_reference_fuse_worker_script":"\u002FapiRefFuseWebWorker.js","serve_sitemap":"\u002Fsitemap.xml","event_permissions":"\u002F_endpoint\u002Fevent-permissions","update_cart_session":"\u002F_endpoint\u002Fupdate-cart-session"},"sentryUrl":"https:\u002F\u002F051ef4a8994d4b57ae3ca07bd9502949@errors.stripe.com\u002F436","timestamp":"2024-06-25T20:20:31.486Z"};
          window.__CSP_NONCE__ = "YG0GsOFwEPRkvAwr0i7aGw==";
        </script>
        <script src=https://b.stripecdn.com/docs-statics-srv/assets/common.4a2dd7997398c7858d37.js></script>
<script src=https://b.stripecdn.com/docs-statics-srv/assets/sail.995ce7edda12a7ef57e7.js></script>
<script src=https://b.stripecdn.com/docs-statics-srv/assets/stripeshell.3b1927632e3e4da94675.js></script>
<script src=https://b.stripecdn.com/docs-statics-srv/assets/react.cb8806fbfce6b8db4da9.js></script>
<script src=https://b.stripecdn.com/docs-statics-srv/assets/runtime.5b5750c9b3c7e4c24b46.js></script>
<script src=https://b.stripecdn.com/docs-statics-srv/assets/docs.95eb8a863a356e673110.js></script>
<script src=https://b.stripecdn.com/docs-statics-srv/assets/frontend.b15e8f10409804367b99.js></script>
      </html>